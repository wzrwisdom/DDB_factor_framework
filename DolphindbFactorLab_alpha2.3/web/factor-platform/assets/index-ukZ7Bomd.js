var Vp=Object.defineProperty;var qp=(e,t,n)=>t in e?Vp(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n;var ho=(e,t,n)=>(qp(e,typeof t!="symbol"?t+"":t,n),n);import{j as a,u as Z,c as ki,i as ma,a as zp,D as Gp,s as Nc,b as Xr,d as Oe,e as Up,f as Hp,g as Kp,h as Zr,L as Ue,k as Ir,l as he,P as Ci,C as Yp,B as en,q as mt,F as Ts,N as ke,m as Ei,n as Ja,o as ea,p as Jp,r as Ft,M as Gt,t as Qe,O as Vt,v as Dc,w as Mc,x as Qp,y as Xp,z as Zp,T as ga,A as La,E as em,G as tm,H as am,I as Wc,J as ha,K as rm,Q as xr,R as nm,S as Bc,U as lr,V as ys,W as sm,X as Sr,Y as $c,Z as Ai,_ as Os,$ as om,a0 as Rs,a1 as ja,a2 as qo,a3 as Vc,a4 as im,a5 as qc,a6 as lm,a7 as zc,a8 as cm,a9 as um,aa as dm,ab as pm,ac as Gc,ad as Uc,ae as mm,af as kl,ag as Dn,ah as Mn,ai as go,aj as Pi,ak as Ti,al as Oi,am as fm,an as hm,ao as gm,ap as ym,aq as bm,ar as Cl,as as vm,at as _m,au as xm,av as wm,aw as jm,ax as Im,ay as Sm,az as km}from"./library-L47FtMja.js";import{g as tn,r as k,a as jt,c as Za,N as Cm,d as Ya,S as kr,t as Ga,i as Wt,O as Hc,A as at,q as it,U as Ri,B as Ae,V as Kc,W as Em,X as Fi,Y as Ma,m as kt,F as B,M as aa,Z as Yc,D as Li,$ as Ne,y as yt,T as De,a0 as la,a1 as Ua,a2 as vt,x as Qa,a3 as Ni,a4 as Fs,C as an,a5 as qa,a6 as Sn,a7 as Jc,G as Ls,I as yr,a8 as xn,a9 as Am,l as Qc,aa as Pm,j as Di,ab as Tm,ac as Xc,z as ba,ad as Om,ae as ya,af as Rm,P as Zc,ag as Fm,ah as Mi,ai as Lm,aj as Nm,ak as Dm,al as Mm,s as Wm,am as Bm,b as $m,an as Vm,ao as eu,ap as Pa,aq as qm,ar as zm,as as Wi,at as Gm,p as tu,au as Cr,av as Bi,k as Um,aw as $i,ax as Hm,ay as kn,az as Km,aA as Ym,aB as Jm,aC as au,aD as ru,aE as Vi,aF as Qm,aG as Xm,aH as Zm,aI as nu,n as su,J as ef,aJ as tf,aK as El,aL as af,aM as rf,aN as nf,aO as sf,aP as of,aQ as lf,aR as zo,aS as cf,aT as uf,aU as df,L as Al,w as pf}from"./antd-cPxH2XyA.js";import{r as mf}from"./locales-J7fUFtMy.js";import{d as ou,e as iu,i as qi,f as ff,g as hf,h as gf,B as yf,C as bf,H as vf,j as _f,L as xf,A as wf,P as jf,V as If,l as Wn,n as Sf,p as lu,r as kf,q as Cf,c as Ef,t as Bn,v as Af,w as Pf,x as Na,y as Tf,z as zi,D as Of,E as Rf,F as Ff,G as Lf,I as Nf,J as Pl,K as Tl,M as Df,R as Mf,N as Wf,O as Bf,Q as $f,S as Vf,T as qf,U as zf,W as Gf}from"./charts-gjsgW6yA.js";(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))r(o);new MutationObserver(o=>{for(const s of o)if(s.type==="childList")for(const i of s.addedNodes)i.tagName==="LINK"&&i.rel==="modulepreload"&&r(i)}).observe(document,{childList:!0,subtree:!0});function n(o){const s={};return o.integrity&&(s.integrity=o.integrity),o.referrerPolicy&&(s.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?s.credentials="include":o.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function r(o){if(o.ep)return;o.ep=!0;const s=n(o);fetch(o.href,s)}})();var Ns={},cu={exports:{}};(function(e){function t(n){return n&&n.__esModule?n:{default:n}}e.exports=t,e.exports.__esModule=!0,e.exports.default=e.exports})(cu);var rn=cu.exports,Ds={};Object.defineProperty(Ds,"__esModule",{value:!0});Ds.default=void 0;var Uf={items_per_page:"/ page",jump_to:"Go to",jump_to_confirm:"confirm",page:"Page",prev_page:"Previous Page",next_page:"Next Page",prev_5:"Previous 5 Pages",next_5:"Next 5 Pages",prev_3:"Previous 3 Pages",next_3:"Next 3 Pages",page_size:"Page Size"};Ds.default=Uf;var Ms={},$n={},Ws={};Object.defineProperty(Ws,"__esModule",{value:!0});Ws.default=void 0;var Hf={locale:"en_US",today:"Today",now:"Now",backToToday:"Back to today",ok:"OK",clear:"Clear",month:"Month",year:"Year",timeSelect:"select time",dateSelect:"select date",weekSelect:"Choose a week",monthSelect:"Choose a month",yearSelect:"Choose a year",decadeSelect:"Choose a decade",yearFormat:"YYYY",dateFormat:"M/D/YYYY",dayFormat:"D",dateTimeFormat:"M/D/YYYY HH:mm:ss",monthBeforeYear:!0,previousMonth:"Previous month (PageUp)",nextMonth:"Next month (PageDown)",previousYear:"Last year (Control + left)",nextYear:"Next year (Control + right)",previousDecade:"Last decade",nextDecade:"Next decade",previousCentury:"Last century",nextCentury:"Next century"};Ws.default=Hf;var Vn={};Object.defineProperty(Vn,"__esModule",{value:!0});Vn.default=void 0;const Kf={placeholder:"Select time",rangePlaceholder:["Start time","End time"]};Vn.default=Kf;var uu=rn.default;Object.defineProperty($n,"__esModule",{value:!0});$n.default=void 0;var Yf=uu(Ws),Jf=uu(Vn);const Qf={lang:Object.assign({placeholder:"Select date",yearPlaceholder:"Select year",quarterPlaceholder:"Select quarter",monthPlaceholder:"Select month",weekPlaceholder:"Select week",rangePlaceholder:["Start date","End date"],rangeYearPlaceholder:["Start year","End year"],rangeQuarterPlaceholder:["Start quarter","End quarter"],rangeMonthPlaceholder:["Start month","End month"],rangeWeekPlaceholder:["Start week","End week"]},Yf.default),timePickerLocale:Object.assign({},Jf.default)};$n.default=Qf;var Xf=rn.default;Object.defineProperty(Ms,"__esModule",{value:!0});Ms.default=void 0;var Zf=Xf($n);Ms.default=Zf.default;var Bs=rn.default;Object.defineProperty(Ns,"__esModule",{value:!0});Ns.default=void 0;var eh=Bs(Ds),th=Bs(Ms),ah=Bs($n),rh=Bs(Vn);const Sa="${label} is not a valid ${type}",nh={locale:"en",Pagination:eh.default,DatePicker:ah.default,TimePicker:rh.default,Calendar:th.default,global:{placeholder:"Please select"},Table:{filterTitle:"Filter menu",filterConfirm:"OK",filterReset:"Reset",filterEmptyText:"No filters",filterCheckall:"Select all items",filterSearchPlaceholder:"Search in filters",emptyText:"No data",selectAll:"Select current page",selectInvert:"Invert current page",selectNone:"Clear all data",selectionAll:"Select all data",sortTitle:"Sort",expand:"Expand row",collapse:"Collapse row",triggerDesc:"Click to sort descending",triggerAsc:"Click to sort ascending",cancelSort:"Click to cancel sorting"},Tour:{Next:"Next",Previous:"Previous",Finish:"Finish"},Modal:{okText:"OK",cancelText:"Cancel",justOkText:"OK"},Popconfirm:{okText:"OK",cancelText:"Cancel"},Transfer:{titles:["",""],searchPlaceholder:"Search here",itemUnit:"item",itemsUnit:"items",remove:"Remove",selectCurrent:"Select current page",removeCurrent:"Remove current page",selectAll:"Select all data",removeAll:"Remove all data",selectInvert:"Invert current page"},Upload:{uploading:"Uploading...",removeFile:"Remove file",uploadError:"Upload error",previewFile:"Preview file",downloadFile:"Download file"},Empty:{description:"No data"},Icon:{icon:"icon"},Text:{edit:"Edit",copy:"Copy",copied:"Copied",expand:"Expand"},PageHeader:{back:"Back"},Form:{optional:"(optional)",defaultValidateMessages:{default:"Field validation error for ${label}",required:"Please enter ${label}",enum:"${label} must be one of [${enum}]",whitespace:"${label} cannot be a blank character",date:{format:"${label} date format is invalid",parse:"${label} cannot be converted to a date",invalid:"${label} is an invalid date"},types:{string:Sa,method:Sa,array:Sa,object:Sa,number:Sa,date:Sa,boolean:Sa,integer:Sa,float:Sa,regexp:Sa,email:Sa,url:Sa,hex:Sa},string:{len:"${label} must be ${len} characters",min:"${label} must be at least ${min} characters",max:"${label} must be up to ${max} characters",range:"${label} must be between ${min}-${max} characters"},number:{len:"${label} must be equal to ${len}",min:"${label} must be minimum ${min}",max:"${label} must be maximum ${max}",range:"${label} must be between ${min}-${max}"},array:{len:"Must be ${len} ${label}",min:"At least ${min} ${label}",max:"At most ${max} ${label}",range:"The amount of ${label} must be between ${min}-${max}"},pattern:{mismatch:"${label} does not match the pattern ${pattern}"}}},Image:{preview:"Preview"},QRCode:{expired:"QR code expired",refresh:"Refresh"},ColorPicker:{presetEmpty:"Empty"}};Ns.default=nh;var sh=Ns;const oh=tn(sh);var $s={},Vs={};Object.defineProperty(Vs,"__esModule",{value:!0});Vs.default=void 0;var ih={items_per_page:"条/页",jump_to:"跳至",jump_to_confirm:"确定",page:"页",prev_page:"上一页",next_page:"下一页",prev_5:"向前 5 页",next_5:"向后 5 页",prev_3:"向前 3 页",next_3:"向后 3 页",page_size:"页码"};Vs.default=ih;var qs={},qn={},zs={};Object.defineProperty(zs,"__esModule",{value:!0});zs.default=void 0;var lh={locale:"zh_CN",today:"今天",now:"此刻",backToToday:"返回今天",ok:"确定",timeSelect:"选择时间",dateSelect:"选择日期",weekSelect:"选择周",clear:"清除",month:"月",year:"年",previousMonth:"上个月 (翻页上键)",nextMonth:"下个月 (翻页下键)",monthSelect:"选择月份",yearSelect:"选择年份",decadeSelect:"选择年代",yearFormat:"YYYY年",dayFormat:"D日",dateFormat:"YYYY年M月D日",dateTimeFormat:"YYYY年M月D日 HH时mm分ss秒",previousYear:"上一年 (Control键加左方向键)",nextYear:"下一年 (Control键加右方向键)",previousDecade:"上一年代",nextDecade:"下一年代",previousCentury:"上一世纪",nextCentury:"下一世纪"};zs.default=lh;var zn={};Object.defineProperty(zn,"__esModule",{value:!0});zn.default=void 0;const ch={placeholder:"请选择时间",rangePlaceholder:["开始时间","结束时间"]};zn.default=ch;var du=rn.default;Object.defineProperty(qn,"__esModule",{value:!0});qn.default=void 0;var uh=du(zs),dh=du(zn);const pu={lang:Object.assign({placeholder:"请选择日期",yearPlaceholder:"请选择年份",quarterPlaceholder:"请选择季度",monthPlaceholder:"请选择月份",weekPlaceholder:"请选择周",rangePlaceholder:["开始日期","结束日期"],rangeYearPlaceholder:["开始年份","结束年份"],rangeMonthPlaceholder:["开始月份","结束月份"],rangeQuarterPlaceholder:["开始季度","结束季度"],rangeWeekPlaceholder:["开始周","结束周"]},uh.default),timePickerLocale:Object.assign({},dh.default)};pu.lang.ok="确定";qn.default=pu;var ph=rn.default;Object.defineProperty(qs,"__esModule",{value:!0});qs.default=void 0;var mh=ph(qn);qs.default=mh.default;var Gs=rn.default;Object.defineProperty($s,"__esModule",{value:!0});$s.default=void 0;var fh=Gs(Vs),hh=Gs(qs),gh=Gs(qn),yh=Gs(zn);const ka="${label}不是一个有效的${type}",bh={locale:"zh-cn",Pagination:fh.default,DatePicker:gh.default,TimePicker:yh.default,Calendar:hh.default,global:{placeholder:"请选择"},Table:{filterTitle:"筛选",filterConfirm:"确定",filterReset:"重置",filterEmptyText:"无筛选项",filterCheckall:"全选",filterSearchPlaceholder:"在筛选项中搜索",selectAll:"全选当页",selectInvert:"反选当页",selectNone:"清空所有",selectionAll:"全选所有",sortTitle:"排序",expand:"展开行",collapse:"关闭行",triggerDesc:"点击降序",triggerAsc:"点击升序",cancelSort:"取消排序"},Modal:{okText:"确定",cancelText:"取消",justOkText:"知道了"},Tour:{Next:"下一步",Previous:"上一步",Finish:"结束导览"},Popconfirm:{cancelText:"取消",okText:"确定"},Transfer:{titles:["",""],searchPlaceholder:"请输入搜索内容",itemUnit:"项",itemsUnit:"项",remove:"删除",selectCurrent:"全选当页",removeCurrent:"删除当页",selectAll:"全选所有",removeAll:"删除全部",selectInvert:"反选当页"},Upload:{uploading:"文件上传中",removeFile:"删除文件",uploadError:"上传错误",previewFile:"预览文件",downloadFile:"下载文件"},Empty:{description:"暂无数据"},Icon:{icon:"图标"},Text:{edit:"编辑",copy:"复制",copied:"复制成功",expand:"展开"},PageHeader:{back:"返回"},Form:{optional:"（可选）",defaultValidateMessages:{default:"字段验证错误${label}",required:"请输入${label}",enum:"${label}必须是其中一个[${enum}]",whitespace:"${label}不能为空字符",date:{format:"${label}日期格式无效",parse:"${label}不能转换为日期",invalid:"${label}是一个无效日期"},types:{string:ka,method:ka,array:ka,object:ka,number:ka,date:ka,boolean:ka,integer:ka,float:ka,regexp:ka,email:ka,url:ka,hex:ka},string:{len:"${label}须为${len}个字符",min:"${label}最少${min}个字符",max:"${label}最多${max}个字符",range:"${label}须在${min}-${max}字符之间"},number:{len:"${label}必须等于${len}",min:"${label}最小值为${min}",max:"${label}最大值为${max}",range:"${label}须在${min}-${max}之间"},array:{len:"须为${len}个${label}",min:"最少${min}个${label}",max:"最多${max}个${label}",range:"${label}数量须在${min}-${max}之间"},pattern:{mismatch:"${label}与模式不匹配${pattern}"}}},Image:{preview:"预览"},QRCode:{expired:"二维码过期",refresh:"点击刷新"},ColorPicker:{presetEmpty:"暂无"}};$s.default=bh;var vh=$s;const _h=tn(vh);function xh(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Ol(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(o){return Object.getOwnPropertyDescriptor(e,o).enumerable})),n.push.apply(n,r)}return n}function Rl(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?Ol(Object(n),!0).forEach(function(r){xh(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Ol(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function wh(e,t){if(e==null)return{};var n={},r=Object.keys(e),o,s;for(s=0;s<r.length;s++)o=r[s],!(t.indexOf(o)>=0)&&(n[o]=e[o]);return n}function jh(e,t){if(e==null)return{};var n=wh(e,t),r,o;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(o=0;o<s.length;o++)r=s[o],!(t.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(e,r)&&(n[r]=e[r])}return n}function Ih(e,t){return Sh(e)||kh(e,t)||Ch(e,t)||Eh()}function Sh(e){if(Array.isArray(e))return e}function kh(e,t){if(!(typeof Symbol>"u"||!(Symbol.iterator in Object(e)))){var n=[],r=!0,o=!1,s=void 0;try{for(var i=e[Symbol.iterator](),u;!(r=(u=i.next()).done)&&(n.push(u.value),!(t&&n.length===t));r=!0);}catch(c){o=!0,s=c}finally{try{!r&&i.return!=null&&i.return()}finally{if(o)throw s}}return n}}function Ch(e,t){if(e){if(typeof e=="string")return Fl(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return Array.from(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Fl(e,t)}}function Fl(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function Eh(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Ah(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Ll(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(o){return Object.getOwnPropertyDescriptor(e,o).enumerable})),n.push.apply(n,r)}return n}function Nl(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?Ll(Object(n),!0).forEach(function(r){Ah(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Ll(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function Ph(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return function(r){return t.reduceRight(function(o,s){return s(o)},r)}}function wn(e){return function t(){for(var n=this,r=arguments.length,o=new Array(r),s=0;s<r;s++)o[s]=arguments[s];return o.length>=e.length?e.apply(this,o):function(){for(var i=arguments.length,u=new Array(i),c=0;c<i;c++)u[c]=arguments[c];return t.apply(n,[].concat(o,u))}}}function bs(e){return{}.toString.call(e).includes("Object")}function Th(e){return!Object.keys(e).length}function Cn(e){return typeof e=="function"}function Oh(e,t){return Object.prototype.hasOwnProperty.call(e,t)}function Rh(e,t){return bs(t)||pr("changeType"),Object.keys(t).some(function(n){return!Oh(e,n)})&&pr("changeField"),t}function Fh(e){Cn(e)||pr("selectorType")}function Lh(e){Cn(e)||bs(e)||pr("handlerType"),bs(e)&&Object.values(e).some(function(t){return!Cn(t)})&&pr("handlersType")}function Nh(e){e||pr("initialIsRequired"),bs(e)||pr("initialType"),Th(e)&&pr("initialContent")}function Dh(e,t){throw new Error(e[t]||e.default)}var Mh={initialIsRequired:"initial state is required",initialType:"initial state should be an object",initialContent:"initial state shouldn't be an empty object",handlerType:"handler should be an object or a function",handlersType:"all handlers should be a functions",selectorType:"selector should be a function",changeType:"provided value of changes should be an object",changeField:'it seams you want to change a field in the state which is not specified in the "initial" state',default:"an unknown error accured in `state-local` package"},pr=wn(Dh)(Mh),Jn={changes:Rh,selector:Fh,handler:Lh,initial:Nh};function Wh(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};Jn.initial(e),Jn.handler(t);var n={current:e},r=wn(Vh)(n,t),o=wn($h)(n),s=wn(Jn.changes)(e),i=wn(Bh)(n);function u(){var l=arguments.length>0&&arguments[0]!==void 0?arguments[0]:function(p){return p};return Jn.selector(l),l(n.current)}function c(l){Ph(r,o,s,i)(l)}return[u,c]}function Bh(e,t){return Cn(t)?t(e.current):t}function $h(e,t){return e.current=Nl(Nl({},e.current),t),t}function Vh(e,t,n){return Cn(t)?t(e.current):Object.keys(n).forEach(function(r){var o;return(o=t[r])===null||o===void 0?void 0:o.call(t,e.current[r])}),n}var qh={create:Wh},zh={paths:{vs:"https://cdn.jsdelivr.net/npm/monaco-editor@0.43.0/min/vs"}};function Gh(e){return function t(){for(var n=this,r=arguments.length,o=new Array(r),s=0;s<r;s++)o[s]=arguments[s];return o.length>=e.length?e.apply(this,o):function(){for(var i=arguments.length,u=new Array(i),c=0;c<i;c++)u[c]=arguments[c];return t.apply(n,[].concat(o,u))}}}function Uh(e){return{}.toString.call(e).includes("Object")}function Hh(e){return e||Dl("configIsRequired"),Uh(e)||Dl("configType"),e.urls?(Kh(),{paths:{vs:e.urls.monacoBase}}):e}function Kh(){console.warn(mu.deprecation)}function Yh(e,t){throw new Error(e[t]||e.default)}var mu={configIsRequired:"the configuration object is required",configType:"the configuration object should be an object",default:"an unknown error accured in `@monaco-editor/loader` package",deprecation:`Deprecation warning!
    You are using deprecated way of configuration.

    Instead of using
      monaco.config({ urls: { monacoBase: '...' } })
    use
      monaco.config({ paths: { vs: '...' } })

    For more please check the link https://github.com/suren-atoyan/monaco-loader#config
  `},Dl=Gh(Yh)(mu),Jh={config:Hh},Qh=function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return function(o){return n.reduceRight(function(s,i){return i(s)},o)}};function fu(e,t){return Object.keys(t).forEach(function(n){t[n]instanceof Object&&e[n]&&Object.assign(t[n],fu(e[n],t[n]))}),Rl(Rl({},e),t)}var Xh={type:"cancelation",msg:"operation is manually canceled"};function yo(e){var t=!1,n=new Promise(function(r,o){e.then(function(s){return t?o(Xh):r(s)}),e.catch(o)});return n.cancel=function(){return t=!0},n}var Zh=qh.create({config:zh,isInitialized:!1,resolve:null,reject:null,monaco:null}),hu=Ih(Zh,2),Gn=hu[0],Us=hu[1];function eg(e){var t=Jh.config(e),n=t.monaco,r=jh(t,["monaco"]);Us(function(o){return{config:fu(o.config,r),monaco:n}})}function tg(){var e=Gn(function(t){var n=t.monaco,r=t.isInitialized,o=t.resolve;return{monaco:n,isInitialized:r,resolve:o}});if(!e.isInitialized){if(Us({isInitialized:!0}),e.monaco)return e.resolve(e.monaco),yo(bo);if(window.monaco&&window.monaco.editor)return gu(window.monaco),e.resolve(window.monaco),yo(bo);Qh(ag,ng)(sg)}return yo(bo)}function ag(e){return document.body.appendChild(e)}function rg(e){var t=document.createElement("script");return e&&(t.src=e),t}function ng(e){var t=Gn(function(r){var o=r.config,s=r.reject;return{config:o,reject:s}}),n=rg("".concat(t.config.paths.vs,"/loader.js"));return n.onload=function(){return e()},n.onerror=t.reject,n}function sg(){var e=Gn(function(n){var r=n.config,o=n.resolve,s=n.reject;return{config:r,resolve:o,reject:s}}),t=window.require;t.config(e.config),t(["vs/editor/editor.main"],function(n){gu(n),e.resolve(n)},function(n){e.reject(n)})}function gu(e){Gn().monaco||Us({monaco:e})}function og(){return Gn(function(e){var t=e.monaco;return t})}var bo=new Promise(function(e,t){return Us({resolve:e,reject:t})}),Hr={config:eg,init:tg,__getMonacoInstance:og},ig={wrapper:{display:"flex",position:"relative",textAlign:"initial"},fullWidth:{width:"100%"},hide:{display:"none"}},vo=ig,lg={container:{display:"flex",height:"100%",width:"100%",justifyContent:"center",alignItems:"center"}},cg=lg;function ug({children:e}){return jt.createElement("div",{style:cg.container},e)}var dg=ug,pg=dg;function mg({width:e,height:t,isEditorReady:n,loading:r,_ref:o,className:s,wrapperProps:i}){return jt.createElement("section",{style:{...vo.wrapper,width:e,height:t},...i},!n&&jt.createElement(pg,null,r),jt.createElement("div",{ref:o,style:{...vo.fullWidth,...!n&&vo.hide},className:s}))}var fg=mg,yu=k.memo(fg);function hg(e){k.useEffect(e,[])}var Gi=hg;function gg(e,t,n=!0){let r=k.useRef(!0);k.useEffect(r.current||!n?()=>{r.current=!1}:e,t)}var Ca=gg;function In(){}function Vr(e,t,n,r){return yg(e,r)||bg(e,t,n,r)}function yg(e,t){return e.editor.getModel(bu(e,t))}function bg(e,t,n,r){return e.editor.createModel(t,n,r?bu(e,r):void 0)}function bu(e,t){return e.Uri.parse(t)}function vg({original:e,modified:t,language:n,originalLanguage:r,modifiedLanguage:o,originalModelPath:s,modifiedModelPath:i,keepCurrentOriginalModel:u=!1,keepCurrentModifiedModel:c=!1,theme:l="light",loading:p="Loading...",options:d={},height:m="100%",width:h="100%",className:b,wrapperProps:y={},beforeMount:x=In,onMount:I=In}){let[w,A]=k.useState(!1),[f,j]=k.useState(!0),C=k.useRef(null),g=k.useRef(null),E=k.useRef(null),v=k.useRef(I),_=k.useRef(x),S=k.useRef(!1);Gi(()=>{let V=Hr.init();return V.then(W=>(g.current=W)&&j(!1)).catch(W=>(W==null?void 0:W.type)!=="cancelation"&&console.error("Monaco initialization: error:",W)),()=>C.current?z():V.cancel()}),Ca(()=>{if(C.current&&g.current){let V=C.current.getOriginalEditor(),W=Vr(g.current,e||"",r||n||"text",s||"");W!==V.getModel()&&V.setModel(W)}},[s],w),Ca(()=>{if(C.current&&g.current){let V=C.current.getModifiedEditor(),W=Vr(g.current,t||"",o||n||"text",i||"");W!==V.getModel()&&V.setModel(W)}},[i],w),Ca(()=>{let V=C.current.getModifiedEditor();V.getOption(g.current.editor.EditorOption.readOnly)?V.setValue(t||""):t!==V.getValue()&&(V.executeEdits("",[{range:V.getModel().getFullModelRange(),text:t||"",forceMoveMarkers:!0}]),V.pushUndoStop())},[t],w),Ca(()=>{var V,W;(W=(V=C.current)==null?void 0:V.getModel())==null||W.original.setValue(e||"")},[e],w),Ca(()=>{let{original:V,modified:W}=C.current.getModel();g.current.editor.setModelLanguage(V,r||n||"text"),g.current.editor.setModelLanguage(W,o||n||"text")},[n,r,o],w),Ca(()=>{var V;(V=g.current)==null||V.editor.setTheme(l)},[l],w),Ca(()=>{var V;(V=C.current)==null||V.updateOptions(d)},[d],w);let P=k.useCallback(()=>{var ae;if(!g.current)return;_.current(g.current);let V=Vr(g.current,e||"",r||n||"text",s||""),W=Vr(g.current,t||"",o||n||"text",i||"");(ae=C.current)==null||ae.setModel({original:V,modified:W})},[n,t,o,e,r,s,i]),T=k.useCallback(()=>{var V;!S.current&&E.current&&(C.current=g.current.editor.createDiffEditor(E.current,{automaticLayout:!0,...d}),P(),(V=g.current)==null||V.editor.setTheme(l),A(!0),S.current=!0)},[d,l,P]);k.useEffect(()=>{w&&v.current(C.current,g.current)},[w]),k.useEffect(()=>{!f&&!w&&T()},[f,w,T]);function z(){var W,ae,Ce,we;let V=(W=C.current)==null?void 0:W.getModel();u||((ae=V==null?void 0:V.original)==null||ae.dispose()),c||((Ce=V==null?void 0:V.modified)==null||Ce.dispose()),(we=C.current)==null||we.dispose()}return jt.createElement(yu,{width:h,height:m,isEditorReady:w,loading:p,_ref:E,className:b,wrapperProps:y})}var _g=vg,xg=k.memo(_g);function wg(){let[e,t]=k.useState(Hr.__getMonacoInstance());return Gi(()=>{let n;return e||(n=Hr.init(),n.then(r=>{t(r)})),()=>n==null?void 0:n.cancel()}),e}var jg=wg;function Ig(e){let t=k.useRef();return k.useEffect(()=>{t.current=e},[e]),t.current}var Sg=Ig,Qn=new Map;function kg({defaultValue:e,defaultLanguage:t,defaultPath:n,value:r,language:o,path:s,theme:i="light",line:u,loading:c="Loading...",options:l={},overrideServices:p={},saveViewState:d=!0,keepCurrentModel:m=!1,width:h="100%",height:b="100%",className:y,wrapperProps:x={},beforeMount:I=In,onMount:w=In,onChange:A,onValidate:f=In}){let[j,C]=k.useState(!1),[g,E]=k.useState(!0),v=k.useRef(null),_=k.useRef(null),S=k.useRef(null),P=k.useRef(w),T=k.useRef(I),z=k.useRef(),V=k.useRef(r),W=Sg(s),ae=k.useRef(!1),Ce=k.useRef(!1);Gi(()=>{let de=Hr.init();return de.then(be=>(v.current=be)&&E(!1)).catch(be=>(be==null?void 0:be.type)!=="cancelation"&&console.error("Monaco initialization: error:",be)),()=>_.current?ue():de.cancel()}),Ca(()=>{var be,Ie,Pe,Re;let de=Vr(v.current,e||r||"",t||o||"",s||n||"");de!==((be=_.current)==null?void 0:be.getModel())&&(d&&Qn.set(W,(Ie=_.current)==null?void 0:Ie.saveViewState()),(Pe=_.current)==null||Pe.setModel(de),d&&((Re=_.current)==null||Re.restoreViewState(Qn.get(s))))},[s],j),Ca(()=>{var de;(de=_.current)==null||de.updateOptions(l)},[l],j),Ca(()=>{!_.current||r===void 0||(_.current.getOption(v.current.editor.EditorOption.readOnly)?_.current.setValue(r):r!==_.current.getValue()&&(Ce.current=!0,_.current.executeEdits("",[{range:_.current.getModel().getFullModelRange(),text:r,forceMoveMarkers:!0}]),_.current.pushUndoStop(),Ce.current=!1))},[r],j),Ca(()=>{var be,Ie;let de=(be=_.current)==null?void 0:be.getModel();de&&o&&((Ie=v.current)==null||Ie.editor.setModelLanguage(de,o))},[o],j),Ca(()=>{var de;u!==void 0&&((de=_.current)==null||de.revealLine(u))},[u],j),Ca(()=>{var de;(de=v.current)==null||de.editor.setTheme(i)},[i],j);let we=k.useCallback(()=>{var de;if(!(!S.current||!v.current)&&!ae.current){T.current(v.current);let be=s||n,Ie=Vr(v.current,r||e||"",t||o||"",be||"");_.current=(de=v.current)==null?void 0:de.editor.create(S.current,{model:Ie,automaticLayout:!0,...l},p),d&&_.current.restoreViewState(Qn.get(be)),v.current.editor.setTheme(i),u!==void 0&&_.current.revealLine(u),C(!0),ae.current=!0}},[e,t,n,r,o,s,l,p,d,i,u]);k.useEffect(()=>{j&&P.current(_.current,v.current)},[j]),k.useEffect(()=>{!g&&!j&&we()},[g,j,we]),V.current=r,k.useEffect(()=>{var de,be;j&&A&&((de=z.current)==null||de.dispose(),z.current=(be=_.current)==null?void 0:be.onDidChangeModelContent(Ie=>{Ce.current||A(_.current.getValue(),Ie)}))},[j,A]),k.useEffect(()=>{if(j){let de=v.current.editor.onDidChangeMarkers(be=>{var Pe;let Ie=(Pe=_.current.getModel())==null?void 0:Pe.uri;if(Ie&&be.find(Re=>Re.path===Ie.path)){let Re=v.current.editor.getModelMarkers({resource:Ie});f==null||f(Re)}});return()=>{de==null||de.dispose()}}return()=>{}},[j,f]);function ue(){var de,be;(de=z.current)==null||de.dispose(),m?d&&Qn.set(s,_.current.saveViewState()):(be=_.current.getModel())==null||be.dispose(),_.current.dispose()}return jt.createElement(yu,{width:h,height:b,isEditorReady:j,loading:c,_ref:S,className:y,wrapperProps:x})}var Cg=kg,vu=k.memo(Cg);const _u={minimap:{enabled:!1},fontFamily:"MyFont, Menlo, 'Ubuntu Mono', Consolas, 'Dejavu Sans Mono', 'Noto Sans Mono', PingFangSC, 'Microsoft YaHei', monospace",insertSpaces:!0,codeLensFontFamily:"MyFont, Menlo, 'Ubuntu Mono', Consolas, 'Dejavu Sans Mono', 'Noto Sans Mono', PingFangSC, 'Microsoft YaHei', monospace",folding:!0,largeFileOptimizations:!0,matchBrackets:"always",smoothScrolling:!1,suggest:{insertMode:"replace",snippetsPreventQuickSuggestions:!1},wordBasedSuggestions:!0,mouseWheelZoom:!0,guides:{indentation:!1,bracketPairs:!1,highlightActiveIndentation:!1},detectIndentation:!0,tabSize:4,codeLens:!0,roundedSelection:!1,wordWrap:"on",scrollBeyondLastLine:!1,scrollbar:{vertical:"visible"},find:{loop:!0,seedSearchStringFromSelection:"selection"},acceptSuggestionOnCommitCharacter:!1,mouseWheelScrollSensitivity:2,dragAndDrop:!1,renderControlCharacters:!0,lineNumbers:"on",showFoldingControls:"mouseover",foldingStrategy:"indentation",accessibilitySupport:"off",autoIndent:"advanced",snippetSuggestions:"none",renderLineHighlight:"none",trimAutoWhitespace:!1,hideCursorInOverviewRuler:!0,renderWhitespace:"none",overviewRulerBorder:!0,gotoLocation:{multipleDeclarations:"peek",multipleTypeDefinitions:"peek",multipleDefinitions:"peek"},foldingHighlight:!1,unfoldOnClickAfterEndOfLine:!0,inlayHints:{enabled:"off"},acceptSuggestionOnEnter:"off",quickSuggestions:{other:!0,comments:!0,strings:!0}},Eg=()=>{const e=k.useRef(!1);return k.useEffect(()=>()=>{e.current=!0},[]),e},Ag=Eg;var xu={exports:{}};(function(e,t){var n={};(function(r,o){e.exports=o()})(Za,function(){return(()=>{var r={350:(s,i)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.UseOnigurumaFindOptions=i.DebugFlags=void 0,i.DebugFlags={InDebugMode:typeof process<"u"&&!!n.VSCODE_TEXTMATE_DEBUG},i.UseOnigurumaFindOptions=!1},442:(s,i,u)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.applyStateStackDiff=i.diffStateStacksRefEq=void 0;const c=u(391);i.diffStateStacksRefEq=function(l,p){let d=0;const m=[];let h=l,b=p;for(;h!==b;)h&&(!b||h.depth>=b.depth)?(d++,h=h.parent):(m.push(b.toStateStackFrame()),b=b.parent);return{pops:d,newFrames:m.reverse()}},i.applyStateStackDiff=function(l,p){let d=l;for(let m=0;m<p.pops;m++)d=d.parent;for(const m of p.newFrames)d=c.StateStackImpl.pushFrame(d,m);return d}},36:(s,i)=>{var u;Object.defineProperty(i,"__esModule",{value:!0}),i.toOptionalTokenType=i.EncodedTokenAttributes=void 0,(u=i.EncodedTokenAttributes||(i.EncodedTokenAttributes={})).toBinaryStr=function(c){let l=c.toString(2);for(;l.length<32;)l="0"+l;return l},u.print=function(c){const l=u.getLanguageId(c),p=u.getTokenType(c),d=u.getFontStyle(c),m=u.getForeground(c),h=u.getBackground(c);console.log({languageId:l,tokenType:p,fontStyle:d,foreground:m,background:h})},u.getLanguageId=function(c){return(255&c)>>>0},u.getTokenType=function(c){return(768&c)>>>8},u.containsBalancedBrackets=function(c){return(1024&c)!=0},u.getFontStyle=function(c){return(30720&c)>>>11},u.getForeground=function(c){return(16744448&c)>>>15},u.getBackground=function(c){return(4278190080&c)>>>24},u.set=function(c,l,p,d,m,h,b){let y=u.getLanguageId(c),x=u.getTokenType(c),I=u.containsBalancedBrackets(c)?1:0,w=u.getFontStyle(c),A=u.getForeground(c),f=u.getBackground(c);return l!==0&&(y=l),p!==8&&(x=p),d!==null&&(I=d?1:0),m!==-1&&(w=m),h!==0&&(A=h),b!==0&&(f=b),(y<<0|x<<8|I<<10|w<<11|A<<15|f<<24)>>>0},i.toOptionalTokenType=function(c){return c}},996:(s,i,u)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.BasicScopeAttributesProvider=i.BasicScopeAttributes=void 0;const c=u(878);class l{constructor(h,b){this.languageId=h,this.tokenType=b}}i.BasicScopeAttributes=l;class p{constructor(h,b){this._getBasicScopeAttributes=new c.CachedFn(y=>{const x=this._scopeToLanguage(y),I=this._toStandardTokenType(y);return new l(x,I)}),this._defaultAttributes=new l(h,8),this._embeddedLanguagesMatcher=new d(Object.entries(b||{}))}getDefaultAttributes(){return this._defaultAttributes}getBasicScopeAttributes(h){return h===null?p._NULL_SCOPE_METADATA:this._getBasicScopeAttributes.get(h)}_scopeToLanguage(h){return this._embeddedLanguagesMatcher.match(h)||0}_toStandardTokenType(h){const b=h.match(p.STANDARD_TOKEN_TYPE_REGEXP);if(!b)return 8;switch(b[1]){case"comment":return 1;case"string":return 2;case"regex":return 3;case"meta.embedded":return 0}throw new Error("Unexpected match for standard token type!")}}i.BasicScopeAttributesProvider=p,p._NULL_SCOPE_METADATA=new l(0,0),p.STANDARD_TOKEN_TYPE_REGEXP=/\b(comment|string|regex|meta\.embedded)\b/;class d{constructor(h){if(h.length===0)this.values=null,this.scopesRegExp=null;else{this.values=new Map(h);const b=h.map(([y,x])=>c.escapeRegExpCharacters(y));b.sort(),b.reverse(),this.scopesRegExp=new RegExp(`^((${b.join(")|(")}))($|\\.)`,"")}}match(h){if(!this.scopesRegExp)return;const b=h.match(this.scopesRegExp);return b?this.values.get(b[1]):void 0}}},947:(s,i,u)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.LineTokens=i.BalancedBracketSelectors=i.StateStackImpl=i.AttributedScopeStack=i.Grammar=i.createGrammar=void 0;const c=u(350),l=u(36),p=u(736),d=u(44),m=u(792),h=u(583),b=u(878),y=u(996),x=u(47);function I(v,_,S,P,T){const z=p.createMatchers(_,w),V=m.RuleFactory.getCompiledRuleId(S,P,T.repository);for(const W of z)v.push({debugSelector:_,matcher:W.matcher,ruleId:V,grammar:T,priority:W.priority})}function w(v,_){if(_.length<v.length)return!1;let S=0;return v.every(P=>{for(let T=S;T<_.length;T++)if(A(_[T],P))return S=T+1,!0;return!1})}function A(v,_){if(!v)return!1;if(v===_)return!0;const S=_.length;return v.length>S&&v.substr(0,S)===_&&v[S]==="."}i.createGrammar=function(v,_,S,P,T,z,V,W){return new f(v,_,S,P,T,z,V,W)};class f{constructor(_,S,P,T,z,V,W,ae){if(this._rootScopeName=_,this.balancedBracketSelectors=V,this._onigLib=ae,this._basicScopeAttributesProvider=new y.BasicScopeAttributesProvider(P,T),this._rootId=-1,this._lastRuleId=0,this._ruleId2desc=[null],this._includedGrammars={},this._grammarRepository=W,this._grammar=j(S,null),this._injections=null,this._tokenTypeMatchers=[],z)for(const Ce of Object.keys(z)){const we=p.createMatchers(Ce,w);for(const ue of we)this._tokenTypeMatchers.push({matcher:ue.matcher,type:z[Ce]})}}get themeProvider(){return this._grammarRepository}dispose(){for(const _ of this._ruleId2desc)_&&_.dispose()}createOnigScanner(_){return this._onigLib.createOnigScanner(_)}createOnigString(_){return this._onigLib.createOnigString(_)}getMetadataForScope(_){return this._basicScopeAttributesProvider.getBasicScopeAttributes(_)}_collectInjections(){const _=[],S=this._rootScopeName,P=(T=>T===this._rootScopeName?this._grammar:this.getExternalGrammar(T))(S);if(P){const T=P.injections;if(T)for(let V in T)I(_,V,T[V],this,P);const z=this._grammarRepository.injections(S);z&&z.forEach(V=>{const W=this.getExternalGrammar(V);if(W){const ae=W.injectionSelector;ae&&I(_,ae,W,this,W)}})}return _.sort((T,z)=>T.priority-z.priority),_}getInjections(){if(this._injections===null&&(this._injections=this._collectInjections(),c.DebugFlags.InDebugMode&&this._injections.length>0)){console.log(`Grammar ${this._rootScopeName} contains the following injections:`);for(const _ of this._injections)console.log(`  - ${_.debugSelector}`)}return this._injections}registerRule(_){const S=++this._lastRuleId,P=_(m.ruleIdFromNumber(S));return this._ruleId2desc[S]=P,P}getRule(_){return this._ruleId2desc[m.ruleIdToNumber(_)]}getExternalGrammar(_,S){if(this._includedGrammars[_])return this._includedGrammars[_];if(this._grammarRepository){const P=this._grammarRepository.lookup(_);if(P)return this._includedGrammars[_]=j(P,S&&S.$base),this._includedGrammars[_]}}tokenizeLine(_,S,P=0){const T=this._tokenize(_,S,!1,P);return{tokens:T.lineTokens.getResult(T.ruleStack,T.lineLength),ruleStack:T.ruleStack,stoppedEarly:T.stoppedEarly}}tokenizeLine2(_,S,P=0){const T=this._tokenize(_,S,!0,P);return{tokens:T.lineTokens.getBinaryResult(T.ruleStack,T.lineLength),ruleStack:T.ruleStack,stoppedEarly:T.stoppedEarly}}_tokenize(_,S,P,T){let z;if(this._rootId===-1&&(this._rootId=m.RuleFactory.getCompiledRuleId(this._grammar.repository.$self,this,this._grammar.repository),this.getInjections()),S&&S!==g.NULL)z=!1,S.reset();else{z=!0;const we=this._basicScopeAttributesProvider.getDefaultAttributes(),ue=this.themeProvider.getDefaults(),de=l.EncodedTokenAttributes.set(0,we.languageId,we.tokenType,null,ue.fontStyle,ue.foregroundId,ue.backgroundId),be=this.getRule(this._rootId).getName(null,null);let Ie;Ie=be?C.createRootAndLookUpScopeName(be,de,this):C.createRoot("unknown",de),S=new g(null,this._rootId,-1,-1,!1,null,Ie,Ie)}_+=`
`;const V=this.createOnigString(_),W=V.content.length,ae=new E(P,_,this._tokenTypeMatchers,this.balancedBracketSelectors),Ce=x._tokenizeString(this,V,z,0,S,ae,!0,T);return d.disposeOnigString(V),{lineLength:W,lineTokens:ae,ruleStack:Ce.stack,stoppedEarly:Ce.stoppedEarly}}}function j(v,_){return(v=b.clone(v)).repository=v.repository||{},v.repository.$self={$vscodeTextmateLocation:v.$vscodeTextmateLocation,patterns:v.patterns,name:v.scopeName},v.repository.$base=_||v.repository.$self,v}i.Grammar=f;class C{constructor(_,S,P){this.parent=_,this.scopePath=S,this.tokenAttributes=P}static fromExtension(_,S){let P=_,T=(_==null?void 0:_.scopePath)??null;for(const z of S)T=h.ScopeStack.push(T,z.scopeNames),P=new C(P,T,z.encodedTokenAttributes);return P}static createRoot(_,S){return new C(null,new h.ScopeStack(null,_),S)}static createRootAndLookUpScopeName(_,S,P){const T=P.getMetadataForScope(_),z=new h.ScopeStack(null,_),V=P.themeProvider.themeMatch(z),W=C.mergeAttributes(S,T,V);return new C(null,z,W)}get scopeName(){return this.scopePath.scopeName}toString(){return this.getScopeNames().join(" ")}equals(_){return C.equals(this,_)}static equals(_,S){for(;;){if(_===S||!_&&!S)return!0;if(!_||!S||_.scopeName!==S.scopeName||_.tokenAttributes!==S.tokenAttributes)return!1;_=_.parent,S=S.parent}}static mergeAttributes(_,S,P){let T=-1,z=0,V=0;return P!==null&&(T=P.fontStyle,z=P.foregroundId,V=P.backgroundId),l.EncodedTokenAttributes.set(_,S.languageId,S.tokenType,null,T,z,V)}pushAttributed(_,S){if(_===null)return this;if(_.indexOf(" ")===-1)return C._pushAttributed(this,_,S);const P=_.split(/ /g);let T=this;for(const z of P)T=C._pushAttributed(T,z,S);return T}static _pushAttributed(_,S,P){const T=P.getMetadataForScope(S),z=_.scopePath.push(S),V=P.themeProvider.themeMatch(z),W=C.mergeAttributes(_.tokenAttributes,T,V);return new C(_,z,W)}getScopeNames(){return this.scopePath.getSegments()}getExtensionIfDefined(_){var T;const S=[];let P=this;for(;P&&P!==_;)S.push({encodedTokenAttributes:P.tokenAttributes,scopeNames:P.scopePath.getExtensionIfDefined(((T=P.parent)==null?void 0:T.scopePath)??null)}),P=P.parent;return P===_?S.reverse():void 0}}i.AttributedScopeStack=C;class g{constructor(_,S,P,T,z,V,W,ae){this.parent=_,this.ruleId=S,this.beginRuleCapturedEOL=z,this.endRule=V,this.nameScopesList=W,this.contentNameScopesList=ae,this._stackElementBrand=void 0,this.depth=this.parent?this.parent.depth+1:1,this._enterPos=P,this._anchorPos=T}equals(_){return _!==null&&g._equals(this,_)}static _equals(_,S){return _===S||!!this._structuralEquals(_,S)&&C.equals(_.contentNameScopesList,S.contentNameScopesList)}static _structuralEquals(_,S){for(;;){if(_===S||!_&&!S)return!0;if(!_||!S||_.depth!==S.depth||_.ruleId!==S.ruleId||_.endRule!==S.endRule)return!1;_=_.parent,S=S.parent}}clone(){return this}static _reset(_){for(;_;)_._enterPos=-1,_._anchorPos=-1,_=_.parent}reset(){g._reset(this)}pop(){return this.parent}safePop(){return this.parent?this.parent:this}push(_,S,P,T,z,V,W){return new g(this,_,S,P,T,z,V,W)}getEnterPos(){return this._enterPos}getAnchorPos(){return this._anchorPos}getRule(_){return _.getRule(this.ruleId)}toString(){const _=[];return this._writeString(_,0),"["+_.join(",")+"]"}_writeString(_,S){var P,T;return this.parent&&(S=this.parent._writeString(_,S)),_[S++]=`(${this.ruleId}, ${(P=this.nameScopesList)==null?void 0:P.toString()}, ${(T=this.contentNameScopesList)==null?void 0:T.toString()})`,S}withContentNameScopesList(_){return this.contentNameScopesList===_?this:this.parent.push(this.ruleId,this._enterPos,this._anchorPos,this.beginRuleCapturedEOL,this.endRule,this.nameScopesList,_)}withEndRule(_){return this.endRule===_?this:new g(this.parent,this.ruleId,this._enterPos,this._anchorPos,this.beginRuleCapturedEOL,_,this.nameScopesList,this.contentNameScopesList)}hasSameRuleAs(_){let S=this;for(;S&&S._enterPos===_._enterPos;){if(S.ruleId===_.ruleId)return!0;S=S.parent}return!1}toStateStackFrame(){var _,S,P;return{ruleId:m.ruleIdToNumber(this.ruleId),beginRuleCapturedEOL:this.beginRuleCapturedEOL,endRule:this.endRule,nameScopesList:((S=this.nameScopesList)==null?void 0:S.getExtensionIfDefined(((_=this.parent)==null?void 0:_.nameScopesList)??null))??[],contentNameScopesList:((P=this.contentNameScopesList)==null?void 0:P.getExtensionIfDefined(this.nameScopesList))??[]}}static pushFrame(_,S){const P=C.fromExtension((_==null?void 0:_.nameScopesList)??null,S.nameScopesList);return new g(_,m.ruleIdFromNumber(S.ruleId),S.enterPos??-1,S.anchorPos??-1,S.beginRuleCapturedEOL,S.endRule,P,C.fromExtension(P,S.contentNameScopesList))}}i.StateStackImpl=g,g.NULL=new g(null,0,0,0,!1,null,null,null),i.BalancedBracketSelectors=class{constructor(v,_){this.allowAny=!1,this.balancedBracketScopes=v.flatMap(S=>S==="*"?(this.allowAny=!0,[]):p.createMatchers(S,w).map(P=>P.matcher)),this.unbalancedBracketScopes=_.flatMap(S=>p.createMatchers(S,w).map(P=>P.matcher))}get matchesAlways(){return this.allowAny&&this.unbalancedBracketScopes.length===0}get matchesNever(){return this.balancedBracketScopes.length===0&&!this.allowAny}match(v){for(const _ of this.unbalancedBracketScopes)if(_(v))return!1;for(const _ of this.balancedBracketScopes)if(_(v))return!0;return this.allowAny}};class E{constructor(_,S,P,T){this.balancedBracketSelectors=T,this._emitBinaryTokens=_,this._tokenTypeOverrides=P,c.DebugFlags.InDebugMode?this._lineText=S:this._lineText=null,this._tokens=[],this._binaryTokens=[],this._lastTokenEndIndex=0}produce(_,S){this.produceFromScopes(_.contentNameScopesList,S)}produceFromScopes(_,S){var T;if(this._lastTokenEndIndex>=S)return;if(this._emitBinaryTokens){let z=(_==null?void 0:_.tokenAttributes)??0,V=!1;if((T=this.balancedBracketSelectors)!=null&&T.matchesAlways&&(V=!0),this._tokenTypeOverrides.length>0||this.balancedBracketSelectors&&!this.balancedBracketSelectors.matchesAlways&&!this.balancedBracketSelectors.matchesNever){const W=(_==null?void 0:_.getScopeNames())??[];for(const ae of this._tokenTypeOverrides)ae.matcher(W)&&(z=l.EncodedTokenAttributes.set(z,0,l.toOptionalTokenType(ae.type),null,-1,0,0));this.balancedBracketSelectors&&(V=this.balancedBracketSelectors.match(W))}if(V&&(z=l.EncodedTokenAttributes.set(z,0,8,V,-1,0,0)),this._binaryTokens.length>0&&this._binaryTokens[this._binaryTokens.length-1]===z)return void(this._lastTokenEndIndex=S);if(c.DebugFlags.InDebugMode){const W=(_==null?void 0:_.getScopeNames())??[];console.log("  token: |"+this._lineText.substring(this._lastTokenEndIndex,S).replace(/\n$/,"\\n")+"|");for(let ae=0;ae<W.length;ae++)console.log("      * "+W[ae])}return this._binaryTokens.push(this._lastTokenEndIndex),this._binaryTokens.push(z),void(this._lastTokenEndIndex=S)}const P=(_==null?void 0:_.getScopeNames())??[];if(c.DebugFlags.InDebugMode){console.log("  token: |"+this._lineText.substring(this._lastTokenEndIndex,S).replace(/\n$/,"\\n")+"|");for(let z=0;z<P.length;z++)console.log("      * "+P[z])}this._tokens.push({startIndex:this._lastTokenEndIndex,endIndex:S,scopes:P}),this._lastTokenEndIndex=S}getResult(_,S){return this._tokens.length>0&&this._tokens[this._tokens.length-1].startIndex===S-1&&this._tokens.pop(),this._tokens.length===0&&(this._lastTokenEndIndex=-1,this.produce(_,S),this._tokens[this._tokens.length-1].startIndex=0),this._tokens}getBinaryResult(_,S){this._binaryTokens.length>0&&this._binaryTokens[this._binaryTokens.length-2]===S-1&&(this._binaryTokens.pop(),this._binaryTokens.pop()),this._binaryTokens.length===0&&(this._lastTokenEndIndex=-1,this.produce(_,S),this._binaryTokens[this._binaryTokens.length-2]=0);const P=new Uint32Array(this._binaryTokens.length);for(let T=0,z=this._binaryTokens.length;T<z;T++)P[T]=this._binaryTokens[T];return P}}i.LineTokens=E},965:(s,i,u)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.parseInclude=i.TopLevelRepositoryReference=i.TopLevelReference=i.RelativeReference=i.SelfReference=i.BaseReference=i.ScopeDependencyProcessor=i.ExternalReferenceCollector=i.TopLevelRepositoryRuleReference=i.TopLevelRuleReference=void 0;const c=u(878);class l{constructor(g){this.scopeName=g}toKey(){return this.scopeName}}i.TopLevelRuleReference=l;class p{constructor(g,E){this.scopeName=g,this.ruleName=E}toKey(){return`${this.scopeName}#${this.ruleName}`}}i.TopLevelRepositoryRuleReference=p;class d{constructor(){this._references=[],this._seenReferenceKeys=new Set,this.visitedRule=new Set}get references(){return this._references}add(g){const E=g.toKey();this._seenReferenceKeys.has(E)||(this._seenReferenceKeys.add(E),this._references.push(g))}}function m(C,g,E,v){const _=E.lookup(C.scopeName);if(!_){if(C.scopeName===g)throw new Error(`No grammar provided for <${g}>`);return}const S=E.lookup(g);C instanceof l?b({baseGrammar:S,selfGrammar:_},v):h(C.ruleName,{baseGrammar:S,selfGrammar:_,repository:_.repository},v);const P=E.injections(C.scopeName);if(P)for(const T of P)v.add(new l(T))}function h(C,g,E){g.repository&&g.repository[C]&&y([g.repository[C]],g,E)}function b(C,g){C.selfGrammar.patterns&&Array.isArray(C.selfGrammar.patterns)&&y(C.selfGrammar.patterns,{...C,repository:C.selfGrammar.repository},g),C.selfGrammar.injections&&y(Object.values(C.selfGrammar.injections),{...C,repository:C.selfGrammar.repository},g)}function y(C,g,E){for(const v of C){if(E.visitedRule.has(v))continue;E.visitedRule.add(v);const _=v.repository?c.mergeObjects({},g.repository,v.repository):g.repository;Array.isArray(v.patterns)&&y(v.patterns,{...g,repository:_},E);const S=v.include;if(!S)continue;const P=j(S);switch(P.kind){case 0:b({...g,selfGrammar:g.baseGrammar},E);break;case 1:b(g,E);break;case 2:h(P.ruleName,{...g,repository:_},E);break;case 3:case 4:const T=P.scopeName===g.selfGrammar.scopeName?g.selfGrammar:P.scopeName===g.baseGrammar.scopeName?g.baseGrammar:void 0;if(T){const z={baseGrammar:g.baseGrammar,selfGrammar:T,repository:_};P.kind===4?h(P.ruleName,z,E):b(z,E)}else P.kind===4?E.add(new p(P.scopeName,P.ruleName)):E.add(new l(P.scopeName))}}}i.ExternalReferenceCollector=d,i.ScopeDependencyProcessor=class{constructor(C,g){this.repo=C,this.initialScopeName=g,this.seenFullScopeRequests=new Set,this.seenPartialScopeRequests=new Set,this.seenFullScopeRequests.add(this.initialScopeName),this.Q=[new l(this.initialScopeName)]}processQueue(){const C=this.Q;this.Q=[];const g=new d;for(const E of C)m(E,this.initialScopeName,this.repo,g);for(const E of g.references)if(E instanceof l){if(this.seenFullScopeRequests.has(E.scopeName))continue;this.seenFullScopeRequests.add(E.scopeName),this.Q.push(E)}else{if(this.seenFullScopeRequests.has(E.scopeName)||this.seenPartialScopeRequests.has(E.toKey()))continue;this.seenPartialScopeRequests.add(E.toKey()),this.Q.push(E)}}};class x{constructor(){this.kind=0}}i.BaseReference=x;class I{constructor(){this.kind=1}}i.SelfReference=I;class w{constructor(g){this.ruleName=g,this.kind=2}}i.RelativeReference=w;class A{constructor(g){this.scopeName=g,this.kind=3}}i.TopLevelReference=A;class f{constructor(g,E){this.scopeName=g,this.ruleName=E,this.kind=4}}function j(C){if(C==="$base")return new x;if(C==="$self")return new I;const g=C.indexOf("#");if(g===-1)return new A(C);if(g===0)return new w(C.substring(1));{const E=C.substring(0,g),v=C.substring(g+1);return new f(E,v)}}i.TopLevelRepositoryReference=f,i.parseInclude=j},391:function(s,i,u){var c=this&&this.__createBinding||(Object.create?function(p,d,m,h){h===void 0&&(h=m),Object.defineProperty(p,h,{enumerable:!0,get:function(){return d[m]}})}:function(p,d,m,h){h===void 0&&(h=m),p[h]=d[m]}),l=this&&this.__exportStar||function(p,d){for(var m in p)m==="default"||Object.prototype.hasOwnProperty.call(d,m)||c(d,p,m)};Object.defineProperty(i,"__esModule",{value:!0}),l(u(947),i)},47:(s,i,u)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.LocalStackElement=i._tokenizeString=void 0;const c=u(350),l=u(44),p=u(792),d=u(878);class m{constructor(f,j){this.stack=f,this.stoppedEarly=j}}function h(A,f,j,C,g,E,v,_){const S=f.content.length;let P=!1,T=-1;if(v){const W=function(ae,Ce,we,ue,de,be){let Ie=de.beginRuleCapturedEOL?0:-1;const Pe=[];for(let Re=de;Re;Re=Re.pop()){const $e=Re.getRule(ae);$e instanceof p.BeginWhileRule&&Pe.push({rule:$e,stack:Re})}for(let Re=Pe.pop();Re;Re=Pe.pop()){const{ruleScanner:$e,findOptions:st}=y(Re.rule,ae,Re.stack.endRule,we,ue===Ie),re=$e.findNextMatchSync(Ce,ue,st);if(c.DebugFlags.InDebugMode&&(console.log("  scanning for while rule"),console.log($e.toString())),!re){c.DebugFlags.InDebugMode&&console.log("  popping "+Re.rule.debugName+" - "+Re.rule.debugWhileRegExp),de=Re.stack.pop();break}if(re.ruleId!==p.whileRuleId){de=Re.stack.pop();break}re.captureIndices&&re.captureIndices.length&&(be.produce(Re.stack,re.captureIndices[0].start),I(ae,Ce,we,Re.stack,be,Re.rule.whileCaptures,re.captureIndices),be.produce(Re.stack,re.captureIndices[0].end),Ie=re.captureIndices[0].end,re.captureIndices[0].end>ue&&(ue=re.captureIndices[0].end,we=!1))}return{stack:de,linePos:ue,anchorPosition:Ie,isFirstLine:we}}(A,f,j,C,g,E);g=W.stack,C=W.linePos,j=W.isFirstLine,T=W.anchorPosition}const z=Date.now();for(;!P;){if(_!==0&&Date.now()-z>_)return new m(g,!0);V()}return new m(g,!1);function V(){c.DebugFlags.InDebugMode&&(console.log(""),console.log(`@@scanNext ${C}: |${f.content.substr(C).replace(/\n$/,"\\n")}|`));const W=function(ue,de,be,Ie,Pe,Re){const $e=function(Lt,It,ua,ra,Pt,Qt){const sa=Pt.getRule(Lt),{ruleScanner:Xt,findOptions:Ut}=b(sa,Lt,Pt.endRule,ua,ra===Qt);let Ht=0;c.DebugFlags.InDebugMode&&(Ht=d.performanceNow());const Ct=Xt.findNextMatchSync(It,ra,Ut);if(c.DebugFlags.InDebugMode){const Nt=d.performanceNow()-Ht;Nt>5&&console.warn(`Rule ${sa.debugName} (${sa.id}) matching took ${Nt} against '${It}'`),console.log(`  scanning for (linePos: ${ra}, anchorPosition: ${Qt})`),console.log(Xt.toString()),Ct&&console.log(`matched rule id: ${Ct.ruleId} from ${Ct.captureIndices[0].start} to ${Ct.captureIndices[0].end}`)}return Ct?{captureIndices:Ct.captureIndices,matchedRuleId:Ct.ruleId}:null}(ue,de,be,Ie,Pe,Re),st=ue.getInjections();if(st.length===0)return $e;const re=function(Lt,It,ua,ra,Pt,Qt,sa){let Xt,Ut=Number.MAX_VALUE,Ht=null,Ct=0;const Nt=Qt.contentNameScopesList.getScopeNames();for(let Et=0,da=Lt.length;Et<da;Et++){const se=Lt[Et];if(!se.matcher(Nt))continue;const Q=It.getRule(se.ruleId),{ruleScanner:J,findOptions:le}=b(Q,It,null,ra,Pt===sa),ve=J.findNextMatchSync(ua,Pt,le);if(!ve)continue;c.DebugFlags.InDebugMode&&(console.log(`  matched injection: ${se.debugSelector}`),console.log(J.toString()));const Ee=ve.captureIndices[0].start;if(!(Ee>=Ut)&&(Ut=Ee,Ht=ve.captureIndices,Xt=ve.ruleId,Ct=se.priority,Ut===Pt))break}return Ht?{priorityMatch:Ct===-1,captureIndices:Ht,matchedRuleId:Xt}:null}(st,ue,de,be,Ie,Pe,Re);if(!re)return $e;if(!$e)return re;const qe=$e.captureIndices[0].start,Ve=re.captureIndices[0].start;return Ve<qe||re.priorityMatch&&Ve===qe?re:$e}(A,f,j,C,g,T);if(!W)return c.DebugFlags.InDebugMode&&console.log("  no more matches."),E.produce(g,S),void(P=!0);const ae=W.captureIndices,Ce=W.matchedRuleId,we=!!(ae&&ae.length>0)&&ae[0].end>C;if(Ce===p.endRuleId){const ue=g.getRule(A);c.DebugFlags.InDebugMode&&console.log("  popping "+ue.debugName+" - "+ue.debugEndRegExp),E.produce(g,ae[0].start),g=g.withContentNameScopesList(g.nameScopesList),I(A,f,j,g,E,ue.endCaptures,ae),E.produce(g,ae[0].end);const de=g;if(g=g.parent,T=de.getAnchorPos(),!we&&de.getEnterPos()===C)return c.DebugFlags.InDebugMode&&console.error("[1] - Grammar is in an endless loop - Grammar pushed & popped a rule without advancing"),g=de,E.produce(g,S),void(P=!0)}else{const ue=A.getRule(Ce);E.produce(g,ae[0].start);const de=g,be=ue.getName(f.content,ae),Ie=g.contentNameScopesList.pushAttributed(be,A);if(g=g.push(Ce,C,T,ae[0].end===S,null,Ie,Ie),ue instanceof p.BeginEndRule){const Pe=ue;c.DebugFlags.InDebugMode&&console.log("  pushing "+Pe.debugName+" - "+Pe.debugBeginRegExp),I(A,f,j,g,E,Pe.beginCaptures,ae),E.produce(g,ae[0].end),T=ae[0].end;const Re=Pe.getContentName(f.content,ae),$e=Ie.pushAttributed(Re,A);if(g=g.withContentNameScopesList($e),Pe.endHasBackReferences&&(g=g.withEndRule(Pe.getEndWithResolvedBackReferences(f.content,ae))),!we&&de.hasSameRuleAs(g))return c.DebugFlags.InDebugMode&&console.error("[2] - Grammar is in an endless loop - Grammar pushed the same rule without advancing"),g=g.pop(),E.produce(g,S),void(P=!0)}else if(ue instanceof p.BeginWhileRule){const Pe=ue;c.DebugFlags.InDebugMode&&console.log("  pushing "+Pe.debugName),I(A,f,j,g,E,Pe.beginCaptures,ae),E.produce(g,ae[0].end),T=ae[0].end;const Re=Pe.getContentName(f.content,ae),$e=Ie.pushAttributed(Re,A);if(g=g.withContentNameScopesList($e),Pe.whileHasBackReferences&&(g=g.withEndRule(Pe.getWhileWithResolvedBackReferences(f.content,ae))),!we&&de.hasSameRuleAs(g))return c.DebugFlags.InDebugMode&&console.error("[3] - Grammar is in an endless loop - Grammar pushed the same rule without advancing"),g=g.pop(),E.produce(g,S),void(P=!0)}else{const Pe=ue;if(c.DebugFlags.InDebugMode&&console.log("  matched "+Pe.debugName+" - "+Pe.debugMatchRegExp),I(A,f,j,g,E,Pe.captures,ae),E.produce(g,ae[0].end),g=g.pop(),!we)return c.DebugFlags.InDebugMode&&console.error("[4] - Grammar is in an endless loop - Grammar is not advancing, nor is it pushing/popping"),g=g.safePop(),E.produce(g,S),void(P=!0)}}ae[0].end>C&&(C=ae[0].end,j=!1)}}function b(A,f,j,C,g){return c.UseOnigurumaFindOptions?{ruleScanner:A.compile(f,j),findOptions:x(C,g)}:{ruleScanner:A.compileAG(f,j,C,g),findOptions:0}}function y(A,f,j,C,g){return c.UseOnigurumaFindOptions?{ruleScanner:A.compileWhile(f,j),findOptions:x(C,g)}:{ruleScanner:A.compileWhileAG(f,j,C,g),findOptions:0}}function x(A,f){let j=0;return A||(j|=1),f||(j|=4),j}function I(A,f,j,C,g,E,v){if(E.length===0)return;const _=f.content,S=Math.min(E.length,v.length),P=[],T=v[0].end;for(let z=0;z<S;z++){const V=E[z];if(V===null)continue;const W=v[z];if(W.length===0)continue;if(W.start>T)break;for(;P.length>0&&P[P.length-1].endPos<=W.start;)g.produceFromScopes(P[P.length-1].scopes,P[P.length-1].endPos),P.pop();if(P.length>0?g.produceFromScopes(P[P.length-1].scopes,W.start):g.produce(C,W.start),V.retokenizeCapturedWithRuleId){const Ce=V.getName(_,v),we=C.contentNameScopesList.pushAttributed(Ce,A),ue=V.getContentName(_,v),de=we.pushAttributed(ue,A),be=C.push(V.retokenizeCapturedWithRuleId,W.start,-1,!1,null,we,de),Ie=A.createOnigString(_.substring(0,W.end));h(A,Ie,j&&W.start===0,W.start,be,g,!1,0),l.disposeOnigString(Ie);continue}const ae=V.getName(_,v);if(ae!==null){const Ce=(P.length>0?P[P.length-1].scopes:C.contentNameScopesList).pushAttributed(ae,A);P.push(new w(Ce,W.end))}}for(;P.length>0;)g.produceFromScopes(P[P.length-1].scopes,P[P.length-1].endPos),P.pop()}i._tokenizeString=h;class w{constructor(f,j){this.scopes=f,this.endPos=j}}i.LocalStackElement=w},974:(s,i)=>{function u(d,m){throw new Error("Near offset "+d.pos+": "+m+" ~~~"+d.source.substr(d.pos,50)+"~~~")}Object.defineProperty(i,"__esModule",{value:!0}),i.parseJSON=void 0,i.parseJSON=function(d,m,h){let b=new c(d),y=new l,x=0,I=null,w=[],A=[];function f(){w.push(x),A.push(I)}function j(){x=w.pop(),I=A.pop()}function C(g){u(b,g)}for(;p(b,y);){if(x===0){if(I!==null&&C("too many constructs in root"),y.type===3){I={},h&&(I.$vscodeTextmateLocation=y.toLocation(m)),f(),x=1;continue}if(y.type===2){I=[],f(),x=4;continue}C("unexpected token in root")}if(x===2){if(y.type===5){j();continue}if(y.type===7){x=3;continue}C("expected , or }")}if(x===1||x===3){if(x===1&&y.type===5){j();continue}if(y.type===1){let g=y.value;if(p(b,y)&&y.type===6||C("expected colon"),p(b,y)||C("expected value"),x=2,y.type===1){I[g]=y.value;continue}if(y.type===8){I[g]=null;continue}if(y.type===9){I[g]=!0;continue}if(y.type===10){I[g]=!1;continue}if(y.type===11){I[g]=parseFloat(y.value);continue}if(y.type===2){let E=[];I[g]=E,f(),x=4,I=E;continue}if(y.type===3){let E={};h&&(E.$vscodeTextmateLocation=y.toLocation(m)),I[g]=E,f(),x=1,I=E;continue}}C("unexpected token in dict")}if(x===5){if(y.type===4){j();continue}if(y.type===7){x=6;continue}C("expected , or ]")}if(x===4||x===6){if(x===4&&y.type===4){j();continue}if(x=5,y.type===1){I.push(y.value);continue}if(y.type===8){I.push(null);continue}if(y.type===9){I.push(!0);continue}if(y.type===10){I.push(!1);continue}if(y.type===11){I.push(parseFloat(y.value));continue}if(y.type===2){let g=[];I.push(g),f(),x=4,I=g;continue}if(y.type===3){let g={};h&&(g.$vscodeTextmateLocation=y.toLocation(m)),I.push(g),f(),x=1,I=g;continue}C("unexpected token in array")}C("unknown state")}return A.length!==0&&C("unclosed constructs"),I};class c{constructor(m){this.source=m,this.pos=0,this.len=m.length,this.line=1,this.char=0}}class l{constructor(){this.value=null,this.type=0,this.offset=-1,this.len=-1,this.line=-1,this.char=-1}toLocation(m){return{filename:m,line:this.line,char:this.char}}}function p(d,m){m.value=null,m.type=0,m.offset=-1,m.len=-1,m.line=-1,m.char=-1;let h,b=d.source,y=d.pos,x=d.len,I=d.line,w=d.char;for(;;){if(y>=x)return!1;if(h=b.charCodeAt(y),h!==32&&h!==9&&h!==13){if(h!==10)break;y++,I++,w=0}else y++,w++}if(m.offset=y,m.line=I,m.char=w,h===34){for(m.type=1,y++,w++;;){if(y>=x)return!1;if(h=b.charCodeAt(y),y++,w++,h!==92){if(h===34)break}else y++,w++}m.value=b.substring(m.offset+1,y-1).replace(/\\u([0-9A-Fa-f]{4})/g,(A,f)=>String.fromCodePoint(parseInt(f,16))).replace(/\\(.)/g,(A,f)=>{switch(f){case'"':return'"';case"\\":return"\\";case"/":return"/";case"b":return"\b";case"f":return"\f";case"n":return`
`;case"r":return"\r";case"t":return"	";default:u(d,"invalid escape sequence")}throw new Error("unreachable")})}else if(h===91)m.type=2,y++,w++;else if(h===123)m.type=3,y++,w++;else if(h===93)m.type=4,y++,w++;else if(h===125)m.type=5,y++,w++;else if(h===58)m.type=6,y++,w++;else if(h===44)m.type=7,y++,w++;else if(h===110){if(m.type=8,y++,w++,h=b.charCodeAt(y),h!==117||(y++,w++,h=b.charCodeAt(y),h!==108)||(y++,w++,h=b.charCodeAt(y),h!==108))return!1;y++,w++}else if(h===116){if(m.type=9,y++,w++,h=b.charCodeAt(y),h!==114||(y++,w++,h=b.charCodeAt(y),h!==117)||(y++,w++,h=b.charCodeAt(y),h!==101))return!1;y++,w++}else if(h===102){if(m.type=10,y++,w++,h=b.charCodeAt(y),h!==97||(y++,w++,h=b.charCodeAt(y),h!==108)||(y++,w++,h=b.charCodeAt(y),h!==115)||(y++,w++,h=b.charCodeAt(y),h!==101))return!1;y++,w++}else for(m.type=11;;){if(y>=x)return!1;if(h=b.charCodeAt(y),!(h===46||h>=48&&h<=57||h===101||h===69||h===45||h===43))break;y++,w++}return m.len=y-m.offset,m.value===null&&(m.value=b.substr(m.offset,m.len)),d.pos=y,d.line=I,d.char=w,!0}},787:function(s,i,u){var c=this&&this.__createBinding||(Object.create?function(x,I,w,A){A===void 0&&(A=w),Object.defineProperty(x,A,{enumerable:!0,get:function(){return I[w]}})}:function(x,I,w,A){A===void 0&&(A=w),x[A]=I[w]}),l=this&&this.__exportStar||function(x,I){for(var w in x)w==="default"||Object.prototype.hasOwnProperty.call(I,w)||c(I,x,w)};Object.defineProperty(i,"__esModule",{value:!0}),i.applyStateStackDiff=i.diffStateStacksRefEq=i.parseRawGrammar=i.INITIAL=i.Registry=void 0;const p=u(391),d=u(50),m=u(652),h=u(583),b=u(965),y=u(442);Object.defineProperty(i,"applyStateStackDiff",{enumerable:!0,get:function(){return y.applyStateStackDiff}}),Object.defineProperty(i,"diffStateStacksRefEq",{enumerable:!0,get:function(){return y.diffStateStacksRefEq}}),l(u(44),i),i.Registry=class{constructor(x){this._options=x,this._syncRegistry=new m.SyncRegistry(h.Theme.createFromRawTheme(x.theme,x.colorMap),x.onigLib),this._ensureGrammarCache=new Map}dispose(){this._syncRegistry.dispose()}setTheme(x,I){this._syncRegistry.setTheme(h.Theme.createFromRawTheme(x,I))}getColorMap(){return this._syncRegistry.getColorMap()}loadGrammarWithEmbeddedLanguages(x,I,w){return this.loadGrammarWithConfiguration(x,I,{embeddedLanguages:w})}loadGrammarWithConfiguration(x,I,w){return this._loadGrammar(x,I,w.embeddedLanguages,w.tokenTypes,new p.BalancedBracketSelectors(w.balancedBracketSelectors||[],w.unbalancedBracketSelectors||[]))}loadGrammar(x){return this._loadGrammar(x,0,null,null,null)}async _loadGrammar(x,I,w,A,f){const j=new b.ScopeDependencyProcessor(this._syncRegistry,x);for(;j.Q.length>0;)await Promise.all(j.Q.map(C=>this._loadSingleGrammar(C.scopeName))),j.processQueue();return this._grammarForScopeName(x,I,w,A,f)}async _loadSingleGrammar(x){return this._ensureGrammarCache.has(x)||this._ensureGrammarCache.set(x,this._doLoadSingleGrammar(x)),this._ensureGrammarCache.get(x)}async _doLoadSingleGrammar(x){const I=await this._options.loadGrammar(x);if(I){const w=typeof this._options.getInjections=="function"?this._options.getInjections(x):void 0;this._syncRegistry.addGrammar(I,w)}}async addGrammar(x,I=[],w=0,A=null){return this._syncRegistry.addGrammar(x,I),await this._grammarForScopeName(x.scopeName,w,A)}_grammarForScopeName(x,I=0,w=null,A=null,f=null){return this._syncRegistry.grammarForScopeName(x,I,w,A,f)}},i.INITIAL=p.StateStackImpl.NULL,i.parseRawGrammar=d.parseRawGrammar},736:(s,i)=>{function u(c){return!!c&&!!c.match(/[\w\.:]+/)}Object.defineProperty(i,"__esModule",{value:!0}),i.createMatchers=void 0,i.createMatchers=function(c,l){const p=[],d=function(y){let x=/([LR]:|[\w\.:][\w\.:\-]*|[\,\|\-\(\)])/g,I=x.exec(y);return{next:()=>{if(!I)return null;const w=I[0];return I=x.exec(y),w}}}(c);let m=d.next();for(;m!==null;){let y=0;if(m.length===2&&m.charAt(1)===":"){switch(m.charAt(0)){case"R":y=1;break;case"L":y=-1;break;default:console.log(`Unknown priority ${m} in scope selector`)}m=d.next()}let x=b();if(p.push({matcher:x,priority:y}),m!==",")break;m=d.next()}return p;function h(){if(m==="-"){m=d.next();const y=h();return x=>!!y&&!y(x)}if(m==="("){m=d.next();const y=function(){const x=[];let I=b();for(;I&&(x.push(I),m==="|"||m===",");){do m=d.next();while(m==="|"||m===",");I=b()}return w=>x.some(A=>A(w))}();return m===")"&&(m=d.next()),y}if(u(m)){const y=[];do y.push(m),m=d.next();while(u(m));return x=>l(y,x)}return null}function b(){const y=[];let x=h();for(;x;)y.push(x),x=h();return I=>y.every(w=>w(I))}}},44:(s,i)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.disposeOnigString=void 0,i.disposeOnigString=function(u){typeof u.dispose=="function"&&u.dispose()}},50:(s,i,u)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.parseRawGrammar=void 0;const c=u(69),l=u(350),p=u(974);i.parseRawGrammar=function(d,m=null){return m!==null&&/\.json$/.test(m)?(h=d,b=m,l.DebugFlags.InDebugMode?p.parseJSON(h,b,!0):JSON.parse(h)):function(y,x){return l.DebugFlags.InDebugMode?c.parseWithLocation(y,x,"$vscodeTextmateLocation"):c.parsePLIST(y)}(d,m);var h,b}},69:(s,i)=>{function u(c,l,p){const d=c.length;let m=0,h=1,b=0;function y(re){if(p===null)m+=re;else for(;re>0;)c.charCodeAt(m)===10?(m++,h++,b=0):(m++,b++),re--}function x(re){p===null?m=re:y(re-m)}function I(){for(;m<d;){let re=c.charCodeAt(m);if(re!==32&&re!==9&&re!==13&&re!==10)break;y(1)}}function w(re){return c.substr(m,re.length)===re&&(y(re.length),!0)}function A(re){let qe=c.indexOf(re,m);x(qe!==-1?qe+re.length:d)}function f(re){let qe=c.indexOf(re,m);if(qe!==-1){let Ve=c.substring(m,qe);return x(qe+re.length),Ve}{let Ve=c.substr(m);return x(d),Ve}}d>0&&c.charCodeAt(0)===65279&&(m=1);let j=0,C=null,g=[],E=[],v=null;function _(re,qe){g.push(j),E.push(C),j=re,C=qe}function S(){if(g.length===0)return P("illegal state stack");j=g.pop(),C=E.pop()}function P(re){throw new Error("Near offset "+m+": "+re+" ~~~"+c.substr(m,50)+"~~~")}const T=function(){if(v===null)return P("missing <key>");let re={};p!==null&&(re[p]={filename:l,line:h,char:b}),C[v]=re,v=null,_(1,re)},z=function(){if(v===null)return P("missing <key>");let re=[];C[v]=re,v=null,_(2,re)},V=function(){let re={};p!==null&&(re[p]={filename:l,line:h,char:b}),C.push(re),_(1,re)},W=function(){let re=[];C.push(re),_(2,re)};function ae(){if(j!==1)return P("unexpected </dict>");S()}function Ce(){return j===1||j!==2?P("unexpected </array>"):void S()}function we(re){if(j===1){if(v===null)return P("missing <key>");C[v]=re,v=null}else j===2?C.push(re):C=re}function ue(re){if(isNaN(re))return P("cannot parse float");if(j===1){if(v===null)return P("missing <key>");C[v]=re,v=null}else j===2?C.push(re):C=re}function de(re){if(isNaN(re))return P("cannot parse integer");if(j===1){if(v===null)return P("missing <key>");C[v]=re,v=null}else j===2?C.push(re):C=re}function be(re){if(j===1){if(v===null)return P("missing <key>");C[v]=re,v=null}else j===2?C.push(re):C=re}function Ie(re){if(j===1){if(v===null)return P("missing <key>");C[v]=re,v=null}else j===2?C.push(re):C=re}function Pe(re){if(j===1){if(v===null)return P("missing <key>");C[v]=re,v=null}else j===2?C.push(re):C=re}function Re(){let re=f(">"),qe=!1;return re.charCodeAt(re.length-1)===47&&(qe=!0,re=re.substring(0,re.length-1)),{name:re.trim(),isClosed:qe}}function $e(re){if(re.isClosed)return"";let qe=f("</");return A(">"),qe.replace(/&#([0-9]+);/g,function(Ve,Lt){return String.fromCodePoint(parseInt(Lt,10))}).replace(/&#x([0-9a-f]+);/g,function(Ve,Lt){return String.fromCodePoint(parseInt(Lt,16))}).replace(/&amp;|&lt;|&gt;|&quot;|&apos;/g,function(Ve){switch(Ve){case"&amp;":return"&";case"&lt;":return"<";case"&gt;":return">";case"&quot;":return'"';case"&apos;":return"'"}return Ve})}for(;m<d&&(I(),!(m>=d));){const re=c.charCodeAt(m);if(y(1),re!==60)return P("expected <");if(m>=d)return P("unexpected end of input");const qe=c.charCodeAt(m);if(qe===63){y(1),A("?>");continue}if(qe===33){if(y(1),w("--")){A("-->");continue}A(">");continue}if(qe===47){if(y(1),I(),w("plist")){A(">");continue}if(w("dict")){A(">"),ae();continue}if(w("array")){A(">"),Ce();continue}return P("unexpected closed tag")}let Ve=Re();switch(Ve.name){case"dict":j===1?T():j===2?V():(C={},p!==null&&(C[p]={filename:l,line:h,char:b}),_(1,C)),Ve.isClosed&&ae();continue;case"array":j===1?z():j===2?W():(C=[],_(2,C)),Ve.isClosed&&Ce();continue;case"key":st=$e(Ve),j!==1?P("unexpected <key>"):v!==null?P("too many <key>"):v=st;continue;case"string":we($e(Ve));continue;case"real":ue(parseFloat($e(Ve)));continue;case"integer":de(parseInt($e(Ve),10));continue;case"date":be(new Date($e(Ve)));continue;case"data":Ie($e(Ve));continue;case"true":$e(Ve),Pe(!0);continue;case"false":$e(Ve),Pe(!1);continue}if(!/^plist/.test(Ve.name))return P("unexpected opened tag "+Ve.name)}var st;return C}Object.defineProperty(i,"__esModule",{value:!0}),i.parsePLIST=i.parseWithLocation=void 0,i.parseWithLocation=function(c,l,p){return u(c,l,p)},i.parsePLIST=function(c){return u(c,null,null)}},652:(s,i,u)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.SyncRegistry=void 0;const c=u(391);i.SyncRegistry=class{constructor(l,p){this._onigLibPromise=p,this._grammars=new Map,this._rawGrammars=new Map,this._injectionGrammars=new Map,this._theme=l}dispose(){for(const l of this._grammars.values())l.dispose()}setTheme(l){this._theme=l}getColorMap(){return this._theme.getColorMap()}addGrammar(l,p){this._rawGrammars.set(l.scopeName,l),p&&this._injectionGrammars.set(l.scopeName,p)}lookup(l){return this._rawGrammars.get(l)}injections(l){return this._injectionGrammars.get(l)}getDefaults(){return this._theme.getDefaults()}themeMatch(l){return this._theme.match(l)}async grammarForScopeName(l,p,d,m,h){if(!this._grammars.has(l)){let b=this._rawGrammars.get(l);if(!b)return null;this._grammars.set(l,c.createGrammar(l,b,p,d,m,h,this,await this._onigLibPromise))}return this._grammars.get(l)}}},792:(s,i,u)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.CompiledRule=i.RegExpSourceList=i.RegExpSource=i.RuleFactory=i.BeginWhileRule=i.BeginEndRule=i.IncludeOnlyRule=i.MatchRule=i.CaptureRule=i.Rule=i.ruleIdToNumber=i.ruleIdFromNumber=i.whileRuleId=i.endRuleId=void 0;const c=u(878),l=u(965),p=/\\(\d+)/,d=/\\(\d+)/g;i.endRuleId=-1,i.whileRuleId=-2,i.ruleIdFromNumber=function(C){return C},i.ruleIdToNumber=function(C){return C};class m{constructor(g,E,v,_){this.$location=g,this.id=E,this._name=v||null,this._nameIsCapturing=c.RegexSource.hasCaptures(this._name),this._contentName=_||null,this._contentNameIsCapturing=c.RegexSource.hasCaptures(this._contentName)}get debugName(){const g=this.$location?`${c.basename(this.$location.filename)}:${this.$location.line}`:"unknown";return`${this.constructor.name}#${this.id} @ ${g}`}getName(g,E){return this._nameIsCapturing&&this._name!==null&&g!==null&&E!==null?c.RegexSource.replaceCaptures(this._name,g,E):this._name}getContentName(g,E){return this._contentNameIsCapturing&&this._contentName!==null?c.RegexSource.replaceCaptures(this._contentName,g,E):this._contentName}}i.Rule=m;class h extends m{constructor(g,E,v,_,S){super(g,E,v,_),this.retokenizeCapturedWithRuleId=S}dispose(){}collectPatterns(g,E){throw new Error("Not supported!")}compile(g,E){throw new Error("Not supported!")}compileAG(g,E,v,_){throw new Error("Not supported!")}}i.CaptureRule=h;class b extends m{constructor(g,E,v,_,S){super(g,E,v,null),this._match=new A(_,this.id),this.captures=S,this._cachedCompiledPatterns=null}dispose(){this._cachedCompiledPatterns&&(this._cachedCompiledPatterns.dispose(),this._cachedCompiledPatterns=null)}get debugMatchRegExp(){return`${this._match.source}`}collectPatterns(g,E){E.push(this._match)}compile(g,E){return this._getCachedCompiledPatterns(g).compile(g)}compileAG(g,E,v,_){return this._getCachedCompiledPatterns(g).compileAG(g,v,_)}_getCachedCompiledPatterns(g){return this._cachedCompiledPatterns||(this._cachedCompiledPatterns=new f,this.collectPatterns(g,this._cachedCompiledPatterns)),this._cachedCompiledPatterns}}i.MatchRule=b;class y extends m{constructor(g,E,v,_,S){super(g,E,v,_),this.patterns=S.patterns,this.hasMissingPatterns=S.hasMissingPatterns,this._cachedCompiledPatterns=null}dispose(){this._cachedCompiledPatterns&&(this._cachedCompiledPatterns.dispose(),this._cachedCompiledPatterns=null)}collectPatterns(g,E){for(const v of this.patterns)g.getRule(v).collectPatterns(g,E)}compile(g,E){return this._getCachedCompiledPatterns(g).compile(g)}compileAG(g,E,v,_){return this._getCachedCompiledPatterns(g).compileAG(g,v,_)}_getCachedCompiledPatterns(g){return this._cachedCompiledPatterns||(this._cachedCompiledPatterns=new f,this.collectPatterns(g,this._cachedCompiledPatterns)),this._cachedCompiledPatterns}}i.IncludeOnlyRule=y;class x extends m{constructor(g,E,v,_,S,P,T,z,V,W){super(g,E,v,_),this._begin=new A(S,this.id),this.beginCaptures=P,this._end=new A(T||"￿",-1),this.endHasBackReferences=this._end.hasBackReferences,this.endCaptures=z,this.applyEndPatternLast=V||!1,this.patterns=W.patterns,this.hasMissingPatterns=W.hasMissingPatterns,this._cachedCompiledPatterns=null}dispose(){this._cachedCompiledPatterns&&(this._cachedCompiledPatterns.dispose(),this._cachedCompiledPatterns=null)}get debugBeginRegExp(){return`${this._begin.source}`}get debugEndRegExp(){return`${this._end.source}`}getEndWithResolvedBackReferences(g,E){return this._end.resolveBackReferences(g,E)}collectPatterns(g,E){E.push(this._begin)}compile(g,E){return this._getCachedCompiledPatterns(g,E).compile(g)}compileAG(g,E,v,_){return this._getCachedCompiledPatterns(g,E).compileAG(g,v,_)}_getCachedCompiledPatterns(g,E){if(!this._cachedCompiledPatterns){this._cachedCompiledPatterns=new f;for(const v of this.patterns)g.getRule(v).collectPatterns(g,this._cachedCompiledPatterns);this.applyEndPatternLast?this._cachedCompiledPatterns.push(this._end.hasBackReferences?this._end.clone():this._end):this._cachedCompiledPatterns.unshift(this._end.hasBackReferences?this._end.clone():this._end)}return this._end.hasBackReferences&&(this.applyEndPatternLast?this._cachedCompiledPatterns.setSource(this._cachedCompiledPatterns.length()-1,E):this._cachedCompiledPatterns.setSource(0,E)),this._cachedCompiledPatterns}}i.BeginEndRule=x;class I extends m{constructor(g,E,v,_,S,P,T,z,V){super(g,E,v,_),this._begin=new A(S,this.id),this.beginCaptures=P,this.whileCaptures=z,this._while=new A(T,i.whileRuleId),this.whileHasBackReferences=this._while.hasBackReferences,this.patterns=V.patterns,this.hasMissingPatterns=V.hasMissingPatterns,this._cachedCompiledPatterns=null,this._cachedCompiledWhilePatterns=null}dispose(){this._cachedCompiledPatterns&&(this._cachedCompiledPatterns.dispose(),this._cachedCompiledPatterns=null),this._cachedCompiledWhilePatterns&&(this._cachedCompiledWhilePatterns.dispose(),this._cachedCompiledWhilePatterns=null)}get debugBeginRegExp(){return`${this._begin.source}`}get debugWhileRegExp(){return`${this._while.source}`}getWhileWithResolvedBackReferences(g,E){return this._while.resolveBackReferences(g,E)}collectPatterns(g,E){E.push(this._begin)}compile(g,E){return this._getCachedCompiledPatterns(g).compile(g)}compileAG(g,E,v,_){return this._getCachedCompiledPatterns(g).compileAG(g,v,_)}_getCachedCompiledPatterns(g){if(!this._cachedCompiledPatterns){this._cachedCompiledPatterns=new f;for(const E of this.patterns)g.getRule(E).collectPatterns(g,this._cachedCompiledPatterns)}return this._cachedCompiledPatterns}compileWhile(g,E){return this._getCachedCompiledWhilePatterns(g,E).compile(g)}compileWhileAG(g,E,v,_){return this._getCachedCompiledWhilePatterns(g,E).compileAG(g,v,_)}_getCachedCompiledWhilePatterns(g,E){return this._cachedCompiledWhilePatterns||(this._cachedCompiledWhilePatterns=new f,this._cachedCompiledWhilePatterns.push(this._while.hasBackReferences?this._while.clone():this._while)),this._while.hasBackReferences&&this._cachedCompiledWhilePatterns.setSource(0,E||"￿"),this._cachedCompiledWhilePatterns}}i.BeginWhileRule=I;class w{static createCaptureRule(g,E,v,_,S){return g.registerRule(P=>new h(E,P,v,_,S))}static getCompiledRuleId(g,E,v){return g.id||E.registerRule(_=>{if(g.id=_,g.match)return new b(g.$vscodeTextmateLocation,g.id,g.name,g.match,w._compileCaptures(g.captures,E,v));if(g.begin===void 0){g.repository&&(v=c.mergeObjects({},v,g.repository));let S=g.patterns;return S===void 0&&g.include&&(S=[{include:g.include}]),new y(g.$vscodeTextmateLocation,g.id,g.name,g.contentName,w._compilePatterns(S,E,v))}return g.while?new I(g.$vscodeTextmateLocation,g.id,g.name,g.contentName,g.begin,w._compileCaptures(g.beginCaptures||g.captures,E,v),g.while,w._compileCaptures(g.whileCaptures||g.captures,E,v),w._compilePatterns(g.patterns,E,v)):new x(g.$vscodeTextmateLocation,g.id,g.name,g.contentName,g.begin,w._compileCaptures(g.beginCaptures||g.captures,E,v),g.end,w._compileCaptures(g.endCaptures||g.captures,E,v),g.applyEndPatternLast,w._compilePatterns(g.patterns,E,v))}),g.id}static _compileCaptures(g,E,v){let _=[];if(g){let S=0;for(const P in g){if(P==="$vscodeTextmateLocation")continue;const T=parseInt(P,10);T>S&&(S=T)}for(let P=0;P<=S;P++)_[P]=null;for(const P in g){if(P==="$vscodeTextmateLocation")continue;const T=parseInt(P,10);let z=0;g[P].patterns&&(z=w.getCompiledRuleId(g[P],E,v)),_[T]=w.createCaptureRule(E,g[P].$vscodeTextmateLocation,g[P].name,g[P].contentName,z)}}return _}static _compilePatterns(g,E,v){let _=[];if(g)for(let S=0,P=g.length;S<P;S++){const T=g[S];let z=-1;if(T.include){const V=l.parseInclude(T.include);switch(V.kind){case 0:case 1:z=w.getCompiledRuleId(v[T.include],E,v);break;case 2:let W=v[V.ruleName];W&&(z=w.getCompiledRuleId(W,E,v));break;case 3:case 4:const ae=V.scopeName,Ce=V.kind===4?V.ruleName:null,we=E.getExternalGrammar(ae,v);if(we)if(Ce){let ue=we.repository[Ce];ue&&(z=w.getCompiledRuleId(ue,E,we.repository))}else z=w.getCompiledRuleId(we.repository.$self,E,we.repository)}}else z=w.getCompiledRuleId(T,E,v);if(z!==-1){const V=E.getRule(z);let W=!1;if((V instanceof y||V instanceof x||V instanceof I)&&V.hasMissingPatterns&&V.patterns.length===0&&(W=!0),W)continue;_.push(z)}}return{patterns:_,hasMissingPatterns:(g?g.length:0)!==_.length}}}i.RuleFactory=w;class A{constructor(g,E){if(g){const v=g.length;let _=0,S=[],P=!1;for(let T=0;T<v;T++)if(g.charAt(T)==="\\"&&T+1<v){const z=g.charAt(T+1);z==="z"?(S.push(g.substring(_,T)),S.push("$(?!\\n)(?<!\\n)"),_=T+2):z!=="A"&&z!=="G"||(P=!0),T++}this.hasAnchor=P,_===0?this.source=g:(S.push(g.substring(_,v)),this.source=S.join(""))}else this.hasAnchor=!1,this.source=g;this.hasAnchor?this._anchorCache=this._buildAnchorCache():this._anchorCache=null,this.ruleId=E,this.hasBackReferences=p.test(this.source)}clone(){return new A(this.source,this.ruleId)}setSource(g){this.source!==g&&(this.source=g,this.hasAnchor&&(this._anchorCache=this._buildAnchorCache()))}resolveBackReferences(g,E){let v=E.map(_=>g.substring(_.start,_.end));return d.lastIndex=0,this.source.replace(d,(_,S)=>c.escapeRegExpCharacters(v[parseInt(S,10)]||""))}_buildAnchorCache(){let g,E,v,_,S=[],P=[],T=[],z=[];for(g=0,E=this.source.length;g<E;g++)v=this.source.charAt(g),S[g]=v,P[g]=v,T[g]=v,z[g]=v,v==="\\"&&g+1<E&&(_=this.source.charAt(g+1),_==="A"?(S[g+1]="￿",P[g+1]="￿",T[g+1]="A",z[g+1]="A"):_==="G"?(S[g+1]="￿",P[g+1]="G",T[g+1]="￿",z[g+1]="G"):(S[g+1]=_,P[g+1]=_,T[g+1]=_,z[g+1]=_),g++);return{A0_G0:S.join(""),A0_G1:P.join(""),A1_G0:T.join(""),A1_G1:z.join("")}}resolveAnchors(g,E){return this.hasAnchor&&this._anchorCache?g?E?this._anchorCache.A1_G1:this._anchorCache.A1_G0:E?this._anchorCache.A0_G1:this._anchorCache.A0_G0:this.source}}i.RegExpSource=A;class f{constructor(){this._items=[],this._hasAnchors=!1,this._cached=null,this._anchorCache={A0_G0:null,A0_G1:null,A1_G0:null,A1_G1:null}}dispose(){this._disposeCaches()}_disposeCaches(){this._cached&&(this._cached.dispose(),this._cached=null),this._anchorCache.A0_G0&&(this._anchorCache.A0_G0.dispose(),this._anchorCache.A0_G0=null),this._anchorCache.A0_G1&&(this._anchorCache.A0_G1.dispose(),this._anchorCache.A0_G1=null),this._anchorCache.A1_G0&&(this._anchorCache.A1_G0.dispose(),this._anchorCache.A1_G0=null),this._anchorCache.A1_G1&&(this._anchorCache.A1_G1.dispose(),this._anchorCache.A1_G1=null)}push(g){this._items.push(g),this._hasAnchors=this._hasAnchors||g.hasAnchor}unshift(g){this._items.unshift(g),this._hasAnchors=this._hasAnchors||g.hasAnchor}length(){return this._items.length}setSource(g,E){this._items[g].source!==E&&(this._disposeCaches(),this._items[g].setSource(E))}compile(g){if(!this._cached){let E=this._items.map(v=>v.source);this._cached=new j(g,E,this._items.map(v=>v.ruleId))}return this._cached}compileAG(g,E,v){return this._hasAnchors?E?v?(this._anchorCache.A1_G1||(this._anchorCache.A1_G1=this._resolveAnchors(g,E,v)),this._anchorCache.A1_G1):(this._anchorCache.A1_G0||(this._anchorCache.A1_G0=this._resolveAnchors(g,E,v)),this._anchorCache.A1_G0):v?(this._anchorCache.A0_G1||(this._anchorCache.A0_G1=this._resolveAnchors(g,E,v)),this._anchorCache.A0_G1):(this._anchorCache.A0_G0||(this._anchorCache.A0_G0=this._resolveAnchors(g,E,v)),this._anchorCache.A0_G0):this.compile(g)}_resolveAnchors(g,E,v){let _=this._items.map(S=>S.resolveAnchors(E,v));return new j(g,_,this._items.map(S=>S.ruleId))}}i.RegExpSourceList=f;class j{constructor(g,E,v){this.regExps=E,this.rules=v,this.scanner=g.createOnigScanner(E)}dispose(){typeof this.scanner.dispose=="function"&&this.scanner.dispose()}toString(){const g=[];for(let E=0,v=this.rules.length;E<v;E++)g.push("   - "+this.rules[E]+": "+this.regExps[E]);return g.join(`
`)}findNextMatchSync(g,E,v){const _=this.scanner.findNextMatchSync(g,E,v);return _?{ruleId:this.rules[_.index],captureIndices:_.captureIndices}:null}}i.CompiledRule=j},583:(s,i,u)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.ThemeTrieElement=i.ThemeTrieElementRule=i.ColorMap=i.fontStyleToString=i.ParsedThemeRule=i.parseTheme=i.StyleAttributes=i.ScopeStack=i.Theme=void 0;const c=u(878);class l{constructor(A,f,j){this._colorMap=A,this._defaults=f,this._root=j,this._cachedMatchRoot=new c.CachedFn(C=>this._root.match(C))}static createFromRawTheme(A,f){return this.createFromParsedTheme(h(A),f)}static createFromParsedTheme(A,f){return function(j,C){j.sort((T,z)=>{let V=c.strcmp(T.scope,z.scope);return V!==0?V:(V=c.strArrCmp(T.parentScopes,z.parentScopes),V!==0?V:T.index-z.index)});let g=0,E="#000000",v="#ffffff";for(;j.length>=1&&j[0].scope==="";){let T=j.shift();T.fontStyle!==-1&&(g=T.fontStyle),T.foreground!==null&&(E=T.foreground),T.background!==null&&(v=T.background)}let _=new y(C),S=new m(g,_.getId(E),_.getId(v)),P=new I(new x(0,null,-1,0,0),[]);for(let T=0,z=j.length;T<z;T++){let V=j[T];P.insert(0,V.scope,V.parentScopes,V.fontStyle,_.getId(V.foreground),_.getId(V.background))}return new l(_,S,P)}(A,f)}getColorMap(){return this._colorMap.getColorMap()}getDefaults(){return this._defaults}match(A){if(A===null)return this._defaults;const f=A.scopeName,j=this._cachedMatchRoot.get(f).find(C=>function(g,E){if(E===null)return!0;let v=0,_=E[v];for(;g;){if(d(g.scopeName,_)){if(v++,v===E.length)return!0;_=E[v]}g=g.parent}return!1}(A.parent,C.parentScopes));return j?new m(j.fontStyle,j.foreground,j.background):null}}i.Theme=l;class p{constructor(A,f){this.parent=A,this.scopeName=f}static push(A,f){for(const j of f)A=new p(A,j);return A}static from(...A){let f=null;for(let j=0;j<A.length;j++)f=new p(f,A[j]);return f}push(A){return new p(this,A)}getSegments(){let A=this;const f=[];for(;A;)f.push(A.scopeName),A=A.parent;return f.reverse(),f}toString(){return this.getSegments().join(" ")}extends(A){return this===A||this.parent!==null&&this.parent.extends(A)}getExtensionIfDefined(A){const f=[];let j=this;for(;j&&j!==A;)f.push(j.scopeName),j=j.parent;return j===A?f.reverse():void 0}}function d(w,A){return A===w||w.startsWith(A)&&w[A.length]==="."}i.ScopeStack=p;class m{constructor(A,f,j){this.fontStyle=A,this.foregroundId=f,this.backgroundId=j}}function h(w){if(!w)return[];if(!w.settings||!Array.isArray(w.settings))return[];let A=w.settings,f=[],j=0;for(let C=0,g=A.length;C<g;C++){let E,v=A[C];if(!v.settings)continue;if(typeof v.scope=="string"){let T=v.scope;T=T.replace(/^[,]+/,""),T=T.replace(/[,]+$/,""),E=T.split(",")}else E=Array.isArray(v.scope)?v.scope:[""];let _=-1;if(typeof v.settings.fontStyle=="string"){_=0;let T=v.settings.fontStyle.split(" ");for(let z=0,V=T.length;z<V;z++)switch(T[z]){case"italic":_|=1;break;case"bold":_|=2;break;case"underline":_|=4;break;case"strikethrough":_|=8}}let S=null;typeof v.settings.foreground=="string"&&c.isValidHexColor(v.settings.foreground)&&(S=v.settings.foreground);let P=null;typeof v.settings.background=="string"&&c.isValidHexColor(v.settings.background)&&(P=v.settings.background);for(let T=0,z=E.length;T<z;T++){let V=E[T].trim().split(" "),W=V[V.length-1],ae=null;V.length>1&&(ae=V.slice(0,V.length-1),ae.reverse()),f[j++]=new b(W,ae,C,_,S,P)}}return f}i.StyleAttributes=m,i.parseTheme=h;class b{constructor(A,f,j,C,g,E){this.scope=A,this.parentScopes=f,this.index=j,this.fontStyle=C,this.foreground=g,this.background=E}}i.ParsedThemeRule=b,i.fontStyleToString=function(w){if(w===-1)return"not set";let A="";return 1&w&&(A+="italic "),2&w&&(A+="bold "),4&w&&(A+="underline "),8&w&&(A+="strikethrough "),A===""&&(A="none"),A.trim()};class y{constructor(A){if(this._lastColorId=0,this._id2color=[],this._color2id=Object.create(null),Array.isArray(A)){this._isFrozen=!0;for(let f=0,j=A.length;f<j;f++)this._color2id[A[f]]=f,this._id2color[f]=A[f]}else this._isFrozen=!1}getId(A){if(A===null)return 0;A=A.toUpperCase();let f=this._color2id[A];if(f)return f;if(this._isFrozen)throw new Error(`Missing color in color map - ${A}`);return f=++this._lastColorId,this._color2id[A]=f,this._id2color[f]=A,f}getColorMap(){return this._id2color.slice(0)}}i.ColorMap=y;class x{constructor(A,f,j,C,g){this.scopeDepth=A,this.parentScopes=f,this.fontStyle=j,this.foreground=C,this.background=g}clone(){return new x(this.scopeDepth,this.parentScopes,this.fontStyle,this.foreground,this.background)}static cloneArr(A){let f=[];for(let j=0,C=A.length;j<C;j++)f[j]=A[j].clone();return f}acceptOverwrite(A,f,j,C){this.scopeDepth>A?console.log("how did this happen?"):this.scopeDepth=A,f!==-1&&(this.fontStyle=f),j!==0&&(this.foreground=j),C!==0&&(this.background=C)}}i.ThemeTrieElementRule=x;class I{constructor(A,f=[],j={}){this._mainRule=A,this._children=j,this._rulesWithParentScopes=f}static _sortBySpecificity(A){return A.length===1||A.sort(this._cmpBySpecificity),A}static _cmpBySpecificity(A,f){if(A.scopeDepth===f.scopeDepth){const j=A.parentScopes,C=f.parentScopes;let g=j===null?0:j.length,E=C===null?0:C.length;if(g===E)for(let v=0;v<g;v++){const _=j[v].length,S=C[v].length;if(_!==S)return S-_}return E-g}return f.scopeDepth-A.scopeDepth}match(A){if(A==="")return I._sortBySpecificity([].concat(this._mainRule).concat(this._rulesWithParentScopes));let f,j,C=A.indexOf(".");return C===-1?(f=A,j=""):(f=A.substring(0,C),j=A.substring(C+1)),this._children.hasOwnProperty(f)?this._children[f].match(j):I._sortBySpecificity([].concat(this._mainRule).concat(this._rulesWithParentScopes))}insert(A,f,j,C,g,E){if(f==="")return void this._doInsertHere(A,j,C,g,E);let v,_,S,P=f.indexOf(".");P===-1?(v=f,_=""):(v=f.substring(0,P),_=f.substring(P+1)),this._children.hasOwnProperty(v)?S=this._children[v]:(S=new I(this._mainRule.clone(),x.cloneArr(this._rulesWithParentScopes)),this._children[v]=S),S.insert(A+1,_,j,C,g,E)}_doInsertHere(A,f,j,C,g){if(f!==null){for(let E=0,v=this._rulesWithParentScopes.length;E<v;E++){let _=this._rulesWithParentScopes[E];if(c.strArrCmp(_.parentScopes,f)===0)return void _.acceptOverwrite(A,j,C,g)}j===-1&&(j=this._mainRule.fontStyle),C===0&&(C=this._mainRule.foreground),g===0&&(g=this._mainRule.background),this._rulesWithParentScopes.push(new x(A,f,j,C,g))}else this._mainRule.acceptOverwrite(A,j,C,g)}}i.ThemeTrieElement=I},878:(s,i)=>{function u(p){return Array.isArray(p)?function(d){let m=[];for(let h=0,b=d.length;h<b;h++)m[h]=u(d[h]);return m}(p):typeof p=="object"?function(d){let m={};for(let h in d)m[h]=u(d[h]);return m}(p):p}Object.defineProperty(i,"__esModule",{value:!0}),i.performanceNow=i.CachedFn=i.escapeRegExpCharacters=i.isValidHexColor=i.strArrCmp=i.strcmp=i.RegexSource=i.basename=i.mergeObjects=i.clone=void 0,i.clone=function(p){return u(p)},i.mergeObjects=function(p,...d){return d.forEach(m=>{for(let h in m)p[h]=m[h]}),p},i.basename=function p(d){const m=~d.lastIndexOf("/")||~d.lastIndexOf("\\");return m===0?d:~m==d.length-1?p(d.substring(0,d.length-1)):d.substr(1+~m)};let c=/\$(\d+)|\${(\d+):\/(downcase|upcase)}/g;function l(p,d){return p<d?-1:p>d?1:0}i.RegexSource=class{static hasCaptures(p){return p!==null&&(c.lastIndex=0,c.test(p))}static replaceCaptures(p,d,m){return p.replace(c,(h,b,y,x)=>{let I=m[parseInt(b||y,10)];if(!I)return h;{let w=d.substring(I.start,I.end);for(;w[0]===".";)w=w.substring(1);switch(x){case"downcase":return w.toLowerCase();case"upcase":return w.toUpperCase();default:return w}}})}},i.strcmp=l,i.strArrCmp=function(p,d){if(p===null&&d===null)return 0;if(!p)return-1;if(!d)return 1;let m=p.length,h=d.length;if(m===h){for(let b=0;b<m;b++){let y=l(p[b],d[b]);if(y!==0)return y}return 0}return m-h},i.isValidHexColor=function(p){return!!(/^#[0-9a-f]{6}$/i.test(p)||/^#[0-9a-f]{8}$/i.test(p)||/^#[0-9a-f]{3}$/i.test(p)||/^#[0-9a-f]{4}$/i.test(p))},i.escapeRegExpCharacters=function(p){return p.replace(/[\-\\\{\}\*\+\?\|\^\$\.\,\[\]\(\)\#\s]/g,"\\$&")},i.CachedFn=class{constructor(p){this.fn=p,this.cache=new Map}get(p){if(this.cache.has(p))return this.cache.get(p);const d=this.fn(p);return this.cache.set(p,d),d}},i.performanceNow=typeof performance>"u"?function(){return Date.now()}:function(){return performance.now()}}},o={};return function s(i){var u=o[i];if(u!==void 0)return u.exports;var c=o[i]={exports:{}};return r[i].call(c.exports,c,c.exports,s),c.exports}(787)})()})})(xu);var wu=xu.exports,ju={exports:{}};(function(e,t){(function(n,r){e.exports=r()})(Za,()=>{return n={770:function(o,s,i){var u=this&&this.__importDefault||function(x){return x&&x.__esModule?x:{default:x}};Object.defineProperty(s,"__esModule",{value:!0}),s.setDefaultDebugCall=s.createOnigScanner=s.createOnigString=s.loadWASM=s.OnigScanner=s.OnigString=void 0;const c=u(i(418));let l=null,p=!1;class d{static _utf8ByteLength(I){let w=0;for(let A=0,f=I.length;A<f;A++){const j=I.charCodeAt(A);let C=j,g=!1;if(j>=55296&&j<=56319&&A+1<f){const E=I.charCodeAt(A+1);E>=56320&&E<=57343&&(C=65536+(j-55296<<10)|E-56320,g=!0)}w+=C<=127?1:C<=2047?2:C<=65535?3:4,g&&A++}return w}constructor(I){const w=I.length,A=d._utf8ByteLength(I),f=A!==w,j=f?new Uint32Array(w+1):null;f&&(j[w]=A);const C=f?new Uint32Array(A+1):null;f&&(C[A]=w);const g=new Uint8Array(A);let E=0;for(let v=0;v<w;v++){const _=I.charCodeAt(v);let S=_,P=!1;if(_>=55296&&_<=56319&&v+1<w){const T=I.charCodeAt(v+1);T>=56320&&T<=57343&&(S=65536+(_-55296<<10)|T-56320,P=!0)}f&&(j[v]=E,P&&(j[v+1]=E),S<=127?C[E+0]=v:S<=2047?(C[E+0]=v,C[E+1]=v):S<=65535?(C[E+0]=v,C[E+1]=v,C[E+2]=v):(C[E+0]=v,C[E+1]=v,C[E+2]=v,C[E+3]=v)),S<=127?g[E++]=S:S<=2047?(g[E++]=192|(1984&S)>>>6,g[E++]=128|(63&S)>>>0):S<=65535?(g[E++]=224|(61440&S)>>>12,g[E++]=128|(4032&S)>>>6,g[E++]=128|(63&S)>>>0):(g[E++]=240|(1835008&S)>>>18,g[E++]=128|(258048&S)>>>12,g[E++]=128|(4032&S)>>>6,g[E++]=128|(63&S)>>>0),P&&v++}this.utf16Length=w,this.utf8Length=A,this.utf16Value=I,this.utf8Value=g,this.utf16OffsetToUtf8=j,this.utf8OffsetToUtf16=C}createString(I){const w=I._omalloc(this.utf8Length);return I.HEAPU8.set(this.utf8Value,w),w}}class m{constructor(I){if(this.id=++m.LAST_ID,!l)throw new Error("Must invoke loadWASM first.");this._onigBinding=l,this.content=I;const w=new d(I);this.utf16Length=w.utf16Length,this.utf8Length=w.utf8Length,this.utf16OffsetToUtf8=w.utf16OffsetToUtf8,this.utf8OffsetToUtf16=w.utf8OffsetToUtf16,this.utf8Length<1e4&&!m._sharedPtrInUse?(m._sharedPtr||(m._sharedPtr=l._omalloc(1e4)),m._sharedPtrInUse=!0,l.HEAPU8.set(w.utf8Value,m._sharedPtr),this.ptr=m._sharedPtr):this.ptr=w.createString(l)}convertUtf8OffsetToUtf16(I){return this.utf8OffsetToUtf16?I<0?0:I>this.utf8Length?this.utf16Length:this.utf8OffsetToUtf16[I]:I}convertUtf16OffsetToUtf8(I){return this.utf16OffsetToUtf8?I<0?0:I>this.utf16Length?this.utf8Length:this.utf16OffsetToUtf8[I]:I}dispose(){this.ptr===m._sharedPtr?m._sharedPtrInUse=!1:this._onigBinding._ofree(this.ptr)}}s.OnigString=m,m.LAST_ID=0,m._sharedPtr=0,m._sharedPtrInUse=!1;class h{constructor(I,w){var A,f;if(!l)throw new Error("Must invoke loadWASM first.");const j=[],C=[];for(let P=0,T=I.length;P<T;P++){const z=new d(I[P]);j[P]=z.createString(l),C[P]=z.utf8Length}const g=l._omalloc(4*I.length);l.HEAPU32.set(j,g/4);const E=l._omalloc(4*I.length);l.HEAPU32.set(C,E/4),this._onigBinding=l,this._options=(A=w==null?void 0:w.options)!==null&&A!==void 0?A:[10];const v=this.onigOptions(this._options),_=this.onigSyntax((f=w==null?void 0:w.syntax)!==null&&f!==void 0?f:0),S=l._createOnigScanner(g,E,I.length,v,_);this._ptr=S;for(let P=0,T=I.length;P<T;P++)l._ofree(j[P]);l._ofree(E),l._ofree(g),S===0&&function(P){throw new Error(P.UTF8ToString(P._getLastOnigError()))}(l)}dispose(){this._onigBinding._freeOnigScanner(this._ptr)}findNextMatchSync(I,w,A){let f=p,j=this._options;if(Array.isArray(A)?(A.includes(25)&&(f=!0),j=j.concat(A)):typeof A=="boolean"&&(f=A),typeof I=="string"){I=new m(I);const C=this._findNextMatchSync(I,w,f,j);return I.dispose(),C}return this._findNextMatchSync(I,w,f,j)}_findNextMatchSync(I,w,A,f){const j=this._onigBinding,C=this.onigOptions(f);let g;if(g=A?j._findNextOnigScannerMatchDbg(this._ptr,I.id,I.ptr,I.utf8Length,I.convertUtf16OffsetToUtf8(w),C):j._findNextOnigScannerMatch(this._ptr,I.id,I.ptr,I.utf8Length,I.convertUtf16OffsetToUtf8(w),C),g===0)return null;const E=j.HEAPU32;let v=g/4;const _=E[v++],S=E[v++];let P=[];for(let T=0;T<S;T++){const z=I.convertUtf8OffsetToUtf16(E[v++]),V=I.convertUtf8OffsetToUtf16(E[v++]);P[T]={start:z,end:V,length:V-z}}return{index:_,captureIndices:P}}onigOptions(I){return I.map(w=>this.onigOption(w)).reduce((w,A)=>w|A,this._onigBinding.ONIG_OPTION_NONE)}onigSyntax(I){switch(I){case 0:return this._onigBinding.ONIG_SYNTAX_DEFAULT;case 1:return this._onigBinding.ONIG_SYNTAX_ASIS;case 2:return this._onigBinding.ONIG_SYNTAX_POSIX_BASIC;case 3:return this._onigBinding.ONIG_SYNTAX_POSIX_EXTENDED;case 4:return this._onigBinding.ONIG_SYNTAX_EMACS;case 5:return this._onigBinding.ONIG_SYNTAX_GREP;case 6:return this._onigBinding.ONIG_SYNTAX_GNU_REGEX;case 7:return this._onigBinding.ONIG_SYNTAX_JAVA;case 8:return this._onigBinding.ONIG_SYNTAX_PERL;case 9:return this._onigBinding.ONIG_SYNTAX_PERL_NG;case 10:return this._onigBinding.ONIG_SYNTAX_RUBY;case 11:return this._onigBinding.ONIG_SYNTAX_PYTHON;case 12:return this._onigBinding.ONIG_SYNTAX_ONIGURUMA}}onigOption(I){switch(I){case 1:return this._onigBinding.ONIG_OPTION_NONE;case 0:case 25:return this._onigBinding.ONIG_OPTION_DEFAULT;case 2:return this._onigBinding.ONIG_OPTION_IGNORECASE;case 3:return this._onigBinding.ONIG_OPTION_EXTEND;case 4:return this._onigBinding.ONIG_OPTION_MULTILINE;case 5:return this._onigBinding.ONIG_OPTION_SINGLELINE;case 6:return this._onigBinding.ONIG_OPTION_FIND_LONGEST;case 7:return this._onigBinding.ONIG_OPTION_FIND_NOT_EMPTY;case 8:return this._onigBinding.ONIG_OPTION_NEGATE_SINGLELINE;case 9:return this._onigBinding.ONIG_OPTION_DONT_CAPTURE_GROUP;case 10:return this._onigBinding.ONIG_OPTION_CAPTURE_GROUP;case 11:return this._onigBinding.ONIG_OPTION_NOTBOL;case 12:return this._onigBinding.ONIG_OPTION_NOTEOL;case 13:return this._onigBinding.ONIG_OPTION_CHECK_VALIDITY_OF_STRING;case 14:return this._onigBinding.ONIG_OPTION_IGNORECASE_IS_ASCII;case 15:return this._onigBinding.ONIG_OPTION_WORD_IS_ASCII;case 16:return this._onigBinding.ONIG_OPTION_DIGIT_IS_ASCII;case 17:return this._onigBinding.ONIG_OPTION_SPACE_IS_ASCII;case 18:return this._onigBinding.ONIG_OPTION_POSIX_IS_ASCII;case 19:return this._onigBinding.ONIG_OPTION_TEXT_SEGMENT_EXTENDED_GRAPHEME_CLUSTER;case 20:return this._onigBinding.ONIG_OPTION_TEXT_SEGMENT_WORD;case 21:return this._onigBinding.ONIG_OPTION_NOT_BEGIN_STRING;case 22:return this._onigBinding.ONIG_OPTION_NOT_END_STRING;case 23:return this._onigBinding.ONIG_OPTION_NOT_BEGIN_POSITION;case 24:return this._onigBinding.ONIG_OPTION_CALLBACK_EACH_MATCH}}}s.OnigScanner=h;let b=!1,y=null;s.loadWASM=function(x){if(b)return y;let I,w,A,f;if(b=!0,function(j){return typeof j.instantiator=="function"}(x))I=x.instantiator,w=x.print;else{let j;(function(C){return C.data!==void 0})(x)?(j=x.data,w=x.print):j=x,I=function(C){return typeof Response<"u"&&C instanceof Response}(j)?typeof WebAssembly.instantiateStreaming=="function"?function(C){return g=>WebAssembly.instantiateStreaming(C,g)}(j):function(C){return async g=>{const E=await C.arrayBuffer();return WebAssembly.instantiate(E,g)}}(j):function(C){return g=>WebAssembly.instantiate(C,g)}(j)}return y=new Promise((j,C)=>{A=j,f=C}),function(j,C,g,E){(0,c.default)({print:C,instantiateWasm:(v,_)=>{if(typeof performance>"u"){const S=()=>Date.now();v.env.emscripten_get_now=S,v.wasi_snapshot_preview1.emscripten_get_now=S}return j(v).then(S=>_(S.instance),E),{}}}).then(v=>{l=v,g()})}(I,w,A,f),y},s.createOnigString=function(x){return new m(x)},s.createOnigScanner=function(x){return new h(x)},s.setDefaultDebugCall=function(x){p=x}},418:o=>{var s=(typeof document<"u"&&document.currentScript&&document.currentScript.src,function(i={}){var u,c,l=i;l.ready=new Promise((U,X)=>{u=U,c=X});var p,d=Object.assign({},l);typeof read<"u"&&read,p=U=>{if(typeof readbuffer=="function")return new Uint8Array(readbuffer(U));let X=read(U,"binary");return typeof X=="object"||V(pe),X;var pe},typeof clearTimeout>"u"&&(globalThis.clearTimeout=U=>{}),typeof setTimeout>"u"&&(globalThis.setTimeout=U=>typeof U=="function"?U():V()),typeof scriptArgs<"u"&&scriptArgs,typeof onig_print<"u"&&(typeof console>"u"&&(console={}),console.log=onig_print,console.warn=console.error=typeof printErr<"u"?printErr:onig_print);var m,h,b=l.print||console.log.bind(console),y=l.printErr||console.error.bind(console);Object.assign(l,d),d=null,l.arguments&&l.arguments,l.thisProgram&&l.thisProgram,l.quit&&l.quit,l.wasmBinary&&(m=l.wasmBinary),l.noExitRuntime,typeof WebAssembly!="object"&&V("no native wasm support detected");var x,I,w,A,f,j,C,g,E=!1;function v(){var U=h.buffer;l.HEAP8=x=new Int8Array(U),l.HEAP16=w=new Int16Array(U),l.HEAPU8=I=new Uint8Array(U),l.HEAPU16=A=new Uint16Array(U),l.HEAP32=f=new Int32Array(U),l.HEAPU32=j=new Uint32Array(U),l.HEAPF32=C=new Float32Array(U),l.HEAPF64=g=new Float64Array(U)}var _=[],S=[],P=[],T=0,z=null;function V(U){l.onAbort&&l.onAbort(U),y(U="Aborted("+U+")"),E=!0,U+=". Build with -sASSERTIONS for more info.";var X=new WebAssembly.RuntimeError(U);throw c(X),X}var W,ae;function Ce(U){return U.startsWith("data:application/octet-stream;base64,")}function we(U){if(U==W&&m)return new Uint8Array(m);if(p)return p(U);throw"both async and sync fetching of the wasm failed"}function ue(U,X,pe){return function(oe){return Promise.resolve().then(()=>we(oe))}(U).then(oe=>WebAssembly.instantiate(oe,X)).then(oe=>oe).then(pe,oe=>{y(`failed to asynchronously prepare wasm: ${oe}`),V(oe)})}Ce(W="onig.wasm")||(ae=W,W=l.locateFile?l.locateFile(ae,""):""+ae);var de=U=>{for(;U.length>0;)U.shift()(l)},be=void 0,Ie=U=>{for(var X="",pe=U;I[pe];)X+=be[I[pe++]];return X},Pe={},Re={},$e=void 0,st=U=>{throw new $e(U)},re=void 0,qe=(U,X,pe)=>{function oe(We){var Fe=pe(We);Fe.length!==U.length&&(ut=>{throw new re(ut)})("Mismatched type converter count");for(var Me=0;Me<U.length;++Me)Ve(U[Me],Fe[Me])}U.forEach(function(We){});var ie=new Array(X.length),xe=[],je=0;X.forEach((We,Fe)=>{Re.hasOwnProperty(We)?ie[Fe]=Re[We]:(xe.push(We),Pe.hasOwnProperty(We)||(Pe[We]=[]),Pe[We].push(()=>{ie[Fe]=Re[We],++je===xe.length&&oe(ie)}))}),xe.length===0&&oe(ie)};function Ve(U,X,pe={}){if(!("argPackAdvance"in X))throw new TypeError("registerType registeredInstance requires argPackAdvance");return function(oe,ie,xe={}){var je=ie.name;if(oe||st(`type "${je}" must have a positive integer typeid pointer`),Re.hasOwnProperty(oe)){if(xe.ignoreDuplicateRegistrations)return;st(`Cannot register type '${je}' twice`)}if(Re[oe]=ie,Pe.hasOwnProperty(oe)){var We=Pe[oe];delete Pe[oe],We.forEach(Fe=>Fe())}}(U,X,pe)}function Lt(){this.allocated=[void 0],this.freelist=[]}var It=new Lt,ua=()=>{for(var U=0,X=It.reserved;X<It.allocated.length;++X)It.allocated[X]!==void 0&&++U;return U},ra=U=>(U||st("Cannot use deleted val. handle = "+U),It.get(U).value),Pt=U=>{switch(U){case void 0:return 1;case null:return 2;case!0:return 3;case!1:return 4;default:return It.allocate({refcount:1,value:U})}};function Qt(U){return this.fromWireType(f[U>>2])}var sa=(U,X)=>{switch(X){case 4:return function(pe){return this.fromWireType(C[pe>>2])};case 8:return function(pe){return this.fromWireType(g[pe>>3])};default:throw new TypeError(`invalid float width (${X}): ${U}`)}},Xt=(U,X,pe)=>{switch(X){case 1:return pe?oe=>x[oe>>0]:oe=>I[oe>>0];case 2:return pe?oe=>w[oe>>1]:oe=>A[oe>>1];case 4:return pe?oe=>f[oe>>2]:oe=>j[oe>>2];default:throw new TypeError(`invalid integer width (${X}): ${U}`)}};function Ut(U){return this.fromWireType(j[U>>2])}var Ht,Ct=typeof TextDecoder<"u"?new TextDecoder("utf8"):void 0,Nt=(U,X,pe)=>{for(var oe=X+pe,ie=X;U[ie]&&!(ie>=oe);)++ie;if(ie-X>16&&U.buffer&&Ct)return Ct.decode(U.subarray(X,ie));for(var xe="";X<ie;){var je=U[X++];if(128&je){var We=63&U[X++];if((224&je)!=192){var Fe=63&U[X++];if((je=(240&je)==224?(15&je)<<12|We<<6|Fe:(7&je)<<18|We<<12|Fe<<6|63&U[X++])<65536)xe+=String.fromCharCode(je);else{var Me=je-65536;xe+=String.fromCharCode(55296|Me>>10,56320|1023&Me)}}else xe+=String.fromCharCode((31&je)<<6|We)}else xe+=String.fromCharCode(je)}return xe},Et=(U,X)=>U?Nt(I,U,X):"",da=typeof TextDecoder<"u"?new TextDecoder("utf-16le"):void 0,se=(U,X)=>{for(var pe=U,oe=pe>>1,ie=oe+X/2;!(oe>=ie)&&A[oe];)++oe;if((pe=oe<<1)-U>32&&da)return da.decode(I.subarray(U,pe));for(var xe="",je=0;!(je>=X/2);++je){var We=w[U+2*je>>1];if(We==0)break;xe+=String.fromCharCode(We)}return xe},Q=(U,X,pe)=>{if(pe===void 0&&(pe=2147483647),pe<2)return 0;for(var oe=X,ie=(pe-=2)<2*U.length?pe/2:U.length,xe=0;xe<ie;++xe){var je=U.charCodeAt(xe);w[X>>1]=je,X+=2}return w[X>>1]=0,X-oe},J=U=>2*U.length,le=(U,X)=>{for(var pe=0,oe="";!(pe>=X/4);){var ie=f[U+4*pe>>2];if(ie==0)break;if(++pe,ie>=65536){var xe=ie-65536;oe+=String.fromCharCode(55296|xe>>10,56320|1023&xe)}else oe+=String.fromCharCode(ie)}return oe},ve=(U,X,pe)=>{if(pe===void 0&&(pe=2147483647),pe<4)return 0;for(var oe=X,ie=oe+pe-4,xe=0;xe<U.length;++xe){var je=U.charCodeAt(xe);if(je>=55296&&je<=57343&&(je=65536+((1023&je)<<10)|1023&U.charCodeAt(++xe)),f[X>>2]=je,(X+=4)+4>ie)break}return f[X>>2]=0,X-oe},Ee=U=>{for(var X=0,pe=0;pe<U.length;++pe){var oe=U.charCodeAt(pe);oe>=55296&&oe<=57343&&++pe,X+=4}return X};Ht=()=>performance.now();var Je=U=>{var X=(U-h.buffer.byteLength+65535)/65536;try{return h.grow(X),v(),1}catch{}},Ye=[null,[],[]];(()=>{for(var U=new Array(256),X=0;X<256;++X)U[X]=String.fromCharCode(X);be=U})(),$e=l.BindingError=class extends Error{constructor(U){super(U),this.name="BindingError"}},re=l.InternalError=class extends Error{constructor(U){super(U),this.name="InternalError"}},Object.assign(Lt.prototype,{get(U){return this.allocated[U]},has(U){return this.allocated[U]!==void 0},allocate(U){var X=this.freelist.pop()||this.allocated.length;return this.allocated[X]=U,X},free(U){this.allocated[U]=void 0,this.freelist.push(U)}}),It.allocated.push({value:void 0},{value:null},{value:!0},{value:!1}),It.reserved=It.allocated.length,l.count_emval_handles=ua;var lt,St={_embind_register_bigint:(U,X,pe,oe,ie)=>{},_embind_register_bool:(U,X,pe,oe)=>{Ve(U,{name:X=Ie(X),fromWireType:function(ie){return!!ie},toWireType:function(ie,xe){return xe?pe:oe},argPackAdvance:8,readValueFromPointer:function(ie){return this.fromWireType(I[ie])},destructorFunction:null})},_embind_register_constant:(U,X,pe)=>{U=Ie(U),qe([],[X],function(oe){return oe=oe[0],l[U]=oe.fromWireType(pe),[]})},_embind_register_emval:(U,X)=>{Ve(U,{name:X=Ie(X),fromWireType:pe=>{var oe=ra(pe);return(ie=>{ie>=It.reserved&&--It.get(ie).refcount==0&&It.free(ie)})(pe),oe},toWireType:(pe,oe)=>Pt(oe),argPackAdvance:8,readValueFromPointer:Qt,destructorFunction:null})},_embind_register_float:(U,X,pe)=>{Ve(U,{name:X=Ie(X),fromWireType:oe=>oe,toWireType:(oe,ie)=>ie,argPackAdvance:8,readValueFromPointer:sa(X,pe),destructorFunction:null})},_embind_register_integer:(U,X,pe,oe,ie)=>{X=Ie(X);var xe=Fe=>Fe;if(oe===0){var je=32-8*pe;xe=Fe=>Fe<<je>>>je}var We=X.includes("unsigned");Ve(U,{name:X,fromWireType:xe,toWireType:We?function(Fe,Me){return this.name,Me>>>0}:function(Fe,Me){return this.name,Me},argPackAdvance:8,readValueFromPointer:Xt(X,pe,oe!==0),destructorFunction:null})},_embind_register_memory_view:(U,X,pe)=>{var oe=[Int8Array,Uint8Array,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array][X];function ie(xe){var je=j[xe>>2],We=j[xe+4>>2];return new oe(x.buffer,We,je)}Ve(U,{name:pe=Ie(pe),fromWireType:ie,argPackAdvance:8,readValueFromPointer:ie},{ignoreDuplicateRegistrations:!0})},_embind_register_std_string:(U,X)=>{var pe=(X=Ie(X))==="std::string";Ve(U,{name:X,fromWireType:oe=>{var ie,xe=j[oe>>2],je=oe+4;if(pe)for(var We=je,Fe=0;Fe<=xe;++Fe){var Me=je+Fe;if(Fe==xe||I[Me]==0){var ut=Et(We,Me-We);ie===void 0?ie=ut:(ie+="\0",ie+=ut),We=Me+1}}else{var dt=new Array(xe);for(Fe=0;Fe<xe;++Fe)dt[Fe]=String.fromCharCode(I[je+Fe]);ie=dt.join("")}return ct(oe),ie},toWireType:(oe,ie)=>{var xe;ie instanceof ArrayBuffer&&(ie=new Uint8Array(ie));var je=typeof ie=="string";je||ie instanceof Uint8Array||ie instanceof Uint8ClampedArray||ie instanceof Int8Array||st("Cannot pass non-string to std::string"),xe=pe&&je?(dt=>{for(var _t=0,ft=0;ft<dt.length;++ft){var na=dt.charCodeAt(ft);na<=127?_t++:na<=2047?_t+=2:na>=55296&&na<=57343?(_t+=4,++ft):_t+=3}return _t})(ie):ie.length;var We=Dt(4+xe+1),Fe=We+4;if(j[We>>2]=xe,pe&&je)((dt,_t,ft,na)=>{if(!(na>0))return 0;for(var rr=ft,nr=ft+na-1,sr=0;sr<dt.length;++sr){var qt=dt.charCodeAt(sr);if(qt>=55296&&qt<=57343&&(qt=65536+((1023&qt)<<10)|1023&dt.charCodeAt(++sr)),qt<=127){if(ft>=nr)break;_t[ft++]=qt}else if(qt<=2047){if(ft+1>=nr)break;_t[ft++]=192|qt>>6,_t[ft++]=128|63&qt}else if(qt<=65535){if(ft+2>=nr)break;_t[ft++]=224|qt>>12,_t[ft++]=128|qt>>6&63,_t[ft++]=128|63&qt}else{if(ft+3>=nr)break;_t[ft++]=240|qt>>18,_t[ft++]=128|qt>>12&63,_t[ft++]=128|qt>>6&63,_t[ft++]=128|63&qt}}_t[ft]=0})(ie,I,Fe,xe+1);else if(je)for(var Me=0;Me<xe;++Me){var ut=ie.charCodeAt(Me);ut>255&&(ct(Fe),st("String has UTF-16 code units that do not fit in 8 bits")),I[Fe+Me]=ut}else for(Me=0;Me<xe;++Me)I[Fe+Me]=ie[Me];return oe!==null&&oe.push(ct,We),We},argPackAdvance:8,readValueFromPointer:Ut,destructorFunction:oe=>ct(oe)})},_embind_register_std_wstring:(U,X,pe)=>{var oe,ie,xe,je,We;pe=Ie(pe),X===2?(oe=se,ie=Q,je=J,xe=()=>A,We=1):X===4&&(oe=le,ie=ve,je=Ee,xe=()=>j,We=2),Ve(U,{name:pe,fromWireType:Fe=>{for(var Me,ut=j[Fe>>2],dt=xe(),_t=Fe+4,ft=0;ft<=ut;++ft){var na=Fe+4+ft*X;if(ft==ut||dt[na>>We]==0){var rr=oe(_t,na-_t);Me===void 0?Me=rr:(Me+="\0",Me+=rr),_t=na+X}}return ct(Fe),Me},toWireType:(Fe,Me)=>{typeof Me!="string"&&st(`Cannot pass non-string to C++ string type ${pe}`);var ut=je(Me),dt=Dt(4+ut+X);return j[dt>>2]=ut>>We,ie(Me,dt+4,ut+X),Fe!==null&&Fe.push(ct,dt),dt},argPackAdvance:8,readValueFromPointer:Qt,destructorFunction:Fe=>ct(Fe)})},_embind_register_void:(U,X)=>{Ve(U,{isVoid:!0,name:X=Ie(X),argPackAdvance:0,fromWireType:()=>{},toWireType:(pe,oe)=>{}})},emscripten_get_now:Ht,emscripten_memcpy_big:(U,X,pe)=>I.copyWithin(U,X,X+pe),emscripten_resize_heap:U=>{var X=I.length,pe=2147483648;if((U>>>=0)>pe)return!1;for(var oe,ie=1;ie<=4;ie*=2){var xe=X*(1+.2/ie);xe=Math.min(xe,U+100663296);var je=Math.min(pe,(oe=Math.max(U,xe))+(65536-oe%65536)%65536);if(Je(je))return!0}return!1},fd_write:(U,X,pe,oe)=>{for(var ie=0,xe=0;xe<pe;xe++){var je=j[X>>2],We=j[X+4>>2];X+=8;for(var Fe=0;Fe<We;Fe++)Me=U,ut=I[je+Fe],dt=void 0,dt=Ye[Me],ut===0||ut===10?((Me===1?b:y)(Nt(dt,0)),dt.length=0):dt.push(ut);ie+=We}var Me,ut,dt;return j[oe>>2]=ie,0}},tt=function(){var U,X,pe,oe,ie={env:St,wasi_snapshot_preview1:St};function xe(je,We){var Fe,Me=je.exports;return h=(tt=Me).memory,v(),tt.__indirect_function_table,Fe=tt.__wasm_call_ctors,S.unshift(Fe),function(ut){if(T--,l.monitorRunDependencies&&l.monitorRunDependencies(T),T==0&&z){var dt=z;z=null,dt()}}(),Me}if(T++,l.monitorRunDependencies&&l.monitorRunDependencies(T),l.instantiateWasm)try{return l.instantiateWasm(ie,xe)}catch(je){y(`Module.instantiateWasm callback failed with error: ${je}`),c(je)}return(U=m,X=W,pe=ie,oe=function(je){xe(je.instance)},U||typeof WebAssembly.instantiateStreaming!="function"||Ce(X)||typeof fetch!="function"?ue(X,pe,oe):fetch(X,{credentials:"same-origin"}).then(je=>WebAssembly.instantiateStreaming(je,pe).then(oe,function(We){return y(`wasm streaming compile failed: ${We}`),y("falling back to ArrayBuffer instantiation"),ue(X,pe,oe)}))).catch(c),{}}(),Dt=U=>(Dt=tt.malloc)(U),ct=U=>(ct=tt.free)(U);function Kt(){function U(){lt||(lt=!0,l.calledRun=!0,E||(de(S),u(l),l.onRuntimeInitialized&&l.onRuntimeInitialized(),function(){if(l.postRun)for(typeof l.postRun=="function"&&(l.postRun=[l.postRun]);l.postRun.length;)X=l.postRun.shift(),P.unshift(X);var X;de(P)}()))}T>0||(function(){if(l.preRun)for(typeof l.preRun=="function"&&(l.preRun=[l.preRun]);l.preRun.length;)X=l.preRun.shift(),_.unshift(X);var X;de(_)}(),T>0||(l.setStatus?(l.setStatus("Running..."),setTimeout(function(){setTimeout(function(){l.setStatus("")},1),U()},1)):U()))}if(l._omalloc=U=>(l._omalloc=tt.omalloc)(U),l._ofree=U=>(l._ofree=tt.ofree)(U),l._getLastOnigError=()=>(l._getLastOnigError=tt.getLastOnigError)(),l._createOnigScanner=(U,X,pe,oe,ie)=>(l._createOnigScanner=tt.createOnigScanner)(U,X,pe,oe,ie),l._freeOnigScanner=U=>(l._freeOnigScanner=tt.freeOnigScanner)(U),l._findNextOnigScannerMatch=(U,X,pe,oe,ie,xe)=>(l._findNextOnigScannerMatch=tt.findNextOnigScannerMatch)(U,X,pe,oe,ie,xe),l._findNextOnigScannerMatchDbg=(U,X,pe,oe,ie,xe)=>(l._findNextOnigScannerMatchDbg=tt.findNextOnigScannerMatchDbg)(U,X,pe,oe,ie,xe),l.__embind_initialize_bindings=()=>(l.__embind_initialize_bindings=tt._embind_initialize_bindings)(),l.dynCall_jiji=(U,X,pe,oe,ie)=>(l.dynCall_jiji=tt.dynCall_jiji)(U,X,pe,oe,ie),l.UTF8ToString=Et,z=function U(){lt||Kt(),lt||(z=U)},l.preInit)for(typeof l.preInit=="function"&&(l.preInit=[l.preInit]);l.preInit.length>0;)l.preInit.pop()();return Kt(),i.ready});o.exports=s}},r={},function o(s){var i=r[s];if(i!==void 0)return i.exports;var u=r[s]={exports:{}};return n[s].call(u.exports,u,u.exports,o),u.exports}(770);var n,r})})(ju);var Go=ju.exports;const Ml=["select","exec","update","insert","insert into","create table","create database","alter table","add","rename","to","drop","drop table","drop database","delete","transaction","join","inner join","full join","full outer join","left join","left outer join","left semi join","right join","right outer join","left semijoin","cross join","context by","partitioned by","group by","pivot by","order by","cgroup by","partition by","csort","limit","top","into","from","where","having","with","set","as","in","or","not","on","like","values","if","exists","distinct","map","between","and","is null","is not null","case","when","then","else","end","union","union all","nulls first","nulls last","asc","desc"],Iu=["assert","const","mutable","def","defg","mapr","timer","do","for","while","return","continue","break","try","catch","throw","go","use","module","async","await","class","del","elif","except","finally","global","import","is","lambda","nonlocal","pass","raise","yield",...Ml,...Ml.map(e=>e.toUpperCase())].sort((e,t)=>{const n=e.length-t.length;return n!==0?-n:0}),vs=["NULL","true","false","pi","e","SCALAR","VECTOR","PAIR","MATRIX","SET","DICT","TABLE","VOID","BOOL","CHAR","SHORT","INT","INDEX","LONG","DATE","MONTH","TIME","MINUTE","SECOND","DATETIME","TIMESTAMP","NANOTIME","NANOTIMESTAMP","FLOAT","DOUBLE","SYMBOL","STRING","UUID","FUNCTIONDEF","HANDLE","CODE","DATASOURCE","RESOURCE","ANY","DICTIONARY","DATEHOUR","IPADDR","INT128","BLOB","COMPLEX","POINT","DURATION","OBJECT","DECIMAL32","DECIMAL64","DECIMAL128","SEQ","RANGE","HASH","VALUE","LIST","COMPO","VAR","SHARED","DEF","GLOBAL","TABLE_READ","TABLE_WRITE","TABLE_INSERT","TABLE_UPDATE","TABLE_DELETE","DBOBJ_CREATE","DBOBJ_DELETE","DB_DELETE","DB_INSERT","DB_MANAGE","DB_OWNER","DB_READ","DB_UPDATE","DB_WRITE","SCRIPT_EXEC","TASK_GROUP_MEM_LIMIT","TEST_EXEC","VIEW_EXEC","QUERY_RESULT_MEM_LIMIT","HINT_HASH","HINT_SNAPSHOT","HINT_KEEPORDER","HINT_SEQ","HINT_EXPLAIN","HINT_VECTORIZED","HEAD","CURRENT","TAIL","LINE","PIE","COLUMN","BAR","AREA","SCATTER","HISTOGRAM","KLINE","DEBUG","INFO","WARNING","ERROR","FIRST","LAST","ALL","NONE","HASH_PTN","True","False","None"];function Pg(e=!1){return{$schema:"https://raw.githubusercontent.com/martinring/tmlanguage/master/tmlanguage.json",name:e?"DolphinDB Python":"DolphinDB",scopeName:e?"source.dolphindb-python":"source.dolphindb",patterns:[{match:"\\.\\.\\.",name:"invalid.ellipsis.dolphindb"},{include:"#keyword"},{include:"#literal"},{include:"#comment"},{include:"#decorator"},{include:"#variable"},{include:"#operator"},{include:"#method_call"},{include:"#function_call"},{include:"#property"},{match:";",name:"punctuation.terminator.statement.dolphindb"},{match:",",name:"punctuation.separator.commma.dolphindb"}],repository:{keyword:{match:`\\b(?<![.$])(${Iu.join("|")})(?!(\\s*:|\\())\\b`,name:"keyword.control.dolphindb"},literal:{patterns:[{include:"#constant"},{include:"#datetime"},{include:"#string"},{include:"#number"}]},constant:{match:`\\b(?<![.$])(${vs.join("|")})(?!\\s*:)\\b`,name:"constant.language.int.dolphindb"},decorator:{match:"^@testing",name:"meta.decorator.dolphindb"},datetime:{patterns:[{match:"\\b[0-9]{4}[.][0-9]{2}[.][0-9]{2}[T ][0-9]{2}:[0-9]{2}:[0-9]{2}([.][0-9]{3,9})?\\b",name:"constant.numeric.datetime.datetime.dolphindb"},{match:"\\b[0-9]{4}\\.[0-9]{2}M\\b",name:"constant.numeric.datetime.month.dolphindb"},{match:"\\b[0-9]{4}\\.[0-9]{2}\\.[0-9]{2}\\b",name:"constant.numeric.datetime.date.dolphindb"},{match:"\\b[0-9]{2}:[0-9]{2}:[0-9]{2}([.][0-9]{3,9})?\\b",name:"constant.numeric.datetime.time.dolphindb"},{match:"\\b[0-9]{2}:[0-9]{2}m\\b",name:"constant.numeric.datetime.minute.dolphindb"}]},string:{patterns:[{include:"#string_single_quoted"},{include:"#string_double_quoted"},{begin:"'''",beginCaptures:{0:{name:"punctuation.definition.string.begin.dolphindb"}},end:"'''",endCaptures:{0:{name:"punctuation.definition.string.end.dolphindb"}},name:"string.quoted.single.heredoc.dolphindb",patterns:[{captures:{1:{name:"punctuation.definition.escape.backslash.dolphindb"}},match:"(\\\\).",name:"constant.character.escape.backslash.dolphindb"}]},{begin:'"""',beginCaptures:{0:{name:"punctuation.definition.string.begin.dolphindb"}},end:'"""',endCaptures:{0:{name:"punctuation.definition.string.end.dolphindb"}},name:"string.quoted.double.heredoc.dolphindb",patterns:[{captures:{1:{name:"punctuation.definition.escape.backslash.dolphindb"}},match:"(\\\\).",name:"constant.character.escape.backslash.dolphindb"},{include:"#interpolated_dolphindb"}]},{match:"`[\\w\\.]*",name:"string.quoted.other.dolphindb"}]},number:{patterns:[{match:"\\b[01]+[bB]\\b",name:"constant.numeric.binary.dolphindb"},{match:"\\b[0-9]+([clhsmyM]|ms)\\b",name:"constant.numeric.dolphindb"},{match:"\\b[0-9]+(\\.[0-9]+)?f\\b",name:"constant.numeric.dolphindb"},{match:`(?x)
(?:
  (?:\\b[0-9]+(\\.)[0-9]+[eE][+-]?[0-9]+\\b)| # 1.1E+3
  (?:\\b[0-9]+(\\.)[eE][+-]?[0-9]+\\b)|       # 1.E+3
  (?:\\b(\\.)[0-9]+[eE][+-]?[0-9]+\\b)|       # .1E+3
  (?:\\b[0-9]+[eE][+-]?[0-9]+\\b)|            # 1E+3
  (?:\\b[0-9]+(\\.)[0-9]+\\b)|                # 1.1
  (?:\\b[0-9]+(?=\\.{2,3}))|                  # 1 followed by a slice
  (?:\\b[0-9]+(\\.)\\b)|                      # 1.
  (?:\\b(\\.)[0-9]+\\b)|                      # .1
  (?:\\b[0-9]+\\b(?!\\.))                     # 1
)
`,captures:{0:{name:"constant.numeric.decimal.dolphindb"},1:{name:"punctuation.separator.decimal.period.dolphindb"},2:{name:"punctuation.separator.decimal.period.dolphindb"},3:{name:"punctuation.separator.decimal.period.dolphindb"},4:{name:"punctuation.separator.decimal.period.dolphindb"},5:{name:"punctuation.separator.decimal.period.dolphindb"},6:{name:"punctuation.separator.decimal.period.dolphindb"}}}]},string_single_quoted:{patterns:[{begin:"'",beginCaptures:{0:{name:"punctuation.definition.string.begin.dolphindb"}},end:"'",endCaptures:{0:{name:"punctuation.definition.string.end.dolphindb"}},name:"string.quoted.single.dolphindb",patterns:[{captures:{1:{name:"punctuation.definition.escape.backslash.dolphindb"}},match:"(\\\\)(x[0-9A-Fa-f]{2}|[0-2][0-7]{0,2}|3[0-6][0-7]?|37[0-7]?|[4-7][0-7]?|.)",name:"constant.character.escape.backslash.dolphindb"}]}]},string_double_quoted:{patterns:[{begin:'"',beginCaptures:{0:{name:"punctuation.definition.string.begin.dolphindb"}},end:'"',endCaptures:{0:{name:"punctuation.definition.string.end.dolphindb"}},name:"string.quoted.double.dolphindb",patterns:[{captures:{1:{name:"punctuation.definition.escape.backslash.dolphindb"}},match:"(\\\\)(x[0-9A-Fa-f]{2}|[0-2][0-7]{0,2}|3[0-6][0-7]|37[0-7]?|[4-7][0-7]?|.)",name:"constant.character.escape.backslash.dolphindb"},{include:"#interpolated_dolphindb"}]}]},function_call:{patterns:[{begin:"(@)?(\\w*!?)\\s*(?=\\()",beginCaptures:{1:{name:"variable.other.readwrite.instance.dolphindb"},2:{patterns:[{include:"#function_name"}]}},end:"(?<=\\))",name:"meta.function-call.dolphindb",patterns:[{include:"#arguments"}]}]},method_call:{patterns:[{begin:"(?:(\\.)|(::))\\s*(\\w*!?)(?=\\()",beginCaptures:{1:{name:"punctuation.separator.method.period.dolphindb"},2:{name:"keyword.operator.prototype.dolphindb"},3:{patterns:[{include:"#function_name"}]}},end:"(?<=\\))",name:"meta.method-call.dolphindb",patterns:[{include:"#arguments"}]}]},function_name:{patterns:[{match:"[^\\d\\W]\\w*!?",name:"entity.name.function.dolphindb"},{match:"\\d[\\w]*",name:"invalid.illegal.identifier.dolphindb"}]},function_params:{patterns:[{begin:"\\(",beginCaptures:{0:{name:"punctuation.definition.parameters.begin.bracket.round.dolphindb"}},end:"\\)",endCaptures:{0:{name:"punctuation.definition.parameters.end.bracket.round.dolphindb"}},name:"meta.parameters.dolphindb",patterns:[{include:"#variable"},{match:"(@(?:[a-zA-Z_$][\\w$]*)?)(\\.\\.\\.)?",captures:{1:{name:"variable.parameter.function.readwrite.instance.dolphindb"},2:{name:"keyword.operator.splat.dolphindb"}}},{include:"$self"}]}]},comment:{patterns:e?[{begin:"#",beginCaptures:{0:{name:"punctuation.definition.comment.dolphindb"}},end:"$",name:"comment.line.number-sign.dolphindb"}]:[{begin:"/\\*",beginCaptures:{0:{name:"punctuation.definition.comment.dolphindb"}},end:"\\*/",endCaptures:{0:{name:"punctuation.definition.comment.dolphindb"}},name:"comment.block.dolphindb"},{begin:"//",beginCaptures:{0:{name:"punctuation.definition.comment.dolphindb"}},end:"$",name:"comment.line.number-sign.dolphindb"}]},arguments:{patterns:[{begin:"\\(",beginCaptures:{0:{name:"punctuation.definition.arguments.begin.bracket.round.dolphindb"}},end:"\\)",endCaptures:{0:{name:"punctuation.definition.arguments.end.bracket.round.dolphindb"}},name:"meta.arguments.dolphindb",patterns:[{include:"$self"},{include:"#literal"},{include:"#variable"}]}]},variable:{patterns:[{match:"(@)([a-zA-Z_\\$]\\w*)?",name:"variable.other.readwrite.instance.dolphindb"}]},interpolated_dolphindb:{patterns:[{begin:"\\#\\{",captures:{0:{name:"punctuation.section.embedded.dolphindb"}},end:"\\}",name:"source.dolphindb.embedded.source",patterns:[{include:"$self"}]}]},operator:{patterns:[{match:"<<|>>",name:"keyword.operator.bitwise.shift.dolphindb"},{match:"!=|<=|>=|==|>|<",name:"keyword.operator.comparison.dolphindb"},{match:"<-|->",name:"keyword.operator.join.dolphindb"},{match:"&&|!|\\|\\|",name:"keyword.operator.logical.dolphindb"},{match:"&|\\||\\^",name:"keyword.operator.bitwise.dolphindb"},{match:"\\.\\.",name:"keyword.operator.splat.dolphindb"},{match:"\\?",name:"keyword.operator.existential.dolphindb"},{match:"/|<-|%|\\*|/|-|\\$|\\+",name:"keyword.operator.dolphindb"},{match:"([a-zA-Z$_][\\w$]*)?\\s*(=|:(?!:))(?![>=])",captures:{1:{name:"variable.assignment.dolphindb"},2:{name:"keyword.operator.assignment.dolphindb"}}}]},property:{patterns:[{match:"(?:(\\.)|(::))\\s*([A-Z][A-Z0-9_$]*\\b\\$*)(?=\\s*\\??(\\.\\s*[a-zA-Z_$]\\w*|::))",captures:{1:{name:"punctuation.separator.property.period.dolphindb"},2:{name:"keyword.operator.prototype.dolphindb"},3:{name:"constant.other.object.property.dolphindb"}}},{match:"(?:(\\.)|(::))\\s*(\\$*[a-zA-Z_$][\\w$]*)(?=\\s*\\??(\\.\\s*[a-zA-Z_$]\\w*|::))",captures:{1:{name:"punctuation.separator.property.period.dolphindb"},2:{name:"keyword.operator.prototype.dolphindb"},3:{name:"variable.other.object.property.dolphindb"}}},{match:"(?:(\\.)|(::))\\s*([A-Z][A-Z0-9_$]*\\b\\$*)",captures:{1:{name:"punctuation.separator.property.period.dolphindb"},2:{name:"keyword.operator.prototype.dolphindb"},3:{name:"constant.other.property.dolphindb"}}},{match:"(?:(\\.)|(::))\\s*(\\$*[a-zA-Z_$][\\w$]*)",captures:{1:{name:"punctuation.separator.property.period.dolphindb"},2:{name:"keyword.operator.prototype.dolphindb"},3:{name:"variable.other.property.dolphindb"}}},{match:"(?:(\\.)|(::))\\s*([0-9][\\w$]*)",captures:{1:{name:"punctuation.separator.property.period.dolphindb"},2:{name:"keyword.operator.prototype.dolphindb"},3:{name:"invalid.illegal.identifier.dolphindb"}}}]}}}}const Tg=Pg(!1),br="dolphindb",Og={name:"dolphindb.dark",settings:[{settings:{foreground:"#d4d4d4",background:"#1e1e1e"}},{scope:["meta.embedded","source.groovy.embedded","string meta.image.inline.markdown"],settings:{foreground:"#D4D4D4"}},{scope:"emphasis",settings:{fontStyle:"italic"}},{scope:"strong",settings:{fontStyle:"bold"}},{scope:"header",settings:{foreground:"#000080"}},{scope:"comment",settings:{foreground:"#6A9955"}},{scope:"constant.language",settings:{foreground:"#569cd6"}},{scope:["constant.numeric","variable.other.enummember","keyword.operator.plus.exponent","keyword.operator.minus.exponent"],settings:{foreground:"#b5cea8"}},{scope:"constant.regexp",settings:{foreground:"#646695"}},{scope:"entity.name.tag",settings:{foreground:"#569cd6"}},{scope:"entity.name.tag.css",settings:{foreground:"#d7ba7d"}},{scope:"entity.other.attribute-name",settings:{foreground:"#9cdcfe"}},{scope:["entity.other.attribute-name.class.css","entity.other.attribute-name.class.mixin.css","entity.other.attribute-name.id.css","entity.other.attribute-name.parent-selector.css","entity.other.attribute-name.pseudo-class.css","entity.other.attribute-name.pseudo-element.css","source.css.less entity.other.attribute-name.id","entity.other.attribute-name.scss"],settings:{foreground:"#d7ba7d"}},{scope:"invalid",settings:{foreground:"#f44747"}},{scope:"markup.underline",settings:{fontStyle:"underline"}},{scope:"markup.bold",settings:{fontStyle:"bold",foreground:"#569cd6"}},{scope:"markup.heading",settings:{fontStyle:"bold",foreground:"#569cd6"}},{scope:"markup.italic",settings:{fontStyle:"italic"}},{scope:"markup.strikethrough",settings:{fontStyle:"strikethrough"}},{scope:"markup.inserted",settings:{foreground:"#b5cea8"}},{scope:"markup.deleted",settings:{foreground:"#ce9178"}},{scope:"markup.changed",settings:{foreground:"#569cd6"}},{scope:"punctuation.definition.quote.begin.markdown",settings:{foreground:"#6A9955"}},{scope:"punctuation.definition.list.begin.markdown",settings:{foreground:"#6796e6"}},{scope:"markup.inline.raw",settings:{foreground:"#ce9178"}},{name:"brackets of XML/HTML tags",scope:"punctuation.definition.tag",settings:{foreground:"#808080"}},{scope:["meta.preprocessor","entity.name.function.preprocessor"],settings:{foreground:"#569cd6"}},{scope:"meta.preprocessor.string",settings:{foreground:"#ce9178"}},{scope:"meta.preprocessor.numeric",settings:{foreground:"#b5cea8"}},{scope:"meta.structure.dictionary.key.python",settings:{foreground:"#9cdcfe"}},{scope:"meta.diff.header",settings:{foreground:"#569cd6"}},{scope:"storage",settings:{foreground:"#569cd6"}},{scope:"storage.type",settings:{foreground:"#569cd6"}},{scope:["storage.modifier","keyword.operator.noexcept"],settings:{foreground:"#569cd6"}},{scope:["string","meta.embedded.assembly"],settings:{foreground:"#ce9178"}},{scope:"string.tag",settings:{foreground:"#ce9178"}},{scope:"string.value",settings:{foreground:"#ce9178"}},{scope:"string.regexp",settings:{foreground:"#d16969"}},{name:"String interpolation",scope:["punctuation.definition.template-expression.begin","punctuation.definition.template-expression.end","punctuation.section.embedded"],settings:{foreground:"#569cd6"}},{name:"Reset JavaScript string interpolation expression",scope:["meta.template.expression"],settings:{foreground:"#d4d4d4"}},{scope:["support.type.vendored.property-name","support.type.property-name","variable.css","variable.scss","variable.other.less","source.coffee.embedded"],settings:{foreground:"#9cdcfe"}},{scope:"keyword",settings:{foreground:"#569cd6"}},{scope:"keyword.control",settings:{foreground:"#569cd6"}},{scope:"keyword.operator",settings:{foreground:"#d4d4d4"}},{scope:["keyword.operator.new","keyword.operator.expression","keyword.operator.cast","keyword.operator.sizeof","keyword.operator.alignof","keyword.operator.typeid","keyword.operator.alignas","keyword.operator.instanceof","keyword.operator.logical.python","keyword.operator.wordlike"],settings:{foreground:"#569cd6"}},{scope:"keyword.other.unit",settings:{foreground:"#b5cea8"}},{scope:["punctuation.section.embedded.begin.php","punctuation.section.embedded.end.php"],settings:{foreground:"#569cd6"}},{scope:"support.function.git-rebase",settings:{foreground:"#9cdcfe"}},{scope:"constant.sha.git-rebase",settings:{foreground:"#b5cea8"}},{name:"coloring of the Java import and package identifiers",scope:["storage.modifier.import.java","variable.language.wildcard.java","storage.modifier.package.java"],settings:{foreground:"#d4d4d4"}},{name:"this.self",scope:"variable.language",settings:{foreground:"#569cd6"}},{name:"Function declarations",scope:["entity.name.function","support.function","support.constant.handlebars","source.powershell variable.other.member","entity.name.operator.custom-literal"],settings:{foreground:"#DCDCAA"}},{name:"Types declaration and references",scope:["support.class","support.type","entity.name.type","entity.name.namespace","entity.other.attribute","entity.name.scope-resolution","entity.name.class","storage.type.numeric.go","storage.type.byte.go","storage.type.boolean.go","storage.type.string.go","storage.type.uintptr.go","storage.type.error.go","storage.type.rune.go","storage.type.cs","storage.type.generic.cs","storage.type.modifier.cs","storage.type.variable.cs","storage.type.annotation.java","storage.type.generic.java","storage.type.java","storage.type.object.array.java","storage.type.primitive.array.java","storage.type.primitive.java","storage.type.token.java","storage.type.groovy","storage.type.annotation.groovy","storage.type.parameters.groovy","storage.type.generic.groovy","storage.type.object.array.groovy","storage.type.primitive.array.groovy","storage.type.primitive.groovy"],settings:{foreground:"#4EC9B0"}},{name:"Types declaration and references, TS grammar specific",scope:["meta.type.cast.expr","meta.type.new.expr","support.constant.math","support.constant.dom","support.constant.json","entity.other.inherited-class"],settings:{foreground:"#4EC9B0"}},{name:"Control flow / Special keywords",scope:["keyword.control","source.cpp keyword.operator.new","keyword.operator.delete","keyword.other.using","keyword.other.operator","entity.name.operator"],settings:{foreground:"#C586C0"}},{name:"Variable and parameter name",scope:["variable","meta.definition.variable.name","support.variable","entity.name.variable","constant.other.placeholder"],settings:{foreground:"#9CDCFE"}},{name:"Constants and enums",scope:["variable.other.constant","variable.other.enummember"],settings:{foreground:"#4FC1FF"}},{name:"Object keys, TS grammar specific",scope:["meta.object-literal.key"],settings:{foreground:"#9CDCFE"}},{name:"CSS property value",scope:["support.constant.property-value","support.constant.font-name","support.constant.media-type","support.constant.media","constant.other.color.rgb-value","constant.other.rgb-value","support.constant.color"],settings:{foreground:"#CE9178"}},{name:"Regular expression groups",scope:["punctuation.definition.group.regexp","punctuation.definition.group.assertion.regexp","punctuation.definition.character-class.regexp","punctuation.character.set.begin.regexp","punctuation.character.set.end.regexp","keyword.operator.negation.regexp","support.other.parenthesis.regexp"],settings:{foreground:"#CE9178"}},{scope:["constant.character.character-class.regexp","constant.other.character-class.set.regexp","constant.other.character-class.regexp","constant.character.set.regexp"],settings:{foreground:"#d16969"}},{scope:["keyword.operator.or.regexp","keyword.control.anchor.regexp"],settings:{foreground:"#DCDCAA"}},{scope:"keyword.operator.quantifier.regexp",settings:{foreground:"#d7ba7d"}},{scope:"constant.character",settings:{foreground:"#569cd6"}},{scope:"constant.character.escape",settings:{foreground:"#d7ba7d"}},{scope:"entity.name.label",settings:{foreground:"#C8C8C8"}}]},Rg={name:"dolphindb.light",settings:[{settings:{foreground:"#000000",background:"#ffffff"}},{scope:["meta.embedded","source.groovy.embedded"],settings:{foreground:"#000000ff"}},{scope:"emphasis",settings:{fontStyle:"italic"}},{scope:"strong",settings:{fontStyle:"bold"}},{scope:"meta.diff.header",settings:{foreground:"#000080"}},{scope:"comment",settings:{foreground:"#000000"}},{scope:"constant.language",settings:{foreground:"#0000ff"}},{scope:["constant.numeric","variable.other.enummember","keyword.operator.plus.exponent","keyword.operator.minus.exponent"],settings:{foreground:"#ff0000"}},{scope:"constant.regexp",settings:{foreground:"#811f3f"}},{name:"css tags in selectors, xml tags",scope:"entity.name.tag",settings:{foreground:"#800000"}},{scope:"entity.name.selector",settings:{foreground:"#800000"}},{scope:"entity.other.attribute-name",settings:{foreground:"#ff0000"}},{scope:["entity.other.attribute-name.class.css","entity.other.attribute-name.class.mixin.css","entity.other.attribute-name.id.css","entity.other.attribute-name.parent-selector.css","entity.other.attribute-name.pseudo-class.css","entity.other.attribute-name.pseudo-element.css","source.css.less entity.other.attribute-name.id","entity.other.attribute-name.scss"],settings:{foreground:"#800000"}},{scope:"invalid",settings:{foreground:"#cd3131"}},{scope:"markup.underline",settings:{fontStyle:"underline"}},{scope:"markup.bold",settings:{fontStyle:"bold",foreground:"#000080"}},{scope:"markup.heading",settings:{fontStyle:"bold",foreground:"#800000"}},{scope:"markup.italic",settings:{fontStyle:"italic"}},{scope:"markup.strikethrough",settings:{fontStyle:"strikethrough"}},{scope:"markup.inserted",settings:{foreground:"#098658"}},{scope:"markup.deleted",settings:{foreground:"#a31515"}},{scope:"markup.changed",settings:{foreground:"#0451a5"}},{scope:["punctuation.definition.quote.begin.markdown","punctuation.definition.list.begin.markdown"],settings:{foreground:"#0451a5"}},{scope:"markup.inline.raw",settings:{foreground:"#800000"}},{name:"brackets of XML/HTML tags",scope:"punctuation.definition.tag",settings:{foreground:"#800000"}},{scope:["meta.preprocessor","entity.name.function.preprocessor"],settings:{foreground:"#0000ff"}},{scope:"meta.preprocessor.string",settings:{foreground:"#a31515"}},{scope:"meta.preprocessor.numeric",settings:{foreground:"#098658"}},{scope:"meta.structure.dictionary.key.python",settings:{foreground:"#0451a5"}},{scope:"storage",settings:{foreground:"#0000ff"}},{scope:"storage.type",settings:{foreground:"#0000ff"}},{scope:["storage.modifier","keyword.operator.noexcept"],settings:{foreground:"#0000ff"}},{scope:["string","meta.embedded.assembly"],settings:{foreground:"#a31515"}},{scope:["string.comment.buffered.block.pug","string.quoted.pug","string.interpolated.pug","string.unquoted.plain.in.yaml","string.unquoted.plain.out.yaml","string.unquoted.block.yaml","string.quoted.single.yaml","string.quoted.double.xml","string.quoted.single.xml","string.unquoted.cdata.xml","string.quoted.double.html","string.quoted.single.html","string.unquoted.html","string.quoted.single.handlebars","string.quoted.double.handlebars"],settings:{foreground:"#0000ff"}},{scope:"string.regexp",settings:{foreground:"#811f3f"}},{name:"String interpolation",scope:["punctuation.definition.template-expression.begin","punctuation.definition.template-expression.end","punctuation.section.embedded"],settings:{foreground:"#0000ff"}},{name:"Reset JavaScript string interpolation expression",scope:["meta.template.expression"],settings:{foreground:"#000000"}},{scope:["support.constant.property-value","support.constant.font-name","support.constant.media-type","support.constant.media","constant.other.color.rgb-value","constant.other.rgb-value","support.constant.color"],settings:{foreground:"#0451a5"}},{scope:["support.type.vendored.property-name","support.type.property-name","variable.css","variable.scss","variable.other.less","source.coffee.embedded"],settings:{foreground:"#ff0000"}},{scope:["support.type.property-name.json"],settings:{foreground:"#0451a5"}},{scope:"keyword",settings:{foreground:"#0000ff"}},{scope:"keyword.control",settings:{foreground:"#0000ff"}},{scope:"keyword.operator",settings:{foreground:"#000000"}},{scope:["keyword.operator.new","keyword.operator.expression","keyword.operator.cast","keyword.operator.sizeof","keyword.operator.alignof","keyword.operator.typeid","keyword.operator.alignas","keyword.operator.instanceof","keyword.operator.logical.python","keyword.operator.wordlike"],settings:{foreground:"#0000ff"}},{scope:"keyword.other.unit",settings:{foreground:"#098658"}},{scope:["punctuation.section.embedded.begin.php","punctuation.section.embedded.end.php"],settings:{foreground:"#800000"}},{scope:"support.function.git-rebase",settings:{foreground:"#0451a5"}},{scope:"constant.sha.git-rebase",settings:{foreground:"#098658"}},{name:"coloring of the Java import and package identifiers",scope:["storage.modifier.import.java","variable.language.wildcard.java","storage.modifier.package.java"],settings:{foreground:"#000000"}},{name:"this.self",scope:"variable.language",settings:{foreground:"#0000ff"}},{name:"Function declarations",scope:["entity.name.function","support.function","support.constant.handlebars","source.powershell variable.other.member","entity.name.operator.custom-literal"],settings:{foreground:"#795E26"}},{name:"Types declaration and references",scope:["support.class","support.type","entity.name.type","entity.name.namespace","entity.other.attribute","entity.name.scope-resolution","entity.name.class","storage.type.numeric.go","storage.type.byte.go","storage.type.boolean.go","storage.type.string.go","storage.type.uintptr.go","storage.type.error.go","storage.type.rune.go","storage.type.cs","storage.type.generic.cs","storage.type.modifier.cs","storage.type.variable.cs","storage.type.annotation.java","storage.type.generic.java","storage.type.java","storage.type.object.array.java","storage.type.primitive.array.java","storage.type.primitive.java","storage.type.token.java","storage.type.groovy","storage.type.annotation.groovy","storage.type.parameters.groovy","storage.type.generic.groovy","storage.type.object.array.groovy","storage.type.primitive.array.groovy","storage.type.primitive.groovy"],settings:{foreground:"#0f96be"}},{name:"Types declaration and references, TS grammar specific",scope:["meta.type.cast.expr","meta.type.new.expr","support.constant.math","support.constant.dom","support.constant.json","entity.other.inherited-class"],settings:{foreground:"#267f99"}},{name:"Control flow / Special keywords",scope:["keyword.control","source.cpp keyword.operator.new","source.cpp keyword.operator.delete","keyword.other.using","keyword.other.operator","entity.name.operator"],settings:{foreground:"#AF00DB"}},{name:"Variable and parameter name",scope:["variable","meta.definition.variable.name","support.variable","entity.name.variable","constant.other.placeholder"],settings:{foreground:"#000000"}},{name:"Constants and enums",scope:["variable.other.constant","variable.other.enummember"],settings:{foreground:"#0070C1"}},{name:"Object keys, TS grammar specific",scope:["meta.object-literal.key"],settings:{foreground:"#001080"}},{name:"CSS property value",scope:["support.constant.property-value","support.constant.font-name","support.constant.media-type","support.constant.media","constant.other.color.rgb-value","constant.other.rgb-value","support.constant.color"],settings:{foreground:"#0451a5"}},{name:"Regular expression groups",scope:["punctuation.definition.group.regexp","punctuation.definition.group.assertion.regexp","punctuation.definition.character-class.regexp","punctuation.character.set.begin.regexp","punctuation.character.set.end.regexp","keyword.operator.negation.regexp","support.other.parenthesis.regexp"],settings:{foreground:"#d16969"}},{scope:["constant.character.character-class.regexp","constant.other.character-class.set.regexp","constant.other.character-class.regexp","constant.character.set.regexp"],settings:{foreground:"#811f3f"}},{scope:"keyword.operator.quantifier.regexp",settings:{foreground:"#000000"}},{scope:["keyword.operator.or.regexp","keyword.control.anchor.regexp"],settings:{foreground:"#EE0000"}},{scope:"constant.character",settings:{foreground:"#0000ff"}},{scope:"constant.character.escape",settings:{foreground:"#EE0000"}},{scope:"entity.name.label",settings:{foreground:"#000000"}},{scope:"keyword.operator",settings:{foreground:"#f00"}},{scope:"keyword.operator.instanceof",settings:{foreground:"#f00"}},{scope:"keyword.operator.logical",settings:{foreground:"#f00"}},{scope:"keyword.operator.logical.python",settings:{foreground:"#f00"}},{scope:"support.type.property-name",settings:{foreground:"#000000"}},{scope:"variable",settings:{foreground:"#000000",fontStyle:""}},{scope:"variable.other.constant",settings:{foreground:"#000000"}},{scope:"keyword.operator.expression.typeof.js",settings:{foreground:"#f00"}},{scope:"storage.type",settings:{foreground:"#0000ee"}},{scope:"storage.modifier",settings:{foreground:"#0000ee"}},{scope:"constant.language",settings:{foreground:"#0000ee"}},{scope:"constant.numeric",settings:{foreground:"#00a000"}},{scope:"variable.language.this",settings:{foreground:"#267f99"}},{scope:"string.quoted.docstring.multi.python",settings:{foreground:"#000000"}},{scope:"punctuation.separator.delimiter.c",settings:{foreground:"#f00"}},{scope:"punctuation.separator.pointer-access.c",settings:{foreground:"#f00"}},{scope:"entity.name.tag.pug",settings:{foreground:"#f00"}},{scope:"entity.other.attribute-name.id.pug",settings:{foreground:"#722dd2"}},{scope:"entity.other.attribute-name.class.pug",settings:{foreground:"#267f99"}},{scope:"entity.other.attribute-name.tag.pug",settings:{foreground:"#8e5e1a"}},{scope:"entity.name.tag",settings:{foreground:"#000000",fontStyle:"bold"}},{scope:"punctuation.definition.tag",settings:{foreground:"#000000",fontStyle:"bold"}},{scope:"entity.name.function",settings:{foreground:"#000000",fontStyle:"bold"}},{scope:"support.function",settings:{foreground:"#000000",fontStyle:"bold"}},{scope:"constant.language.module.http",settings:{foreground:"#00f"}},{scope:"constant.language.directive.module",settings:{foreground:"#00f"}},{scope:"constant.language.directive.module.main",settings:{foreground:"#f00",fontStyle:"bold"}},{scope:"meta.decorator.dolphindb",settings:{foreground:"#aa6f00"}},{scope:"punctuation.definition.string.begin.json.comments",settings:{foreground:"#111"}},{scope:"punctuation.definition.string.end.json.comments",settings:{foreground:"#111"}},{scope:"punctuation.support.type.property-name.begin.json.comments",settings:{foreground:"#111"}},{scope:"punctuation.support.type.property-name.end.json.comments",settings:{foreground:"#111"}}]},Su="source.dolphindb",Uo=new wu.Registry({onigLib:Promise.resolve({createOnigScanner:Go.createOnigScanner,createOnigString:Go.createOnigString}),async loadGrammar(e){return e!==Su?null:Tg}});class Fg{constructor(t){ho(this,"registry");ho(this,"scopeNameToGrammar",new Map);this.registry=t}async createEncodedTokensProvider(t,n){const r=await this.getGrammar(t,n);return{getInitialState(){return wu.INITIAL},tokenizeEncoded(o,s){const i=r.tokenizeLine2(o,s),{tokens:u,ruleStack:c}=i;return{tokens:u,endState:c}}}}async getGrammar(t,n){const r=this.scopeNameToGrammar.get(t);if(r)return r;const o=this.registry.loadGrammarWithConfiguration(t,n,{}).then(s=>{if(s)return s;throw Error(`failed to load grammar for ${t}`)});return this.scopeNameToGrammar.set(t,o),o}}function ku(e,t){const n=typeof t=="string"?t==="light"?Rg:Og:t;Uo.setTheme(n);const r=Uo.getColorMap();e.languages.setColorMap(r)}async function Lg(e){e.setLanguageConfiguration(br,{comments:{lineComment:"//",blockComment:["/*","*/"]},brackets:[["{","}"],["[","]"],["(",")"]],autoClosingPairs:[{open:"{",close:"}"},{open:"[",close:"]"},{open:"(",close:")"},{open:'"',close:'"',notIn:["string"]},{open:"'",close:"'",notIn:["string"]},{open:"/**",close:" */",notIn:["string"]},{open:"/*",close:" */",notIn:["string"]}],surroundingPairs:[{open:"{",close:"}"},{open:"[",close:"]"},{open:"(",close:")"},{open:'"',close:'"'},{open:"'",close:"'"},{open:"<",close:">"}],folding:{markers:{start:new RegExp("^\\s*//\\s*#?region\\b"),end:new RegExp("^\\s*//\\s*#?endregion\\b")}},wordPattern:new RegExp("(-?\\d*\\.\\d\\w*)|([^\\`\\~\\!\\@\\#\\%\\^\\&\\*\\(\\)\\-\\=\\+\\[\\{\\]\\}\\\\\\|\\;\\:\\'\\\"\\,\\.\\<\\>\\/\\?\\s]+)"),indentationRules:{increaseIndentPattern:new RegExp("^((?!\\/\\/).)*(\\{[^}\"'`]*|\\([^)\"'`]*|\\[[^\\]\"'`]*)$"),decreaseIndentPattern:new RegExp("^((?!.*?\\/\\*).*\\*/)?\\s*[\\}\\]].*$")}});const t=e.getEncodedLanguageId(br),n=await new Fg(Uo).createEncodedTokensProvider(Su,t);e.setTokensProvider(br,n)}const Wl=vs.map(e=>e.toLowerCase());let cr={},ps,_s=[],Ho=[];const Cu=30,Ko={")":"(","}":"{","]":"["},Ng=new Set(Object.values(Ko)),Dg={command:"FunctionsandCommands/CommandsReferences/",function:"FunctionsandCommands/FunctionReferences/",template:"Functionalprogramming/TemplateFunctions/"};function _o(e,t){var i;const n=cr[e]||cr[e+"!"];if(!n)return;const{title:r,type:o}=n;let s=`#### ${r}
https://`+(t==="zh"?"docs.dolphindb.cn/zh/help/":"dolphindb.com/help200/")+Dg[o]+(o!=="template"?`${r[0]}/`:"")+r+`.html
`;for(const u of n.children){s+=`#### ${u.title}
`;for(const c of u.children)c.type==="text"&&u.type!=="example"?s+=c.value.join(`
`)+`
`:s+="```"+(((i=c.language)==null?void 0:i.trim())==="console"?"dolphindb":c.language||"")+`
`+c.value.join(`
`)+"\n```\n";s+=`
`}return{isTrusted:!0,value:s}}function Mg(e,t){const n=/[a-z|A-Z|0-9|!|_]/,r=e.getValueInRange({startLineNumber:Math.max(t.lineNumber-Cu,0),startColumn:0,endLineNumber:t.lineNumber,endColumn:t.column});let o=0,s=-1;for(let c=r.length;c>=0;c--){const l=r[c];if(l===")"){o++;continue}else if(l==="("){o--;continue}if(n.test(l)&&o<0){s=c;break}}if(s===-1)return{param_search_pos:-1,func_name:""};let i=-1,u=0;for(let c=s;c>=0;c--){const l=r[c];if(!(i===-1&&l===" ")){if(n.test(l)){i===-1&&(i=c);continue}u=c+1;break}}return i===-1?{param_search_pos:-1,func_name:""}:{param_search_pos:s+1,func_name:r.slice(u,i+1)}}function Wg(e,t,n){const r=e.getValueInRange({startLineNumber:Math.max(t.lineNumber-Cu,0),startColumn:0,endLineNumber:t.lineNumber,endColumn:t.column});let o=0;const s=[],i=",";let u=0;for(let p=n;p<r.length;p++){const d=r[p];if(!/\s/.test(d)){if(s[s.length-1]==='"'||s[s.length-1]==="'"){(s[s.length-1]==='"'&&d==='"'||s[s.length-1]==="'"&&d==="'")&&s.pop();continue}if(Ng.has(d)||d==='"'||d==="'"){s.push(d);continue}else if(d in Ko)if(s[s.length-1]===Ko[d]){s.pop();continue}else return-1;s.length===1&&s[0]==="("&&d===i&&u++,o=u}}const c=r.slice(0,n),l=/[a-zA-Z_\u4e00-\u9fa5][\w\u4e00-\u9fa5]*!?$/.exec(c);return l&&c[n-1-l[0].length]==="."?o+1:o}function Bg(e){var i;const t=(i=cr[e])==null?void 0:i.children.filter(u=>u.type==="grammer")[0];if(!t)return null;const r=t.children[0].value.filter(u=>u.trim()!=="")[0].trim().match(/[a-zA-z0-9!]+\((.*)\)/);if(!r)return null;const o=r[0],s=r[1].split(",").map(u=>u.trim());return{signature:o,params:s}}let $g;async function Eu(e,t){if(ps=t,$g!==e){switch(typeof e){case"string":cr=await fetch(e).then(n=>n.json());break;case"function":cr=await e();break;case"object":cr=await e;break;default:cr={};break}_s=Object.keys(cr),Ho=_s.map(n=>n.toLowerCase())}}function Vg(e){const{languages:t}=e,{CompletionItemKind:n}=t;t.registerCompletionItemProvider(br,{provideCompletionItems(r,o,s,i){var p;if(i.isCancellationRequested)return;const u=((p=r.getWordAtPosition(o))==null?void 0:p.word)??"";let c,l;if(u.length===1){const d=u[0].toLowerCase();c=_s.filter((m,h)=>Ho[h].startsWith(d)),l=vs.filter((m,h)=>Wl[h].startsWith(d))}else{const d=u.toLowerCase();c=_s.filter((m,h)=>{const b=Ho[h];let y=0;for(const x of d)if(y=b.indexOf(x,y)+1,!y)return!1;return!0}),l=vs.filter((m,h)=>{const b=Wl[h];let y=0;for(const x of d)if(y=b.indexOf(x,y)+1,!y)return!1;return!0})}return{suggestions:[...Iu.filter(d=>d.startsWith(u)).map(d=>({label:d,insertText:d,kind:n.Keyword})),...l.map(d=>({label:d,insertText:d,kind:n.Constant})),...c.map(d=>({label:d,insertText:d,kind:n.Function}))]}},resolveCompletionItem(r,o){return r.documentation=_o(r.label,ps),r}}),t.registerHoverProvider(br,{provideHover(r,o,s){const i=r.getWordAtPosition(o);if(!i)return;const u=_o(i.word,ps);if(u)return{contents:[u]}}}),t.registerSignatureHelpProvider(br,{signatureHelpTriggerCharacters:["(",","],provideSignatureHelp(r,o,s,i){if(s.isCancellationRequested)return;const{func_name:u,param_search_pos:c}=Mg(r,o);if(c===-1)return;const l=Wg(r,o,c);if(l===-1)return;const p=Bg(u);if(!p)return;const{signature:d,params:m}=p;return{dispose(){},value:{activeParameter:l>m.length-1?m.length-1:l,signatures:[{label:d,documentation:_o(u,ps),parameters:m.map(h=>({label:h}))}],activeSignature:0}}}})}async function qg(e,t){const{languages:n}=e;n.register({id:br});const r=Eu(t.docs,t.language).catch(o=>{console.error("[monaco-dolphindb] Load docs assets failed, please check your option"),console.error(o)});await Lg(n),ku(e,(t==null?void 0:t.theme)??"light"),Vg(e),await r}let Bl=!1,fn=null;function Au(e){const{beforeMonacoInit:t,onMonacoInit:n,onMonacoInitFailed:r,dolphinDBLanguageOptions:o}=e,s=Ag();function i(u){u.then(c=>{s.current||n==null||n(c)}).catch(c=>{r==null||r(c)}).finally(()=>{fn=null})}if(!Bl){if(fn){i(fn);return}fn=(async()=>{await(t==null?void 0:t());const u=await Hr.init();return await qg(u,o),await document.fonts.ready,Bl=!0,u})(),i(fn)}}function Pu(e){const{theme:t,docs:n,language:r}=e,o=jg();k.useEffect(()=>{o&&ku(o,t??"light")},[o,t]),k.useEffect(()=>{Eu(n,r)},[n,r])}function zg({onMonacoInit:e,beforeMonacoInit:t,onMonacoInitFailed:n,onMount:r,options:o,dolphinDBLanguageOptions:s,...i}){return Au({beforeMonacoInit:t,onMonacoInit:e,onMonacoInitFailed:n,dolphinDBLanguageOptions:s}),Pu(s),a.jsx(vu,{defaultLanguage:"dolphindb",language:"dolphindb",options:{..._u,...o},onMount:(u,c)=>{try{u.getContribution("editor.contrib.suggestController").widget.value._setDetailsVisible(!0)}catch(l){console.warn("[monaco-dolphindb/react] Failed to set suggest details visible",l)}r==null||r(u,c)},...i})}function Gg({onMonacoInit:e,beforeMonacoInit:t,onMonacoInitFailed:n,options:r,dolphinDBLanguageOptions:o,...s}){return Au({beforeMonacoInit:t,onMonacoInit:e,onMonacoInitFailed:n,dolphinDBLanguageOptions:o}),Pu(o),a.jsx(xg,{language:"dolphindb",options:{..._u,...r},...s})}function va(e){const{i18n:t}=Z(),n=k.useMemo(()=>{const s=t.resolvedLanguage??t.language;return new Intl.Locale(s)},[t.language,t.resolvedLanguage]),r=e[n.baseName];if(r)return r;const o=e[n.language];if(o)return o;if(!e.fallback)throw new Error(`useI18nValue: no fallback value provided, current resolved language is ${t.resolvedLanguage}.`);return e.fallback}var Ug={BASE_URL:"/factor-platform/",MODE:"production",DEV:!1,PROD:!0,SSR:!1};function Hg(e,t){let n;try{n=e()}catch{return}return{getItem:o=>{var s;const i=c=>c===null?null:JSON.parse(c,t==null?void 0:t.reviver),u=(s=n.getItem(o))!=null?s:null;return u instanceof Promise?u.then(i):i(u)},setItem:(o,s)=>n.setItem(o,JSON.stringify(s,t==null?void 0:t.replacer)),removeItem:o=>n.removeItem(o)}}const En=e=>t=>{try{const n=e(t);return n instanceof Promise?n:{then(r){return En(r)(n)},catch(r){return this}}}catch(n){return{then(r){return this},catch(r){return En(r)(n)}}}},Kg=(e,t)=>(n,r,o)=>{let s={getStorage:()=>localStorage,serialize:JSON.stringify,deserialize:JSON.parse,partialize:x=>x,version:0,merge:(x,I)=>({...I,...x}),...t},i=!1;const u=new Set,c=new Set;let l;try{l=s.getStorage()}catch{}if(!l)return e((...x)=>{console.warn(`[zustand persist middleware] Unable to update item '${s.name}', the given storage is currently unavailable.`),n(...x)},r,o);const p=En(s.serialize),d=()=>{const x=s.partialize({...r()});let I;const w=p({state:x,version:s.version}).then(A=>l.setItem(s.name,A)).catch(A=>{I=A});if(I)throw I;return w},m=o.setState;o.setState=(x,I)=>{m(x,I),d()};const h=e((...x)=>{n(...x),d()},r,o);let b;const y=()=>{var x;if(!l)return;i=!1,u.forEach(w=>w(r()));const I=((x=s.onRehydrateStorage)==null?void 0:x.call(s,r()))||void 0;return En(l.getItem.bind(l))(s.name).then(w=>{if(w)return s.deserialize(w)}).then(w=>{if(w)if(typeof w.version=="number"&&w.version!==s.version){if(s.migrate)return s.migrate(w.state,w.version);console.error("State loaded from storage couldn't be migrated since no migrate function was provided")}else return w.state}).then(w=>{var A;return b=s.merge(w,(A=r())!=null?A:h),n(b,!0),d()}).then(()=>{I==null||I(b,void 0),i=!0,c.forEach(w=>w(b))}).catch(w=>{I==null||I(void 0,w)})};return o.persist={setOptions:x=>{s={...s,...x},x.getStorage&&(l=x.getStorage())},clearStorage:()=>{l==null||l.removeItem(s.name)},getOptions:()=>s,rehydrate:()=>y(),hasHydrated:()=>i,onHydrate:x=>(u.add(x),()=>{u.delete(x)}),onFinishHydration:x=>(c.add(x),()=>{c.delete(x)})},y(),b||h},Yg=(e,t)=>(n,r,o)=>{let s={storage:Hg(()=>localStorage),partialize:y=>y,version:0,merge:(y,x)=>({...x,...y}),...t},i=!1;const u=new Set,c=new Set;let l=s.storage;if(!l)return e((...y)=>{console.warn(`[zustand persist middleware] Unable to update item '${s.name}', the given storage is currently unavailable.`),n(...y)},r,o);const p=()=>{const y=s.partialize({...r()});return l.setItem(s.name,{state:y,version:s.version})},d=o.setState;o.setState=(y,x)=>{d(y,x),p()};const m=e((...y)=>{n(...y),p()},r,o);let h;const b=()=>{var y,x;if(!l)return;i=!1,u.forEach(w=>{var A;return w((A=r())!=null?A:m)});const I=((x=s.onRehydrateStorage)==null?void 0:x.call(s,(y=r())!=null?y:m))||void 0;return En(l.getItem.bind(l))(s.name).then(w=>{if(w)if(typeof w.version=="number"&&w.version!==s.version){if(s.migrate)return s.migrate(w.state,w.version);console.error("State loaded from storage couldn't be migrated since no migrate function was provided")}else return w.state}).then(w=>{var A;return h=s.merge(w,(A=r())!=null?A:m),n(h,!0),p()}).then(()=>{I==null||I(h,void 0),h=r(),i=!0,c.forEach(w=>w(h))}).catch(w=>{I==null||I(void 0,w)})};return o.persist={setOptions:y=>{s={...s,...y},y.storage&&(l=y.storage)},clearStorage:()=>{l==null||l.removeItem(s.name)},getOptions:()=>s,rehydrate:()=>b(),hasHydrated:()=>i,onHydrate:y=>(u.add(y),()=>{u.delete(y)}),onFinishHydration:y=>(c.add(y),()=>{c.delete(y)})},s.skipHydration||b(),h||m},Jg=(e,t)=>"getStorage"in t||"serialize"in t||"deserialize"in t?((Ug?"production":void 0)!=="production"&&console.warn("[DEPRECATED] `getStorage`, `serialize` and `deserialize` options are deprecated. Use `storage` option instead."),Kg(e,t)):Yg(e,t),Qg=Jg;function Xn(e){throw new Error('Could not dynamically require "'+e+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}var Tu={exports:{}};/*!
    localForage -- Offline Storage, Improved
    Version 1.10.0
    https://localforage.github.io/localForage
    (c) 2013-2017 Mozilla, Apache License 2.0
*/(function(e,t){(function(n){e.exports=n()})(function(){return function n(r,o,s){function i(l,p){if(!o[l]){if(!r[l]){var d=typeof Xn=="function"&&Xn;if(!p&&d)return d(l,!0);if(u)return u(l,!0);var m=new Error("Cannot find module '"+l+"'");throw m.code="MODULE_NOT_FOUND",m}var h=o[l]={exports:{}};r[l][0].call(h.exports,function(b){var y=r[l][1][b];return i(y||b)},h,h.exports,n,r,o,s)}return o[l].exports}for(var u=typeof Xn=="function"&&Xn,c=0;c<s.length;c++)i(s[c]);return i}({1:[function(n,r,o){(function(s){var i=s.MutationObserver||s.WebKitMutationObserver,u;if(i){var c=0,l=new i(b),p=s.document.createTextNode("");l.observe(p,{characterData:!0}),u=function(){p.data=c=++c%2}}else if(!s.setImmediate&&typeof s.MessageChannel<"u"){var d=new s.MessageChannel;d.port1.onmessage=b,u=function(){d.port2.postMessage(0)}}else"document"in s&&"onreadystatechange"in s.document.createElement("script")?u=function(){var x=s.document.createElement("script");x.onreadystatechange=function(){b(),x.onreadystatechange=null,x.parentNode.removeChild(x),x=null},s.document.documentElement.appendChild(x)}:u=function(){setTimeout(b,0)};var m,h=[];function b(){m=!0;for(var x,I,w=h.length;w;){for(I=h,h=[],x=-1;++x<w;)I[x]();w=h.length}m=!1}r.exports=y;function y(x){h.push(x)===1&&!m&&u()}}).call(this,typeof Za<"u"?Za:typeof self<"u"?self:typeof window<"u"?window:{})},{}],2:[function(n,r,o){var s=n(1);function i(){}var u={},c=["REJECTED"],l=["FULFILLED"],p=["PENDING"];r.exports=d;function d(j){if(typeof j!="function")throw new TypeError("resolver must be a function");this.state=p,this.queue=[],this.outcome=void 0,j!==i&&y(this,j)}d.prototype.catch=function(j){return this.then(null,j)},d.prototype.then=function(j,C){if(typeof j!="function"&&this.state===l||typeof C!="function"&&this.state===c)return this;var g=new this.constructor(i);if(this.state!==p){var E=this.state===l?j:C;h(g,E,this.outcome)}else this.queue.push(new m(g,j,C));return g};function m(j,C,g){this.promise=j,typeof C=="function"&&(this.onFulfilled=C,this.callFulfilled=this.otherCallFulfilled),typeof g=="function"&&(this.onRejected=g,this.callRejected=this.otherCallRejected)}m.prototype.callFulfilled=function(j){u.resolve(this.promise,j)},m.prototype.otherCallFulfilled=function(j){h(this.promise,this.onFulfilled,j)},m.prototype.callRejected=function(j){u.reject(this.promise,j)},m.prototype.otherCallRejected=function(j){h(this.promise,this.onRejected,j)};function h(j,C,g){s(function(){var E;try{E=C(g)}catch(v){return u.reject(j,v)}E===j?u.reject(j,new TypeError("Cannot resolve promise with itself")):u.resolve(j,E)})}u.resolve=function(j,C){var g=x(b,C);if(g.status==="error")return u.reject(j,g.value);var E=g.value;if(E)y(j,E);else{j.state=l,j.outcome=C;for(var v=-1,_=j.queue.length;++v<_;)j.queue[v].callFulfilled(C)}return j},u.reject=function(j,C){j.state=c,j.outcome=C;for(var g=-1,E=j.queue.length;++g<E;)j.queue[g].callRejected(C);return j};function b(j){var C=j&&j.then;if(j&&(typeof j=="object"||typeof j=="function")&&typeof C=="function")return function(){C.apply(j,arguments)}}function y(j,C){var g=!1;function E(P){g||(g=!0,u.reject(j,P))}function v(P){g||(g=!0,u.resolve(j,P))}function _(){C(v,E)}var S=x(_);S.status==="error"&&E(S.value)}function x(j,C){var g={};try{g.value=j(C),g.status="success"}catch(E){g.status="error",g.value=E}return g}d.resolve=I;function I(j){return j instanceof this?j:u.resolve(new this(i),j)}d.reject=w;function w(j){var C=new this(i);return u.reject(C,j)}d.all=A;function A(j){var C=this;if(Object.prototype.toString.call(j)!=="[object Array]")return this.reject(new TypeError("must be an array"));var g=j.length,E=!1;if(!g)return this.resolve([]);for(var v=new Array(g),_=0,S=-1,P=new this(i);++S<g;)T(j[S],S);return P;function T(z,V){C.resolve(z).then(W,function(ae){E||(E=!0,u.reject(P,ae))});function W(ae){v[V]=ae,++_===g&&!E&&(E=!0,u.resolve(P,v))}}}d.race=f;function f(j){var C=this;if(Object.prototype.toString.call(j)!=="[object Array]")return this.reject(new TypeError("must be an array"));var g=j.length,E=!1;if(!g)return this.resolve([]);for(var v=-1,_=new this(i);++v<g;)S(j[v]);return _;function S(P){C.resolve(P).then(function(T){E||(E=!0,u.resolve(_,T))},function(T){E||(E=!0,u.reject(_,T))})}}},{1:1}],3:[function(n,r,o){(function(s){typeof s.Promise!="function"&&(s.Promise=n(2))}).call(this,typeof Za<"u"?Za:typeof self<"u"?self:typeof window<"u"?window:{})},{2:2}],4:[function(n,r,o){var s=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(R){return typeof R}:function(R){return R&&typeof Symbol=="function"&&R.constructor===Symbol&&R!==Symbol.prototype?"symbol":typeof R};function i(R,$){if(!(R instanceof $))throw new TypeError("Cannot call a class as a function")}function u(){try{if(typeof indexedDB<"u")return indexedDB;if(typeof webkitIndexedDB<"u")return webkitIndexedDB;if(typeof mozIndexedDB<"u")return mozIndexedDB;if(typeof OIndexedDB<"u")return OIndexedDB;if(typeof msIndexedDB<"u")return msIndexedDB}catch{return}}var c=u();function l(){try{if(!c||!c.open)return!1;var R=typeof openDatabase<"u"&&/(Safari|iPhone|iPad|iPod)/.test(navigator.userAgent)&&!/Chrome/.test(navigator.userAgent)&&!/BlackBerry/.test(navigator.platform),$=typeof fetch=="function"&&fetch.toString().indexOf("[native code")!==-1;return(!R||$)&&typeof indexedDB<"u"&&typeof IDBKeyRange<"u"}catch{return!1}}function p(R,$){R=R||[],$=$||{};try{return new Blob(R,$)}catch(q){if(q.name!=="TypeError")throw q;for(var F=typeof BlobBuilder<"u"?BlobBuilder:typeof MSBlobBuilder<"u"?MSBlobBuilder:typeof MozBlobBuilder<"u"?MozBlobBuilder:WebKitBlobBuilder,G=new F,H=0;H<R.length;H+=1)G.append(R[H]);return G.getBlob($.type)}}typeof Promise>"u"&&n(3);var d=Promise;function m(R,$){$&&R.then(function(F){$(null,F)},function(F){$(F)})}function h(R,$,F){typeof $=="function"&&R.then($),typeof F=="function"&&R.catch(F)}function b(R){return typeof R!="string"&&(console.warn(R+" used as a key, but it is not a string."),R=String(R)),R}function y(){if(arguments.length&&typeof arguments[arguments.length-1]=="function")return arguments[arguments.length-1]}var x="local-forage-detect-blob-support",I=void 0,w={},A=Object.prototype.toString,f="readonly",j="readwrite";function C(R){for(var $=R.length,F=new ArrayBuffer($),G=new Uint8Array(F),H=0;H<$;H++)G[H]=R.charCodeAt(H);return F}function g(R){return new d(function($){var F=R.transaction(x,j),G=p([""]);F.objectStore(x).put(G,"key"),F.onabort=function(H){H.preventDefault(),H.stopPropagation(),$(!1)},F.oncomplete=function(){var H=navigator.userAgent.match(/Chrome\/(\d+)/),q=navigator.userAgent.match(/Edge\//);$(q||!H||parseInt(H[1],10)>=43)}}).catch(function(){return!1})}function E(R){return typeof I=="boolean"?d.resolve(I):g(R).then(function($){return I=$,I})}function v(R){var $=w[R.name],F={};F.promise=new d(function(G,H){F.resolve=G,F.reject=H}),$.deferredOperations.push(F),$.dbReady?$.dbReady=$.dbReady.then(function(){return F.promise}):$.dbReady=F.promise}function _(R){var $=w[R.name],F=$.deferredOperations.pop();if(F)return F.resolve(),F.promise}function S(R,$){var F=w[R.name],G=F.deferredOperations.pop();if(G)return G.reject($),G.promise}function P(R,$){return new d(function(F,G){if(w[R.name]=w[R.name]||be(),R.db)if($)v(R),R.db.close();else return F(R.db);var H=[R.name];$&&H.push(R.version);var q=c.open.apply(c,H);$&&(q.onupgradeneeded=function(ce){var fe=q.result;try{fe.createObjectStore(R.storeName),ce.oldVersion<=1&&fe.createObjectStore(x)}catch(ge){if(ge.name==="ConstraintError")console.warn('The database "'+R.name+'" has been upgraded from version '+ce.oldVersion+" to version "+ce.newVersion+', but the storage "'+R.storeName+'" already exists.');else throw ge}}),q.onerror=function(ce){ce.preventDefault(),G(q.error)},q.onsuccess=function(){var ce=q.result;ce.onversionchange=function(fe){fe.target.close()},F(ce),_(R)}})}function T(R){return P(R,!1)}function z(R){return P(R,!0)}function V(R,$){if(!R.db)return!0;var F=!R.db.objectStoreNames.contains(R.storeName),G=R.version<R.db.version,H=R.version>R.db.version;if(G&&(R.version!==$&&console.warn('The database "'+R.name+`" can't be downgraded from version `+R.db.version+" to version "+R.version+"."),R.version=R.db.version),H||F){if(F){var q=R.db.version+1;q>R.version&&(R.version=q)}return!0}return!1}function W(R){return new d(function($,F){var G=new FileReader;G.onerror=F,G.onloadend=function(H){var q=btoa(H.target.result||"");$({__local_forage_encoded_blob:!0,data:q,type:R.type})},G.readAsBinaryString(R)})}function ae(R){var $=C(atob(R.data));return p([$],{type:R.type})}function Ce(R){return R&&R.__local_forage_encoded_blob}function we(R){var $=this,F=$._initReady().then(function(){var G=w[$._dbInfo.name];if(G&&G.dbReady)return G.dbReady});return h(F,R,R),F}function ue(R){v(R);for(var $=w[R.name],F=$.forages,G=0;G<F.length;G++){var H=F[G];H._dbInfo.db&&(H._dbInfo.db.close(),H._dbInfo.db=null)}return R.db=null,T(R).then(function(q){return R.db=q,V(R)?z(R):q}).then(function(q){R.db=$.db=q;for(var ce=0;ce<F.length;ce++)F[ce]._dbInfo.db=q}).catch(function(q){throw S(R,q),q})}function de(R,$,F,G){G===void 0&&(G=1);try{var H=R.db.transaction(R.storeName,$);F(null,H)}catch(q){if(G>0&&(!R.db||q.name==="InvalidStateError"||q.name==="NotFoundError"))return d.resolve().then(function(){if(!R.db||q.name==="NotFoundError"&&!R.db.objectStoreNames.contains(R.storeName)&&R.version<=R.db.version)return R.db&&(R.version=R.db.version+1),z(R)}).then(function(){return ue(R).then(function(){de(R,$,F,G-1)})}).catch(F);F(q)}}function be(){return{forages:[],db:null,dbReady:null,deferredOperations:[]}}function Ie(R){var $=this,F={db:null};if(R)for(var G in R)F[G]=R[G];var H=w[F.name];H||(H=be(),w[F.name]=H),H.forages.push($),$._initReady||($._initReady=$.ready,$.ready=we);var q=[];function ce(){return d.resolve()}for(var fe=0;fe<H.forages.length;fe++){var ge=H.forages[fe];ge!==$&&q.push(ge._initReady().catch(ce))}var ye=H.forages.slice(0);return d.all(q).then(function(){return F.db=H.db,T(F)}).then(function(_e){return F.db=_e,V(F,$._defaultConfig.version)?z(F):_e}).then(function(_e){F.db=H.db=_e,$._dbInfo=F;for(var Te=0;Te<ye.length;Te++){var He=ye[Te];He!==$&&(He._dbInfo.db=F.db,He._dbInfo.version=F.version)}})}function Pe(R,$){var F=this;R=b(R);var G=new d(function(H,q){F.ready().then(function(){de(F._dbInfo,f,function(ce,fe){if(ce)return q(ce);try{var ge=fe.objectStore(F._dbInfo.storeName),ye=ge.get(R);ye.onsuccess=function(){var _e=ye.result;_e===void 0&&(_e=null),Ce(_e)&&(_e=ae(_e)),H(_e)},ye.onerror=function(){q(ye.error)}}catch(_e){q(_e)}})}).catch(q)});return m(G,$),G}function Re(R,$){var F=this,G=new d(function(H,q){F.ready().then(function(){de(F._dbInfo,f,function(ce,fe){if(ce)return q(ce);try{var ge=fe.objectStore(F._dbInfo.storeName),ye=ge.openCursor(),_e=1;ye.onsuccess=function(){var Te=ye.result;if(Te){var He=Te.value;Ce(He)&&(He=ae(He));var pt=R(He,Te.key,_e++);pt!==void 0?H(pt):Te.continue()}else H()},ye.onerror=function(){q(ye.error)}}catch(Te){q(Te)}})}).catch(q)});return m(G,$),G}function $e(R,$,F){var G=this;R=b(R);var H=new d(function(q,ce){var fe;G.ready().then(function(){return fe=G._dbInfo,A.call($)==="[object Blob]"?E(fe.db).then(function(ge){return ge?$:W($)}):$}).then(function(ge){de(G._dbInfo,j,function(ye,_e){if(ye)return ce(ye);try{var Te=_e.objectStore(G._dbInfo.storeName);ge===null&&(ge=void 0);var He=Te.put(ge,R);_e.oncomplete=function(){ge===void 0&&(ge=null),q(ge)},_e.onabort=_e.onerror=function(){var pt=He.error?He.error:He.transaction.error;ce(pt)}}catch(pt){ce(pt)}})}).catch(ce)});return m(H,F),H}function st(R,$){var F=this;R=b(R);var G=new d(function(H,q){F.ready().then(function(){de(F._dbInfo,j,function(ce,fe){if(ce)return q(ce);try{var ge=fe.objectStore(F._dbInfo.storeName),ye=ge.delete(R);fe.oncomplete=function(){H()},fe.onerror=function(){q(ye.error)},fe.onabort=function(){var _e=ye.error?ye.error:ye.transaction.error;q(_e)}}catch(_e){q(_e)}})}).catch(q)});return m(G,$),G}function re(R){var $=this,F=new d(function(G,H){$.ready().then(function(){de($._dbInfo,j,function(q,ce){if(q)return H(q);try{var fe=ce.objectStore($._dbInfo.storeName),ge=fe.clear();ce.oncomplete=function(){G()},ce.onabort=ce.onerror=function(){var ye=ge.error?ge.error:ge.transaction.error;H(ye)}}catch(ye){H(ye)}})}).catch(H)});return m(F,R),F}function qe(R){var $=this,F=new d(function(G,H){$.ready().then(function(){de($._dbInfo,f,function(q,ce){if(q)return H(q);try{var fe=ce.objectStore($._dbInfo.storeName),ge=fe.count();ge.onsuccess=function(){G(ge.result)},ge.onerror=function(){H(ge.error)}}catch(ye){H(ye)}})}).catch(H)});return m(F,R),F}function Ve(R,$){var F=this,G=new d(function(H,q){if(R<0){H(null);return}F.ready().then(function(){de(F._dbInfo,f,function(ce,fe){if(ce)return q(ce);try{var ge=fe.objectStore(F._dbInfo.storeName),ye=!1,_e=ge.openKeyCursor();_e.onsuccess=function(){var Te=_e.result;if(!Te){H(null);return}R===0||ye?H(Te.key):(ye=!0,Te.advance(R))},_e.onerror=function(){q(_e.error)}}catch(Te){q(Te)}})}).catch(q)});return m(G,$),G}function Lt(R){var $=this,F=new d(function(G,H){$.ready().then(function(){de($._dbInfo,f,function(q,ce){if(q)return H(q);try{var fe=ce.objectStore($._dbInfo.storeName),ge=fe.openKeyCursor(),ye=[];ge.onsuccess=function(){var _e=ge.result;if(!_e){G(ye);return}ye.push(_e.key),_e.continue()},ge.onerror=function(){H(ge.error)}}catch(_e){H(_e)}})}).catch(H)});return m(F,R),F}function It(R,$){$=y.apply(this,arguments);var F=this.config();R=typeof R!="function"&&R||{},R.name||(R.name=R.name||F.name,R.storeName=R.storeName||F.storeName);var G=this,H;if(!R.name)H=d.reject("Invalid arguments");else{var q=R.name===F.name&&G._dbInfo.db,ce=q?d.resolve(G._dbInfo.db):T(R).then(function(fe){var ge=w[R.name],ye=ge.forages;ge.db=fe;for(var _e=0;_e<ye.length;_e++)ye[_e]._dbInfo.db=fe;return fe});R.storeName?H=ce.then(function(fe){if(fe.objectStoreNames.contains(R.storeName)){var ge=fe.version+1;v(R);var ye=w[R.name],_e=ye.forages;fe.close();for(var Te=0;Te<_e.length;Te++){var He=_e[Te];He._dbInfo.db=null,He._dbInfo.version=ge}var pt=new d(function(xt,Jt){var zt=c.open(R.name,ge);zt.onerror=function(Fa){var mn=zt.result;mn.close(),Jt(Fa)},zt.onupgradeneeded=function(){var Fa=zt.result;Fa.deleteObjectStore(R.storeName)},zt.onsuccess=function(){var Fa=zt.result;Fa.close(),xt(Fa)}});return pt.then(function(xt){ye.db=xt;for(var Jt=0;Jt<_e.length;Jt++){var zt=_e[Jt];zt._dbInfo.db=xt,_(zt._dbInfo)}}).catch(function(xt){throw(S(R,xt)||d.resolve()).catch(function(){}),xt})}}):H=ce.then(function(fe){v(R);var ge=w[R.name],ye=ge.forages;fe.close();for(var _e=0;_e<ye.length;_e++){var Te=ye[_e];Te._dbInfo.db=null}var He=new d(function(pt,xt){var Jt=c.deleteDatabase(R.name);Jt.onerror=function(){var zt=Jt.result;zt&&zt.close(),xt(Jt.error)},Jt.onblocked=function(){console.warn('dropInstance blocked for database "'+R.name+'" until all open connections are closed')},Jt.onsuccess=function(){var zt=Jt.result;zt&&zt.close(),pt(zt)}});return He.then(function(pt){ge.db=pt;for(var xt=0;xt<ye.length;xt++){var Jt=ye[xt];_(Jt._dbInfo)}}).catch(function(pt){throw(S(R,pt)||d.resolve()).catch(function(){}),pt})})}return m(H,$),H}var ua={_driver:"asyncStorage",_initStorage:Ie,_support:l(),iterate:Re,getItem:Pe,setItem:$e,removeItem:st,clear:re,length:qe,key:Ve,keys:Lt,dropInstance:It};function ra(){return typeof openDatabase=="function"}var Pt="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",Qt="~~local_forage_type~",sa=/^~~local_forage_type~([^~]+)~/,Xt="__lfsc__:",Ut=Xt.length,Ht="arbf",Ct="blob",Nt="si08",Et="ui08",da="uic8",se="si16",Q="si32",J="ur16",le="ui32",ve="fl32",Ee="fl64",Je=Ut+Ht.length,Ye=Object.prototype.toString;function lt(R){var $=R.length*.75,F=R.length,G,H=0,q,ce,fe,ge;R[R.length-1]==="="&&($--,R[R.length-2]==="="&&$--);var ye=new ArrayBuffer($),_e=new Uint8Array(ye);for(G=0;G<F;G+=4)q=Pt.indexOf(R[G]),ce=Pt.indexOf(R[G+1]),fe=Pt.indexOf(R[G+2]),ge=Pt.indexOf(R[G+3]),_e[H++]=q<<2|ce>>4,_e[H++]=(ce&15)<<4|fe>>2,_e[H++]=(fe&3)<<6|ge&63;return ye}function St(R){var $=new Uint8Array(R),F="",G;for(G=0;G<$.length;G+=3)F+=Pt[$[G]>>2],F+=Pt[($[G]&3)<<4|$[G+1]>>4],F+=Pt[($[G+1]&15)<<2|$[G+2]>>6],F+=Pt[$[G+2]&63];return $.length%3===2?F=F.substring(0,F.length-1)+"=":$.length%3===1&&(F=F.substring(0,F.length-2)+"=="),F}function tt(R,$){var F="";if(R&&(F=Ye.call(R)),R&&(F==="[object ArrayBuffer]"||R.buffer&&Ye.call(R.buffer)==="[object ArrayBuffer]")){var G,H=Xt;R instanceof ArrayBuffer?(G=R,H+=Ht):(G=R.buffer,F==="[object Int8Array]"?H+=Nt:F==="[object Uint8Array]"?H+=Et:F==="[object Uint8ClampedArray]"?H+=da:F==="[object Int16Array]"?H+=se:F==="[object Uint16Array]"?H+=J:F==="[object Int32Array]"?H+=Q:F==="[object Uint32Array]"?H+=le:F==="[object Float32Array]"?H+=ve:F==="[object Float64Array]"?H+=Ee:$(new Error("Failed to get type for BinaryArray"))),$(H+St(G))}else if(F==="[object Blob]"){var q=new FileReader;q.onload=function(){var ce=Qt+R.type+"~"+St(this.result);$(Xt+Ct+ce)},q.readAsArrayBuffer(R)}else try{$(JSON.stringify(R))}catch(ce){console.error("Couldn't convert value into a JSON string: ",R),$(null,ce)}}function Dt(R){if(R.substring(0,Ut)!==Xt)return JSON.parse(R);var $=R.substring(Je),F=R.substring(Ut,Je),G;if(F===Ct&&sa.test($)){var H=$.match(sa);G=H[1],$=$.substring(H[0].length)}var q=lt($);switch(F){case Ht:return q;case Ct:return p([q],{type:G});case Nt:return new Int8Array(q);case Et:return new Uint8Array(q);case da:return new Uint8ClampedArray(q);case se:return new Int16Array(q);case J:return new Uint16Array(q);case Q:return new Int32Array(q);case le:return new Uint32Array(q);case ve:return new Float32Array(q);case Ee:return new Float64Array(q);default:throw new Error("Unkown type: "+F)}}var ct={serialize:tt,deserialize:Dt,stringToBuffer:lt,bufferToString:St};function Kt(R,$,F,G){R.executeSql("CREATE TABLE IF NOT EXISTS "+$.storeName+" (id INTEGER PRIMARY KEY, key unique, value)",[],F,G)}function U(R){var $=this,F={db:null};if(R)for(var G in R)F[G]=typeof R[G]!="string"?R[G].toString():R[G];var H=new d(function(q,ce){try{F.db=openDatabase(F.name,String(F.version),F.description,F.size)}catch(fe){return ce(fe)}F.db.transaction(function(fe){Kt(fe,F,function(){$._dbInfo=F,q()},function(ge,ye){ce(ye)})},ce)});return F.serializer=ct,H}function X(R,$,F,G,H,q){R.executeSql(F,G,H,function(ce,fe){fe.code===fe.SYNTAX_ERR?ce.executeSql("SELECT name FROM sqlite_master WHERE type='table' AND name = ?",[$.storeName],function(ge,ye){ye.rows.length?q(ge,fe):Kt(ge,$,function(){ge.executeSql(F,G,H,q)},q)},q):q(ce,fe)},q)}function pe(R,$){var F=this;R=b(R);var G=new d(function(H,q){F.ready().then(function(){var ce=F._dbInfo;ce.db.transaction(function(fe){X(fe,ce,"SELECT * FROM "+ce.storeName+" WHERE key = ? LIMIT 1",[R],function(ge,ye){var _e=ye.rows.length?ye.rows.item(0).value:null;_e&&(_e=ce.serializer.deserialize(_e)),H(_e)},function(ge,ye){q(ye)})})}).catch(q)});return m(G,$),G}function oe(R,$){var F=this,G=new d(function(H,q){F.ready().then(function(){var ce=F._dbInfo;ce.db.transaction(function(fe){X(fe,ce,"SELECT * FROM "+ce.storeName,[],function(ge,ye){for(var _e=ye.rows,Te=_e.length,He=0;He<Te;He++){var pt=_e.item(He),xt=pt.value;if(xt&&(xt=ce.serializer.deserialize(xt)),xt=R(xt,pt.key,He+1),xt!==void 0){H(xt);return}}H()},function(ge,ye){q(ye)})})}).catch(q)});return m(G,$),G}function ie(R,$,F,G){var H=this;R=b(R);var q=new d(function(ce,fe){H.ready().then(function(){$===void 0&&($=null);var ge=$,ye=H._dbInfo;ye.serializer.serialize($,function(_e,Te){Te?fe(Te):ye.db.transaction(function(He){X(He,ye,"INSERT OR REPLACE INTO "+ye.storeName+" (key, value) VALUES (?, ?)",[R,_e],function(){ce(ge)},function(pt,xt){fe(xt)})},function(He){if(He.code===He.QUOTA_ERR){if(G>0){ce(ie.apply(H,[R,ge,F,G-1]));return}fe(He)}})})}).catch(fe)});return m(q,F),q}function xe(R,$,F){return ie.apply(this,[R,$,F,1])}function je(R,$){var F=this;R=b(R);var G=new d(function(H,q){F.ready().then(function(){var ce=F._dbInfo;ce.db.transaction(function(fe){X(fe,ce,"DELETE FROM "+ce.storeName+" WHERE key = ?",[R],function(){H()},function(ge,ye){q(ye)})})}).catch(q)});return m(G,$),G}function We(R){var $=this,F=new d(function(G,H){$.ready().then(function(){var q=$._dbInfo;q.db.transaction(function(ce){X(ce,q,"DELETE FROM "+q.storeName,[],function(){G()},function(fe,ge){H(ge)})})}).catch(H)});return m(F,R),F}function Fe(R){var $=this,F=new d(function(G,H){$.ready().then(function(){var q=$._dbInfo;q.db.transaction(function(ce){X(ce,q,"SELECT COUNT(key) as c FROM "+q.storeName,[],function(fe,ge){var ye=ge.rows.item(0).c;G(ye)},function(fe,ge){H(ge)})})}).catch(H)});return m(F,R),F}function Me(R,$){var F=this,G=new d(function(H,q){F.ready().then(function(){var ce=F._dbInfo;ce.db.transaction(function(fe){X(fe,ce,"SELECT key FROM "+ce.storeName+" WHERE id = ? LIMIT 1",[R+1],function(ge,ye){var _e=ye.rows.length?ye.rows.item(0).key:null;H(_e)},function(ge,ye){q(ye)})})}).catch(q)});return m(G,$),G}function ut(R){var $=this,F=new d(function(G,H){$.ready().then(function(){var q=$._dbInfo;q.db.transaction(function(ce){X(ce,q,"SELECT key FROM "+q.storeName,[],function(fe,ge){for(var ye=[],_e=0;_e<ge.rows.length;_e++)ye.push(ge.rows.item(_e).key);G(ye)},function(fe,ge){H(ge)})})}).catch(H)});return m(F,R),F}function dt(R){return new d(function($,F){R.transaction(function(G){G.executeSql("SELECT name FROM sqlite_master WHERE type='table' AND name <> '__WebKitDatabaseInfoTable__'",[],function(H,q){for(var ce=[],fe=0;fe<q.rows.length;fe++)ce.push(q.rows.item(fe).name);$({db:R,storeNames:ce})},function(H,q){F(q)})},function(G){F(G)})})}function _t(R,$){$=y.apply(this,arguments);var F=this.config();R=typeof R!="function"&&R||{},R.name||(R.name=R.name||F.name,R.storeName=R.storeName||F.storeName);var G=this,H;return R.name?H=new d(function(q){var ce;R.name===F.name?ce=G._dbInfo.db:ce=openDatabase(R.name,"","",0),R.storeName?q({db:ce,storeNames:[R.storeName]}):q(dt(ce))}).then(function(q){return new d(function(ce,fe){q.db.transaction(function(ge){function ye(pt){return new d(function(xt,Jt){ge.executeSql("DROP TABLE IF EXISTS "+pt,[],function(){xt()},function(zt,Fa){Jt(Fa)})})}for(var _e=[],Te=0,He=q.storeNames.length;Te<He;Te++)_e.push(ye(q.storeNames[Te]));d.all(_e).then(function(){ce()}).catch(function(pt){fe(pt)})},function(ge){fe(ge)})})}):H=d.reject("Invalid arguments"),m(H,$),H}var ft={_driver:"webSQLStorage",_initStorage:U,_support:ra(),iterate:oe,getItem:pe,setItem:xe,removeItem:je,clear:We,length:Fe,key:Me,keys:ut,dropInstance:_t};function na(){try{return typeof localStorage<"u"&&"setItem"in localStorage&&!!localStorage.setItem}catch{return!1}}function rr(R,$){var F=R.name+"/";return R.storeName!==$.storeName&&(F+=R.storeName+"/"),F}function nr(){var R="_localforage_support_test";try{return localStorage.setItem(R,!0),localStorage.removeItem(R),!1}catch{return!0}}function sr(){return!nr()||localStorage.length>0}function qt(R){var $=this,F={};if(R)for(var G in R)F[G]=R[G];return F.keyPrefix=rr(R,$._defaultConfig),sr()?($._dbInfo=F,F.serializer=ct,d.resolve()):d.reject()}function Rr(R){var $=this,F=$.ready().then(function(){for(var G=$._dbInfo.keyPrefix,H=localStorage.length-1;H>=0;H--){var q=localStorage.key(H);q.indexOf(G)===0&&localStorage.removeItem(q)}});return m(F,R),F}function D(R,$){var F=this;R=b(R);var G=F.ready().then(function(){var H=F._dbInfo,q=localStorage.getItem(H.keyPrefix+R);return q&&(q=H.serializer.deserialize(q)),q});return m(G,$),G}function M(R,$){var F=this,G=F.ready().then(function(){for(var H=F._dbInfo,q=H.keyPrefix,ce=q.length,fe=localStorage.length,ge=1,ye=0;ye<fe;ye++){var _e=localStorage.key(ye);if(_e.indexOf(q)===0){var Te=localStorage.getItem(_e);if(Te&&(Te=H.serializer.deserialize(Te)),Te=R(Te,_e.substring(ce),ge++),Te!==void 0)return Te}}});return m(G,$),G}function O(R,$){var F=this,G=F.ready().then(function(){var H=F._dbInfo,q;try{q=localStorage.key(R)}catch{q=null}return q&&(q=q.substring(H.keyPrefix.length)),q});return m(G,$),G}function L(R){var $=this,F=$.ready().then(function(){for(var G=$._dbInfo,H=localStorage.length,q=[],ce=0;ce<H;ce++){var fe=localStorage.key(ce);fe.indexOf(G.keyPrefix)===0&&q.push(fe.substring(G.keyPrefix.length))}return q});return m(F,R),F}function N(R){var $=this,F=$.keys().then(function(G){return G.length});return m(F,R),F}function Y(R,$){var F=this;R=b(R);var G=F.ready().then(function(){var H=F._dbInfo;localStorage.removeItem(H.keyPrefix+R)});return m(G,$),G}function ne(R,$,F){var G=this;R=b(R);var H=G.ready().then(function(){$===void 0&&($=null);var q=$;return new d(function(ce,fe){var ge=G._dbInfo;ge.serializer.serialize($,function(ye,_e){if(_e)fe(_e);else try{localStorage.setItem(ge.keyPrefix+R,ye),ce(q)}catch(Te){(Te.name==="QuotaExceededError"||Te.name==="NS_ERROR_DOM_QUOTA_REACHED")&&fe(Te),fe(Te)}})})});return m(H,F),H}function te(R,$){if($=y.apply(this,arguments),R=typeof R!="function"&&R||{},!R.name){var F=this.config();R.name=R.name||F.name,R.storeName=R.storeName||F.storeName}var G=this,H;return R.name?H=new d(function(q){R.storeName?q(rr(R,G._defaultConfig)):q(R.name+"/")}).then(function(q){for(var ce=localStorage.length-1;ce>=0;ce--){var fe=localStorage.key(ce);fe.indexOf(q)===0&&localStorage.removeItem(fe)}}):H=d.reject("Invalid arguments"),m(H,$),H}var K={_driver:"localStorageWrapper",_initStorage:qt,_support:na(),iterate:M,getItem:D,setItem:ne,removeItem:Y,clear:Rr,length:N,key:O,keys:L,dropInstance:te},me=function($,F){return $===F||typeof $=="number"&&typeof F=="number"&&isNaN($)&&isNaN(F)},Le=function($,F){for(var G=$.length,H=0;H<G;){if(me($[H],F))return!0;H++}return!1},Ze=Array.isArray||function(R){return Object.prototype.toString.call(R)==="[object Array]"},rt={},ht={},Ge={INDEXEDDB:ua,WEBSQL:ft,LOCALSTORAGE:K},bt=[Ge.INDEXEDDB._driver,Ge.WEBSQL._driver,Ge.LOCALSTORAGE._driver],Tt=["dropInstance"],ze=["clear","getItem","iterate","key","keys","length","removeItem","setItem"].concat(Tt),Yt={description:"",driver:bt.slice(),name:"localforage",size:4980736,storeName:"keyvaluepairs",version:1};function fa(R,$){R[$]=function(){var F=arguments;return R.ready().then(function(){return R[$].apply(R,F)})}}function Ia(){for(var R=1;R<arguments.length;R++){var $=arguments[R];if($)for(var F in $)$.hasOwnProperty(F)&&(Ze($[F])?arguments[0][F]=$[F].slice():arguments[0][F]=$[F])}return arguments[0]}var Fr=function(){function R($){i(this,R);for(var F in Ge)if(Ge.hasOwnProperty(F)){var G=Ge[F],H=G._driver;this[F]=H,rt[H]||this.defineDriver(G)}this._defaultConfig=Ia({},Yt),this._config=Ia({},this._defaultConfig,$),this._driverSet=null,this._initDriver=null,this._ready=!1,this._dbInfo=null,this._wrapLibraryMethodsWithReady(),this.setDriver(this._config.driver).catch(function(){})}return R.prototype.config=function(F){if((typeof F>"u"?"undefined":s(F))==="object"){if(this._ready)return new Error("Can't call config() after localforage has been used.");for(var G in F){if(G==="storeName"&&(F[G]=F[G].replace(/\W/g,"_")),G==="version"&&typeof F[G]!="number")return new Error("Database version must be a number.");this._config[G]=F[G]}return"driver"in F&&F.driver?this.setDriver(this._config.driver):!0}else return typeof F=="string"?this._config[F]:this._config},R.prototype.defineDriver=function(F,G,H){var q=new d(function(ce,fe){try{var ge=F._driver,ye=new Error("Custom driver not compliant; see https://mozilla.github.io/localForage/#definedriver");if(!F._driver){fe(ye);return}for(var _e=ze.concat("_initStorage"),Te=0,He=_e.length;Te<He;Te++){var pt=_e[Te],xt=!Le(Tt,pt);if((xt||F[pt])&&typeof F[pt]!="function"){fe(ye);return}}var Jt=function(){for(var mn=function(Bp){return function(){var $p=new Error("Method "+Bp+" is not implemented by the current driver"),Sl=d.reject($p);return m(Sl,arguments[arguments.length-1]),Sl}},mo=0,Wp=Tt.length;mo<Wp;mo++){var fo=Tt[mo];F[fo]||(F[fo]=mn(fo))}};Jt();var zt=function(mn){rt[ge]&&console.info("Redefining LocalForage driver: "+ge),rt[ge]=F,ht[ge]=mn,ce()};"_support"in F?F._support&&typeof F._support=="function"?F._support().then(zt,fe):zt(!!F._support):zt(!0)}catch(Fa){fe(Fa)}});return h(q,G,H),q},R.prototype.driver=function(){return this._driver||null},R.prototype.getDriver=function(F,G,H){var q=rt[F]?d.resolve(rt[F]):d.reject(new Error("Driver not found."));return h(q,G,H),q},R.prototype.getSerializer=function(F){var G=d.resolve(ct);return h(G,F),G},R.prototype.ready=function(F){var G=this,H=G._driverSet.then(function(){return G._ready===null&&(G._ready=G._initDriver()),G._ready});return h(H,F,F),H},R.prototype.setDriver=function(F,G,H){var q=this;Ze(F)||(F=[F]);var ce=this._getSupportedDrivers(F);function fe(){q._config.driver=q.driver()}function ge(Te){return q._extend(Te),fe(),q._ready=q._initStorage(q._config),q._ready}function ye(Te){return function(){var He=0;function pt(){for(;He<Te.length;){var xt=Te[He];return He++,q._dbInfo=null,q._ready=null,q.getDriver(xt).then(ge).catch(pt)}fe();var Jt=new Error("No available storage method found.");return q._driverSet=d.reject(Jt),q._driverSet}return pt()}}var _e=this._driverSet!==null?this._driverSet.catch(function(){return d.resolve()}):d.resolve();return this._driverSet=_e.then(function(){var Te=ce[0];return q._dbInfo=null,q._ready=null,q.getDriver(Te).then(function(He){q._driver=He._driver,fe(),q._wrapLibraryMethodsWithReady(),q._initDriver=ye(ce)})}).catch(function(){fe();var Te=new Error("No available storage method found.");return q._driverSet=d.reject(Te),q._driverSet}),h(this._driverSet,G,H),this._driverSet},R.prototype.supports=function(F){return!!ht[F]},R.prototype._extend=function(F){Ia(this,F)},R.prototype._getSupportedDrivers=function(F){for(var G=[],H=0,q=F.length;H<q;H++){var ce=F[H];this.supports(ce)&&G.push(ce)}return G},R.prototype._wrapLibraryMethodsWithReady=function(){for(var F=0,G=ze.length;F<G;F++)fa(this,ze[F])},R.prototype.createInstance=function(F){return new R(F)},R}(),Ba=new Fr;r.exports=Ba},{3:3}]},{},[4])(4)})})(Tu);var Xg=Tu.exports;const Zg=tn(Xg),ur=Zg.createInstance({storeName:"ddb_factor_platform"}),ey={getItem:function(e){return ur.getItem(e)},setItem:async function(e,t){await ur.setItem(e,t)},removeItem:function(e){return ur.removeItem(e)}},An=ki()(Qg((e,t)=>({format:{numberMantissa:4,exponential:!0},theme:"light"}),{name:"user-app-config",storage:ey,partialize:e=>({format:e.format,theme:e.theme})}));function Yo(e){const t=An(n=>n.theme);return e[t]}var ty={exports:{}};(function(e,t){(function(n,r){e.exports=r(Cm)})(Za,function(n){function r(i){return i&&typeof i=="object"&&"default"in i?i:{default:i}}var o=r(n),s={name:"zh",weekdays:"星期日_星期一_星期二_星期三_星期四_星期五_星期六".split("_"),weekdaysShort:"周日_周一_周二_周三_周四_周五_周六".split("_"),weekdaysMin:"日_一_二_三_四_五_六".split("_"),months:"一月_二月_三月_四月_五月_六月_七月_八月_九月_十月_十一月_十二月".split("_"),monthsShort:"1月_2月_3月_4月_5月_6月_7月_8月_9月_10月_11月_12月".split("_"),ordinal:function(i,u){return u==="W"?i+"周":i+"日"},weekStart:1,yearStart:4,formats:{LT:"HH:mm",LTS:"HH:mm:ss",L:"YYYY/MM/DD",LL:"YYYY年M月D日",LLL:"YYYY年M月D日Ah点mm分",LLLL:"YYYY年M月D日ddddAh点mm分",l:"YYYY/M/D",ll:"YYYY年M月D日",lll:"YYYY年M月D日 HH:mm",llll:"YYYY年M月D日dddd HH:mm"},relativeTime:{future:"%s后",past:"%s前",s:"几秒",m:"1 分钟",mm:"%d 分钟",h:"1 小时",hh:"%d 小时",d:"1 天",dd:"%d 天",M:"1 个月",MM:"%d 个月",y:"1 年",yy:"%d 年"},meridiem:function(i,u){var c=100*i+u;return c<600?"凌晨":c<900?"早上":c<1100?"上午":c<1300?"中午":c<1800?"下午":"晚上"}};return o.default.locale(s,null,!0),s})})(ty);var ay={exports:{}};(function(e,t){(function(n,r){e.exports=r()})(Za,function(){return{name:"en",weekdays:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_"),ordinal:function(n){var r=["th","st","nd","rd"],o=n%100;return"["+n+(r[(o-20)%10]||r[o]||r[0])+"]"}}})})(ay);ma.use(zp).init({debug:!1,lng:"zh-CN",resources:mf,interpolation:{escapeValue:!1}});function Ou(){var t;const e=(t=ma.resolvedLanguage)==null?void 0:t.startsWith("zh");Ya.locale(e?"zh":"en"),document.head.lang=ma.resolvedLanguage,document.title=ma.t("common.title")}ma.on("languageChanged",Ou);Ou();async function Ru(){return Go.loadWASM(await fetch("/factor-platform/onig.wasm"))}var Lc;Hr.config({paths:{vs:"/factor-platform/vs"},"vs/nls":{availableLanguages:{"*":(Lc=ma.language)!=null&&Lc.startsWith("zh")?"zh-cn":""}}});function Fu(){const e=va({zh:{docs:"/factor-platform/docs.zh.json",language:"zh"},en:{docs:"/factor-platform/docs.en.json",language:"en"}}),t=Yo({dark:{theme:"dark"},light:{theme:"light"}}),n=Yo({dark:"vs-dark",light:"light"});return{dolphinDBLanguageOptions:{...e,...t},editorTheme:n}}function Hs(e){const{editorTheme:t,dolphinDBLanguageOptions:n}=Fu(),r=k.useRef(null);return k.useEffect(()=>{r.current&&r.current.focus()},[]),a.jsx(zg,{...e,dolphinDBLanguageOptions:n,loading:a.jsx(kr,{spinning:!0}),beforeMonacoInit:Ru,theme:t,onMount:(o,s)=>{var i;r.current=o,(i=e.onMount)==null||i.call(e,o,s)},options:{padding:{top:8,bottom:8},fixedOverflowWidgets:!0,acceptSuggestionOnEnter:"on",minimap:{enabled:!0},find:{addExtraSpaceOnTop:!1},...e.options}})}function ry(e){const{editorTheme:t,dolphinDBLanguageOptions:n}=Fu();return a.jsx(Gg,{...e,dolphinDBLanguageOptions:n,loading:a.jsx(kr,{spinning:!0}),beforeMonacoInit:Ru,theme:t,options:{padding:{top:8,bottom:8},minimap:{enabled:!0},find:{addExtraSpaceOnTop:!1},...e.options}})}const Jo=new URLSearchParams(location.search),xo=Jo.get("logined"),Ra=ki((e,t)=>{async function n(s){try{const i=await ee.requestFunc("factorPlatform::facplf::facplf_token_login",{token:s});await ur.setItem("session",{username:i.username,token:s}),e({status:"logged-in",user:i})}catch{e({status:"logged-out",user:null})}}async function r(){if(xo==="1"&&Jo.has("token")){const s=Jo.get("token");await n(s)}else e({status:"logged-out",user:null})}async function o(){const s=await ur.getItem("session");if(e({sessionStorageValue:s}),!(s!=null&&s.token)){e({status:"logged-out",user:null});return}const i=s.token;await n(i)}return{status:"unknown",user:null,sessionStorageValue:null,restore:async()=>{xo?await r():await o()},logout:async s=>{var u,c;const i=(u=t().user)==null?void 0:u.username;if(s.withRequest&&await ee.requestFunc("facplf_logout",{username:(c=t().user)==null?void 0:c.username}),await ur.setItem("session",{username:i}),xo){const l=new URLSearchParams(location.search);l.delete("logined"),l.delete("token"),window.location.search=l.toString()}else window.location.reload()},login:async({username:s,password:i})=>{const{token:u,user:c}=await ee.requestFunc("factorPlatform::facplf::facplf_user_login",{username:s,password:i});await ur.setItem("session",{username:s,token:u}),e({status:"logged-in",user:c})}}}),Ks=new URLSearchParams(location.search),ny=Ks.get("ddb_tls")??location.protocol==="https:",sy=Ks.get("ddb_hostname")??window.location.hostname,$l=Ks.get("ddb_port")??window.location.port,oy=Ks.get("ddb_pathname")??"",iy=(ny?"wss://":"ws://")+sy+($l?`:${$l}`:"")+oy,ee=new Gp({debug:!0,ddbUrl:iy,onInit:async e=>{await e.rawEval("use factorPlatform::facplf;"),await Nc(1e3)},onReconnectInit:async()=>{await Ra.getState().restore()}});function Kr(){return ee.requestFunc("facplf_get_dept_list")}Kr.SWR_KEY="facplf_get_dept_list";const[ly,Ui]=Xr(()=>{const e=Ra(),{data:t,...n}=Oe(()=>e.user?Kr.SWR_KEY:null,Kr),r=k.useMemo(()=>ou((t==null?void 0:t.items)??[],"name"),[t]),o=k.useCallback(s=>{const i=r[s];return(i==null?void 0:i.nickname)||(i==null?void 0:i.name)||s},[r]);return{departmentMap:r,getDisplayName:o,data:t,...n}}),Be=Up({fallback:ma.t("common.unknown-error"),interceptor:e=>{if(e instanceof Hp&&e.code!==Kp){const t=`api-error.${e.code}`;if(ma.exists(t))return ma.t(t,e.data)}}}),cy=e=>k.createElement("svg",{className:"icon",viewBox:"0 0 1024 1024",xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",...e},k.createElement("path",{d:"M69.632 954.368c106.496 106.496 315.392 16.384 442.368-69.632 126.976 81.92 335.872 176.128 442.368 69.632 86.016-86.016 53.248-258.048-69.632-442.368 122.88-184.32 155.648-356.352 69.632-442.368C868.352-16.384 696.32 16.384 512 135.168 327.68 16.384 155.648-16.384 69.632 69.632-16.384 155.648 16.384 327.68 139.264 512 16.384 696.32-16.384 868.352 69.632 954.368z m827.392-57.344c-45.056 45.056-167.936 24.576-311.296-61.44 90.112-69.632 176.128-155.648 249.856-249.856 86.016 143.36 110.592 266.24 61.44 311.296z m0-770.048c45.056 45.056 24.576 167.936-61.44 311.296-73.728-94.208-159.744-180.224-249.856-249.856 143.36-86.016 266.24-110.592 311.296-61.44z m-110.592 385.024c-73.728 102.4-172.032 200.704-274.432 274.432-102.4-77.824-200.704-172.032-274.432-274.432C311.296 409.6 409.6 311.296 512 237.568c106.496 77.824 200.704 176.128 274.432 274.432zM126.976 126.976c16.384-16.384 40.96-24.576 73.728-24.576 61.44 0 147.456 28.672 237.568 86.016-90.112 69.632-176.128 155.648-249.856 249.856-86.016-143.36-110.592-266.24-61.44-311.296z m61.44 458.752c73.728 94.208 163.84 180.224 249.856 249.856-143.36 86.016-266.24 110.592-311.296 61.44-49.152-45.056-24.576-167.936 61.44-311.296z"}),k.createElement("path",{d:"M512 630.784c65.536 0 118.784-53.248 118.784-118.784 0-65.536-53.248-118.784-118.784-118.784-65.536 0-118.784 53.248-118.784 118.784 0 65.536 53.248 118.784 118.784 118.784z"})),uy=e=>k.createElement(Ga,{component:cy,...e}),dy=e=>k.createElement("svg",{t:1690264253804,className:"icon",viewBox:"0 0 1024 1024",xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink",width:"1em",height:"1em",...e},k.createElement("path",{d:"M960 480H615.8L512 376.2 408.2 480H128V224h160v96h640V64H288v96H64v384h344.2L512 647.8 615.8 544H896v256H768v-96H128v256h640v-96h192V480zM352 128h512v128H352V128z m352 768H192V768h512v128z"})),py=e=>k.createElement(Ga,{component:dy,...e}),my="/factor-platform/assets/logo-gprHc6Yu.png",Lu=jt.createContext({menuRoutes:[]}),fy="_singleTitle_18vff_1",hy={singleTitle:fy},Nu=(e,t)=>{const n=e.find(r=>!("type"in r)&&t.startsWith(r.key));return n?[n,...Nu(n.children??[],t)]:[]},gy=e=>{const{pathname:t,addonItems:n,...r}=e,{menuRoutes:o}=k.useContext(Lu),s=Zr(),i=t??s.pathname,u=k.useMemo(()=>Nu(o,i),[o,i]),c=k.useMemo(()=>{const l=(n==null?void 0:n.length)??0;return[...u.map((p,d)=>({title:l===0&&d===u.length-1||p.key===i||p.notBreadcrumbLink?p.label:a.jsx(Ue,{to:p.key,children:p.label}),route:p})),...n??[]]},[n,u,i]);return c.length===1?a.jsx("h2",{className:Wt(hy.singleTitle,e.className),children:c[0].title}):a.jsx(Hc,{...r,items:c})},Vl="sidebar-collapsed";var At=(e=>(e[e.DATA_IMPORT=3]="DATA_IMPORT",e[e.REVIEW=4]="REVIEW",e))(At||{}),ot=(e=>(e[e.FACTOR=1]="FACTOR",e[e.STRATEGY=2]="STRATEGY",e[e.DATA_IMPORT=3]="DATA_IMPORT",e[e.REVIEW=4]="REVIEW",e))(ot||{});new URLSearchParams(location.search);function ca(){const e=Ra(n=>n.user),t=k.useMemo(()=>({isSystemAdmin(){return!!(e!=null&&e.is_admin)},isDepartmentAdmin(n){var o,s;if(!n)return(o=e==null?void 0:e.departments)==null?void 0:o.some(i=>i.is_admin);const r=(s=e==null?void 0:e.departments)==null?void 0:s.find(i=>i.name===n);return!!(r!=null&&r.is_admin)},hasSystemAuth(n){var r;return((r=e==null?void 0:e.system_auths)==null?void 0:r.includes(n))??!1},hasDepartmentAuth(n,r){var s,i,u;if(!r)return(s=e==null?void 0:e.departments)==null?void 0:s.some(c=>c.auths.includes(n));const o=(i=e==null?void 0:e.departments)==null?void 0:i.find(c=>c.name===r);return((u=o==null?void 0:o.auths)==null?void 0:u.includes(n))??!1},isMatch(n){return!(n!=null&&n.systemAdmin&&!t.isSystemAdmin()||n!=null&&n.departmentAdmin&&!t.isDepartmentAdmin()||n!=null&&n.systemAuth&&!(n!=null&&n.systemAuth.some(r=>t.hasSystemAuth(r)))||n!=null&&n.departmentAuth&&!(n!=null&&n.departmentAuth.some(r=>t.hasDepartmentAuth(r))))},isMatchAny(n){return n.some(r=>t.isMatch(r))}}),[e]);return t}const yy="_container_1q0d1_1",by="_header_1q0d1_7",vy="_breadcrumb_1q0d1_13",_y="_autoSave_1q0d1_17",xy="_loading_1q0d1_21",wy="_content_1q0d1_28",jy="_editorContainer_1q0d1_34",Iy="_editorHeader_1q0d1_44",Sy="_editorTitle_1q0d1_53",ky="_staticDeclaration_1q0d1_57",Cy="_editor_1q0d1_34",Lr={container:yy,header:by,breadcrumb:vy,autoSave:_y,loading:xy,content:wy,editorContainer:jy,editorHeader:Iy,editorTitle:Sy,staticDeclaration:ky,editor:Cy};function nn(e){const{title:t,loading:n,className:r,code:o,onChange:s,sourceCode:i,histories:u,declarationCode:c,onSave:l,onSaveManually:p}=e,{t:d}=Z(),{message:m}=at.useApp(),[h,b]=Ir(!1),y=k.useMemo(()=>u?u.map((j,C)=>({key:j.time,label:d("components.code-editor-block.histories-label",{index:u.length-C}),time:j.time,code:j.code})):null,[u,d]),x=he(async()=>{await l(o)}),I=he(async()=>{try{b.setTrue(),await x(),p==null||p(),m.success(d("common.save-success"))}catch(j){m.error(Be(j))}finally{b.setFalse()}}),w=k.useCallback(j=>{s(j??"")},[s]),A=k.useMemo(()=>i?o!==i:!1,[o,i]),f=he((j,C)=>{j.addAction({id:"save-code",label:d("common.save-code"),keybindings:[C.KeyMod.CtrlCmd|C.KeyCode.KeyS],run:I})});return a.jsxs("div",{className:Wt(Lr.content,r),children:[a.jsx(Ci,{message:d("common.leave-page.code"),when:A}),a.jsxs("div",{className:Lr.editorContainer,children:[a.jsxs("div",{className:Lr.editorHeader,children:[a.jsx("h3",{className:Lr.editorTitle,children:t}),a.jsxs(it,{children:[a.jsx(Ri,{dot:A,color:"orange",children:a.jsx(Ae,{loading:h,type:"primary",onClick:I,icon:a.jsx(Kc,{}),children:d("common.save-code")})}),y&&a.jsx(Yp,{histories:y,editingCode:o})]})]}),c&&a.jsx("div",{className:Lr.staticDeclaration,children:c}),a.jsx("div",{className:Lr.editor,children:a.jsx(Hs,{onMount:f,value:n?d("common.loading"):o,options:{readOnly:n,domReadOnly:n},onChange:w})})]})]})}var Xe=(e=>(e[e.RUNNING=0]="RUNNING",e[e.FAILED=-1]="FAILED",e[e.PARTIAL_FAILED=-2]="PARTIAL_FAILED",e[e.SUCCESS=1]="SUCCESS",e))(Xe||{}),ms=(e=>(e.DEPARTMENT="department",e.SYSTEM="system",e))(ms||{});const Ey="_line_hrdo1_1",Ay={line:Ey},Du=e=>{const{text:t,className:n,keepEmptyLine:r,lineClassName:o,...s}=e,i=k.useMemo(()=>{let u=t.split(`
`);return r||(u=u.filter(c=>c.trim()!=="")),u},[r,t]);return a.jsx("div",{...s,className:n,children:i.map(u=>a.jsx("p",{className:Wt(Ay.line,o),children:u},u))})},Py="_page_x4efg_1",Ty="_header_x4efg_6",Oy="_action_x4efg_10",Ry="_headerBottomBorder_x4efg_15",Fy="_fullWidth_x4efg_18",hn={page:Py,header:Ty,action:Oy,headerBottomBorder:Ry,fullWidth:Fy};function nt(e){const{className:t,classNames:n,fullWidth:r,affixHeader:o,headerAction:s,headerBottomBorder:i,headerBottomMargin:u,headerStyle:c,autoBreadcrumb:l,loading:p,children:d}=e,m=u===!1?void 0:u===!0?16:u,h=l!==!1||s,[b,y]=k.useState(!1),x=k.useCallback(w=>y(w??!1),[]),I=a.jsxs("div",{className:Wt(hn.header,{[hn.headerBottomBorder]:i,[(n==null?void 0:n.affixHeader)??""]:b},n==null?void 0:n.header),style:{marginBottom:m,...c},children:[l!==!1&&a.jsx(gy,{...l}),s&&a.jsx("div",{className:hn.action,children:s})]});return a.jsxs("div",{className:Wt(hn.page,{[hn.fullWidth]:r},t,n==null?void 0:n.root),children:[h?o?a.jsx(Em,{offsetTop:64,onChange:x,children:I}):I:null,p?a.jsx(en,{height:"calc(100vh - 114px)"}):d]})}const Ly="_empty_1qdxv_1",Ny="_error_1qdxv_5",ql={empty:Ly,error:Ny};function Ys(e){const{status:t,children:n,failedReason:r,notFound:o,notFoundContent:s,loading:i,beforeContent:u,...c}=e,{t:l}=Z();let p;switch(!0){case o:p=s??a.jsx(Ma,{className:ql.empty,image:Ma.PRESENTED_IMAGE_SIMPLE});break;case t===Xe.SUCCESS:p=n;break;case t===Xe.FAILED:p=a.jsx(Fi,{showIcon:!0,type:"error",message:a.jsx("b",{children:l("components.page-layout.detail.failed.message")}),description:a.jsx(Du,{className:ql.error,text:r??""})});break;case t===Xe.RUNNING:p=a.jsx(en,{height:"calc(100vh - 114px)",tip:l("components.page-layout.detail.running.message")});break}return a.jsxs(nt,{...c,loading:i,children:[u,p]})}function $t(){const e=Zr();return k.useMemo(()=>mt.parse(e.search),[e.search])}const _a=Ts.createFormNiceModal,Ha=Ts.createFormNiceDrawer;function Qo(e={department_names:null,include_not_activated:!1}){return ee.requestFunc("facplf_get_user_list",e)}Qo.SWR_KEY="facplf_get_user_list";const zl=e=>{const{getUserListParams:t,excludeUsernames:n,...r}=e,{isLoading:o,data:s}=Oe([Qo.SWR_KEY,t],async()=>Qo(t)),i=k.useMemo(()=>s?s.items.filter(u=>!(n!=null&&n.includes(u.username))).map(u=>({label:u.username,value:u.username})):[],[n,s]);return a.jsx(kt,{loading:o,options:i,...r})};function Mu(e){return Oe(()=>e?["facplf_get_preset_list",e]:null,async()=>ee.requestFunc("facplf_get_preset_list",{preset_type:e}))}const Dy=ke.create(e=>{const{presetValue:t,presetType:n,defaultName:r}=e,o=ke.useModal(),[s]=B.useForm(),[i,u]=Ir(),{t:c}=Z(),{message:l}=at.useApp(),{data:p}=Mu(n),d=he(async()=>{const m=await s.validateFields(),{preset_name:h}=m;try{u.setTrue(),await ee.requestFunc("facplf_save_preset",{preset_type:n,name:h,value:typeof t=="function"?t():t}),l.success(c("components.save-preset-btn.success-message")),o.resolve(h),o.hide()}catch(b){l.error(Be(b))}finally{u.setFalse()}});return a.jsx(aa,{open:o.visible,title:c("components.preset-select.save-modal.title"),onCancel:o.hide,afterClose:o.remove,onOk:d,okButtonProps:{loading:i},destroyOnClose:!0,children:a.jsx(B,{form:s,children:a.jsx(B.Item,{required:!0,label:c("components.save-preset-btn.preset-name"),name:"preset_name",rules:[{required:!0}],initialValue:r,children:a.jsx(Yc,{options:p==null?void 0:p.map(m=>({label:m.name,value:m.name})),placeholder:c("components.save-preset-btn.required-message")})})})})}),My=e=>{const{presetValue:t,presetType:n,defaultName:r,onSaved:o,...s}=e,{t:i}=Z(),u=he(async()=>{const c=await ke.show(Dy,{presetType:n,presetValue:t,defaultName:r});o==null||o(c)});return a.jsx(Ae,{...s,onClick:u,children:i("components.preset-select.save")})},Wy="_select_ccc2o_1",By="_option_ccc2o_5",Gl={select:Wy,option:By};function Hi(e){const{presetType:t,presetValue:n,saveBtn:r=!0,value:o,onChange:s,containerClassName:i,...u}=e,{t:c}=Z(),{message:l}=at.useApp(),[p,d]=Ei(o);k.useEffect(()=>{d(null)},[t,d]);const{data:m,isLoading:h,mutate:b}=Mu(t),y=k.useCallback(w=>{const A=m==null?void 0:m.find(f=>f.name===w);d(w),s==null||s(w,A)},[s,m,d]),x=he((w,A)=>{w.stopPropagation(),aa.confirm({title:c("components.preset-select.delete"),content:c("components.preset-select.delete-confirm",{name:A.name}),onOk:async()=>{try{await ee.requestFunc("facplf_delete_preset",{preset_type:A.preset_type,name:A.name}),l.success(c("common.delete-success")),p===A.name&&d(void 0),b()}catch(f){throw l.error(Be(f)),f}}})}),I=k.useCallback(w=>{b(),d(w)},[b,d]);return a.jsxs(it.Compact,{className:i,children:[a.jsx(kt,{loading:h,placeholder:c("components.preset-select.placeholder"),popupMatchSelectWidth:!1,optionLabelProp:"label",...u,value:p,onChange:y,listHeight:400,className:Wt(Gl.select,u.className),children:m==null?void 0:m.map(w=>a.jsx(kt.Option,{label:w.name,value:w.name,children:a.jsxs(it,{className:Gl.option,children:[w.name,a.jsx(Ae,{type:"link",size:"small",danger:!0,icon:a.jsx(Li,{}),onClick:A=>x(A,w)})]})},w.name))}),r&&a.jsx(My,{type:"primary",...typeof r=="object"?r:{},presetType:t,defaultName:p??"",presetValue:n??"",onSaved:I})]})}function sn(e){const{tagType:t,...n}=e,{t:r}=Z(),{data:o=[],isLoading:s}=Oe(["facplf_get_tag_list",t],async()=>ee.requestFunc("facplf_get_tag_list",{type:t})),i=k.useMemo(()=>o.map(u=>({label:u,value:u})),[o]);return a.jsx(kt,{options:i,loading:s,mode:"tags",tokenSeparators:[","],placeholder:r("components.factor-tag-select.placeholder"),...n})}var $r=(e=>(e.SQL="SQL",e.PANEL="面板",e.LOW_FREQUENCY="低频",e.MEDIUM_FREQUENCY="中频",e.HIGH_FREQUENCY="高频",e))($r||{});function Wu(e){const{t}=Z(),n=k.useMemo(()=>[$r.SQL,$r.PANEL,$r.HIGH_FREQUENCY,$r.MEDIUM_FREQUENCY,$r.LOW_FREQUENCY].map(r=>({label:t(`constants.factor-properties.${r}`),value:r})),[t]);return a.jsx(kt,{options:n,mode:"multiple",placeholder:t("components.factor-property-select.placeholder"),...e})}const qr="facplf$public",$y={items:[],total:0},Bu=e=>{const{items:t,withPublic:n,...r}=e,{getDisplayName:o,data:s=$y,isLoading:i}=Ui(),{t:u}=Z(),c=k.useMemo(()=>{const l=t??s.items,p=n?[{label:u("components.department-select.option.public"),value:qr}]:[],d=l==null?void 0:l.map(m=>({label:m.nickname||o(m.name),value:m.name}));return[...p,...d]},[s.items,o,t,u,n]);return a.jsx(kt,{loading:i,placeholder:u(n?"components.department-select.placeholder.with-public":"components.department-select.placeholder.normal"),options:c,showSearch:!0,...r})};function Ki(e){const t=Ra(n=>n.user);return a.jsx(Bu,{items:t==null?void 0:t.departments,...e})}const Un=/^[a-zA-Z\u4e00-\u9fa5][a-zA-Z0-9_\u4e00-\u9fa5]*$/,Vy=Un,qy=Un,$u=Un,zy=/^[a-zA-Z][a-zA-Z0-9_]*$/,Gy=Un,Uy=Un;var Er=(e=>(e[e.FACTOR=0]="FACTOR",e[e.FACTOR_TEMPLATE=1]="FACTOR_TEMPLATE",e[e.DATA_IMPORT_LIB=2]="DATA_IMPORT_LIB",e[e.DATA_IMPORT_TEMPLATE=3]="DATA_IMPORT_TEMPLATE",e[e.ANALYSIS_LIB=4]="ANALYSIS_LIB",e))(Er||{});const Se={login:e=>({pathname:"/login",search:mt.stringify({redirect:e})}),factorDraftList:()=>"/factor/draft",factorDraftEdit:e=>({pathname:"/factor/draft/edit",search:mt.stringify({id:e})}),factorTestList:e=>({pathname:"/factor/test/list",search:mt.stringify(e)}),factorTestDetail:e=>({pathname:"/factor/test/detail",search:mt.stringify({id:e})}),factorPublicList:()=>"/factor/public",factorPublicCreateBatchTest:()=>"/factor/public/batch-test/create",factorPublicBatchTestDetail:e=>({pathname:"/factor/public/batch-test/detail",search:mt.stringify({id:e})}),taskMonitorList:()=>"/monitor",departmentList:()=>"/system/department",departmentCreate:()=>"/system/department/create",departmentEdit:e=>({pathname:"/system/department/edit",search:mt.stringify({name:e})}),userList:()=>"/system/user",userCreate:()=>"/system/user/create",userEdit:e=>({pathname:"/system/user/edit",search:mt.stringify({username:e})}),dbOverview:()=>"/db-overview",factorTemplateList:()=>"/factor/template",factorTemplateEdit:e=>({pathname:"/factor/template/edit",search:mt.stringify({id:e})}),mySubmitReviewList:()=>"/review/my-submit",mySubmitFactorDetail:e=>({pathname:"/review/my-submit/factor-detail",search:mt.stringify({id:e})}),mySubmitTemplateDetail:e=>({pathname:"/review/my-submit/template-detail",search:mt.stringify({id:e})}),myReviewList:()=>"/review/my-review",myReviewFactorDetail:e=>({pathname:"/review/my-review/factor-detail",search:mt.stringify({id:e})}),myReviewTemplateDetail:e=>({pathname:"/review/my-review/template-detail",search:mt.stringify({id:e})}),batchTestDetail:e=>({pathname:"/factor/public/batch-test/detail",search:mt.stringify({id:e})}),workflow:()=>"/workflow",workflowTaskCreate:()=>"/workflow/task/create",workflowEdit:e=>({pathname:"/workflow/edit",search:mt.stringify({id:e})}),workflowTaskEdit:e=>({pathname:"/workflow/task/edit",search:mt.stringify({id:e})}),workflowRunRecordList:e=>({pathname:"/workflow/exist-workflow/run-record",search:mt.stringify(e)}),workflowRunRecordDetail:e=>({pathname:"/workflow/exist-workflow/run-record/detail",search:mt.stringify({id:e})}),dataImportLibList:()=>({pathname:"/data-import/lib"}),dataImportLibEdit:e=>({pathname:"/data-import/lib/edit",search:mt.stringify({id:e})}),dataImportTemplateEdit:e=>({pathname:"/data-import/template/edit",search:mt.stringify({id:e})}),dataImportRecordList:e=>({pathname:"/data-import/record/list",search:mt.stringify(e)}),dataImportRecordDetail:e=>({pathname:"/data-import/record/detail",search:mt.stringify({id:e})}),analysisLibList:()=>"/analysis/lib",analysisLibEdit:e=>({pathname:"/analysis/lib/edit",search:mt.stringify({id:e})}),analysisTemplateList:()=>"/analysis/template",analysisTemplateCodeEdit:e=>({pathname:"/analysis/template/code-edit",search:mt.stringify({id:e})}),analysisTemplateVisualEdit:e=>({pathname:"/analysis/template/visual-edit",search:mt.stringify({id:e})}),analysisRecordFactorList:e=>({pathname:"/analysis/record/list/factor",search:mt.stringify(e)}),analysisRecordCustomList:e=>({pathname:"/analysis/record/list/custom",search:mt.stringify(e)}),analysisRecordDetailData:e=>({pathname:"/analysis/record/detail/data",search:mt.stringify({id:e})}),analysisRecordDetailReport:e=>({pathname:"/analysis/record/detail/report",search:mt.stringify({id:e})})},Vu=()=>{const{t:e}=Z();return a.jsxs(a.Fragment,{children:[a.jsx(B.Item,{label:e("pages.analysis-lib.lib-modal.form.name.label"),required:!0,name:"name",validateFirst:!0,rules:[{required:!0},{validator:async(t,n)=>{if(!$u.test(n))throw e("common.validate.ddb-var-name-rule-message")}}],children:a.jsx(Ne,{})}),a.jsx(B.Item,{name:"tags",label:e("pages.analysis-lib.lib-modal.form.tags.label"),initialValue:[],children:a.jsx(sn,{tagType:Er.ANALYSIS_LIB})}),a.jsx(B.Item,{name:"comment",label:e("common.comment"),initialValue:"",children:a.jsx(Ne.TextArea,{autoSize:{minRows:3,maxRows:5}})})]})},Hy=_a({useModalProps:({t:e})=>({title:e("pages.analysis-lib.lib-modal.create-title")}),useFormProps:()=>({labelCol:{span:6}}),useFormRender:({formProps:e})=>a.jsx(B,{...e,children:a.jsx(Vu,{})}),onSubmit:async(e,{t,antApp:{message:n},props:r})=>{var s;const{lib_id:o}=await ee.requestFunc("facplf_create_new_analysis_lib",{name:e.name,tags:e.tags.join(","),comment:e.comment});n.success(t("common.create-success")),(s=r==null?void 0:r.history)==null||s.push(Se.analysisLibEdit(o))}}),Ky=Ha({useDrawerProps:({t:e})=>({title:e("pages.analysis-lib.lib-modal.edit-title"),width:720}),useFormProps:({props:e})=>{var t,n,r;return{initialValues:{name:(t=e.lib)==null?void 0:t.name,tags:(n=e.lib)==null?void 0:n.tags,comment:(r=e.lib)==null?void 0:r.comment},labelCol:{span:6}}},useFormRender:({formProps:e})=>a.jsx(B,{...e,children:a.jsx(Vu,{})}),onSubmit:async(e,{props:t,t:n,antApp:{message:r}})=>{await ee.requestFunc("facplf_edit_analysis_lib",{lib_id:t.lib.lib_id,name:e.name,tags:e.tags.join(","),comment:e.comment}),r.success(n("common.save-success"))}});function qu(e){return{...e,tags:Ja(e.tags)}}async function Xo(){const e=await ee.requestFunc("facplf_analysis_lib_list");return{items:e.items.map(qu),total:e.total}}Xo.SWR_KEY="facplf_analysis_lib_list";async function Zo(e){const t=await ee.requestFunc("facplf_analysis_lib_detail",{lib_id:e});return qu(t)}Zo.SWR_KEY="facplf_analysis_lib_detail";function Yy(e,t){return Oe([Zo.SWR_KEY,e],()=>Zo(e),t)}function Jy(){const e=$t(),{t}=Z(),[n,r]=k.useState(""),{data:o,isLoading:s,mutate:i}=Yy(e.id,{onSuccess(d){n||r(d.source_code)}}),u=ea(async()=>{await ee.requestFunc("facplf_save_analysis_lib_code",{lib_id:e.id,code:n})}),c=ea(async()=>{await u(),i()}),l=k.useCallback(d=>{r(d??"")},[]),p=ea(async()=>{o&&(await ke.show(Ky,{lib:o}),i())});return a.jsx(nt,{headerBottomMargin:!0,autoBreadcrumb:{addonItems:[{title:o==null?void 0:o.name}]},headerAction:a.jsx("a",{onClick:p,children:t("pages.analysis-lib.edit.actions.edit-lib")}),children:a.jsx(nn,{title:t("pages.analysis-lib.edit.code.title"),code:n,sourceCode:o==null?void 0:o.source_code,onChange:l,onSave:c,declarationCode:`module ${o==null?void 0:o.name}`,loading:s})})}const Qy="_container_1wedo_1",Xy="_codeEditor_1wedo_5",Zy="_copy_1wedo_11",eb="_radioGroup_1wedo_18",wo={container:Qy,codeEditor:Xy,copy:Zy,radioGroup:eb},tb=ke.create(({code:e})=>{const t=ke.useModal(),{t:n}=Z();return a.jsx(aa,{open:t.visible,footer:null,onCancel:t.hide,afterClose:t.remove,title:n("components.view-code-btn.modal-title"),width:1e3,children:a.jsxs("div",{className:wo.container,children:[a.jsx(Hs,{className:wo.codeEditor,value:e,options:{readOnly:!0}}),a.jsx(Jp.IconButton,{text:e,buttonProps:{className:wo.copy}})]})})}),mr=e=>{const{children:t,code:n}=e,{t:r}=Z(),o=he(async()=>{await ke.show(tb,{code:n})});return a.jsx("a",{onClick:o,children:t||r("components.view-code-btn.name")})},ab="_folderIcon_yo6o3_1",rb="_operations_yo6o3_5",nb="_comment_yo6o3_9",jo={folderIcon:ab,operations:rb,comment:nb};function sb(){const{data:e,isLoading:t,mutate:n}=Oe(Xo.SWR_KEY,()=>Xo()),r=Ft(),o=Ra(d=>d.user),s=ca(),{t:i}=Z(),{message:u}=at.useApp(),c=ea(async()=>{await ke.show(Hy,{history:r}),n()}),l=ea(async d=>{try{await ee.requestFunc("facplf_delete_analysis_lib",{lib_id:d.lib_id}),u.success(i("common.delete-success")),n()}catch(m){u.error(Be(m))}}),p=k.useMemo(()=>[{title:i("common.table.name"),dataIndex:"name",key:"name",fixed:"left",width:200},{title:i("common.table.tags"),dataIndex:"tags",key:"tags",width:200,className:jo.tags,render(d,m){var h;return(h=m.tags)!=null&&h.length?a.jsx(Gt,{children:m.tags.map(b=>a.jsx(yt,{color:"blue",children:b},b))}):"-"}},{title:i("common.table.creator"),dataIndex:"creator",key:"creator",width:150},{title:i("common.table.create_time"),dataIndex:"create_time",key:"create_time",align:"center",width:200,render(d){return d?Qe(d):null}},{title:i("common.table.update_time"),dataIndex:"update_time",key:"update_time",align:"center",width:200,render(d){return d?Qe(d):null}},{title:i("common.comment"),dataIndex:"comment",key:"comment",width:300,render(d){return a.jsx(De.Paragraph,{className:jo.comment,ellipsis:{rows:2,expandable:!0},children:d})}},{title:i("common.table.operation.title"),key:"operation",width:250,fixed:"right",render:(d,m)=>{const h=m.creator===(o==null?void 0:o.username),b=h||s.isSystemAdmin()||s.isMatch({systemAuth:[At.REVIEW]});return a.jsxs(Vt,{max:3,children:[a.jsx(mr,{code:m.source_code}),h&&a.jsx(Ue,{to:Se.analysisLibEdit(m.lib_id),children:i("pages.analysis-lib.list.table.operation.edit-code")}),b&&a.jsx(la,{title:i("pages.analysis-lib.list.table.operation.delete-confirm.title"),description:i("pages.analysis-lib.list.table.operation.delete-confirm.description",{record:m}),onConfirm:()=>l(m),children:a.jsx(De.Link,{type:"danger",children:i("common.delete")})})]})}}],[i,o==null?void 0:o.username,s,l]);return a.jsxs(nt,{headerBottomMargin:!0,children:[a.jsx(it,{className:jo.operations,children:a.jsx(Ae,{type:"primary",icon:a.jsx(Ua,{}),onClick:c,children:i("pages.analysis-lib.list.create-new")})}),a.jsx(vt,{loading:t,rowKey:"lib_id",columns:p,dataSource:(e==null?void 0:e.items)??[],pagination:{pageSize:20},scroll:{x:1650}})]})}var zu={exports:{}};(function(e,t){(function(n,r){e.exports=r(k)})(Za,function(n){return function(r){var o={};function s(i){if(o[i])return o[i].exports;var u=o[i]={i,l:!1,exports:{}};return r[i].call(u.exports,u,u.exports,s),u.l=!0,u.exports}return s.m=r,s.c=o,s.d=function(i,u,c){s.o(i,u)||Object.defineProperty(i,u,{enumerable:!0,get:c})},s.r=function(i){typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(i,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(i,"__esModule",{value:!0})},s.t=function(i,u){if(1&u&&(i=s(i)),8&u||4&u&&typeof i=="object"&&i&&i.__esModule)return i;var c=Object.create(null);if(s.r(c),Object.defineProperty(c,"default",{enumerable:!0,value:i}),2&u&&typeof i!="string")for(var l in i)s.d(c,l,(function(p){return i[p]}).bind(null,l));return c},s.n=function(i){var u=i&&i.__esModule?function(){return i.default}:function(){return i};return s.d(u,"a",u),u},s.o=function(i,u){return Object.prototype.hasOwnProperty.call(i,u)},s.p="",s(s.s=48)}([function(r,o){r.exports=n},function(r,o){var s=r.exports={version:"2.6.12"};typeof __e=="number"&&(__e=s)},function(r,o,s){var i=s(26)("wks"),u=s(17),c=s(3).Symbol,l=typeof c=="function";(r.exports=function(p){return i[p]||(i[p]=l&&c[p]||(l?c:u)("Symbol."+p))}).store=i},function(r,o){var s=r.exports=typeof window<"u"&&window.Math==Math?window:typeof self<"u"&&self.Math==Math?self:Function("return this")();typeof __g=="number"&&(__g=s)},function(r,o,s){r.exports=!s(8)(function(){return Object.defineProperty({},"a",{get:function(){return 7}}).a!=7})},function(r,o){var s={}.hasOwnProperty;r.exports=function(i,u){return s.call(i,u)}},function(r,o,s){var i=s(7),u=s(16);r.exports=s(4)?function(c,l,p){return i.f(c,l,u(1,p))}:function(c,l,p){return c[l]=p,c}},function(r,o,s){var i=s(10),u=s(35),c=s(23),l=Object.defineProperty;o.f=s(4)?Object.defineProperty:function(p,d,m){if(i(p),d=c(d,!0),i(m),u)try{return l(p,d,m)}catch{}if("get"in m||"set"in m)throw TypeError("Accessors not supported!");return"value"in m&&(p[d]=m.value),p}},function(r,o){r.exports=function(s){try{return!!s()}catch{return!0}}},function(r,o,s){var i=s(40),u=s(22);r.exports=function(c){return i(u(c))}},function(r,o,s){var i=s(11);r.exports=function(u){if(!i(u))throw TypeError(u+" is not an object!");return u}},function(r,o){r.exports=function(s){return typeof s=="object"?s!==null:typeof s=="function"}},function(r,o){r.exports={}},function(r,o,s){var i=s(39),u=s(27);r.exports=Object.keys||function(c){return i(c,u)}},function(r,o){r.exports=!0},function(r,o,s){var i=s(3),u=s(1),c=s(53),l=s(6),p=s(5),d=function(m,h,b){var y,x,I,w=m&d.F,A=m&d.G,f=m&d.S,j=m&d.P,C=m&d.B,g=m&d.W,E=A?u:u[h]||(u[h]={}),v=E.prototype,_=A?i:f?i[h]:(i[h]||{}).prototype;for(y in A&&(b=h),b)(x=!w&&_&&_[y]!==void 0)&&p(E,y)||(I=x?_[y]:b[y],E[y]=A&&typeof _[y]!="function"?b[y]:C&&x?c(I,i):g&&_[y]==I?function(S){var P=function(T,z,V){if(this instanceof S){switch(arguments.length){case 0:return new S;case 1:return new S(T);case 2:return new S(T,z)}return new S(T,z,V)}return S.apply(this,arguments)};return P.prototype=S.prototype,P}(I):j&&typeof I=="function"?c(Function.call,I):I,j&&((E.virtual||(E.virtual={}))[y]=I,m&d.R&&v&&!v[y]&&l(v,y,I)))};d.F=1,d.G=2,d.S=4,d.P=8,d.B=16,d.W=32,d.U=64,d.R=128,r.exports=d},function(r,o){r.exports=function(s,i){return{enumerable:!(1&s),configurable:!(2&s),writable:!(4&s),value:i}}},function(r,o){var s=0,i=Math.random();r.exports=function(u){return"Symbol(".concat(u===void 0?"":u,")_",(++s+i).toString(36))}},function(r,o,s){var i=s(22);r.exports=function(u){return Object(i(u))}},function(r,o){o.f={}.propertyIsEnumerable},function(r,o,s){var i=s(52)(!0);s(34)(String,"String",function(u){this._t=String(u),this._i=0},function(){var u,c=this._t,l=this._i;return l>=c.length?{value:void 0,done:!0}:(u=i(c,l),this._i+=u.length,{value:u,done:!1})})},function(r,o){var s=Math.ceil,i=Math.floor;r.exports=function(u){return isNaN(u=+u)?0:(u>0?i:s)(u)}},function(r,o){r.exports=function(s){if(s==null)throw TypeError("Can't call method on  "+s);return s}},function(r,o,s){var i=s(11);r.exports=function(u,c){if(!i(u))return u;var l,p;if(c&&typeof(l=u.toString)=="function"&&!i(p=l.call(u))||typeof(l=u.valueOf)=="function"&&!i(p=l.call(u))||!c&&typeof(l=u.toString)=="function"&&!i(p=l.call(u)))return p;throw TypeError("Can't convert object to primitive value")}},function(r,o){var s={}.toString;r.exports=function(i){return s.call(i).slice(8,-1)}},function(r,o,s){var i=s(26)("keys"),u=s(17);r.exports=function(c){return i[c]||(i[c]=u(c))}},function(r,o,s){var i=s(1),u=s(3),c=u["__core-js_shared__"]||(u["__core-js_shared__"]={});(r.exports=function(l,p){return c[l]||(c[l]=p!==void 0?p:{})})("versions",[]).push({version:i.version,mode:s(14)?"pure":"global",copyright:"© 2020 Denis Pushkarev (zloirock.ru)"})},function(r,o){r.exports="constructor,hasOwnProperty,isPrototypeOf,propertyIsEnumerable,toLocaleString,toString,valueOf".split(",")},function(r,o,s){var i=s(7).f,u=s(5),c=s(2)("toStringTag");r.exports=function(l,p,d){l&&!u(l=d?l:l.prototype,c)&&i(l,c,{configurable:!0,value:p})}},function(r,o,s){s(62);for(var i=s(3),u=s(6),c=s(12),l=s(2)("toStringTag"),p="CSSRuleList,CSSStyleDeclaration,CSSValueList,ClientRectList,DOMRectList,DOMStringList,DOMTokenList,DataTransferItemList,FileList,HTMLAllCollection,HTMLCollection,HTMLFormElement,HTMLSelectElement,MediaList,MimeTypeArray,NamedNodeMap,NodeList,PaintRequestList,Plugin,PluginArray,SVGLengthList,SVGNumberList,SVGPathSegList,SVGPointList,SVGStringList,SVGTransformList,SourceBufferList,StyleSheetList,TextTrackCueList,TextTrackList,TouchList".split(","),d=0;d<p.length;d++){var m=p[d],h=i[m],b=h&&h.prototype;b&&!b[l]&&u(b,l,m),c[m]=c.Array}},function(r,o,s){o.f=s(2)},function(r,o,s){var i=s(3),u=s(1),c=s(14),l=s(30),p=s(7).f;r.exports=function(d){var m=u.Symbol||(u.Symbol=c?{}:i.Symbol||{});d.charAt(0)=="_"||d in m||p(m,d,{value:l.f(d)})}},function(r,o){o.f=Object.getOwnPropertySymbols},function(r,o){r.exports=function(s,i,u){return Math.min(Math.max(s,i),u)}},function(r,o,s){var i=s(14),u=s(15),c=s(37),l=s(6),p=s(12),d=s(55),m=s(28),h=s(61),b=s(2)("iterator"),y=!([].keys&&"next"in[].keys()),x=function(){return this};r.exports=function(I,w,A,f,j,C,g){d(A,w,f);var E,v,_,S=function(ue){if(!y&&ue in V)return V[ue];switch(ue){case"keys":case"values":return function(){return new A(this,ue)}}return function(){return new A(this,ue)}},P=w+" Iterator",T=j=="values",z=!1,V=I.prototype,W=V[b]||V["@@iterator"]||j&&V[j],ae=W||S(j),Ce=j?T?S("entries"):ae:void 0,we=w=="Array"&&V.entries||W;if(we&&(_=h(we.call(new I)))!==Object.prototype&&_.next&&(m(_,P,!0),i||typeof _[b]=="function"||l(_,b,x)),T&&W&&W.name!=="values"&&(z=!0,ae=function(){return W.call(this)}),i&&!g||!y&&!z&&V[b]||l(V,b,ae),p[w]=ae,p[P]=x,j)if(E={values:T?ae:S("values"),keys:C?ae:S("keys"),entries:Ce},g)for(v in E)v in V||c(V,v,E[v]);else u(u.P+u.F*(y||z),w,E);return E}},function(r,o,s){r.exports=!s(4)&&!s(8)(function(){return Object.defineProperty(s(36)("div"),"a",{get:function(){return 7}}).a!=7})},function(r,o,s){var i=s(11),u=s(3).document,c=i(u)&&i(u.createElement);r.exports=function(l){return c?u.createElement(l):{}}},function(r,o,s){r.exports=s(6)},function(r,o,s){var i=s(10),u=s(56),c=s(27),l=s(25)("IE_PROTO"),p=function(){},d=function(){var m,h=s(36)("iframe"),b=c.length;for(h.style.display="none",s(60).appendChild(h),h.src="javascript:",(m=h.contentWindow.document).open(),m.write("<script>document.F=Object<\/script>"),m.close(),d=m.F;b--;)delete d.prototype[c[b]];return d()};r.exports=Object.create||function(m,h){var b;return m!==null?(p.prototype=i(m),b=new p,p.prototype=null,b[l]=m):b=d(),h===void 0?b:u(b,h)}},function(r,o,s){var i=s(5),u=s(9),c=s(57)(!1),l=s(25)("IE_PROTO");r.exports=function(p,d){var m,h=u(p),b=0,y=[];for(m in h)m!=l&&i(h,m)&&y.push(m);for(;d.length>b;)i(h,m=d[b++])&&(~c(y,m)||y.push(m));return y}},function(r,o,s){var i=s(24);r.exports=Object("z").propertyIsEnumerable(0)?Object:function(u){return i(u)=="String"?u.split(""):Object(u)}},function(r,o,s){var i=s(39),u=s(27).concat("length","prototype");o.f=Object.getOwnPropertyNames||function(c){return i(c,u)}},function(r,o,s){var i=s(24),u=s(2)("toStringTag"),c=i(function(){return arguments}())=="Arguments";r.exports=function(l){var p,d,m;return l===void 0?"Undefined":l===null?"Null":typeof(d=function(h,b){try{return h[b]}catch{}}(p=Object(l),u))=="string"?d:c?i(p):(m=i(p))=="Object"&&typeof p.callee=="function"?"Arguments":m}},function(r,o){var s;s=function(){return this}();try{s=s||new Function("return this")()}catch{typeof window=="object"&&(s=window)}r.exports=s},function(r,o){var s=/-?\d+(\.\d+)?%?/g;r.exports=function(i){return i.match(s)}},function(r,o,s){Object.defineProperty(o,"__esModule",{value:!0}),o.getBase16Theme=o.createStyling=o.invertTheme=void 0;var i=x(s(49)),u=x(s(76)),c=x(s(81)),l=x(s(89)),p=x(s(93)),d=function(v){if(v&&v.__esModule)return v;var _={};if(v!=null)for(var S in v)Object.prototype.hasOwnProperty.call(v,S)&&(_[S]=v[S]);return _.default=v,_}(s(94)),m=x(s(132)),h=x(s(133)),b=x(s(138)),y=s(139);function x(v){return v&&v.__esModule?v:{default:v}}var I=d.default,w=(0,l.default)(I),A=(0,b.default)(h.default,y.rgb2yuv,function(v){var _,S=(0,c.default)(v,3),P=S[0],T=S[1],z=S[2];return[(_=P,_<.25?1:_<.5?.9-_:1.1-_),T,z]},y.yuv2rgb,m.default),f=function(v){return function(_){return{className:[_.className,v.className].filter(Boolean).join(" "),style:(0,u.default)({},_.style||{},v.style||{})}}},j=function(v,_){var S=(0,l.default)(_);for(var P in v)S.indexOf(P)===-1&&S.push(P);return S.reduce(function(T,z){return T[z]=function(V,W){if(V===void 0)return W;if(W===void 0)return V;var ae=V===void 0?"undefined":(0,i.default)(V),Ce=W===void 0?"undefined":(0,i.default)(W);switch(ae){case"string":switch(Ce){case"string":return[W,V].filter(Boolean).join(" ");case"object":return f({className:V,style:W});case"function":return function(we){for(var ue=arguments.length,de=Array(ue>1?ue-1:0),be=1;be<ue;be++)de[be-1]=arguments[be];return f({className:V})(W.apply(void 0,[we].concat(de)))}}case"object":switch(Ce){case"string":return f({className:W,style:V});case"object":return(0,u.default)({},W,V);case"function":return function(we){for(var ue=arguments.length,de=Array(ue>1?ue-1:0),be=1;be<ue;be++)de[be-1]=arguments[be];return f({style:V})(W.apply(void 0,[we].concat(de)))}}case"function":switch(Ce){case"string":return function(we){for(var ue=arguments.length,de=Array(ue>1?ue-1:0),be=1;be<ue;be++)de[be-1]=arguments[be];return V.apply(void 0,[f(we)({className:W})].concat(de))};case"object":return function(we){for(var ue=arguments.length,de=Array(ue>1?ue-1:0),be=1;be<ue;be++)de[be-1]=arguments[be];return V.apply(void 0,[f(we)({style:W})].concat(de))};case"function":return function(we){for(var ue=arguments.length,de=Array(ue>1?ue-1:0),be=1;be<ue;be++)de[be-1]=arguments[be];return V.apply(void 0,[W.apply(void 0,[we].concat(de))].concat(de))}}}}(v[z],_[z]),T},{})},C=function(v,_){for(var S=arguments.length,P=Array(S>2?S-2:0),T=2;T<S;T++)P[T-2]=arguments[T];if(_===null)return v;Array.isArray(_)||(_=[_]);var z=_.map(function(W){return v[W]}).filter(Boolean),V=z.reduce(function(W,ae){return typeof ae=="string"?W.className=[W.className,ae].filter(Boolean).join(" "):(ae===void 0?"undefined":(0,i.default)(ae))==="object"?W.style=(0,u.default)({},W.style,ae):typeof ae=="function"&&(W=(0,u.default)({},W,ae.apply(void 0,[W].concat(P)))),W},{className:"",style:{}});return V.className||delete V.className,(0,l.default)(V.style).length===0&&delete V.style,V},g=o.invertTheme=function(v){return(0,l.default)(v).reduce(function(_,S){return _[S]=/^base/.test(S)?A(v[S]):S==="scheme"?v[S]+":inverted":v[S],_},{})},E=(o.createStyling=(0,p.default)(function(v){for(var _=arguments.length,S=Array(_>3?_-3:0),P=3;P<_;P++)S[P-3]=arguments[P];var T=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},z=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},V=T.defaultBase16,W=V===void 0?I:V,ae=T.base16Themes,Ce=ae===void 0?null:ae,we=E(z,Ce);we&&(z=(0,u.default)({},we,z));var ue=w.reduce(function(Pe,Re){return Pe[Re]=z[Re]||W[Re],Pe},{}),de=(0,l.default)(z).reduce(function(Pe,Re){return w.indexOf(Re)===-1&&(Pe[Re]=z[Re]),Pe},{}),be=v(ue),Ie=j(de,be);return(0,p.default)(C,2).apply(void 0,[Ie].concat(S))},3),o.getBase16Theme=function(v,_){if(v&&v.extend&&(v=v.extend),typeof v=="string"){var S=v.split(":"),P=(0,c.default)(S,2),T=P[0],z=P[1];v=(_||{})[T]||d[T],z==="inverted"&&(v=g(v))}return v&&v.hasOwnProperty("base00")?v:void 0})},function(r,o,s){var i,u=typeof Reflect=="object"?Reflect:null,c=u&&typeof u.apply=="function"?u.apply:function(f,j,C){return Function.prototype.apply.call(f,j,C)};i=u&&typeof u.ownKeys=="function"?u.ownKeys:Object.getOwnPropertySymbols?function(f){return Object.getOwnPropertyNames(f).concat(Object.getOwnPropertySymbols(f))}:function(f){return Object.getOwnPropertyNames(f)};var l=Number.isNaN||function(f){return f!=f};function p(){p.init.call(this)}r.exports=p,r.exports.once=function(f,j){return new Promise(function(C,g){function E(){v!==void 0&&f.removeListener("error",v),C([].slice.call(arguments))}var v;j!=="error"&&(v=function(_){f.removeListener(j,E),g(_)},f.once("error",v)),f.once(j,E)})},p.EventEmitter=p,p.prototype._events=void 0,p.prototype._eventsCount=0,p.prototype._maxListeners=void 0;var d=10;function m(f){if(typeof f!="function")throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof f)}function h(f){return f._maxListeners===void 0?p.defaultMaxListeners:f._maxListeners}function b(f,j,C,g){var E,v,_,S;if(m(C),(v=f._events)===void 0?(v=f._events=Object.create(null),f._eventsCount=0):(v.newListener!==void 0&&(f.emit("newListener",j,C.listener?C.listener:C),v=f._events),_=v[j]),_===void 0)_=v[j]=C,++f._eventsCount;else if(typeof _=="function"?_=v[j]=g?[C,_]:[_,C]:g?_.unshift(C):_.push(C),(E=h(f))>0&&_.length>E&&!_.warned){_.warned=!0;var P=new Error("Possible EventEmitter memory leak detected. "+_.length+" "+String(j)+" listeners added. Use emitter.setMaxListeners() to increase limit");P.name="MaxListenersExceededWarning",P.emitter=f,P.type=j,P.count=_.length,S=P,console&&console.warn&&console.warn(S)}return f}function y(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,arguments.length===0?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function x(f,j,C){var g={fired:!1,wrapFn:void 0,target:f,type:j,listener:C},E=y.bind(g);return E.listener=C,g.wrapFn=E,E}function I(f,j,C){var g=f._events;if(g===void 0)return[];var E=g[j];return E===void 0?[]:typeof E=="function"?C?[E.listener||E]:[E]:C?function(v){for(var _=new Array(v.length),S=0;S<_.length;++S)_[S]=v[S].listener||v[S];return _}(E):A(E,E.length)}function w(f){var j=this._events;if(j!==void 0){var C=j[f];if(typeof C=="function")return 1;if(C!==void 0)return C.length}return 0}function A(f,j){for(var C=new Array(j),g=0;g<j;++g)C[g]=f[g];return C}Object.defineProperty(p,"defaultMaxListeners",{enumerable:!0,get:function(){return d},set:function(f){if(typeof f!="number"||f<0||l(f))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+f+".");d=f}}),p.init=function(){this._events!==void 0&&this._events!==Object.getPrototypeOf(this)._events||(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},p.prototype.setMaxListeners=function(f){if(typeof f!="number"||f<0||l(f))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+f+".");return this._maxListeners=f,this},p.prototype.getMaxListeners=function(){return h(this)},p.prototype.emit=function(f){for(var j=[],C=1;C<arguments.length;C++)j.push(arguments[C]);var g=f==="error",E=this._events;if(E!==void 0)g=g&&E.error===void 0;else if(!g)return!1;if(g){var v;if(j.length>0&&(v=j[0]),v instanceof Error)throw v;var _=new Error("Unhandled error."+(v?" ("+v.message+")":""));throw _.context=v,_}var S=E[f];if(S===void 0)return!1;if(typeof S=="function")c(S,this,j);else{var P=S.length,T=A(S,P);for(C=0;C<P;++C)c(T[C],this,j)}return!0},p.prototype.addListener=function(f,j){return b(this,f,j,!1)},p.prototype.on=p.prototype.addListener,p.prototype.prependListener=function(f,j){return b(this,f,j,!0)},p.prototype.once=function(f,j){return m(j),this.on(f,x(this,f,j)),this},p.prototype.prependOnceListener=function(f,j){return m(j),this.prependListener(f,x(this,f,j)),this},p.prototype.removeListener=function(f,j){var C,g,E,v,_;if(m(j),(g=this._events)===void 0)return this;if((C=g[f])===void 0)return this;if(C===j||C.listener===j)--this._eventsCount==0?this._events=Object.create(null):(delete g[f],g.removeListener&&this.emit("removeListener",f,C.listener||j));else if(typeof C!="function"){for(E=-1,v=C.length-1;v>=0;v--)if(C[v]===j||C[v].listener===j){_=C[v].listener,E=v;break}if(E<0)return this;E===0?C.shift():function(S,P){for(;P+1<S.length;P++)S[P]=S[P+1];S.pop()}(C,E),C.length===1&&(g[f]=C[0]),g.removeListener!==void 0&&this.emit("removeListener",f,_||j)}return this},p.prototype.off=p.prototype.removeListener,p.prototype.removeAllListeners=function(f){var j,C,g;if((C=this._events)===void 0)return this;if(C.removeListener===void 0)return arguments.length===0?(this._events=Object.create(null),this._eventsCount=0):C[f]!==void 0&&(--this._eventsCount==0?this._events=Object.create(null):delete C[f]),this;if(arguments.length===0){var E,v=Object.keys(C);for(g=0;g<v.length;++g)(E=v[g])!=="removeListener"&&this.removeAllListeners(E);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if(typeof(j=C[f])=="function")this.removeListener(f,j);else if(j!==void 0)for(g=j.length-1;g>=0;g--)this.removeListener(f,j[g]);return this},p.prototype.listeners=function(f){return I(this,f,!0)},p.prototype.rawListeners=function(f){return I(this,f,!1)},p.listenerCount=function(f,j){return typeof f.listenerCount=="function"?f.listenerCount(j):w.call(f,j)},p.prototype.listenerCount=w,p.prototype.eventNames=function(){return this._eventsCount>0?i(this._events):[]}},function(r,o,s){r.exports.Dispatcher=s(140)},function(r,o,s){r.exports=s(142)},function(r,o,s){o.__esModule=!0;var i=l(s(50)),u=l(s(65)),c=typeof u.default=="function"&&typeof i.default=="symbol"?function(p){return typeof p}:function(p){return p&&typeof u.default=="function"&&p.constructor===u.default&&p!==u.default.prototype?"symbol":typeof p};function l(p){return p&&p.__esModule?p:{default:p}}o.default=typeof u.default=="function"&&c(i.default)==="symbol"?function(p){return p===void 0?"undefined":c(p)}:function(p){return p&&typeof u.default=="function"&&p.constructor===u.default&&p!==u.default.prototype?"symbol":p===void 0?"undefined":c(p)}},function(r,o,s){r.exports={default:s(51),__esModule:!0}},function(r,o,s){s(20),s(29),r.exports=s(30).f("iterator")},function(r,o,s){var i=s(21),u=s(22);r.exports=function(c){return function(l,p){var d,m,h=String(u(l)),b=i(p),y=h.length;return b<0||b>=y?c?"":void 0:(d=h.charCodeAt(b))<55296||d>56319||b+1===y||(m=h.charCodeAt(b+1))<56320||m>57343?c?h.charAt(b):d:c?h.slice(b,b+2):m-56320+(d-55296<<10)+65536}}},function(r,o,s){var i=s(54);r.exports=function(u,c,l){if(i(u),c===void 0)return u;switch(l){case 1:return function(p){return u.call(c,p)};case 2:return function(p,d){return u.call(c,p,d)};case 3:return function(p,d,m){return u.call(c,p,d,m)}}return function(){return u.apply(c,arguments)}}},function(r,o){r.exports=function(s){if(typeof s!="function")throw TypeError(s+" is not a function!");return s}},function(r,o,s){var i=s(38),u=s(16),c=s(28),l={};s(6)(l,s(2)("iterator"),function(){return this}),r.exports=function(p,d,m){p.prototype=i(l,{next:u(1,m)}),c(p,d+" Iterator")}},function(r,o,s){var i=s(7),u=s(10),c=s(13);r.exports=s(4)?Object.defineProperties:function(l,p){u(l);for(var d,m=c(p),h=m.length,b=0;h>b;)i.f(l,d=m[b++],p[d]);return l}},function(r,o,s){var i=s(9),u=s(58),c=s(59);r.exports=function(l){return function(p,d,m){var h,b=i(p),y=u(b.length),x=c(m,y);if(l&&d!=d){for(;y>x;)if((h=b[x++])!=h)return!0}else for(;y>x;x++)if((l||x in b)&&b[x]===d)return l||x||0;return!l&&-1}}},function(r,o,s){var i=s(21),u=Math.min;r.exports=function(c){return c>0?u(i(c),9007199254740991):0}},function(r,o,s){var i=s(21),u=Math.max,c=Math.min;r.exports=function(l,p){return(l=i(l))<0?u(l+p,0):c(l,p)}},function(r,o,s){var i=s(3).document;r.exports=i&&i.documentElement},function(r,o,s){var i=s(5),u=s(18),c=s(25)("IE_PROTO"),l=Object.prototype;r.exports=Object.getPrototypeOf||function(p){return p=u(p),i(p,c)?p[c]:typeof p.constructor=="function"&&p instanceof p.constructor?p.constructor.prototype:p instanceof Object?l:null}},function(r,o,s){var i=s(63),u=s(64),c=s(12),l=s(9);r.exports=s(34)(Array,"Array",function(p,d){this._t=l(p),this._i=0,this._k=d},function(){var p=this._t,d=this._k,m=this._i++;return!p||m>=p.length?(this._t=void 0,u(1)):u(0,d=="keys"?m:d=="values"?p[m]:[m,p[m]])},"values"),c.Arguments=c.Array,i("keys"),i("values"),i("entries")},function(r,o){r.exports=function(){}},function(r,o){r.exports=function(s,i){return{value:i,done:!!s}}},function(r,o,s){r.exports={default:s(66),__esModule:!0}},function(r,o,s){s(67),s(73),s(74),s(75),r.exports=s(1).Symbol},function(r,o,s){var i=s(3),u=s(5),c=s(4),l=s(15),p=s(37),d=s(68).KEY,m=s(8),h=s(26),b=s(28),y=s(17),x=s(2),I=s(30),w=s(31),A=s(69),f=s(70),j=s(10),C=s(11),g=s(18),E=s(9),v=s(23),_=s(16),S=s(38),P=s(71),T=s(72),z=s(32),V=s(7),W=s(13),ae=T.f,Ce=V.f,we=P.f,ue=i.Symbol,de=i.JSON,be=de&&de.stringify,Ie=x("_hidden"),Pe=x("toPrimitive"),Re={}.propertyIsEnumerable,$e=h("symbol-registry"),st=h("symbols"),re=h("op-symbols"),qe=Object.prototype,Ve=typeof ue=="function"&&!!z.f,Lt=i.QObject,It=!Lt||!Lt.prototype||!Lt.prototype.findChild,ua=c&&m(function(){return S(Ce({},"a",{get:function(){return Ce(this,"a",{value:7}).a}})).a!=7})?function(J,le,ve){var Ee=ae(qe,le);Ee&&delete qe[le],Ce(J,le,ve),Ee&&J!==qe&&Ce(qe,le,Ee)}:Ce,ra=function(J){var le=st[J]=S(ue.prototype);return le._k=J,le},Pt=Ve&&typeof ue.iterator=="symbol"?function(J){return typeof J=="symbol"}:function(J){return J instanceof ue},Qt=function(J,le,ve){return J===qe&&Qt(re,le,ve),j(J),le=v(le,!0),j(ve),u(st,le)?(ve.enumerable?(u(J,Ie)&&J[Ie][le]&&(J[Ie][le]=!1),ve=S(ve,{enumerable:_(0,!1)})):(u(J,Ie)||Ce(J,Ie,_(1,{})),J[Ie][le]=!0),ua(J,le,ve)):Ce(J,le,ve)},sa=function(J,le){j(J);for(var ve,Ee=A(le=E(le)),Je=0,Ye=Ee.length;Ye>Je;)Qt(J,ve=Ee[Je++],le[ve]);return J},Xt=function(J){var le=Re.call(this,J=v(J,!0));return!(this===qe&&u(st,J)&&!u(re,J))&&(!(le||!u(this,J)||!u(st,J)||u(this,Ie)&&this[Ie][J])||le)},Ut=function(J,le){if(J=E(J),le=v(le,!0),J!==qe||!u(st,le)||u(re,le)){var ve=ae(J,le);return!ve||!u(st,le)||u(J,Ie)&&J[Ie][le]||(ve.enumerable=!0),ve}},Ht=function(J){for(var le,ve=we(E(J)),Ee=[],Je=0;ve.length>Je;)u(st,le=ve[Je++])||le==Ie||le==d||Ee.push(le);return Ee},Ct=function(J){for(var le,ve=J===qe,Ee=we(ve?re:E(J)),Je=[],Ye=0;Ee.length>Ye;)!u(st,le=Ee[Ye++])||ve&&!u(qe,le)||Je.push(st[le]);return Je};Ve||(p((ue=function(){if(this instanceof ue)throw TypeError("Symbol is not a constructor!");var J=y(arguments.length>0?arguments[0]:void 0),le=function(ve){this===qe&&le.call(re,ve),u(this,Ie)&&u(this[Ie],J)&&(this[Ie][J]=!1),ua(this,J,_(1,ve))};return c&&It&&ua(qe,J,{configurable:!0,set:le}),ra(J)}).prototype,"toString",function(){return this._k}),T.f=Ut,V.f=Qt,s(41).f=P.f=Ht,s(19).f=Xt,z.f=Ct,c&&!s(14)&&p(qe,"propertyIsEnumerable",Xt,!0),I.f=function(J){return ra(x(J))}),l(l.G+l.W+l.F*!Ve,{Symbol:ue});for(var Nt="hasInstance,isConcatSpreadable,iterator,match,replace,search,species,split,toPrimitive,toStringTag,unscopables".split(","),Et=0;Nt.length>Et;)x(Nt[Et++]);for(var da=W(x.store),se=0;da.length>se;)w(da[se++]);l(l.S+l.F*!Ve,"Symbol",{for:function(J){return u($e,J+="")?$e[J]:$e[J]=ue(J)},keyFor:function(J){if(!Pt(J))throw TypeError(J+" is not a symbol!");for(var le in $e)if($e[le]===J)return le},useSetter:function(){It=!0},useSimple:function(){It=!1}}),l(l.S+l.F*!Ve,"Object",{create:function(J,le){return le===void 0?S(J):sa(S(J),le)},defineProperty:Qt,defineProperties:sa,getOwnPropertyDescriptor:Ut,getOwnPropertyNames:Ht,getOwnPropertySymbols:Ct});var Q=m(function(){z.f(1)});l(l.S+l.F*Q,"Object",{getOwnPropertySymbols:function(J){return z.f(g(J))}}),de&&l(l.S+l.F*(!Ve||m(function(){var J=ue();return be([J])!="[null]"||be({a:J})!="{}"||be(Object(J))!="{}"})),"JSON",{stringify:function(J){for(var le,ve,Ee=[J],Je=1;arguments.length>Je;)Ee.push(arguments[Je++]);if(ve=le=Ee[1],(C(le)||J!==void 0)&&!Pt(J))return f(le)||(le=function(Ye,lt){if(typeof ve=="function"&&(lt=ve.call(this,Ye,lt)),!Pt(lt))return lt}),Ee[1]=le,be.apply(de,Ee)}}),ue.prototype[Pe]||s(6)(ue.prototype,Pe,ue.prototype.valueOf),b(ue,"Symbol"),b(Math,"Math",!0),b(i.JSON,"JSON",!0)},function(r,o,s){var i=s(17)("meta"),u=s(11),c=s(5),l=s(7).f,p=0,d=Object.isExtensible||function(){return!0},m=!s(8)(function(){return d(Object.preventExtensions({}))}),h=function(y){l(y,i,{value:{i:"O"+ ++p,w:{}}})},b=r.exports={KEY:i,NEED:!1,fastKey:function(y,x){if(!u(y))return typeof y=="symbol"?y:(typeof y=="string"?"S":"P")+y;if(!c(y,i)){if(!d(y))return"F";if(!x)return"E";h(y)}return y[i].i},getWeak:function(y,x){if(!c(y,i)){if(!d(y))return!0;if(!x)return!1;h(y)}return y[i].w},onFreeze:function(y){return m&&b.NEED&&d(y)&&!c(y,i)&&h(y),y}}},function(r,o,s){var i=s(13),u=s(32),c=s(19);r.exports=function(l){var p=i(l),d=u.f;if(d)for(var m,h=d(l),b=c.f,y=0;h.length>y;)b.call(l,m=h[y++])&&p.push(m);return p}},function(r,o,s){var i=s(24);r.exports=Array.isArray||function(u){return i(u)=="Array"}},function(r,o,s){var i=s(9),u=s(41).f,c={}.toString,l=typeof window=="object"&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[];r.exports.f=function(p){return l&&c.call(p)=="[object Window]"?function(d){try{return u(d)}catch{return l.slice()}}(p):u(i(p))}},function(r,o,s){var i=s(19),u=s(16),c=s(9),l=s(23),p=s(5),d=s(35),m=Object.getOwnPropertyDescriptor;o.f=s(4)?m:function(h,b){if(h=c(h),b=l(b,!0),d)try{return m(h,b)}catch{}if(p(h,b))return u(!i.f.call(h,b),h[b])}},function(r,o){},function(r,o,s){s(31)("asyncIterator")},function(r,o,s){s(31)("observable")},function(r,o,s){o.__esModule=!0;var i,u=s(77),c=(i=u)&&i.__esModule?i:{default:i};o.default=c.default||function(l){for(var p=1;p<arguments.length;p++){var d=arguments[p];for(var m in d)Object.prototype.hasOwnProperty.call(d,m)&&(l[m]=d[m])}return l}},function(r,o,s){r.exports={default:s(78),__esModule:!0}},function(r,o,s){s(79),r.exports=s(1).Object.assign},function(r,o,s){var i=s(15);i(i.S+i.F,"Object",{assign:s(80)})},function(r,o,s){var i=s(4),u=s(13),c=s(32),l=s(19),p=s(18),d=s(40),m=Object.assign;r.exports=!m||s(8)(function(){var h={},b={},y=Symbol(),x="abcdefghijklmnopqrst";return h[y]=7,x.split("").forEach(function(I){b[I]=I}),m({},h)[y]!=7||Object.keys(m({},b)).join("")!=x})?function(h,b){for(var y=p(h),x=arguments.length,I=1,w=c.f,A=l.f;x>I;)for(var f,j=d(arguments[I++]),C=w?u(j).concat(w(j)):u(j),g=C.length,E=0;g>E;)f=C[E++],i&&!A.call(j,f)||(y[f]=j[f]);return y}:m},function(r,o,s){o.__esModule=!0;var i=c(s(82)),u=c(s(85));function c(l){return l&&l.__esModule?l:{default:l}}o.default=function(l,p){if(Array.isArray(l))return l;if((0,i.default)(Object(l)))return function(d,m){var h=[],b=!0,y=!1,x=void 0;try{for(var I,w=(0,u.default)(d);!(b=(I=w.next()).done)&&(h.push(I.value),!m||h.length!==m);b=!0);}catch(A){y=!0,x=A}finally{try{!b&&w.return&&w.return()}finally{if(y)throw x}}return h}(l,p);throw new TypeError("Invalid attempt to destructure non-iterable instance")}},function(r,o,s){r.exports={default:s(83),__esModule:!0}},function(r,o,s){s(29),s(20),r.exports=s(84)},function(r,o,s){var i=s(42),u=s(2)("iterator"),c=s(12);r.exports=s(1).isIterable=function(l){var p=Object(l);return p[u]!==void 0||"@@iterator"in p||c.hasOwnProperty(i(p))}},function(r,o,s){r.exports={default:s(86),__esModule:!0}},function(r,o,s){s(29),s(20),r.exports=s(87)},function(r,o,s){var i=s(10),u=s(88);r.exports=s(1).getIterator=function(c){var l=u(c);if(typeof l!="function")throw TypeError(c+" is not iterable!");return i(l.call(c))}},function(r,o,s){var i=s(42),u=s(2)("iterator"),c=s(12);r.exports=s(1).getIteratorMethod=function(l){if(l!=null)return l[u]||l["@@iterator"]||c[i(l)]}},function(r,o,s){r.exports={default:s(90),__esModule:!0}},function(r,o,s){s(91),r.exports=s(1).Object.keys},function(r,o,s){var i=s(18),u=s(13);s(92)("keys",function(){return function(c){return u(i(c))}})},function(r,o,s){var i=s(15),u=s(1),c=s(8);r.exports=function(l,p){var d=(u.Object||{})[l]||Object[l],m={};m[l]=p(d),i(i.S+i.F*c(function(){d(1)}),"Object",m)}},function(r,o,s){(function(i){var u=[["ary",128],["bind",1],["bindKey",2],["curry",8],["curryRight",16],["flip",512],["partial",32],["partialRight",64],["rearg",256]],c=/^\s+|\s+$/g,l=/\{(?:\n\/\* \[wrapped with .+\] \*\/)?\n?/,p=/\{\n\/\* \[wrapped with (.+)\] \*/,d=/,? & /,m=/^[-+]0x[0-9a-f]+$/i,h=/^0b[01]+$/i,b=/^\[object .+?Constructor\]$/,y=/^0o[0-7]+$/i,x=/^(?:0|[1-9]\d*)$/,I=parseInt,w=typeof i=="object"&&i&&i.Object===Object&&i,A=typeof self=="object"&&self&&self.Object===Object&&self,f=w||A||Function("return this")();function j(se,Q,J){switch(J.length){case 0:return se.call(Q);case 1:return se.call(Q,J[0]);case 2:return se.call(Q,J[0],J[1]);case 3:return se.call(Q,J[0],J[1],J[2])}return se.apply(Q,J)}function C(se,Q){return!!(se&&se.length)&&function(J,le,ve){if(le!=le)return function(Ye,lt,St,tt){for(var Dt=Ye.length,ct=St+(tt?1:-1);tt?ct--:++ct<Dt;)if(lt(Ye[ct],ct,Ye))return ct;return-1}(J,g,ve);for(var Ee=ve-1,Je=J.length;++Ee<Je;)if(J[Ee]===le)return Ee;return-1}(se,Q,0)>-1}function g(se){return se!=se}function E(se,Q){for(var J=se.length,le=0;J--;)se[J]===Q&&le++;return le}function v(se,Q){for(var J=-1,le=se.length,ve=0,Ee=[];++J<le;){var Je=se[J];Je!==Q&&Je!=="__lodash_placeholder__"||(se[J]="__lodash_placeholder__",Ee[ve++]=J)}return Ee}var _,S,P,T=Function.prototype,z=Object.prototype,V=f["__core-js_shared__"],W=(_=/[^.]+$/.exec(V&&V.keys&&V.keys.IE_PROTO||""))?"Symbol(src)_1."+_:"",ae=T.toString,Ce=z.hasOwnProperty,we=z.toString,ue=RegExp("^"+ae.call(Ce).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),de=Object.create,be=Math.max,Ie=Math.min,Pe=(S=ra(Object,"defineProperty"),(P=ra.name)&&P.length>2?S:void 0);function Re(se){return Nt(se)?de(se):{}}function $e(se){return!(!Nt(se)||function(Q){return!!W&&W in Q}(se))&&(function(Q){var J=Nt(Q)?we.call(Q):"";return J=="[object Function]"||J=="[object GeneratorFunction]"}(se)||function(Q){var J=!1;if(Q!=null&&typeof Q.toString!="function")try{J=!!(Q+"")}catch{}return J}(se)?ue:b).test(function(Q){if(Q!=null){try{return ae.call(Q)}catch{}try{return Q+""}catch{}}return""}(se))}function st(se,Q,J,le){for(var ve=-1,Ee=se.length,Je=J.length,Ye=-1,lt=Q.length,St=be(Ee-Je,0),tt=Array(lt+St),Dt=!le;++Ye<lt;)tt[Ye]=Q[Ye];for(;++ve<Je;)(Dt||ve<Ee)&&(tt[J[ve]]=se[ve]);for(;St--;)tt[Ye++]=se[ve++];return tt}function re(se,Q,J,le){for(var ve=-1,Ee=se.length,Je=-1,Ye=J.length,lt=-1,St=Q.length,tt=be(Ee-Ye,0),Dt=Array(tt+St),ct=!le;++ve<tt;)Dt[ve]=se[ve];for(var Kt=ve;++lt<St;)Dt[Kt+lt]=Q[lt];for(;++Je<Ye;)(ct||ve<Ee)&&(Dt[Kt+J[Je]]=se[ve++]);return Dt}function qe(se){return function(){var Q=arguments;switch(Q.length){case 0:return new se;case 1:return new se(Q[0]);case 2:return new se(Q[0],Q[1]);case 3:return new se(Q[0],Q[1],Q[2]);case 4:return new se(Q[0],Q[1],Q[2],Q[3]);case 5:return new se(Q[0],Q[1],Q[2],Q[3],Q[4]);case 6:return new se(Q[0],Q[1],Q[2],Q[3],Q[4],Q[5]);case 7:return new se(Q[0],Q[1],Q[2],Q[3],Q[4],Q[5],Q[6])}var J=Re(se.prototype),le=se.apply(J,Q);return Nt(le)?le:J}}function Ve(se,Q,J,le,ve,Ee,Je,Ye,lt,St){var tt=128&Q,Dt=1&Q,ct=2&Q,Kt=24&Q,U=512&Q,X=ct?void 0:qe(se);return function pe(){for(var oe=arguments.length,ie=Array(oe),xe=oe;xe--;)ie[xe]=arguments[xe];if(Kt)var je=ua(pe),We=E(ie,je);if(le&&(ie=st(ie,le,ve,Kt)),Ee&&(ie=re(ie,Ee,Je,Kt)),oe-=We,Kt&&oe<St){var Fe=v(ie,je);return Lt(se,Q,Ve,pe.placeholder,J,ie,Fe,Ye,lt,St-oe)}var Me=Dt?J:this,ut=ct?Me[se]:se;return oe=ie.length,Ye?ie=Xt(ie,Ye):U&&oe>1&&ie.reverse(),tt&&lt<oe&&(ie.length=lt),this&&this!==f&&this instanceof pe&&(ut=X||qe(ut)),ut.apply(Me,ie)}}function Lt(se,Q,J,le,ve,Ee,Je,Ye,lt,St){var tt=8&Q;Q|=tt?32:64,4&(Q&=~(tt?64:32))||(Q&=-4);var Dt=J(se,Q,ve,tt?Ee:void 0,tt?Je:void 0,tt?void 0:Ee,tt?void 0:Je,Ye,lt,St);return Dt.placeholder=le,Ut(Dt,se,Q)}function It(se,Q,J,le,ve,Ee,Je,Ye){var lt=2&Q;if(!lt&&typeof se!="function")throw new TypeError("Expected a function");var St=le?le.length:0;if(St||(Q&=-97,le=ve=void 0),Je=Je===void 0?Je:be(da(Je),0),Ye=Ye===void 0?Ye:da(Ye),St-=ve?ve.length:0,64&Q){var tt=le,Dt=ve;le=ve=void 0}var ct=[se,Q,J,le,ve,tt,Dt,Ee,Je,Ye];if(se=ct[0],Q=ct[1],J=ct[2],le=ct[3],ve=ct[4],!(Ye=ct[9]=ct[9]==null?lt?0:se.length:be(ct[9]-St,0))&&24&Q&&(Q&=-25),Q&&Q!=1)Kt=Q==8||Q==16?function(U,X,pe){var oe=qe(U);return function ie(){for(var xe=arguments.length,je=Array(xe),We=xe,Fe=ua(ie);We--;)je[We]=arguments[We];var Me=xe<3&&je[0]!==Fe&&je[xe-1]!==Fe?[]:v(je,Fe);if((xe-=Me.length)<pe)return Lt(U,X,Ve,ie.placeholder,void 0,je,Me,void 0,void 0,pe-xe);var ut=this&&this!==f&&this instanceof ie?oe:U;return j(ut,this,je)}}(se,Q,Ye):Q!=32&&Q!=33||ve.length?Ve.apply(void 0,ct):function(U,X,pe,oe){var ie=1&X,xe=qe(U);return function je(){for(var We=-1,Fe=arguments.length,Me=-1,ut=oe.length,dt=Array(ut+Fe),_t=this&&this!==f&&this instanceof je?xe:U;++Me<ut;)dt[Me]=oe[Me];for(;Fe--;)dt[Me++]=arguments[++We];return j(_t,ie?pe:this,dt)}}(se,Q,J,le);else var Kt=function(U,X,pe){var oe=1&X,ie=qe(U);return function xe(){var je=this&&this!==f&&this instanceof xe?ie:U;return je.apply(oe?pe:this,arguments)}}(se,Q,J);return Ut(Kt,se,Q)}function ua(se){return se.placeholder}function ra(se,Q){var J=function(le,ve){return le==null?void 0:le[ve]}(se,Q);return $e(J)?J:void 0}function Pt(se){var Q=se.match(p);return Q?Q[1].split(d):[]}function Qt(se,Q){var J=Q.length,le=J-1;return Q[le]=(J>1?"& ":"")+Q[le],Q=Q.join(J>2?", ":" "),se.replace(l,`{
/* [wrapped with `+Q+`] */
`)}function sa(se,Q){return!!(Q=Q??9007199254740991)&&(typeof se=="number"||x.test(se))&&se>-1&&se%1==0&&se<Q}function Xt(se,Q){for(var J=se.length,le=Ie(Q.length,J),ve=function(Je,Ye){var lt=-1,St=Je.length;for(Ye||(Ye=Array(St));++lt<St;)Ye[lt]=Je[lt];return Ye}(se);le--;){var Ee=Q[le];se[le]=sa(Ee,J)?ve[Ee]:void 0}return se}var Ut=Pe?function(se,Q,J){var le,ve=Q+"";return Pe(se,"toString",{configurable:!0,enumerable:!1,value:(le=Qt(ve,Ht(Pt(ve),J)),function(){return le})})}:function(se){return se};function Ht(se,Q){return function(J,le){for(var ve=-1,Ee=J?J.length:0;++ve<Ee&&le(J[ve],ve,J)!==!1;);}(u,function(J){var le="_."+J[0];Q&J[1]&&!C(se,le)&&se.push(le)}),se.sort()}function Ct(se,Q,J){var le=It(se,8,void 0,void 0,void 0,void 0,void 0,Q=J?void 0:Q);return le.placeholder=Ct.placeholder,le}function Nt(se){var Q=typeof se;return!!se&&(Q=="object"||Q=="function")}function Et(se){return se?(se=function(Q){if(typeof Q=="number")return Q;if(function(ve){return typeof ve=="symbol"||function(Ee){return!!Ee&&typeof Ee=="object"}(ve)&&we.call(ve)=="[object Symbol]"}(Q))return NaN;if(Nt(Q)){var J=typeof Q.valueOf=="function"?Q.valueOf():Q;Q=Nt(J)?J+"":J}if(typeof Q!="string")return Q===0?Q:+Q;Q=Q.replace(c,"");var le=h.test(Q);return le||y.test(Q)?I(Q.slice(2),le?2:8):m.test(Q)?NaN:+Q}(se))===1/0||se===-1/0?17976931348623157e292*(se<0?-1:1):se==se?se:0:se===0?se:0}function da(se){var Q=Et(se),J=Q%1;return Q==Q?J?Q-J:Q:0}Ct.placeholder={},r.exports=Ct}).call(this,s(43))},function(r,o,s){function i(re){return re&&re.__esModule?re.default:re}o.__esModule=!0;var u=s(95);o.threezerotwofour=i(u);var c=s(96);o.apathy=i(c);var l=s(97);o.ashes=i(l);var p=s(98);o.atelierDune=i(p);var d=s(99);o.atelierForest=i(d);var m=s(100);o.atelierHeath=i(m);var h=s(101);o.atelierLakeside=i(h);var b=s(102);o.atelierSeaside=i(b);var y=s(103);o.bespin=i(y);var x=s(104);o.brewer=i(x);var I=s(105);o.bright=i(I);var w=s(106);o.chalk=i(w);var A=s(107);o.codeschool=i(A);var f=s(108);o.colors=i(f);var j=s(109);o.default=i(j);var C=s(110);o.eighties=i(C);var g=s(111);o.embers=i(g);var E=s(112);o.flat=i(E);var v=s(113);o.google=i(v);var _=s(114);o.grayscale=i(_);var S=s(115);o.greenscreen=i(S);var P=s(116);o.harmonic=i(P);var T=s(117);o.hopscotch=i(T);var z=s(118);o.isotope=i(z);var V=s(119);o.marrakesh=i(V);var W=s(120);o.mocha=i(W);var ae=s(121);o.monokai=i(ae);var Ce=s(122);o.ocean=i(Ce);var we=s(123);o.paraiso=i(we);var ue=s(124);o.pop=i(ue);var de=s(125);o.railscasts=i(de);var be=s(126);o.shapeshifter=i(be);var Ie=s(127);o.solarized=i(Ie);var Pe=s(128);o.summerfruit=i(Pe);var Re=s(129);o.tomorrow=i(Re);var $e=s(130);o.tube=i($e);var st=s(131);o.twilight=i(st)},function(r,o,s){o.__esModule=!0,o.default={scheme:"threezerotwofour",author:"jan t. sott (http://github.com/idleberg)",base00:"#090300",base01:"#3a3432",base02:"#4a4543",base03:"#5c5855",base04:"#807d7c",base05:"#a5a2a2",base06:"#d6d5d4",base07:"#f7f7f7",base08:"#db2d20",base09:"#e8bbd0",base0A:"#fded02",base0B:"#01a252",base0C:"#b5e4f4",base0D:"#01a0e4",base0E:"#a16a94",base0F:"#cdab53"},r.exports=o.default},function(r,o,s){o.__esModule=!0,o.default={scheme:"apathy",author:"jannik siebert (https://github.com/janniks)",base00:"#031A16",base01:"#0B342D",base02:"#184E45",base03:"#2B685E",base04:"#5F9C92",base05:"#81B5AC",base06:"#A7CEC8",base07:"#D2E7E4",base08:"#3E9688",base09:"#3E7996",base0A:"#3E4C96",base0B:"#883E96",base0C:"#963E4C",base0D:"#96883E",base0E:"#4C963E",base0F:"#3E965B"},r.exports=o.default},function(r,o,s){o.__esModule=!0,o.default={scheme:"ashes",author:"jannik siebert (https://github.com/janniks)",base00:"#1C2023",base01:"#393F45",base02:"#565E65",base03:"#747C84",base04:"#ADB3BA",base05:"#C7CCD1",base06:"#DFE2E5",base07:"#F3F4F5",base08:"#C7AE95",base09:"#C7C795",base0A:"#AEC795",base0B:"#95C7AE",base0C:"#95AEC7",base0D:"#AE95C7",base0E:"#C795AE",base0F:"#C79595"},r.exports=o.default},function(r,o,s){o.__esModule=!0,o.default={scheme:"atelier dune",author:"bram de haan (http://atelierbram.github.io/syntax-highlighting/atelier-schemes/dune)",base00:"#20201d",base01:"#292824",base02:"#6e6b5e",base03:"#7d7a68",base04:"#999580",base05:"#a6a28c",base06:"#e8e4cf",base07:"#fefbec",base08:"#d73737",base09:"#b65611",base0A:"#cfb017",base0B:"#60ac39",base0C:"#1fad83",base0D:"#6684e1",base0E:"#b854d4",base0F:"#d43552"},r.exports=o.default},function(r,o,s){o.__esModule=!0,o.default={scheme:"atelier forest",author:"bram de haan (http://atelierbram.github.io/syntax-highlighting/atelier-schemes/forest)",base00:"#1b1918",base01:"#2c2421",base02:"#68615e",base03:"#766e6b",base04:"#9c9491",base05:"#a8a19f",base06:"#e6e2e0",base07:"#f1efee",base08:"#f22c40",base09:"#df5320",base0A:"#d5911a",base0B:"#5ab738",base0C:"#00ad9c",base0D:"#407ee7",base0E:"#6666ea",base0F:"#c33ff3"},r.exports=o.default},function(r,o,s){o.__esModule=!0,o.default={scheme:"atelier heath",author:"bram de haan (http://atelierbram.github.io/syntax-highlighting/atelier-schemes/heath)",base00:"#1b181b",base01:"#292329",base02:"#695d69",base03:"#776977",base04:"#9e8f9e",base05:"#ab9bab",base06:"#d8cad8",base07:"#f7f3f7",base08:"#ca402b",base09:"#a65926",base0A:"#bb8a35",base0B:"#379a37",base0C:"#159393",base0D:"#516aec",base0E:"#7b59c0",base0F:"#cc33cc"},r.exports=o.default},function(r,o,s){o.__esModule=!0,o.default={scheme:"atelier lakeside",author:"bram de haan (http://atelierbram.github.io/syntax-highlighting/atelier-schemes/lakeside/)",base00:"#161b1d",base01:"#1f292e",base02:"#516d7b",base03:"#5a7b8c",base04:"#7195a8",base05:"#7ea2b4",base06:"#c1e4f6",base07:"#ebf8ff",base08:"#d22d72",base09:"#935c25",base0A:"#8a8a0f",base0B:"#568c3b",base0C:"#2d8f6f",base0D:"#257fad",base0E:"#5d5db1",base0F:"#b72dd2"},r.exports=o.default},function(r,o,s){o.__esModule=!0,o.default={scheme:"atelier seaside",author:"bram de haan (http://atelierbram.github.io/syntax-highlighting/atelier-schemes/seaside/)",base00:"#131513",base01:"#242924",base02:"#5e6e5e",base03:"#687d68",base04:"#809980",base05:"#8ca68c",base06:"#cfe8cf",base07:"#f0fff0",base08:"#e6193c",base09:"#87711d",base0A:"#c3c322",base0B:"#29a329",base0C:"#1999b3",base0D:"#3d62f5",base0E:"#ad2bee",base0F:"#e619c3"},r.exports=o.default},function(r,o,s){o.__esModule=!0,o.default={scheme:"bespin",author:"jan t. sott",base00:"#28211c",base01:"#36312e",base02:"#5e5d5c",base03:"#666666",base04:"#797977",base05:"#8a8986",base06:"#9d9b97",base07:"#baae9e",base08:"#cf6a4c",base09:"#cf7d34",base0A:"#f9ee98",base0B:"#54be0d",base0C:"#afc4db",base0D:"#5ea6ea",base0E:"#9b859d",base0F:"#937121"},r.exports=o.default},function(r,o,s){o.__esModule=!0,o.default={scheme:"brewer",author:"timothée poisot (http://github.com/tpoisot)",base00:"#0c0d0e",base01:"#2e2f30",base02:"#515253",base03:"#737475",base04:"#959697",base05:"#b7b8b9",base06:"#dadbdc",base07:"#fcfdfe",base08:"#e31a1c",base09:"#e6550d",base0A:"#dca060",base0B:"#31a354",base0C:"#80b1d3",base0D:"#3182bd",base0E:"#756bb1",base0F:"#b15928"},r.exports=o.default},function(r,o,s){o.__esModule=!0,o.default={scheme:"bright",author:"chris kempson (http://chriskempson.com)",base00:"#000000",base01:"#303030",base02:"#505050",base03:"#b0b0b0",base04:"#d0d0d0",base05:"#e0e0e0",base06:"#f5f5f5",base07:"#ffffff",base08:"#fb0120",base09:"#fc6d24",base0A:"#fda331",base0B:"#a1c659",base0C:"#76c7b7",base0D:"#6fb3d2",base0E:"#d381c3",base0F:"#be643c"},r.exports=o.default},function(r,o,s){o.__esModule=!0,o.default={scheme:"chalk",author:"chris kempson (http://chriskempson.com)",base00:"#151515",base01:"#202020",base02:"#303030",base03:"#505050",base04:"#b0b0b0",base05:"#d0d0d0",base06:"#e0e0e0",base07:"#f5f5f5",base08:"#fb9fb1",base09:"#eda987",base0A:"#ddb26f",base0B:"#acc267",base0C:"#12cfc0",base0D:"#6fc2ef",base0E:"#e1a3ee",base0F:"#deaf8f"},r.exports=o.default},function(r,o,s){o.__esModule=!0,o.default={scheme:"codeschool",author:"brettof86",base00:"#232c31",base01:"#1c3657",base02:"#2a343a",base03:"#3f4944",base04:"#84898c",base05:"#9ea7a6",base06:"#a7cfa3",base07:"#b5d8f6",base08:"#2a5491",base09:"#43820d",base0A:"#a03b1e",base0B:"#237986",base0C:"#b02f30",base0D:"#484d79",base0E:"#c59820",base0F:"#c98344"},r.exports=o.default},function(r,o,s){o.__esModule=!0,o.default={scheme:"colors",author:"mrmrs (http://clrs.cc)",base00:"#111111",base01:"#333333",base02:"#555555",base03:"#777777",base04:"#999999",base05:"#bbbbbb",base06:"#dddddd",base07:"#ffffff",base08:"#ff4136",base09:"#ff851b",base0A:"#ffdc00",base0B:"#2ecc40",base0C:"#7fdbff",base0D:"#0074d9",base0E:"#b10dc9",base0F:"#85144b"},r.exports=o.default},function(r,o,s){o.__esModule=!0,o.default={scheme:"default",author:"chris kempson (http://chriskempson.com)",base00:"#181818",base01:"#282828",base02:"#383838",base03:"#585858",base04:"#b8b8b8",base05:"#d8d8d8",base06:"#e8e8e8",base07:"#f8f8f8",base08:"#ab4642",base09:"#dc9656",base0A:"#f7ca88",base0B:"#a1b56c",base0C:"#86c1b9",base0D:"#7cafc2",base0E:"#ba8baf",base0F:"#a16946"},r.exports=o.default},function(r,o,s){o.__esModule=!0,o.default={scheme:"eighties",author:"chris kempson (http://chriskempson.com)",base00:"#2d2d2d",base01:"#393939",base02:"#515151",base03:"#747369",base04:"#a09f93",base05:"#d3d0c8",base06:"#e8e6df",base07:"#f2f0ec",base08:"#f2777a",base09:"#f99157",base0A:"#ffcc66",base0B:"#99cc99",base0C:"#66cccc",base0D:"#6699cc",base0E:"#cc99cc",base0F:"#d27b53"},r.exports=o.default},function(r,o,s){o.__esModule=!0,o.default={scheme:"embers",author:"jannik siebert (https://github.com/janniks)",base00:"#16130F",base01:"#2C2620",base02:"#433B32",base03:"#5A5047",base04:"#8A8075",base05:"#A39A90",base06:"#BEB6AE",base07:"#DBD6D1",base08:"#826D57",base09:"#828257",base0A:"#6D8257",base0B:"#57826D",base0C:"#576D82",base0D:"#6D5782",base0E:"#82576D",base0F:"#825757"},r.exports=o.default},function(r,o,s){o.__esModule=!0,o.default={scheme:"flat",author:"chris kempson (http://chriskempson.com)",base00:"#2C3E50",base01:"#34495E",base02:"#7F8C8D",base03:"#95A5A6",base04:"#BDC3C7",base05:"#e0e0e0",base06:"#f5f5f5",base07:"#ECF0F1",base08:"#E74C3C",base09:"#E67E22",base0A:"#F1C40F",base0B:"#2ECC71",base0C:"#1ABC9C",base0D:"#3498DB",base0E:"#9B59B6",base0F:"#be643c"},r.exports=o.default},function(r,o,s){o.__esModule=!0,o.default={scheme:"google",author:"seth wright (http://sethawright.com)",base00:"#1d1f21",base01:"#282a2e",base02:"#373b41",base03:"#969896",base04:"#b4b7b4",base05:"#c5c8c6",base06:"#e0e0e0",base07:"#ffffff",base08:"#CC342B",base09:"#F96A38",base0A:"#FBA922",base0B:"#198844",base0C:"#3971ED",base0D:"#3971ED",base0E:"#A36AC7",base0F:"#3971ED"},r.exports=o.default},function(r,o,s){o.__esModule=!0,o.default={scheme:"grayscale",author:"alexandre gavioli (https://github.com/alexx2/)",base00:"#101010",base01:"#252525",base02:"#464646",base03:"#525252",base04:"#ababab",base05:"#b9b9b9",base06:"#e3e3e3",base07:"#f7f7f7",base08:"#7c7c7c",base09:"#999999",base0A:"#a0a0a0",base0B:"#8e8e8e",base0C:"#868686",base0D:"#686868",base0E:"#747474",base0F:"#5e5e5e"},r.exports=o.default},function(r,o,s){o.__esModule=!0,o.default={scheme:"green screen",author:"chris kempson (http://chriskempson.com)",base00:"#001100",base01:"#003300",base02:"#005500",base03:"#007700",base04:"#009900",base05:"#00bb00",base06:"#00dd00",base07:"#00ff00",base08:"#007700",base09:"#009900",base0A:"#007700",base0B:"#00bb00",base0C:"#005500",base0D:"#009900",base0E:"#00bb00",base0F:"#005500"},r.exports=o.default},function(r,o,s){o.__esModule=!0,o.default={scheme:"harmonic16",author:"jannik siebert (https://github.com/janniks)",base00:"#0b1c2c",base01:"#223b54",base02:"#405c79",base03:"#627e99",base04:"#aabcce",base05:"#cbd6e2",base06:"#e5ebf1",base07:"#f7f9fb",base08:"#bf8b56",base09:"#bfbf56",base0A:"#8bbf56",base0B:"#56bf8b",base0C:"#568bbf",base0D:"#8b56bf",base0E:"#bf568b",base0F:"#bf5656"},r.exports=o.default},function(r,o,s){o.__esModule=!0,o.default={scheme:"hopscotch",author:"jan t. sott",base00:"#322931",base01:"#433b42",base02:"#5c545b",base03:"#797379",base04:"#989498",base05:"#b9b5b8",base06:"#d5d3d5",base07:"#ffffff",base08:"#dd464c",base09:"#fd8b19",base0A:"#fdcc59",base0B:"#8fc13e",base0C:"#149b93",base0D:"#1290bf",base0E:"#c85e7c",base0F:"#b33508"},r.exports=o.default},function(r,o,s){o.__esModule=!0,o.default={scheme:"isotope",author:"jan t. sott",base00:"#000000",base01:"#404040",base02:"#606060",base03:"#808080",base04:"#c0c0c0",base05:"#d0d0d0",base06:"#e0e0e0",base07:"#ffffff",base08:"#ff0000",base09:"#ff9900",base0A:"#ff0099",base0B:"#33ff00",base0C:"#00ffff",base0D:"#0066ff",base0E:"#cc00ff",base0F:"#3300ff"},r.exports=o.default},function(r,o,s){o.__esModule=!0,o.default={scheme:"marrakesh",author:"alexandre gavioli (http://github.com/alexx2/)",base00:"#201602",base01:"#302e00",base02:"#5f5b17",base03:"#6c6823",base04:"#86813b",base05:"#948e48",base06:"#ccc37a",base07:"#faf0a5",base08:"#c35359",base09:"#b36144",base0A:"#a88339",base0B:"#18974e",base0C:"#75a738",base0D:"#477ca1",base0E:"#8868b3",base0F:"#b3588e"},r.exports=o.default},function(r,o,s){o.__esModule=!0,o.default={scheme:"mocha",author:"chris kempson (http://chriskempson.com)",base00:"#3B3228",base01:"#534636",base02:"#645240",base03:"#7e705a",base04:"#b8afad",base05:"#d0c8c6",base06:"#e9e1dd",base07:"#f5eeeb",base08:"#cb6077",base09:"#d28b71",base0A:"#f4bc87",base0B:"#beb55b",base0C:"#7bbda4",base0D:"#8ab3b5",base0E:"#a89bb9",base0F:"#bb9584"},r.exports=o.default},function(r,o,s){o.__esModule=!0,o.default={scheme:"monokai",author:"wimer hazenberg (http://www.monokai.nl)",base00:"#272822",base01:"#383830",base02:"#49483e",base03:"#75715e",base04:"#a59f85",base05:"#f8f8f2",base06:"#f5f4f1",base07:"#f9f8f5",base08:"#f92672",base09:"#fd971f",base0A:"#f4bf75",base0B:"#a6e22e",base0C:"#a1efe4",base0D:"#66d9ef",base0E:"#ae81ff",base0F:"#cc6633"},r.exports=o.default},function(r,o,s){o.__esModule=!0,o.default={scheme:"ocean",author:"chris kempson (http://chriskempson.com)",base00:"#2b303b",base01:"#343d46",base02:"#4f5b66",base03:"#65737e",base04:"#a7adba",base05:"#c0c5ce",base06:"#dfe1e8",base07:"#eff1f5",base08:"#bf616a",base09:"#d08770",base0A:"#ebcb8b",base0B:"#a3be8c",base0C:"#96b5b4",base0D:"#8fa1b3",base0E:"#b48ead",base0F:"#ab7967"},r.exports=o.default},function(r,o,s){o.__esModule=!0,o.default={scheme:"paraiso",author:"jan t. sott",base00:"#2f1e2e",base01:"#41323f",base02:"#4f424c",base03:"#776e71",base04:"#8d8687",base05:"#a39e9b",base06:"#b9b6b0",base07:"#e7e9db",base08:"#ef6155",base09:"#f99b15",base0A:"#fec418",base0B:"#48b685",base0C:"#5bc4bf",base0D:"#06b6ef",base0E:"#815ba4",base0F:"#e96ba8"},r.exports=o.default},function(r,o,s){o.__esModule=!0,o.default={scheme:"pop",author:"chris kempson (http://chriskempson.com)",base00:"#000000",base01:"#202020",base02:"#303030",base03:"#505050",base04:"#b0b0b0",base05:"#d0d0d0",base06:"#e0e0e0",base07:"#ffffff",base08:"#eb008a",base09:"#f29333",base0A:"#f8ca12",base0B:"#37b349",base0C:"#00aabb",base0D:"#0e5a94",base0E:"#b31e8d",base0F:"#7a2d00"},r.exports=o.default},function(r,o,s){o.__esModule=!0,o.default={scheme:"railscasts",author:"ryan bates (http://railscasts.com)",base00:"#2b2b2b",base01:"#272935",base02:"#3a4055",base03:"#5a647e",base04:"#d4cfc9",base05:"#e6e1dc",base06:"#f4f1ed",base07:"#f9f7f3",base08:"#da4939",base09:"#cc7833",base0A:"#ffc66d",base0B:"#a5c261",base0C:"#519f50",base0D:"#6d9cbe",base0E:"#b6b3eb",base0F:"#bc9458"},r.exports=o.default},function(r,o,s){o.__esModule=!0,o.default={scheme:"shapeshifter",author:"tyler benziger (http://tybenz.com)",base00:"#000000",base01:"#040404",base02:"#102015",base03:"#343434",base04:"#555555",base05:"#ababab",base06:"#e0e0e0",base07:"#f9f9f9",base08:"#e92f2f",base09:"#e09448",base0A:"#dddd13",base0B:"#0ed839",base0C:"#23edda",base0D:"#3b48e3",base0E:"#f996e2",base0F:"#69542d"},r.exports=o.default},function(r,o,s){o.__esModule=!0,o.default={scheme:"solarized",author:"ethan schoonover (http://ethanschoonover.com/solarized)",base00:"#002b36",base01:"#073642",base02:"#586e75",base03:"#657b83",base04:"#839496",base05:"#93a1a1",base06:"#eee8d5",base07:"#fdf6e3",base08:"#dc322f",base09:"#cb4b16",base0A:"#b58900",base0B:"#859900",base0C:"#2aa198",base0D:"#268bd2",base0E:"#6c71c4",base0F:"#d33682"},r.exports=o.default},function(r,o,s){o.__esModule=!0,o.default={scheme:"summerfruit",author:"christopher corley (http://cscorley.github.io/)",base00:"#151515",base01:"#202020",base02:"#303030",base03:"#505050",base04:"#B0B0B0",base05:"#D0D0D0",base06:"#E0E0E0",base07:"#FFFFFF",base08:"#FF0086",base09:"#FD8900",base0A:"#ABA800",base0B:"#00C918",base0C:"#1faaaa",base0D:"#3777E6",base0E:"#AD00A1",base0F:"#cc6633"},r.exports=o.default},function(r,o,s){o.__esModule=!0,o.default={scheme:"tomorrow",author:"chris kempson (http://chriskempson.com)",base00:"#1d1f21",base01:"#282a2e",base02:"#373b41",base03:"#969896",base04:"#b4b7b4",base05:"#c5c8c6",base06:"#e0e0e0",base07:"#ffffff",base08:"#cc6666",base09:"#de935f",base0A:"#f0c674",base0B:"#b5bd68",base0C:"#8abeb7",base0D:"#81a2be",base0E:"#b294bb",base0F:"#a3685a"},r.exports=o.default},function(r,o,s){o.__esModule=!0,o.default={scheme:"london tube",author:"jan t. sott",base00:"#231f20",base01:"#1c3f95",base02:"#5a5758",base03:"#737171",base04:"#959ca1",base05:"#d9d8d8",base06:"#e7e7e8",base07:"#ffffff",base08:"#ee2e24",base09:"#f386a1",base0A:"#ffd204",base0B:"#00853e",base0C:"#85cebc",base0D:"#009ddc",base0E:"#98005d",base0F:"#b06110"},r.exports=o.default},function(r,o,s){o.__esModule=!0,o.default={scheme:"twilight",author:"david hart (http://hart-dev.com)",base00:"#1e1e1e",base01:"#323537",base02:"#464b50",base03:"#5f5a60",base04:"#838184",base05:"#a7a7a7",base06:"#c3c3c3",base07:"#ffffff",base08:"#cf6a4c",base09:"#cda869",base0A:"#f9ee98",base0B:"#8f9d6a",base0C:"#afc4db",base0D:"#7587a6",base0E:"#9b859d",base0F:"#9b703f"},r.exports=o.default},function(r,o,s){var i=s(33);function u(c){var l=Math.round(i(c,0,255)).toString(16);return l.length==1?"0"+l:l}r.exports=function(c){var l=c.length===4?u(255*c[3]):"";return"#"+u(c[0])+u(c[1])+u(c[2])+l}},function(r,o,s){var i=s(134),u=s(135),c=s(136),l=s(137),p={"#":u,hsl:function(m){var h=i(m),b=l(h);return h.length===4&&b.push(h[3]),b},rgb:c};function d(m){for(var h in p)if(m.indexOf(h)===0)return p[h](m)}d.rgb=c,d.hsl=i,d.hex=u,r.exports=d},function(r,o,s){var i=s(44),u=s(33);function c(l,p){switch(l=parseFloat(l),p){case 0:return u(l,0,360);case 1:case 2:return u(l,0,100);case 3:return u(l,0,1)}}r.exports=function(l){return i(l).map(c)}},function(r,o){r.exports=function(s){s.length!==4&&s.length!==5||(s=function(c){for(var l="#",p=1;p<c.length;p++){var d=c.charAt(p);l+=d+d}return l}(s));var i=[parseInt(s.substring(1,3),16),parseInt(s.substring(3,5),16),parseInt(s.substring(5,7),16)];if(s.length===9){var u=parseFloat((parseInt(s.substring(7,9),16)/255).toFixed(2));i.push(u)}return i}},function(r,o,s){var i=s(44),u=s(33);function c(l,p){return p<3?l.indexOf("%")!=-1?Math.round(255*u(parseInt(l,10),0,100)/100):u(parseInt(l,10),0,255):u(parseFloat(l),0,1)}r.exports=function(l){return i(l).map(c)}},function(r,o){r.exports=function(s){var i,u,c,l,p,d=s[0]/360,m=s[1]/100,h=s[2]/100;if(m==0)return[p=255*h,p,p];i=2*h-(u=h<.5?h*(1+m):h+m-h*m),l=[0,0,0];for(var b=0;b<3;b++)(c=d+1/3*-(b-1))<0&&c++,c>1&&c--,p=6*c<1?i+6*(u-i)*c:2*c<1?u:3*c<2?i+(u-i)*(2/3-c)*6:i,l[b]=255*p;return l}},function(r,o,s){(function(i){var u=typeof i=="object"&&i&&i.Object===Object&&i,c=typeof self=="object"&&self&&self.Object===Object&&self,l=u||c||Function("return this")();function p(v,_,S){switch(S.length){case 0:return v.call(_);case 1:return v.call(_,S[0]);case 2:return v.call(_,S[0],S[1]);case 3:return v.call(_,S[0],S[1],S[2])}return v.apply(_,S)}function d(v,_){for(var S=-1,P=_.length,T=v.length;++S<P;)v[T+S]=_[S];return v}var m=Object.prototype,h=m.hasOwnProperty,b=m.toString,y=l.Symbol,x=m.propertyIsEnumerable,I=y?y.isConcatSpreadable:void 0,w=Math.max;function A(v){return f(v)||function(_){return function(S){return function(P){return!!P&&typeof P=="object"}(S)&&function(P){return P!=null&&function(T){return typeof T=="number"&&T>-1&&T%1==0&&T<=9007199254740991}(P.length)&&!function(T){var z=function(V){var W=typeof V;return!!V&&(W=="object"||W=="function")}(T)?b.call(T):"";return z=="[object Function]"||z=="[object GeneratorFunction]"}(P)}(S)}(_)&&h.call(_,"callee")&&(!x.call(_,"callee")||b.call(_)=="[object Arguments]")}(v)||!!(I&&v&&v[I])}var f=Array.isArray,j,C,g,E=(C=function(v){var _=(v=function P(T,z,V,W,ae){var Ce=-1,we=T.length;for(V||(V=A),ae||(ae=[]);++Ce<we;){var ue=T[Ce];z>0&&V(ue)?z>1?P(ue,z-1,V,W,ae):d(ae,ue):W||(ae[ae.length]=ue)}return ae}(v,1)).length,S=_;for(j;S--;)if(typeof v[S]!="function")throw new TypeError("Expected a function");return function(){for(var P=0,T=_?v[P].apply(this,arguments):arguments[0];++P<_;)T=v[P].call(this,T);return T}},g=w(g===void 0?C.length-1:g,0),function(){for(var v=arguments,_=-1,S=w(v.length-g,0),P=Array(S);++_<S;)P[_]=v[g+_];_=-1;for(var T=Array(g+1);++_<g;)T[_]=v[_];return T[g]=P,p(C,this,T)});r.exports=E}).call(this,s(43))},function(r,o,s){Object.defineProperty(o,"__esModule",{value:!0}),o.yuv2rgb=function(i){var u,c,l,p=i[0],d=i[1],m=i[2];return u=1*p+0*d+1.13983*m,c=1*p+-.39465*d+-.5806*m,l=1*p+2.02311*d+0*m,u=Math.min(Math.max(0,u),1),c=Math.min(Math.max(0,c),1),l=Math.min(Math.max(0,l),1),[255*u,255*c,255*l]},o.rgb2yuv=function(i){var u=i[0]/255,c=i[1]/255,l=i[2]/255;return[.299*u+.587*c+.114*l,-.14713*u+-.28886*c+.436*l,.615*u+-.51499*c+-.10001*l]}},function(r,o,s){function i(l,p,d){return p in l?Object.defineProperty(l,p,{value:d,enumerable:!0,configurable:!0,writable:!0}):l[p]=d,l}var u=s(141),c=function(){function l(){i(this,"_callbacks",void 0),i(this,"_isDispatching",void 0),i(this,"_isHandled",void 0),i(this,"_isPending",void 0),i(this,"_lastID",void 0),i(this,"_pendingPayload",void 0),this._callbacks={},this._isDispatching=!1,this._isHandled={},this._isPending={},this._lastID=1}var p=l.prototype;return p.register=function(d){var m="ID_"+this._lastID++;return this._callbacks[m]=d,m},p.unregister=function(d){this._callbacks[d]||u(!1),delete this._callbacks[d]},p.waitFor=function(d){this._isDispatching||u(!1);for(var m=0;m<d.length;m++){var h=d[m];this._isPending[h]?this._isHandled[h]||u(!1):(this._callbacks[h]||u(!1),this._invokeCallback(h))}},p.dispatch=function(d){this._isDispatching&&u(!1),this._startDispatching(d);try{for(var m in this._callbacks)this._isPending[m]||this._invokeCallback(m)}finally{this._stopDispatching()}},p.isDispatching=function(){return this._isDispatching},p._invokeCallback=function(d){this._isPending[d]=!0,this._callbacks[d](this._pendingPayload),this._isHandled[d]=!0},p._startDispatching=function(d){for(var m in this._callbacks)this._isPending[m]=!1,this._isHandled[m]=!1;this._pendingPayload=d,this._isDispatching=!0},p._stopDispatching=function(){delete this._pendingPayload,this._isDispatching=!1},l}();r.exports=c},function(r,o,s){r.exports=function(i,u){for(var c=arguments.length,l=new Array(c>2?c-2:0),p=2;p<c;p++)l[p-2]=arguments[p];if(!i){var d;if(u===void 0)d=new Error("Minified exception occurred; use the non-minified dev environment for the full error message and additional helpful warnings.");else{var m=0;(d=new Error(u.replace(/%s/g,function(){return String(l[m++])}))).name="Invariant Violation"}throw d.framesToPop=1,d}}},function(r,o,s){function i(D,M,O){return M in D?Object.defineProperty(D,M,{value:O,enumerable:!0,configurable:!0,writable:!0}):D[M]=O,D}function u(D,M){var O=Object.keys(D);if(Object.getOwnPropertySymbols){var L=Object.getOwnPropertySymbols(D);M&&(L=L.filter(function(N){return Object.getOwnPropertyDescriptor(D,N).enumerable})),O.push.apply(O,L)}return O}function c(D){for(var M=1;M<arguments.length;M++){var O=arguments[M]!=null?arguments[M]:{};M%2?u(Object(O),!0).forEach(function(L){i(D,L,O[L])}):Object.getOwnPropertyDescriptors?Object.defineProperties(D,Object.getOwnPropertyDescriptors(O)):u(Object(O)).forEach(function(L){Object.defineProperty(D,L,Object.getOwnPropertyDescriptor(O,L))})}return D}function l(D,M){if(!(D instanceof M))throw new TypeError("Cannot call a class as a function")}function p(D,M){for(var O=0;O<M.length;O++){var L=M[O];L.enumerable=L.enumerable||!1,L.configurable=!0,"value"in L&&(L.writable=!0),Object.defineProperty(D,L.key,L)}}function d(D,M,O){return M&&p(D.prototype,M),O&&p(D,O),D}function m(D,M){return(m=Object.setPrototypeOf||function(O,L){return O.__proto__=L,O})(D,M)}function h(D,M){if(typeof M!="function"&&M!==null)throw new TypeError("Super expression must either be null or a function");D.prototype=Object.create(M&&M.prototype,{constructor:{value:D,writable:!0,configurable:!0}}),M&&m(D,M)}function b(D){return(b=Object.setPrototypeOf?Object.getPrototypeOf:function(M){return M.__proto__||Object.getPrototypeOf(M)})(D)}function y(D){return(y=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(M){return typeof M}:function(M){return M&&typeof Symbol=="function"&&M.constructor===Symbol&&M!==Symbol.prototype?"symbol":typeof M})(D)}function x(D){if(D===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return D}function I(D,M){return!M||y(M)!=="object"&&typeof M!="function"?x(D):M}function w(D){var M=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch{return!1}}();return function(){var O,L=b(D);if(M){var N=b(this).constructor;O=Reflect.construct(L,arguments,N)}else O=L.apply(this,arguments);return I(this,O)}}s.r(o);var A=s(0),f=s.n(A);function j(){var D=this.constructor.getDerivedStateFromProps(this.props,this.state);D!=null&&this.setState(D)}function C(D){this.setState((function(M){var O=this.constructor.getDerivedStateFromProps(D,M);return O??null}).bind(this))}function g(D,M){try{var O=this.props,L=this.state;this.props=D,this.state=M,this.__reactInternalSnapshotFlag=!0,this.__reactInternalSnapshot=this.getSnapshotBeforeUpdate(O,L)}finally{this.props=O,this.state=L}}function E(D){var M=D.prototype;if(!M||!M.isReactComponent)throw new Error("Can only polyfill class components");if(typeof D.getDerivedStateFromProps!="function"&&typeof M.getSnapshotBeforeUpdate!="function")return D;var O=null,L=null,N=null;if(typeof M.componentWillMount=="function"?O="componentWillMount":typeof M.UNSAFE_componentWillMount=="function"&&(O="UNSAFE_componentWillMount"),typeof M.componentWillReceiveProps=="function"?L="componentWillReceiveProps":typeof M.UNSAFE_componentWillReceiveProps=="function"&&(L="UNSAFE_componentWillReceiveProps"),typeof M.componentWillUpdate=="function"?N="componentWillUpdate":typeof M.UNSAFE_componentWillUpdate=="function"&&(N="UNSAFE_componentWillUpdate"),O!==null||L!==null||N!==null){var Y=D.displayName||D.name,ne=typeof D.getDerivedStateFromProps=="function"?"getDerivedStateFromProps()":"getSnapshotBeforeUpdate()";throw Error(`Unsafe legacy lifecycles will not be called for components using new component APIs.

`+Y+" uses "+ne+" but also contains the following legacy lifecycles:"+(O!==null?`
  `+O:"")+(L!==null?`
  `+L:"")+(N!==null?`
  `+N:"")+`

The above lifecycles should be removed. Learn more about this warning here:
https://fb.me/react-async-component-lifecycle-hooks`)}if(typeof D.getDerivedStateFromProps=="function"&&(M.componentWillMount=j,M.componentWillReceiveProps=C),typeof M.getSnapshotBeforeUpdate=="function"){if(typeof M.componentDidUpdate!="function")throw new Error("Cannot polyfill getSnapshotBeforeUpdate() for components that do not define componentDidUpdate() on the prototype");M.componentWillUpdate=g;var te=M.componentDidUpdate;M.componentDidUpdate=function(K,me,Le){var Ze=this.__reactInternalSnapshotFlag?this.__reactInternalSnapshot:Le;te.call(this,K,me,Ze)}}return D}function v(D,M){if(D==null)return{};var O,L,N=function(ne,te){if(ne==null)return{};var K,me,Le={},Ze=Object.keys(ne);for(me=0;me<Ze.length;me++)K=Ze[me],te.indexOf(K)>=0||(Le[K]=ne[K]);return Le}(D,M);if(Object.getOwnPropertySymbols){var Y=Object.getOwnPropertySymbols(D);for(L=0;L<Y.length;L++)O=Y[L],M.indexOf(O)>=0||Object.prototype.propertyIsEnumerable.call(D,O)&&(N[O]=D[O])}return N}function _(D){var M=function(O){return{}.toString.call(O).match(/\s([a-zA-Z]+)/)[1].toLowerCase()}(D);return M==="number"&&(M=isNaN(D)?"nan":(0|D)!=D?"float":"integer"),M}j.__suppressDeprecationWarning=!0,C.__suppressDeprecationWarning=!0,g.__suppressDeprecationWarning=!0;var S={scheme:"rjv-default",author:"mac gainor",base00:"rgba(0, 0, 0, 0)",base01:"rgb(245, 245, 245)",base02:"rgb(235, 235, 235)",base03:"#93a1a1",base04:"rgba(0, 0, 0, 0.3)",base05:"#586e75",base06:"#073642",base07:"#002b36",base08:"#d33682",base09:"#cb4b16",base0A:"#dc322f",base0B:"#859900",base0C:"#6c71c4",base0D:"#586e75",base0E:"#2aa198",base0F:"#268bd2"},P={scheme:"rjv-grey",author:"mac gainor",base00:"rgba(1, 1, 1, 0)",base01:"rgba(1, 1, 1, 0.1)",base02:"rgba(0, 0, 0, 0.2)",base03:"rgba(1, 1, 1, 0.3)",base04:"rgba(0, 0, 0, 0.4)",base05:"rgba(1, 1, 1, 0.5)",base06:"rgba(1, 1, 1, 0.6)",base07:"rgba(1, 1, 1, 0.7)",base08:"rgba(1, 1, 1, 0.8)",base09:"rgba(1, 1, 1, 0.8)",base0A:"rgba(1, 1, 1, 0.8)",base0B:"rgba(1, 1, 1, 0.8)",base0C:"rgba(1, 1, 1, 0.8)",base0D:"rgba(1, 1, 1, 0.8)",base0E:"rgba(1, 1, 1, 0.8)",base0F:"rgba(1, 1, 1, 0.8)"},T={white:"#fff",black:"#000",transparent:"rgba(1, 1, 1, 0)",globalFontFamily:"monospace",globalCursor:"default",indentBlockWidth:"5px",braceFontWeight:"bold",braceCursor:"pointer",ellipsisFontSize:"18px",ellipsisLineHeight:"10px",ellipsisCursor:"pointer",keyMargin:"0px 5px",keyLetterSpacing:"0.5px",keyFontStyle:"none",keyBorderRadius:"3px",keyColonWeight:"bold",keyVerticalAlign:"top",keyOpacity:"0.85",keyOpacityHover:"1",keyValPaddingTop:"3px",keyValPaddingBottom:"3px",keyValPaddingRight:"5px",keyValBorderLeft:"1px solid",keyValBorderHover:"2px solid",keyValPaddingHover:"3px 5px 3px 4px",pushedContentMarginLeft:"6px",variableValuePaddingRight:"6px",nullFontSize:"11px",nullFontWeight:"bold",nullPadding:"1px 2px",nullBorderRadius:"3px",nanFontSize:"11px",nanFontWeight:"bold",nanPadding:"1px 2px",nanBorderRadius:"3px",undefinedFontSize:"11px",undefinedFontWeight:"bold",undefinedPadding:"1px 2px",undefinedBorderRadius:"3px",dataTypeFontSize:"11px",dataTypeMarginRight:"4px",datatypeOpacity:"0.8",objectSizeBorderRadius:"3px",objectSizeFontStyle:"italic",objectSizeMargin:"0px 6px 0px 0px",clipboardCursor:"pointer",clipboardCheckMarginLeft:"-12px",metaDataPadding:"0px 0px 0px 10px",arrayGroupMetaPadding:"0px 0px 0px 4px",iconContainerWidth:"17px",tooltipPadding:"4px",editInputMinWidth:"130px",editInputBorderRadius:"2px",editInputPadding:"5px",editInputMarginRight:"4px",editInputFontFamily:"monospace",iconCursor:"pointer",iconFontSize:"15px",iconPaddingRight:"1px",dateValueMarginLeft:"2px",iconMarginRight:"3px",detectedRowPaddingTop:"3px",addKeyCoverBackground:"rgba(255, 255, 255, 0.3)",addKeyCoverPosition:"absolute",addKeyCoverPositionPx:"0px",addKeyModalWidth:"200px",addKeyModalMargin:"auto",addKeyModalPadding:"10px",addKeyModalRadius:"3px"},z=s(45),V=function(D){var M=function(O){return{backgroundColor:O.base00,ellipsisColor:O.base09,braceColor:O.base07,expandedIcon:O.base0D,collapsedIcon:O.base0E,keyColor:O.base07,arrayKeyColor:O.base0C,objectSize:O.base04,copyToClipboard:O.base0F,copyToClipboardCheck:O.base0D,objectBorder:O.base02,dataTypes:{boolean:O.base0E,date:O.base0D,float:O.base0B,function:O.base0D,integer:O.base0F,string:O.base09,nan:O.base08,null:O.base0A,undefined:O.base05,regexp:O.base0A,background:O.base02},editVariable:{editIcon:O.base0E,cancelIcon:O.base09,removeIcon:O.base09,addIcon:O.base0E,checkIcon:O.base0E,background:O.base01,color:O.base0A,border:O.base07},addKeyModal:{background:O.base05,border:O.base04,color:O.base0A,labelColor:O.base01},validationFailure:{background:O.base09,iconColor:O.base01,fontColor:O.base01}}}(D);return{"app-container":{fontFamily:T.globalFontFamily,cursor:T.globalCursor,backgroundColor:M.backgroundColor,position:"relative"},ellipsis:{display:"inline-block",color:M.ellipsisColor,fontSize:T.ellipsisFontSize,lineHeight:T.ellipsisLineHeight,cursor:T.ellipsisCursor},"brace-row":{display:"inline-block",cursor:"pointer"},brace:{display:"inline-block",cursor:T.braceCursor,fontWeight:T.braceFontWeight,color:M.braceColor},"expanded-icon":{color:M.expandedIcon},"collapsed-icon":{color:M.collapsedIcon},colon:{display:"inline-block",margin:T.keyMargin,color:M.keyColor,verticalAlign:"top"},objectKeyVal:function(O,L){return{style:c({paddingTop:T.keyValPaddingTop,paddingRight:T.keyValPaddingRight,paddingBottom:T.keyValPaddingBottom,borderLeft:T.keyValBorderLeft+" "+M.objectBorder,":hover":{paddingLeft:L.paddingLeft-1+"px",borderLeft:T.keyValBorderHover+" "+M.objectBorder}},L)}},"object-key-val-no-border":{padding:T.keyValPadding},"pushed-content":{marginLeft:T.pushedContentMarginLeft},variableValue:function(O,L){return{style:c({display:"inline-block",paddingRight:T.variableValuePaddingRight,position:"relative"},L)}},"object-name":{display:"inline-block",color:M.keyColor,letterSpacing:T.keyLetterSpacing,fontStyle:T.keyFontStyle,verticalAlign:T.keyVerticalAlign,opacity:T.keyOpacity,":hover":{opacity:T.keyOpacityHover}},"array-key":{display:"inline-block",color:M.arrayKeyColor,letterSpacing:T.keyLetterSpacing,fontStyle:T.keyFontStyle,verticalAlign:T.keyVerticalAlign,opacity:T.keyOpacity,":hover":{opacity:T.keyOpacityHover}},"object-size":{color:M.objectSize,borderRadius:T.objectSizeBorderRadius,fontStyle:T.objectSizeFontStyle,margin:T.objectSizeMargin,cursor:"default"},"data-type-label":{fontSize:T.dataTypeFontSize,marginRight:T.dataTypeMarginRight,opacity:T.datatypeOpacity},boolean:{display:"inline-block",color:M.dataTypes.boolean},date:{display:"inline-block",color:M.dataTypes.date},"date-value":{marginLeft:T.dateValueMarginLeft},float:{display:"inline-block",color:M.dataTypes.float},function:{display:"inline-block",color:M.dataTypes.function,cursor:"pointer",whiteSpace:"pre-line"},"function-value":{fontStyle:"italic"},integer:{display:"inline-block",color:M.dataTypes.integer},string:{display:"inline-block",color:M.dataTypes.string},nan:{display:"inline-block",color:M.dataTypes.nan,fontSize:T.nanFontSize,fontWeight:T.nanFontWeight,backgroundColor:M.dataTypes.background,padding:T.nanPadding,borderRadius:T.nanBorderRadius},null:{display:"inline-block",color:M.dataTypes.null,fontSize:T.nullFontSize,fontWeight:T.nullFontWeight,backgroundColor:M.dataTypes.background,padding:T.nullPadding,borderRadius:T.nullBorderRadius},undefined:{display:"inline-block",color:M.dataTypes.undefined,fontSize:T.undefinedFontSize,padding:T.undefinedPadding,borderRadius:T.undefinedBorderRadius,backgroundColor:M.dataTypes.background},regexp:{display:"inline-block",color:M.dataTypes.regexp},"copy-to-clipboard":{cursor:T.clipboardCursor},"copy-icon":{color:M.copyToClipboard,fontSize:T.iconFontSize,marginRight:T.iconMarginRight,verticalAlign:"top"},"copy-icon-copied":{color:M.copyToClipboardCheck,marginLeft:T.clipboardCheckMarginLeft},"array-group-meta-data":{display:"inline-block",padding:T.arrayGroupMetaPadding},"object-meta-data":{display:"inline-block",padding:T.metaDataPadding},"icon-container":{display:"inline-block",width:T.iconContainerWidth},tooltip:{padding:T.tooltipPadding},removeVarIcon:{verticalAlign:"top",display:"inline-block",color:M.editVariable.removeIcon,cursor:T.iconCursor,fontSize:T.iconFontSize,marginRight:T.iconMarginRight},addVarIcon:{verticalAlign:"top",display:"inline-block",color:M.editVariable.addIcon,cursor:T.iconCursor,fontSize:T.iconFontSize,marginRight:T.iconMarginRight},editVarIcon:{verticalAlign:"top",display:"inline-block",color:M.editVariable.editIcon,cursor:T.iconCursor,fontSize:T.iconFontSize,marginRight:T.iconMarginRight},"edit-icon-container":{display:"inline-block",verticalAlign:"top"},"check-icon":{display:"inline-block",cursor:T.iconCursor,color:M.editVariable.checkIcon,fontSize:T.iconFontSize,paddingRight:T.iconPaddingRight},"cancel-icon":{display:"inline-block",cursor:T.iconCursor,color:M.editVariable.cancelIcon,fontSize:T.iconFontSize,paddingRight:T.iconPaddingRight},"edit-input":{display:"inline-block",minWidth:T.editInputMinWidth,borderRadius:T.editInputBorderRadius,backgroundColor:M.editVariable.background,color:M.editVariable.color,padding:T.editInputPadding,marginRight:T.editInputMarginRight,fontFamily:T.editInputFontFamily},"detected-row":{paddingTop:T.detectedRowPaddingTop},"key-modal-request":{position:T.addKeyCoverPosition,top:T.addKeyCoverPositionPx,left:T.addKeyCoverPositionPx,right:T.addKeyCoverPositionPx,bottom:T.addKeyCoverPositionPx,backgroundColor:T.addKeyCoverBackground},"key-modal":{width:T.addKeyModalWidth,backgroundColor:M.addKeyModal.background,marginLeft:T.addKeyModalMargin,marginRight:T.addKeyModalMargin,padding:T.addKeyModalPadding,borderRadius:T.addKeyModalRadius,marginTop:"15px",position:"relative"},"key-modal-label":{color:M.addKeyModal.labelColor,marginLeft:"2px",marginBottom:"5px",fontSize:"11px"},"key-modal-input-container":{overflow:"hidden"},"key-modal-input":{width:"100%",padding:"3px 6px",fontFamily:"monospace",color:M.addKeyModal.color,border:"none",boxSizing:"border-box",borderRadius:"2px"},"key-modal-cancel":{backgroundColor:M.editVariable.removeIcon,position:"absolute",top:"0px",right:"0px",borderRadius:"0px 3px 0px 3px",cursor:"pointer"},"key-modal-cancel-icon":{color:M.addKeyModal.labelColor,fontSize:T.iconFontSize,transform:"rotate(45deg)"},"key-modal-submit":{color:M.editVariable.addIcon,fontSize:T.iconFontSize,position:"absolute",right:"2px",top:"3px",cursor:"pointer"},"function-ellipsis":{display:"inline-block",color:M.ellipsisColor,fontSize:T.ellipsisFontSize,lineHeight:T.ellipsisLineHeight,cursor:T.ellipsisCursor},"validation-failure":{float:"right",padding:"3px 6px",borderRadius:"2px",cursor:"pointer",color:M.validationFailure.fontColor,backgroundColor:M.validationFailure.background},"validation-failure-label":{marginRight:"6px"},"validation-failure-clear":{position:"relative",verticalAlign:"top",cursor:"pointer",color:M.validationFailure.iconColor,fontSize:T.iconFontSize,transform:"rotate(45deg)"}}};function W(D,M,O){return D||console.error("theme has not been set"),function(L){var N=S;return L!==!1&&L!=="none"||(N=P),Object(z.createStyling)(V,{defaultBase16:N})(L)}(D)(M,O)}var ae=function(D){h(O,D);var M=w(O);function O(){return l(this,O),M.apply(this,arguments)}return d(O,[{key:"render",value:function(){var L=this.props,N=(L.rjvId,L.type_name),Y=L.displayDataTypes,ne=L.theme;return Y?f.a.createElement("span",Object.assign({className:"data-type-label"},W(ne,"data-type-label")),N):null}}]),O}(f.a.PureComponent),Ce=function(D){h(O,D);var M=w(O);function O(){return l(this,O),M.apply(this,arguments)}return d(O,[{key:"render",value:function(){var L=this.props;return f.a.createElement("div",W(L.theme,"boolean"),f.a.createElement(ae,Object.assign({type_name:"bool"},L)),L.value?"true":"false")}}]),O}(f.a.PureComponent),we=function(D){h(O,D);var M=w(O);function O(){return l(this,O),M.apply(this,arguments)}return d(O,[{key:"render",value:function(){var L=this.props;return f.a.createElement("div",W(L.theme,"date"),f.a.createElement(ae,Object.assign({type_name:"date"},L)),f.a.createElement("span",Object.assign({className:"date-value"},W(L.theme,"date-value")),L.value.toLocaleTimeString("en-us",{weekday:"short",year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"})))}}]),O}(f.a.PureComponent),ue=function(D){h(O,D);var M=w(O);function O(){return l(this,O),M.apply(this,arguments)}return d(O,[{key:"render",value:function(){var L=this.props;return f.a.createElement("div",W(L.theme,"float"),f.a.createElement(ae,Object.assign({type_name:"float"},L)),this.props.value)}}]),O}(f.a.PureComponent);function de(D,M){(M==null||M>D.length)&&(M=D.length);for(var O=0,L=new Array(M);O<M;O++)L[O]=D[O];return L}function be(D,M){if(D){if(typeof D=="string")return de(D,M);var O=Object.prototype.toString.call(D).slice(8,-1);return O==="Object"&&D.constructor&&(O=D.constructor.name),O==="Map"||O==="Set"?Array.from(D):O==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(O)?de(D,M):void 0}}function Ie(D,M){var O;if(typeof Symbol>"u"||D[Symbol.iterator]==null){if(Array.isArray(D)||(O=be(D))||M&&D&&typeof D.length=="number"){O&&(D=O);var L=0,N=function(){};return{s:N,n:function(){return L>=D.length?{done:!0}:{done:!1,value:D[L++]}},e:function(K){throw K},f:N}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var Y,ne=!0,te=!1;return{s:function(){O=D[Symbol.iterator]()},n:function(){var K=O.next();return ne=K.done,K},e:function(K){te=!0,Y=K},f:function(){try{ne||O.return==null||O.return()}finally{if(te)throw Y}}}}function Pe(D){return function(M){if(Array.isArray(M))return de(M)}(D)||function(M){if(typeof Symbol<"u"&&Symbol.iterator in Object(M))return Array.from(M)}(D)||be(D)||function(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()}var Re=s(46),$e=new(s(47)).Dispatcher,st=new(function(D){h(O,D);var M=w(O);function O(){var L;l(this,O);for(var N=arguments.length,Y=new Array(N),ne=0;ne<N;ne++)Y[ne]=arguments[ne];return(L=M.call.apply(M,[this].concat(Y))).objects={},L.set=function(te,K,me,Le){L.objects[te]===void 0&&(L.objects[te]={}),L.objects[te][K]===void 0&&(L.objects[te][K]={}),L.objects[te][K][me]=Le},L.get=function(te,K,me,Le){return L.objects[te]===void 0||L.objects[te][K]===void 0||L.objects[te][K][me]==null?Le:L.objects[te][K][me]},L.handleAction=function(te){var K=te.rjvId,me=te.data;switch(te.name){case"RESET":L.emit("reset-"+K);break;case"VARIABLE_UPDATED":te.data.updated_src=L.updateSrc(K,me),L.set(K,"action","variable-update",c(c({},me),{},{type:"variable-edited"})),L.emit("variable-update-"+K);break;case"VARIABLE_REMOVED":te.data.updated_src=L.updateSrc(K,me),L.set(K,"action","variable-update",c(c({},me),{},{type:"variable-removed"})),L.emit("variable-update-"+K);break;case"VARIABLE_ADDED":te.data.updated_src=L.updateSrc(K,me),L.set(K,"action","variable-update",c(c({},me),{},{type:"variable-added"})),L.emit("variable-update-"+K);break;case"ADD_VARIABLE_KEY_REQUEST":L.set(K,"action","new-key-request",me),L.emit("add-key-request-"+K)}},L.updateSrc=function(te,K){var me=K.name,Le=K.namespace,Ze=K.new_value,rt=(K.existing_value,K.variable_removed);Le.shift();var ht,Ge=L.get(te,"global","src"),bt=L.deepCopy(Ge,Pe(Le)),Tt=bt,ze=Ie(Le);try{for(ze.s();!(ht=ze.n()).done;)Tt=Tt[ht.value]}catch(Yt){ze.e(Yt)}finally{ze.f()}return rt?_(Tt)=="array"?Tt.splice(me,1):delete Tt[me]:me!==null?Tt[me]=Ze:bt=Ze,L.set(te,"global","src",bt),bt},L.deepCopy=function(te,K){var me,Le=_(te),Ze=K.shift();return Le=="array"?me=Pe(te):Le=="object"&&(me=c({},te)),Ze!==void 0&&(me[Ze]=L.deepCopy(te[Ze],K)),me},L}return O}(Re.EventEmitter));$e.register(st.handleAction.bind(st));var re=st,qe=function(D){h(O,D);var M=w(O);function O(L){var N;return l(this,O),(N=M.call(this,L)).toggleCollapsed=function(){N.setState({collapsed:!N.state.collapsed},function(){re.set(N.props.rjvId,N.props.namespace,"collapsed",N.state.collapsed)})},N.getFunctionDisplay=function(Y){var ne=x(N).props;return Y?f.a.createElement("span",null,N.props.value.toString().slice(9,-1).replace(/\{[\s\S]+/,""),f.a.createElement("span",{className:"function-collapsed",style:{fontWeight:"bold"}},f.a.createElement("span",null,"{"),f.a.createElement("span",W(ne.theme,"ellipsis"),"..."),f.a.createElement("span",null,"}"))):N.props.value.toString().slice(9,-1)},N.state={collapsed:re.get(L.rjvId,L.namespace,"collapsed",!0)},N}return d(O,[{key:"render",value:function(){var L=this.props,N=this.state.collapsed;return f.a.createElement("div",W(L.theme,"function"),f.a.createElement(ae,Object.assign({type_name:"function"},L)),f.a.createElement("span",Object.assign({},W(L.theme,"function-value"),{className:"rjv-function-container",onClick:this.toggleCollapsed}),this.getFunctionDisplay(N)))}}]),O}(f.a.PureComponent),Ve=function(D){h(O,D);var M=w(O);function O(){return l(this,O),M.apply(this,arguments)}return d(O,[{key:"render",value:function(){return f.a.createElement("div",W(this.props.theme,"nan"),"NaN")}}]),O}(f.a.PureComponent),Lt=function(D){h(O,D);var M=w(O);function O(){return l(this,O),M.apply(this,arguments)}return d(O,[{key:"render",value:function(){return f.a.createElement("div",W(this.props.theme,"null"),"NULL")}}]),O}(f.a.PureComponent),It=function(D){h(O,D);var M=w(O);function O(){return l(this,O),M.apply(this,arguments)}return d(O,[{key:"render",value:function(){var L=this.props;return f.a.createElement("div",W(L.theme,"integer"),f.a.createElement(ae,Object.assign({type_name:"int"},L)),this.props.value)}}]),O}(f.a.PureComponent),ua=function(D){h(O,D);var M=w(O);function O(){return l(this,O),M.apply(this,arguments)}return d(O,[{key:"render",value:function(){var L=this.props;return f.a.createElement("div",W(L.theme,"regexp"),f.a.createElement(ae,Object.assign({type_name:"regexp"},L)),this.props.value.toString())}}]),O}(f.a.PureComponent),ra=function(D){h(O,D);var M=w(O);function O(L){var N;return l(this,O),(N=M.call(this,L)).toggleCollapsed=function(){N.setState({collapsed:!N.state.collapsed},function(){re.set(N.props.rjvId,N.props.namespace,"collapsed",N.state.collapsed)})},N.state={collapsed:re.get(L.rjvId,L.namespace,"collapsed",!0)},N}return d(O,[{key:"render",value:function(){this.state.collapsed;var L=this.props,N=L.collapseStringsAfterLength,Y=L.theme,ne=L.value,te={style:{cursor:"default"}};return _(N)==="integer"&&ne.length>N&&(te.style.cursor="pointer",this.state.collapsed&&(ne=f.a.createElement("span",null,ne.substring(0,N),f.a.createElement("span",W(Y,"ellipsis")," ...")))),f.a.createElement("div",W(Y,"string"),f.a.createElement(ae,Object.assign({type_name:"string"},L)),f.a.createElement("span",Object.assign({className:"string-value"},te,{onClick:this.toggleCollapsed}),'"',ne,'"'))}}]),O}(f.a.PureComponent),Pt=function(D){h(O,D);var M=w(O);function O(){return l(this,O),M.apply(this,arguments)}return d(O,[{key:"render",value:function(){return f.a.createElement("div",W(this.props.theme,"undefined"),"undefined")}}]),O}(f.a.PureComponent);function Qt(){return(Qt=Object.assign||function(D){for(var M=1;M<arguments.length;M++){var O=arguments[M];for(var L in O)Object.prototype.hasOwnProperty.call(O,L)&&(D[L]=O[L])}return D}).apply(this,arguments)}var sa=A.useLayoutEffect,Xt=function(D){var M=Object(A.useRef)(D);return sa(function(){M.current=D}),M},Ut=function(D,M){typeof D!="function"?D.current=M:D(M)},Ht=function(D,M){var O=Object(A.useRef)();return Object(A.useCallback)(function(L){D.current=L,O.current&&Ut(O.current,null),O.current=M,M&&Ut(M,L)},[M])},Ct={"min-height":"0","max-height":"none",height:"0",visibility:"hidden",overflow:"hidden",position:"absolute","z-index":"-1000",top:"0",right:"0"},Nt=function(D){Object.keys(Ct).forEach(function(M){D.style.setProperty(M,Ct[M],"important")})},Et=null,da=function(){},se=["borderBottomWidth","borderLeftWidth","borderRightWidth","borderTopWidth","boxSizing","fontFamily","fontSize","fontStyle","fontWeight","letterSpacing","lineHeight","paddingBottom","paddingLeft","paddingRight","paddingTop","tabSize","textIndent","textRendering","textTransform","width"],Q=!!document.documentElement.currentStyle,J=function(D,M){var O=D.cacheMeasurements,L=D.maxRows,N=D.minRows,Y=D.onChange,ne=Y===void 0?da:Y,te=D.onHeightChange,K=te===void 0?da:te,me=function(ze,Yt){if(ze==null)return{};var fa,Ia,Fr={},Ba=Object.keys(ze);for(Ia=0;Ia<Ba.length;Ia++)fa=Ba[Ia],Yt.indexOf(fa)>=0||(Fr[fa]=ze[fa]);return Fr}(D,["cacheMeasurements","maxRows","minRows","onChange","onHeightChange"]),Le,Ze=me.value!==void 0,rt=Object(A.useRef)(null),ht=Ht(rt,M),Ge=Object(A.useRef)(0),bt=Object(A.useRef)(),Tt=function(){var ze=rt.current,Yt=O&&bt.current?bt.current:function(Ba){var R=window.getComputedStyle(Ba);if(R===null)return null;var $,F=($=R,se.reduce(function(H,q){return H[q]=$[q],H},{})),G=F.boxSizing;return G===""?null:(Q&&G==="border-box"&&(F.width=parseFloat(F.width)+parseFloat(F.borderRightWidth)+parseFloat(F.borderLeftWidth)+parseFloat(F.paddingRight)+parseFloat(F.paddingLeft)+"px"),{sizingStyle:F,paddingSize:parseFloat(F.paddingBottom)+parseFloat(F.paddingTop),borderSize:parseFloat(F.borderBottomWidth)+parseFloat(F.borderTopWidth)})}(ze);if(Yt){bt.current=Yt;var fa=function(Ba,R,$,F){$===void 0&&($=1),F===void 0&&(F=1/0),Et||((Et=document.createElement("textarea")).setAttribute("tab-index","-1"),Et.setAttribute("aria-hidden","true"),Nt(Et)),Et.parentNode===null&&document.body.appendChild(Et);var G=Ba.paddingSize,H=Ba.borderSize,q=Ba.sizingStyle,ce=q.boxSizing;Object.keys(q).forEach(function(Te){var He=Te;Et.style[He]=q[He]}),Nt(Et),Et.value=R;var fe=function(Te,He){var pt=Te.scrollHeight;return He.sizingStyle.boxSizing==="border-box"?pt+He.borderSize:pt-He.paddingSize}(Et,Ba);Et.value="x";var ge=Et.scrollHeight-G,ye=ge*$;ce==="border-box"&&(ye=ye+G+H),fe=Math.max(ye,fe);var _e=ge*F;return ce==="border-box"&&(_e=_e+G+H),[fe=Math.min(_e,fe),ge]}(Yt,ze.value||ze.placeholder||"x",N,L),Ia=fa[0],Fr=fa[1];Ge.current!==Ia&&(Ge.current=Ia,ze.style.setProperty("height",Ia+"px","important"),K(Ia,{rowHeight:Fr}))}};return Object(A.useLayoutEffect)(Tt),Le=Xt(Tt),Object(A.useLayoutEffect)(function(){var ze=function(Yt){Le.current(Yt)};return window.addEventListener("resize",ze),function(){window.removeEventListener("resize",ze)}},[]),Object(A.createElement)("textarea",Qt({},me,{onChange:function(ze){Ze||Tt(),ne(ze)},ref:ht}))},le=Object(A.forwardRef)(J);function ve(D){D=D.trim();try{if((D=JSON.stringify(JSON.parse(D)))[0]==="[")return Ee("array",JSON.parse(D));if(D[0]==="{")return Ee("object",JSON.parse(D));if(D.match(/\-?\d+\.\d+/)&&D.match(/\-?\d+\.\d+/)[0]===D)return Ee("float",parseFloat(D));if(D.match(/\-?\d+e-\d+/)&&D.match(/\-?\d+e-\d+/)[0]===D)return Ee("float",Number(D));if(D.match(/\-?\d+/)&&D.match(/\-?\d+/)[0]===D)return Ee("integer",parseInt(D));if(D.match(/\-?\d+e\+\d+/)&&D.match(/\-?\d+e\+\d+/)[0]===D)return Ee("integer",Number(D))}catch{}switch(D=D.toLowerCase()){case"undefined":return Ee("undefined",void 0);case"nan":return Ee("nan",NaN);case"null":return Ee("null",null);case"true":return Ee("boolean",!0);case"false":return Ee("boolean",!1);default:if(D=Date.parse(D))return Ee("date",new Date(D))}return Ee(!1,null)}function Ee(D,M){return{type:D,value:M}}var Je=function(D){h(O,D);var M=w(O);function O(){return l(this,O),M.apply(this,arguments)}return d(O,[{key:"render",value:function(){var L=this.props,N=L.style,Y=v(L,["style"]);return f.a.createElement("span",Y,f.a.createElement("svg",Object.assign({},ie(N),{viewBox:"0 0 24 24",fill:"currentColor",preserveAspectRatio:"xMidYMid meet"}),f.a.createElement("path",{d:"M12,20C7.59,20 4,16.41 4,12C4,7.59 7.59,4 12,4C16.41,4 20,7.59 20,12C20,16.41 16.41,20 12,20M12,2A10,10 0 0,0 2,12A10,10 0 0,0 12,22A10,10 0 0,0 22,12A10,10 0 0,0 12,2M7,13H17V11H7"})))}}]),O}(f.a.PureComponent),Ye=function(D){h(O,D);var M=w(O);function O(){return l(this,O),M.apply(this,arguments)}return d(O,[{key:"render",value:function(){var L=this.props,N=L.style,Y=v(L,["style"]);return f.a.createElement("span",Y,f.a.createElement("svg",Object.assign({},ie(N),{viewBox:"0 0 24 24",fill:"currentColor",preserveAspectRatio:"xMidYMid meet"}),f.a.createElement("path",{d:"M12,20C7.59,20 4,16.41 4,12C4,7.59 7.59,4 12,4C16.41,4 20,7.59 20,12C20,16.41 16.41,20 12,20M12,2A10,10 0 0,0 2,12A10,10 0 0,0 12,22A10,10 0 0,0 22,12A10,10 0 0,0 12,2M13,7H11V11H7V13H11V17H13V13H17V11H13V7Z"})))}}]),O}(f.a.PureComponent),lt=function(D){h(O,D);var M=w(O);function O(){return l(this,O),M.apply(this,arguments)}return d(O,[{key:"render",value:function(){var L=this.props,N=L.style,Y=v(L,["style"]),ne=ie(N).style;return f.a.createElement("span",Y,f.a.createElement("svg",{fill:ne.color,width:ne.height,height:ne.width,style:ne,viewBox:"0 0 1792 1792"},f.a.createElement("path",{d:"M1344 800v64q0 14-9 23t-23 9h-832q-14 0-23-9t-9-23v-64q0-14 9-23t23-9h832q14 0 23 9t9 23zm128 448v-832q0-66-47-113t-113-47h-832q-66 0-113 47t-47 113v832q0 66 47 113t113 47h832q66 0 113-47t47-113zm128-832v832q0 119-84.5 203.5t-203.5 84.5h-832q-119 0-203.5-84.5t-84.5-203.5v-832q0-119 84.5-203.5t203.5-84.5h832q119 0 203.5 84.5t84.5 203.5z"})))}}]),O}(f.a.PureComponent),St=function(D){h(O,D);var M=w(O);function O(){return l(this,O),M.apply(this,arguments)}return d(O,[{key:"render",value:function(){var L=this.props,N=L.style,Y=v(L,["style"]),ne=ie(N).style;return f.a.createElement("span",Y,f.a.createElement("svg",{fill:ne.color,width:ne.height,height:ne.width,style:ne,viewBox:"0 0 1792 1792"},f.a.createElement("path",{d:"M1344 800v64q0 14-9 23t-23 9h-352v352q0 14-9 23t-23 9h-64q-14 0-23-9t-9-23v-352h-352q-14 0-23-9t-9-23v-64q0-14 9-23t23-9h352v-352q0-14 9-23t23-9h64q14 0 23 9t9 23v352h352q14 0 23 9t9 23zm128 448v-832q0-66-47-113t-113-47h-832q-66 0-113 47t-47 113v832q0 66 47 113t113 47h832q66 0 113-47t47-113zm128-832v832q0 119-84.5 203.5t-203.5 84.5h-832q-119 0-203.5-84.5t-84.5-203.5v-832q0-119 84.5-203.5t203.5-84.5h832q119 0 203.5 84.5t84.5 203.5z"})))}}]),O}(f.a.PureComponent),tt=function(D){h(O,D);var M=w(O);function O(){return l(this,O),M.apply(this,arguments)}return d(O,[{key:"render",value:function(){var L=this.props,N=L.style,Y=v(L,["style"]);return f.a.createElement("span",Y,f.a.createElement("svg",{style:c(c({},ie(N).style),{},{paddingLeft:"2px",verticalAlign:"top"}),viewBox:"0 0 15 15",fill:"currentColor"},f.a.createElement("path",{d:"M0 14l6-6-6-6z"})))}}]),O}(f.a.PureComponent),Dt=function(D){h(O,D);var M=w(O);function O(){return l(this,O),M.apply(this,arguments)}return d(O,[{key:"render",value:function(){var L=this.props,N=L.style,Y=v(L,["style"]);return f.a.createElement("span",Y,f.a.createElement("svg",{style:c(c({},ie(N).style),{},{paddingLeft:"2px",verticalAlign:"top"}),viewBox:"0 0 15 15",fill:"currentColor"},f.a.createElement("path",{d:"M0 5l6 6 6-6z"})))}}]),O}(f.a.PureComponent),ct=function(D){h(O,D);var M=w(O);function O(){return l(this,O),M.apply(this,arguments)}return d(O,[{key:"render",value:function(){var L=this.props,N=L.style,Y=v(L,["style"]);return f.a.createElement("span",Y,f.a.createElement("svg",Object.assign({},ie(N),{viewBox:"0 0 40 40",fill:"currentColor",preserveAspectRatio:"xMidYMid meet"}),f.a.createElement("g",null,f.a.createElement("path",{d:"m30 35h-25v-22.5h25v7.5h2.5v-12.5c0-1.4-1.1-2.5-2.5-2.5h-7.5c0-2.8-2.2-5-5-5s-5 2.2-5 5h-7.5c-1.4 0-2.5 1.1-2.5 2.5v27.5c0 1.4 1.1 2.5 2.5 2.5h25c1.4 0 2.5-1.1 2.5-2.5v-5h-2.5v5z m-20-27.5h2.5s2.5-1.1 2.5-2.5 1.1-2.5 2.5-2.5 2.5 1.1 2.5 2.5 1.3 2.5 2.5 2.5h2.5s2.5 1.1 2.5 2.5h-20c0-1.5 1.1-2.5 2.5-2.5z m-2.5 20h5v-2.5h-5v2.5z m17.5-5v-5l-10 7.5 10 7.5v-5h12.5v-5h-12.5z m-17.5 10h7.5v-2.5h-7.5v2.5z m12.5-17.5h-12.5v2.5h12.5v-2.5z m-7.5 5h-5v2.5h5v-2.5z"}))))}}]),O}(f.a.PureComponent),Kt=function(D){h(O,D);var M=w(O);function O(){return l(this,O),M.apply(this,arguments)}return d(O,[{key:"render",value:function(){var L=this.props,N=L.style,Y=v(L,["style"]);return f.a.createElement("span",Y,f.a.createElement("svg",Object.assign({},ie(N),{viewBox:"0 0 40 40",fill:"currentColor",preserveAspectRatio:"xMidYMid meet"}),f.a.createElement("g",null,f.a.createElement("path",{d:"m28.6 25q0-0.5-0.4-1l-4-4 4-4q0.4-0.5 0.4-1 0-0.6-0.4-1.1l-2-2q-0.4-0.4-1-0.4-0.6 0-1 0.4l-4.1 4.1-4-4.1q-0.4-0.4-1-0.4-0.6 0-1 0.4l-2 2q-0.5 0.5-0.5 1.1 0 0.5 0.5 1l4 4-4 4q-0.5 0.5-0.5 1 0 0.7 0.5 1.1l2 2q0.4 0.4 1 0.4 0.6 0 1-0.4l4-4.1 4.1 4.1q0.4 0.4 1 0.4 0.6 0 1-0.4l2-2q0.4-0.4 0.4-1z m8.7-5q0 4.7-2.3 8.6t-6.3 6.2-8.6 2.3-8.6-2.3-6.2-6.2-2.3-8.6 2.3-8.6 6.2-6.2 8.6-2.3 8.6 2.3 6.3 6.2 2.3 8.6z"}))))}}]),O}(f.a.PureComponent),U=function(D){h(O,D);var M=w(O);function O(){return l(this,O),M.apply(this,arguments)}return d(O,[{key:"render",value:function(){var L=this.props,N=L.style,Y=v(L,["style"]);return f.a.createElement("span",Y,f.a.createElement("svg",Object.assign({},ie(N),{viewBox:"0 0 40 40",fill:"currentColor",preserveAspectRatio:"xMidYMid meet"}),f.a.createElement("g",null,f.a.createElement("path",{d:"m30.1 21.4v-2.8q0-0.6-0.4-1t-1-0.5h-5.7v-5.7q0-0.6-0.4-1t-1-0.4h-2.9q-0.6 0-1 0.4t-0.4 1v5.7h-5.7q-0.6 0-1 0.5t-0.5 1v2.8q0 0.6 0.5 1t1 0.5h5.7v5.7q0 0.5 0.4 1t1 0.4h2.9q0.6 0 1-0.4t0.4-1v-5.7h5.7q0.6 0 1-0.5t0.4-1z m7.2-1.4q0 4.7-2.3 8.6t-6.3 6.2-8.6 2.3-8.6-2.3-6.2-6.2-2.3-8.6 2.3-8.6 6.2-6.2 8.6-2.3 8.6 2.3 6.3 6.2 2.3 8.6z"}))))}}]),O}(f.a.PureComponent),X=function(D){h(O,D);var M=w(O);function O(){return l(this,O),M.apply(this,arguments)}return d(O,[{key:"render",value:function(){var L=this.props,N=L.style,Y=v(L,["style"]);return f.a.createElement("span",Y,f.a.createElement("svg",Object.assign({},ie(N),{viewBox:"0 0 40 40",fill:"currentColor",preserveAspectRatio:"xMidYMid meet"}),f.a.createElement("g",null,f.a.createElement("path",{d:"m31.6 21.6h-10v10h-3.2v-10h-10v-3.2h10v-10h3.2v10h10v3.2z"}))))}}]),O}(f.a.PureComponent),pe=function(D){h(O,D);var M=w(O);function O(){return l(this,O),M.apply(this,arguments)}return d(O,[{key:"render",value:function(){var L=this.props,N=L.style,Y=v(L,["style"]);return f.a.createElement("span",Y,f.a.createElement("svg",Object.assign({},ie(N),{viewBox:"0 0 40 40",fill:"currentColor",preserveAspectRatio:"xMidYMid meet"}),f.a.createElement("g",null,f.a.createElement("path",{d:"m19.8 26.4l2.6-2.6-3.4-3.4-2.6 2.6v1.3h2.2v2.1h1.2z m9.8-16q-0.3-0.4-0.7 0l-7.8 7.8q-0.4 0.4 0 0.7t0.7 0l7.8-7.8q0.4-0.4 0-0.7z m1.8 13.2v4.3q0 2.6-1.9 4.5t-4.5 1.9h-18.6q-2.6 0-4.5-1.9t-1.9-4.5v-18.6q0-2.7 1.9-4.6t4.5-1.8h18.6q1.4 0 2.6 0.5 0.3 0.2 0.4 0.5 0.1 0.4-0.2 0.7l-1.1 1.1q-0.3 0.3-0.7 0.1-0.5-0.1-1-0.1h-18.6q-1.4 0-2.5 1.1t-1 2.5v18.6q0 1.4 1 2.5t2.5 1h18.6q1.5 0 2.5-1t1.1-2.5v-2.9q0-0.2 0.2-0.4l1.4-1.5q0.3-0.3 0.8-0.1t0.4 0.6z m-2.1-16.5l6.4 6.5-15 15h-6.4v-6.5z m9.9 3l-2.1 2-6.4-6.4 2.1-2q0.6-0.7 1.5-0.7t1.5 0.7l3.4 3.4q0.6 0.6 0.6 1.5t-0.6 1.5z"}))))}}]),O}(f.a.PureComponent),oe=function(D){h(O,D);var M=w(O);function O(){return l(this,O),M.apply(this,arguments)}return d(O,[{key:"render",value:function(){var L=this.props,N=L.style,Y=v(L,["style"]);return f.a.createElement("span",Y,f.a.createElement("svg",Object.assign({},ie(N),{viewBox:"0 0 40 40",fill:"currentColor",preserveAspectRatio:"xMidYMid meet"}),f.a.createElement("g",null,f.a.createElement("path",{d:"m31.7 16.4q0-0.6-0.4-1l-2.1-2.1q-0.4-0.4-1-0.4t-1 0.4l-9.1 9.1-5-5q-0.5-0.4-1-0.4t-1 0.4l-2.1 2q-0.4 0.4-0.4 1 0 0.6 0.4 1l8.1 8.1q0.4 0.4 1 0.4 0.6 0 1-0.4l12.2-12.1q0.4-0.4 0.4-1z m5.6 3.6q0 4.7-2.3 8.6t-6.3 6.2-8.6 2.3-8.6-2.3-6.2-6.2-2.3-8.6 2.3-8.6 6.2-6.2 8.6-2.3 8.6 2.3 6.3 6.2 2.3 8.6z"}))))}}]),O}(f.a.PureComponent);function ie(D){return D||(D={}),{style:c(c({verticalAlign:"middle"},D),{},{color:D.color?D.color:"#000000",height:"1em",width:"1em"})}}var xe=function(D){h(O,D);var M=w(O);function O(L){var N;return l(this,O),(N=M.call(this,L)).copiedTimer=null,N.handleCopy=function(){var Y=document.createElement("textarea"),ne=N.props,te=ne.clickCallback,K=ne.src,me=ne.namespace;Y.innerHTML=JSON.stringify(N.clipboardValue(K),null,"  "),document.body.appendChild(Y),Y.select(),document.execCommand("copy"),document.body.removeChild(Y),N.copiedTimer=setTimeout(function(){N.setState({copied:!1})},5500),N.setState({copied:!0},function(){typeof te=="function"&&te({src:K,namespace:me,name:me[me.length-1]})})},N.getClippyIcon=function(){var Y=N.props.theme;return N.state.copied?f.a.createElement("span",null,f.a.createElement(ct,Object.assign({className:"copy-icon"},W(Y,"copy-icon"))),f.a.createElement("span",W(Y,"copy-icon-copied"),"✔")):f.a.createElement(ct,Object.assign({className:"copy-icon"},W(Y,"copy-icon")))},N.clipboardValue=function(Y){switch(_(Y)){case"function":case"regexp":return Y.toString();default:return Y}},N.state={copied:!1},N}return d(O,[{key:"componentWillUnmount",value:function(){this.copiedTimer&&(clearTimeout(this.copiedTimer),this.copiedTimer=null)}},{key:"render",value:function(){var L=this.props,N=(L.src,L.theme),Y=L.hidden,ne=L.rowHovered,te=W(N,"copy-to-clipboard").style,K="inline";return Y&&(K="none"),f.a.createElement("span",{className:"copy-to-clipboard-container",title:"Copy to clipboard",style:{verticalAlign:"top",display:ne?"inline-block":"none"}},f.a.createElement("span",{style:c(c({},te),{},{display:K}),onClick:this.handleCopy},this.getClippyIcon()))}}]),O}(f.a.PureComponent),je=function(D){h(O,D);var M=w(O);function O(L){var N;return l(this,O),(N=M.call(this,L)).getEditIcon=function(){var Y=N.props,ne=Y.variable,te=Y.theme;return f.a.createElement("div",{className:"click-to-edit",style:{verticalAlign:"top",display:N.state.hovered?"inline-block":"none"}},f.a.createElement(pe,Object.assign({className:"click-to-edit-icon"},W(te,"editVarIcon"),{onClick:function(){N.prepopInput(ne)}})))},N.prepopInput=function(Y){if(N.props.onEdit!==!1){var ne=function(K){var me;switch(_(K)){case"undefined":me="undefined";break;case"nan":me="NaN";break;case"string":me=K;break;case"date":case"function":case"regexp":me=K.toString();break;default:try{me=JSON.stringify(K,null,"  ")}catch{me=""}}return me}(Y.value),te=ve(ne);N.setState({editMode:!0,editValue:ne,parsedInput:{type:te.type,value:te.value}})}},N.getRemoveIcon=function(){var Y=N.props,ne=Y.variable,te=Y.namespace,K=Y.theme,me=Y.rjvId;return f.a.createElement("div",{className:"click-to-remove",style:{verticalAlign:"top",display:N.state.hovered?"inline-block":"none"}},f.a.createElement(Kt,Object.assign({className:"click-to-remove-icon"},W(K,"removeVarIcon"),{onClick:function(){$e.dispatch({name:"VARIABLE_REMOVED",rjvId:me,data:{name:ne.name,namespace:te,existing_value:ne.value,variable_removed:!0}})}})))},N.getValue=function(Y,ne){var te=!ne&&Y.type,K=x(N).props;switch(te){case!1:return N.getEditInput();case"string":return f.a.createElement(ra,Object.assign({value:Y.value},K));case"integer":return f.a.createElement(It,Object.assign({value:Y.value},K));case"float":return f.a.createElement(ue,Object.assign({value:Y.value},K));case"boolean":return f.a.createElement(Ce,Object.assign({value:Y.value},K));case"function":return f.a.createElement(qe,Object.assign({value:Y.value},K));case"null":return f.a.createElement(Lt,K);case"nan":return f.a.createElement(Ve,K);case"undefined":return f.a.createElement(Pt,K);case"date":return f.a.createElement(we,Object.assign({value:Y.value},K));case"regexp":return f.a.createElement(ua,Object.assign({value:Y.value},K));default:return f.a.createElement("div",{className:"object-value"},JSON.stringify(Y.value))}},N.getEditInput=function(){var Y=N.props.theme,ne=N.state.editValue;return f.a.createElement("div",null,f.a.createElement(le,Object.assign({type:"text",inputRef:function(te){return te&&te.focus()},value:ne,className:"variable-editor",onChange:function(te){var K=te.target.value,me=ve(K);N.setState({editValue:K,parsedInput:{type:me.type,value:me.value}})},onKeyDown:function(te){switch(te.key){case"Escape":N.setState({editMode:!1,editValue:""});break;case"Enter":(te.ctrlKey||te.metaKey)&&N.submitEdit(!0)}te.stopPropagation()},placeholder:"update this value",minRows:2},W(Y,"edit-input"))),f.a.createElement("div",W(Y,"edit-icon-container"),f.a.createElement(Kt,Object.assign({className:"edit-cancel"},W(Y,"cancel-icon"),{onClick:function(){N.setState({editMode:!1,editValue:""})}})),f.a.createElement(oe,Object.assign({className:"edit-check string-value"},W(Y,"check-icon"),{onClick:function(){N.submitEdit()}})),f.a.createElement("div",null,N.showDetected())))},N.submitEdit=function(Y){var ne=N.props,te=ne.variable,K=ne.namespace,me=ne.rjvId,Le=N.state,Ze=Le.editValue,rt=Le.parsedInput,ht=Ze;Y&&rt.type&&(ht=rt.value),N.setState({editMode:!1}),$e.dispatch({name:"VARIABLE_UPDATED",rjvId:me,data:{name:te.name,namespace:K,existing_value:te.value,new_value:ht,variable_removed:!1}})},N.showDetected=function(){var Y=N.props,ne=Y.theme,te=(Y.variable,Y.namespace,Y.rjvId,N.state.parsedInput),K=(te.type,te.value,N.getDetectedInput());if(K)return f.a.createElement("div",null,f.a.createElement("div",W(ne,"detected-row"),K,f.a.createElement(oe,{className:"edit-check detected",style:c({verticalAlign:"top",paddingLeft:"3px"},W(ne,"check-icon").style),onClick:function(){N.submitEdit(!0)}})))},N.getDetectedInput=function(){var Y=N.state.parsedInput,ne=Y.type,te=Y.value,K=x(N).props,me=K.theme;if(ne!==!1)switch(ne.toLowerCase()){case"object":return f.a.createElement("span",null,f.a.createElement("span",{style:c(c({},W(me,"brace").style),{},{cursor:"default"})},"{"),f.a.createElement("span",{style:c(c({},W(me,"ellipsis").style),{},{cursor:"default"})},"..."),f.a.createElement("span",{style:c(c({},W(me,"brace").style),{},{cursor:"default"})},"}"));case"array":return f.a.createElement("span",null,f.a.createElement("span",{style:c(c({},W(me,"brace").style),{},{cursor:"default"})},"["),f.a.createElement("span",{style:c(c({},W(me,"ellipsis").style),{},{cursor:"default"})},"..."),f.a.createElement("span",{style:c(c({},W(me,"brace").style),{},{cursor:"default"})},"]"));case"string":return f.a.createElement(ra,Object.assign({value:te},K));case"integer":return f.a.createElement(It,Object.assign({value:te},K));case"float":return f.a.createElement(ue,Object.assign({value:te},K));case"boolean":return f.a.createElement(Ce,Object.assign({value:te},K));case"function":return f.a.createElement(qe,Object.assign({value:te},K));case"null":return f.a.createElement(Lt,K);case"nan":return f.a.createElement(Ve,K);case"undefined":return f.a.createElement(Pt,K);case"date":return f.a.createElement(we,Object.assign({value:new Date(te)},K))}},N.state={editMode:!1,editValue:"",hovered:!1,renameKey:!1,parsedInput:{type:!1,value:null}},N}return d(O,[{key:"render",value:function(){var L=this,N=this.props,Y=N.variable,ne=N.singleIndent,te=N.type,K=N.theme,me=N.namespace,Le=N.indentWidth,Ze=N.enableClipboard,rt=N.onEdit,ht=N.onDelete,Ge=N.onSelect,bt=N.displayArrayKey,Tt=N.quotesOnKeys,ze=this.state.editMode;return f.a.createElement("div",Object.assign({},W(K,"objectKeyVal",{paddingLeft:Le*ne}),{onMouseEnter:function(){return L.setState(c(c({},L.state),{},{hovered:!0}))},onMouseLeave:function(){return L.setState(c(c({},L.state),{},{hovered:!1}))},className:"variable-row",key:Y.name}),te=="array"?bt?f.a.createElement("span",Object.assign({},W(K,"array-key"),{key:Y.name+"_"+me}),Y.name,f.a.createElement("div",W(K,"colon"),":")):null:f.a.createElement("span",null,f.a.createElement("span",Object.assign({},W(K,"object-name"),{className:"object-key",key:Y.name+"_"+me}),!!Tt&&f.a.createElement("span",{style:{verticalAlign:"top"}},'"'),f.a.createElement("span",{style:{display:"inline-block"}},Y.name),!!Tt&&f.a.createElement("span",{style:{verticalAlign:"top"}},'"')),f.a.createElement("span",W(K,"colon"),":")),f.a.createElement("div",Object.assign({className:"variable-value",onClick:Ge===!1&&rt===!1?null:function(Yt){var fa=Pe(me);(Yt.ctrlKey||Yt.metaKey)&&rt!==!1?L.prepopInput(Y):Ge!==!1&&(fa.shift(),Ge(c(c({},Y),{},{namespace:fa})))}},W(K,"variableValue",{cursor:Ge===!1?"default":"pointer"})),this.getValue(Y,ze)),Ze?f.a.createElement(xe,{rowHovered:this.state.hovered,hidden:ze,src:Y.value,clickCallback:Ze,theme:K,namespace:[].concat(Pe(me),[Y.name])}):null,rt!==!1&&ze==0?this.getEditIcon():null,ht!==!1&&ze==0?this.getRemoveIcon():null)}}]),O}(f.a.PureComponent),We=function(D){h(O,D);var M=w(O);function O(){var L;l(this,O);for(var N=arguments.length,Y=new Array(N),ne=0;ne<N;ne++)Y[ne]=arguments[ne];return(L=M.call.apply(M,[this].concat(Y))).getObjectSize=function(){var te=L.props,K=te.size,me=te.theme;if(te.displayObjectSize)return f.a.createElement("span",Object.assign({className:"object-size"},W(me,"object-size")),K," item",K===1?"":"s")},L.getAddAttribute=function(te){var K=L.props,me=K.theme,Le=K.namespace,Ze=K.name,rt=K.src,ht=K.rjvId,Ge=K.depth;return f.a.createElement("span",{className:"click-to-add",style:{verticalAlign:"top",display:te?"inline-block":"none"}},f.a.createElement(U,Object.assign({className:"click-to-add-icon"},W(me,"addVarIcon"),{onClick:function(){var bt={name:Ge>0?Ze:null,namespace:Le.splice(0,Le.length-1),existing_value:rt,variable_removed:!1,key_name:null};_(rt)==="object"?$e.dispatch({name:"ADD_VARIABLE_KEY_REQUEST",rjvId:ht,data:bt}):$e.dispatch({name:"VARIABLE_ADDED",rjvId:ht,data:c(c({},bt),{},{new_value:[].concat(Pe(rt),[null])})})}})))},L.getRemoveObject=function(te){var K=L.props,me=K.theme,Le=(K.hover,K.namespace),Ze=K.name,rt=K.src,ht=K.rjvId;if(Le.length!==1)return f.a.createElement("span",{className:"click-to-remove",style:{display:te?"inline-block":"none"}},f.a.createElement(Kt,Object.assign({className:"click-to-remove-icon"},W(me,"removeVarIcon"),{onClick:function(){$e.dispatch({name:"VARIABLE_REMOVED",rjvId:ht,data:{name:Ze,namespace:Le.splice(0,Le.length-1),existing_value:rt,variable_removed:!0}})}})))},L.render=function(){var te=L.props,K=te.theme,me=te.onDelete,Le=te.onAdd,Ze=te.enableClipboard,rt=te.src,ht=te.namespace,Ge=te.rowHovered;return f.a.createElement("div",Object.assign({},W(K,"object-meta-data"),{className:"object-meta-data",onClick:function(bt){bt.stopPropagation()}}),L.getObjectSize(),Ze?f.a.createElement(xe,{rowHovered:Ge,clickCallback:Ze,src:rt,theme:K,namespace:ht}):null,Le!==!1?L.getAddAttribute(Ge):null,me!==!1?L.getRemoveObject(Ge):null)},L}return O}(f.a.PureComponent);function Fe(D){var M=D.parent_type,O=D.namespace,L=D.quotesOnKeys,N=D.theme,Y=D.jsvRoot,ne=D.name,te=D.displayArrayKey,K=D.name?D.name:"";return!Y||ne!==!1&&ne!==null?M=="array"?te?f.a.createElement("span",Object.assign({},W(N,"array-key"),{key:O}),f.a.createElement("span",{className:"array-key"},K),f.a.createElement("span",W(N,"colon"),":")):f.a.createElement("span",null):f.a.createElement("span",Object.assign({},W(N,"object-name"),{key:O}),f.a.createElement("span",{className:"object-key"},L&&f.a.createElement("span",{style:{verticalAlign:"top"}},'"'),f.a.createElement("span",null,K),L&&f.a.createElement("span",{style:{verticalAlign:"top"}},'"')),f.a.createElement("span",W(N,"colon"),":")):f.a.createElement("span",null)}function Me(D){var M=D.theme;switch(D.iconStyle){case"triangle":return f.a.createElement(Dt,Object.assign({},W(M,"expanded-icon"),{className:"expanded-icon"}));case"square":return f.a.createElement(lt,Object.assign({},W(M,"expanded-icon"),{className:"expanded-icon"}));default:return f.a.createElement(Je,Object.assign({},W(M,"expanded-icon"),{className:"expanded-icon"}))}}function ut(D){var M=D.theme;switch(D.iconStyle){case"triangle":return f.a.createElement(tt,Object.assign({},W(M,"collapsed-icon"),{className:"collapsed-icon"}));case"square":return f.a.createElement(St,Object.assign({},W(M,"collapsed-icon"),{className:"collapsed-icon"}));default:return f.a.createElement(Ye,Object.assign({},W(M,"collapsed-icon"),{className:"collapsed-icon"}))}}var dt=function(D){h(O,D);var M=w(O);function O(L){var N;return l(this,O),(N=M.call(this,L)).toggleCollapsed=function(Y){var ne=[];for(var te in N.state.expanded)ne.push(N.state.expanded[te]);ne[Y]=!ne[Y],N.setState({expanded:ne})},N.state={expanded:[]},N}return d(O,[{key:"getExpandedIcon",value:function(L){var N=this.props,Y=N.theme,ne=N.iconStyle;return this.state.expanded[L]?f.a.createElement(Me,{theme:Y,iconStyle:ne}):f.a.createElement(ut,{theme:Y,iconStyle:ne})}},{key:"render",value:function(){var L=this,N=this.props,Y=N.src,ne=N.groupArraysAfterLength,te=(N.depth,N.name),K=N.theme,me=N.jsvRoot,Le=N.namespace,Ze=(N.parent_type,v(N,["src","groupArraysAfterLength","depth","name","theme","jsvRoot","namespace","parent_type"])),rt=0,ht=5*this.props.indentWidth;me||(rt=5*this.props.indentWidth);var Ge=ne,bt=Math.ceil(Y.length/Ge);return f.a.createElement("div",Object.assign({className:"object-key-val"},W(K,me?"jsv-root":"objectKeyVal",{paddingLeft:rt})),f.a.createElement(Fe,this.props),f.a.createElement("span",null,f.a.createElement(We,Object.assign({size:Y.length},this.props))),Pe(Array(bt)).map(function(Tt,ze){return f.a.createElement("div",Object.assign({key:ze,className:"object-key-val array-group"},W(K,"objectKeyVal",{marginLeft:6,paddingLeft:ht})),f.a.createElement("span",W(K,"brace-row"),f.a.createElement("div",Object.assign({className:"icon-container"},W(K,"icon-container"),{onClick:function(Yt){L.toggleCollapsed(ze)}}),L.getExpandedIcon(ze)),L.state.expanded[ze]?f.a.createElement(na,Object.assign({key:te+ze,depth:0,name:!1,collapsed:!1,groupArraysAfterLength:Ge,index_offset:ze*Ge,src:Y.slice(ze*Ge,ze*Ge+Ge),namespace:Le,type:"array",parent_type:"array_group",theme:K},Ze)):f.a.createElement("span",Object.assign({},W(K,"brace"),{onClick:function(Yt){L.toggleCollapsed(ze)},className:"array-group-brace"}),"[",f.a.createElement("div",Object.assign({},W(K,"array-group-meta-data"),{className:"array-group-meta-data"}),f.a.createElement("span",Object.assign({className:"object-size"},W(K,"object-size")),ze*Ge," - ",ze*Ge+Ge>Y.length?Y.length:ze*Ge+Ge)),"]")))}))}}]),O}(f.a.PureComponent),_t=function(D){h(O,D);var M=w(O);function O(L){var N;l(this,O),(N=M.call(this,L)).toggleCollapsed=function(){N.setState({expanded:!N.state.expanded},function(){re.set(N.props.rjvId,N.props.namespace,"expanded",N.state.expanded)})},N.getObjectContent=function(ne,te,K){return f.a.createElement("div",{className:"pushed-content object-container"},f.a.createElement("div",Object.assign({className:"object-content"},W(N.props.theme,"pushed-content")),N.renderObjectContents(te,K)))},N.getEllipsis=function(){return N.state.size===0?null:f.a.createElement("div",Object.assign({},W(N.props.theme,"ellipsis"),{className:"node-ellipsis",onClick:N.toggleCollapsed}),"...")},N.getObjectMetaData=function(ne){var te=N.props,K=(te.rjvId,te.theme,N.state),me=K.size,Le=K.hovered;return f.a.createElement(We,Object.assign({rowHovered:Le,size:me},N.props))},N.renderObjectContents=function(ne,te){var K,me=N.props,Le=me.depth,Ze=me.parent_type,rt=me.index_offset,ht=me.groupArraysAfterLength,Ge=me.namespace,bt=N.state.object_type,Tt=[],ze=Object.keys(ne||{});return N.props.sortKeys&&bt!=="array"&&(ze=ze.sort()),ze.forEach(function(Yt){if(K=new ft(Yt,ne[Yt]),Ze==="array_group"&&rt&&(K.name=parseInt(K.name)+rt),ne.hasOwnProperty(Yt))if(K.type==="object")Tt.push(f.a.createElement(na,Object.assign({key:K.name,depth:Le+1,name:K.name,src:K.value,namespace:Ge.concat(K.name),parent_type:bt},te)));else if(K.type==="array"){var fa=na;ht&&K.value.length>ht&&(fa=dt),Tt.push(f.a.createElement(fa,Object.assign({key:K.name,depth:Le+1,name:K.name,src:K.value,namespace:Ge.concat(K.name),type:"array",parent_type:bt},te)))}else Tt.push(f.a.createElement(je,Object.assign({key:K.name+"_"+Ge,variable:K,singleIndent:5,namespace:Ge,type:N.props.type},te)))}),Tt};var Y=O.getState(L);return N.state=c(c({},Y),{},{prevProps:{}}),N}return d(O,[{key:"getBraceStart",value:function(L,N){var Y=this,ne=this.props,te=ne.src,K=ne.theme,me=ne.iconStyle;if(ne.parent_type==="array_group")return f.a.createElement("span",null,f.a.createElement("span",W(K,"brace"),L==="array"?"[":"{"),N?this.getObjectMetaData(te):null);var Le=N?Me:ut;return f.a.createElement("span",null,f.a.createElement("span",Object.assign({onClick:function(Ze){Y.toggleCollapsed()}},W(K,"brace-row")),f.a.createElement("div",Object.assign({className:"icon-container"},W(K,"icon-container")),f.a.createElement(Le,{theme:K,iconStyle:me})),f.a.createElement(Fe,this.props),f.a.createElement("span",W(K,"brace"),L==="array"?"[":"{")),N?this.getObjectMetaData(te):null)}},{key:"render",value:function(){var L=this,N=this.props,Y=N.depth,ne=N.src,te=(N.namespace,N.name,N.type,N.parent_type),K=N.theme,me=N.jsvRoot,Le=N.iconStyle,Ze=v(N,["depth","src","namespace","name","type","parent_type","theme","jsvRoot","iconStyle"]),rt=this.state,ht=rt.object_type,Ge=rt.expanded,bt={};return me||te==="array_group"?te==="array_group"&&(bt.borderLeft=0,bt.display="inline"):bt.paddingLeft=5*this.props.indentWidth,f.a.createElement("div",Object.assign({className:"object-key-val",onMouseEnter:function(){return L.setState(c(c({},L.state),{},{hovered:!0}))},onMouseLeave:function(){return L.setState(c(c({},L.state),{},{hovered:!1}))}},W(K,me?"jsv-root":"objectKeyVal",bt)),this.getBraceStart(ht,Ge),Ge?this.getObjectContent(Y,ne,c({theme:K,iconStyle:Le},Ze)):this.getEllipsis(),f.a.createElement("span",{className:"brace-row"},f.a.createElement("span",{style:c(c({},W(K,"brace").style),{},{paddingLeft:Ge?"3px":"0px"})},ht==="array"?"]":"}"),Ge?null:this.getObjectMetaData(ne)))}}],[{key:"getDerivedStateFromProps",value:function(L,N){var Y=N.prevProps;return L.src!==Y.src||L.collapsed!==Y.collapsed||L.name!==Y.name||L.namespace!==Y.namespace||L.rjvId!==Y.rjvId?c(c({},O.getState(L)),{},{prevProps:L}):null}}]),O}(f.a.PureComponent);_t.getState=function(D){var M=Object.keys(D.src).length,O=(D.collapsed===!1||D.collapsed!==!0&&D.collapsed>D.depth)&&(!D.shouldCollapse||D.shouldCollapse({name:D.name,src:D.src,type:_(D.src),namespace:D.namespace})===!1)&&M!==0;return{expanded:re.get(D.rjvId,D.namespace,"expanded",O),object_type:D.type==="array"?"array":"object",parent_type:D.type==="array"?"array":"object",size:M,hovered:!1}};var ft=function D(M,O){l(this,D),this.name=M,this.value=O,this.type=_(O)};E(_t);var na=_t,rr=function(D){h(O,D);var M=w(O);function O(){var L;l(this,O);for(var N=arguments.length,Y=new Array(N),ne=0;ne<N;ne++)Y[ne]=arguments[ne];return(L=M.call.apply(M,[this].concat(Y))).render=function(){var te=x(L).props,K=[te.name],me=na;return Array.isArray(te.src)&&te.groupArraysAfterLength&&te.src.length>te.groupArraysAfterLength&&(me=dt),f.a.createElement("div",{className:"pretty-json-container object-container"},f.a.createElement("div",{className:"object-content"},f.a.createElement(me,Object.assign({namespace:K,depth:0,jsvRoot:!0},te))))},L}return O}(f.a.PureComponent),nr=function(D){h(O,D);var M=w(O);function O(L){var N;return l(this,O),(N=M.call(this,L)).closeModal=function(){$e.dispatch({rjvId:N.props.rjvId,name:"RESET"})},N.submit=function(){N.props.submit(N.state.input)},N.state={input:L.input?L.input:""},N}return d(O,[{key:"render",value:function(){var L=this,N=this.props,Y=N.theme,ne=N.rjvId,te=N.isValid,K=this.state.input,me=te(K);return f.a.createElement("div",Object.assign({className:"key-modal-request"},W(Y,"key-modal-request"),{onClick:this.closeModal}),f.a.createElement("div",Object.assign({},W(Y,"key-modal"),{onClick:function(Le){Le.stopPropagation()}}),f.a.createElement("div",W(Y,"key-modal-label"),"Key Name:"),f.a.createElement("div",{style:{position:"relative"}},f.a.createElement("input",Object.assign({},W(Y,"key-modal-input"),{className:"key-modal-input",ref:function(Le){return Le&&Le.focus()},spellCheck:!1,value:K,placeholder:"...",onChange:function(Le){L.setState({input:Le.target.value})},onKeyPress:function(Le){me&&Le.key==="Enter"?L.submit():Le.key==="Escape"&&L.closeModal()}})),me?f.a.createElement(oe,Object.assign({},W(Y,"key-modal-submit"),{className:"key-modal-submit",onClick:function(Le){return L.submit()}})):null),f.a.createElement("span",W(Y,"key-modal-cancel"),f.a.createElement(X,Object.assign({},W(Y,"key-modal-cancel-icon"),{className:"key-modal-cancel",onClick:function(){$e.dispatch({rjvId:ne,name:"RESET"})}})))))}}]),O}(f.a.PureComponent),sr=function(D){h(O,D);var M=w(O);function O(){var L;l(this,O);for(var N=arguments.length,Y=new Array(N),ne=0;ne<N;ne++)Y[ne]=arguments[ne];return(L=M.call.apply(M,[this].concat(Y))).isValid=function(te){var K=L.props.rjvId,me=re.get(K,"action","new-key-request");return te!=""&&Object.keys(me.existing_value).indexOf(te)===-1},L.submit=function(te){var K=L.props.rjvId,me=re.get(K,"action","new-key-request");me.new_value=c({},me.existing_value),me.new_value[te]=L.props.defaultValue,$e.dispatch({name:"VARIABLE_ADDED",rjvId:K,data:me})},L}return d(O,[{key:"render",value:function(){var L=this.props,N=L.active,Y=L.theme,ne=L.rjvId;return N?f.a.createElement(nr,{rjvId:ne,theme:Y,isValid:this.isValid,submit:this.submit}):null}}]),O}(f.a.PureComponent),qt=function(D){h(O,D);var M=w(O);function O(){return l(this,O),M.apply(this,arguments)}return d(O,[{key:"render",value:function(){var L=this.props,N=L.message,Y=L.active,ne=L.theme,te=L.rjvId;return Y?f.a.createElement("div",Object.assign({className:"validation-failure"},W(ne,"validation-failure"),{onClick:function(){$e.dispatch({rjvId:te,name:"RESET"})}}),f.a.createElement("span",W(ne,"validation-failure-label"),N),f.a.createElement(X,W(ne,"validation-failure-clear"))):null}}]),O}(f.a.PureComponent),Rr=function(D){h(O,D);var M=w(O);function O(L){var N;return l(this,O),(N=M.call(this,L)).rjvId=Date.now().toString(),N.getListeners=function(){return{reset:N.resetState,"variable-update":N.updateSrc,"add-key-request":N.addKeyRequest}},N.updateSrc=function(){var Y,ne=re.get(N.rjvId,"action","variable-update"),te=ne.name,K=ne.namespace,me=ne.new_value,Le=ne.existing_value,Ze=(ne.variable_removed,ne.updated_src),rt=ne.type,ht=N.props,Ge=ht.onEdit,bt=ht.onDelete,Tt=ht.onAdd,ze={existing_src:N.state.src,new_value:me,updated_src:Ze,name:te,namespace:K,existing_value:Le};switch(rt){case"variable-added":Y=Tt(ze);break;case"variable-edited":Y=Ge(ze);break;case"variable-removed":Y=bt(ze)}Y!==!1?(re.set(N.rjvId,"global","src",Ze),N.setState({src:Ze})):N.setState({validationFailure:!0})},N.addKeyRequest=function(){N.setState({addKeyRequest:!0})},N.resetState=function(){N.setState({validationFailure:!1,addKeyRequest:!1})},N.state={addKeyRequest:!1,editKeyRequest:!1,validationFailure:!1,src:O.defaultProps.src,name:O.defaultProps.name,theme:O.defaultProps.theme,validationMessage:O.defaultProps.validationMessage,prevSrc:O.defaultProps.src,prevName:O.defaultProps.name,prevTheme:O.defaultProps.theme},N}return d(O,[{key:"componentDidMount",value:function(){re.set(this.rjvId,"global","src",this.state.src);var L=this.getListeners();for(var N in L)re.on(N+"-"+this.rjvId,L[N]);this.setState({addKeyRequest:!1,editKeyRequest:!1})}},{key:"componentDidUpdate",value:function(L,N){N.addKeyRequest!==!1&&this.setState({addKeyRequest:!1}),N.editKeyRequest!==!1&&this.setState({editKeyRequest:!1}),L.src!==this.state.src&&re.set(this.rjvId,"global","src",this.state.src)}},{key:"componentWillUnmount",value:function(){var L=this.getListeners();for(var N in L)re.removeListener(N+"-"+this.rjvId,L[N])}},{key:"render",value:function(){var L=this.state,N=L.validationFailure,Y=L.validationMessage,ne=L.addKeyRequest,te=L.theme,K=L.src,me=L.name,Le=this.props,Ze=Le.style,rt=Le.defaultValue;return f.a.createElement("div",{className:"react-json-view",style:c(c({},W(te,"app-container").style),Ze)},f.a.createElement(qt,{message:Y,active:N,theme:te,rjvId:this.rjvId}),f.a.createElement(rr,Object.assign({},this.props,{src:K,name:me,theme:te,type:_(K),rjvId:this.rjvId})),f.a.createElement(sr,{active:ne,theme:te,rjvId:this.rjvId,defaultValue:rt}))}}],[{key:"getDerivedStateFromProps",value:function(L,N){if(L.src!==N.prevSrc||L.name!==N.prevName||L.theme!==N.prevTheme){var Y={src:L.src,name:L.name,theme:L.theme,validationMessage:L.validationMessage,prevSrc:L.src,prevName:L.name,prevTheme:L.theme};return O.validateState(Y)}return null}}]),O}(f.a.PureComponent);Rr.defaultProps={src:{},name:"root",theme:"rjv-default",collapsed:!1,collapseStringsAfterLength:!1,shouldCollapse:!1,sortKeys:!1,quotesOnKeys:!0,groupArraysAfterLength:100,indentWidth:4,enableClipboard:!0,displayObjectSize:!0,displayDataTypes:!0,onEdit:!1,onDelete:!1,onAdd:!1,onSelect:!1,iconStyle:"triangle",style:{},validationMessage:"Validation Error",defaultValue:null,displayArrayKey:!0},Rr.validateState=function(D){var M={};return _(D.theme)!=="object"||function(O){var L=["base00","base01","base02","base03","base04","base05","base06","base07","base08","base09","base0A","base0B","base0C","base0D","base0E","base0F"];if(_(O)==="object"){for(var N=0;N<L.length;N++)if(!(L[N]in O))return!1;return!0}return!1}(D.theme)||(console.error("react-json-view error:","theme prop must be a theme name or valid base-16 theme object.",'defaulting to "rjv-default" theme'),M.theme="rjv-default"),_(D.src)!=="object"&&_(D.src)!=="array"&&(console.error("react-json-view error:","src property must be a valid json object"),M.name="ERROR",M.src={message:"src property must be a valid json object"}),c(c({},D),M)},E(Rr),o.default=Rr}])})})(zu);var ob=zu.exports;const ib=tn(ob);function lb(){const e=An();return{formatNumber:k.useCallback((t,n)=>Dc(t,{mantissa:e.format.numberMantissa,exponential:e.format.exponential,...n}),[e.format.exponential,e.format.numberMantissa]),formatPercent:Mc,formatCurrency:Qp,formatByte:Xp}}const cb="_titleContainer_gpumy_1",ub="_settingTrigger_gpumy_5",Ul={titleContainer:cb,settingTrigger:ub};function Js(e){const{dataSource:t,columnActions:n=!0}=e,{t:r}=Z(),o=k.useMemo(()=>Object.keys((t==null?void 0:t[0])??{}).filter(d=>{var m;return typeof((m=t==null?void 0:t[0])==null?void 0:m[d])=="number"}),[t]),[s,i]=Zp(o),{formatNumber:u}=lb(),c=k.useCallback(p=>{const d=p.target.value;p.target.checked?i.add(d):i.remove(d)},[i]),l=k.useMemo(()=>Object.keys((t==null?void 0:t[0])??{}).map(d=>{const m=o.includes(d),h=s.has(d);return{title:a.jsxs(it,{className:Ul.titleContainer,children:[d,n&&m&&a.jsx(Qa,{trigger:"click",placement:"bottom",content:a.jsx(Ni,{value:d,checked:h,onChange:c,children:r("components.object-preview-table.setting.enable-number-format")}),children:a.jsx(Fs,{className:Ul.settingTrigger})})]}),width:200,dataIndex:d,render:b=>h?u(b):b}}),[n,t,s,u,o,c,r]);return a.jsx(vt,{columns:l,...e})}function xs(e){return ee.requestFunc("facplf_get_analysis_record_detail",{analysis_record_id:e})}xs.SWR_KEY="facplf_get_analysis_record_detail";function Gu(e,{autoRefreshUtilFinished:t=!0}={autoRefreshUtilFinished:!0}){return Oe(()=>e?[xs.SWR_KEY,e]:null,async()=>xs(e),{refreshInterval:n=>t&&(n==null?void 0:n.status)===Xe.RUNNING?5e3:0})}const Uu=e=>({...e,tags:Ja(e.tags)});function db(e){return ee.requestFunc("facplf_get_analysis_template_params",{template_id:e}).catch(()=>[])}async function Hu(e){return{...e,params:await db(e.template_id)}}async function ei(){const e=await ee.requestFunc("facplf_analysis_template_list");return{items:await Promise.all(e.items.map(Uu).map(Hu)),total:e.total}}ei.SWR_KEY="facplf_analysis_template_list";async function ti(e){const t=await ee.requestFunc("facplf_analysis_template_detail",{template_id:e});return Hu(Uu(t))}ti.SWR_KEY="facplf_analysis_template_detail";function Yi(e){const{data:t,...n}=Oe(()=>ei.SWR_KEY,ei,e==null?void 0:e.swr);return{getTemplateParameters:k.useCallback(o=>{const s=t==null?void 0:t.items.find(i=>i.template_id===o);return s==null?void 0:s.params},[t]),data:t,...n}}var gt=(e=>(e.Bool="bool",e.String="string",e.Int="int",e.Short="short",e.Long="long",e.Float="float",e.Double="double",e.Date="date",e.Time="time",e.DateTime="datetime",e.DbSelect="db_select",e.DbTbSelect="db_tb_select",e.DbTbColSelect="db_tb_col_select",e.PrevTaskResult="prev_task_result",e.Factor="factor",e.PrevTestResult="prev_test_result",e))(gt||{});const pb="_container_1pi8q_1",mb="_line_1pi8q_9",fb="_label_1pi8q_15",hb="_select_1pi8q_20",Nr={container:pb,line:mb,label:fb,select:hb};function Ji(e){var b;const{value:t,onChange:n,disableType:r,typeOptions:o}=e,{t:s}=Z(),{componentDisabled:i}=an.useConfig(),{name:u,type:c,value:l}=t??{},p=k.useCallback(y=>{n==null||n({name:u,type:y,value:null})},[u,n]),d=k.useCallback(y=>{n==null||n({name:u,type:c,value:y})},[u,n,c]),m=r||i,h=(b=o.find(y=>y.typeValue===c))==null?void 0:b.valueRender(l,d,e);return a.jsxs("div",{className:Nr.container,children:[a.jsxs("div",{className:Nr.line,children:[a.jsx("label",{className:Nr.label,children:s("components.template-run-param-select.type.label")}),a.jsx(kt,{className:Nr.select,options:o,value:c,fieldNames:{value:"typeValue"},allowClear:!0,onChange:p,disabled:m})]}),h?a.jsxs("div",{className:Nr.line,children:[a.jsx("label",{className:Nr.label,children:s("components.template-run-param-select.value.label")}),h]}):null]})}var Qs=(e=>(e.READABLE="readable",e.EDITABLE="editable",e))(Qs||{});async function Ku(e,t){const n={};for(const r of e)n[r.database]||(n[r.database]={name:r.database,tables:[]}),r.table&&n[r.database].tables.push({name:r.table,database:r.database,schemas:t?await gb({database:r.database,table:r.table}):[]});return Object.values(n)}async function ai(e){const t=await ee.requestFunc("facplf_get_all_read_tables",{department_names:(e==null?void 0:e.department_names)??null});return Ku(t,(e==null?void 0:e.withTableSchema)??!1)}ai.SWR_KEY="facplf_get_all_read_tables";async function ri(){const e=await ee.requestFunc("facplf_get_editable_tb_list")||[];return Ku(e,!0)}ri.SWR_KEY="facplf_get_editable_tb_list";async function gb(e){return await ee.requestFunc("facplf_get_table_schema",{database:e.database,table:e.table})}const yb={department_names:null,withTableSchema:!1};function Yu(e=yb,t={revalidateIfStale:!1}){const n=e.type===Qs.EDITABLE;return Oe(n?[ri.SWR_KEY]:[ai.SWR_KEY,e],async()=>n?ri():ai(e),t)}const bb="_wrapper_gc3ec_1",vb={wrapper:bb};function Qi(e){const{value:t,onChange:n,showTable:r,showColumn:o,className:s,type:i=Qs.READABLE}=e,{t:u}=Z(),{data:c}=Yu({department_names:null,withTableSchema:!0,type:i}),l=k.useMemo(()=>(c==null?void 0:c.map(x=>({value:x.name,label:x.name,tables:x.tables})))??[],[c]),p=k.useMemo(()=>{var x;return((x=c==null?void 0:c.find(I=>I.name===(t==null?void 0:t.database)))==null?void 0:x.tables.map(I=>({label:I.name,value:I.name,schemas:I.schemas})))??[]},[c,t==null?void 0:t.database]),d=k.useMemo(()=>{var x,I;return((I=(x=c==null?void 0:c.find(w=>w.name===(t==null?void 0:t.database)))==null?void 0:x.tables.find(w=>w.name===(t==null?void 0:t.table)))==null?void 0:I.schemas.map(w=>({label:w.name,value:w.name})))??[]},[c,t==null?void 0:t.database,t==null?void 0:t.table]),m=k.useCallback((x,I)=>{var w;n==null||n({database:I.value,table:((w=I.tables[0])==null?void 0:w.name)??null,column:I.tables[0].schemas[0].name??null})},[n]),h=k.useCallback((x,I)=>{n==null||n({database:(t==null?void 0:t.database)||"",table:I.value,column:I.schemas[0].name})},[n,t==null?void 0:t.database]),b=k.useCallback((x,I)=>{n==null||n({database:(t==null?void 0:t.database)||"",table:(t==null?void 0:t.table)||"",column:I.value})},[n,t==null?void 0:t.database,t==null?void 0:t.table]),y=k.useCallback(()=>{n==null||n(null)},[n]);return a.jsxs("div",{className:Wt(vb.wrapper,s),children:[a.jsx(kt,{showSearch:!0,options:l,onSelect:m,allowClear:!0,value:t==null?void 0:t.database,placeholder:u("components.generate-report-drawer.placeholder.database"),onClear:y}),r&&a.jsx(kt,{options:p,value:t==null?void 0:t.table,onSelect:h}),o&&a.jsx(kt,{options:d,value:t==null?void 0:t.column,onSelect:b})]})}function _b(e){const{value:t,onChange:n,className:r}=e,o=k.useMemo(()=>t?{database:t}:null,[t]),s=k.useCallback(i=>{n==null||n((i==null?void 0:i.database)??null)},[n]);return a.jsx(Qi,{value:o,onChange:s,className:r})}function Ju(e){const{value:t,onChange:n,className:r,type:o}=e,s=k.useCallback(i=>{const u=i?iu(i,"column"):null;n==null||n(u)},[n]);return a.jsx(Qi,{type:o,value:t,onChange:s,className:r,showTable:!0})}function xb(e){const{value:t,onChange:n,className:r}=e;return a.jsx(Qi,{value:t,onChange:n,className:r,showTable:!0,showColumn:!0})}const wb=[{label:"True",value:!0},{label:"False",value:!1}];function jb(e){return a.jsx(kt,{options:wb,...e})}const Ib="_control_1g1r7_1",Sb="_multiSelect_1g1r7_5",xa={control:Ib,multiSelect:Sb};function Xi(e){const{t}=Z();return k.useMemo(()=>[{label:t("components.template-run-param-select.type-select.options.bool"),typeValue:gt.Bool,valueRender(r,o){return a.jsx(jb,{value:r,className:xa.control,onChange:o})}},{label:t("components.template-run-param-select.type-select.options.string"),typeValue:gt.String,valueRender(r,o){return a.jsx(Ne,{className:xa.control,value:r,onChange:s=>o(s.target.value)})}},{label:t("components.template-run-param-select.type-select.options.int"),typeValue:gt.Int,valueRender(r,o){return a.jsx(qa,{className:xa.control,value:r,onChange:o})}},{label:t("components.template-run-param-select.type-select.options.short"),typeValue:gt.Short,valueRender(r,o){return a.jsx(qa,{className:xa.control,value:r,onChange:o})}},{label:t("components.template-run-param-select.type-select.options.long"),typeValue:gt.Long,valueRender(r,o){return a.jsx(Ne,{className:xa.control,value:r,onChange:s=>o(s.target.value)})}},{label:t("components.template-run-param-select.type-select.options.float"),typeValue:gt.Float,valueRender(r,o){return a.jsx(qa,{className:xa.control,value:r,onChange:o})}},{label:t("components.template-run-param-select.type-select.options.double"),typeValue:gt.Double,valueRender(r,o){return a.jsx(qa,{className:xa.control,value:r,onChange:o})}},{label:t("components.template-run-param-select.type-select.options.date"),typeValue:gt.Date,valueRender(r,o){return a.jsx(Sn,{className:xa.control,value:r?Ya(r,ga.DOLPHINDB_DATE):null,onChange:s=>{o(s==null?void 0:s.format(ga.DOLPHINDB_DATE))}})}},{label:t("components.template-run-param-select.type-select.options.time"),typeValue:gt.Time,valueRender(r,o){return a.jsx(Jc,{className:xa.control,value:r?Ya(r,ga.TIME):null,onChange:s=>{o(s==null?void 0:s.format(ga.TIME))}})}},{label:t("components.template-run-param-select.type-select.options.datetime"),typeValue:gt.DateTime,valueRender(r,o){return a.jsx(Sn,{showTime:!0,className:xa.control,value:r?Ya(r,ga.DOLPHINDB_DATETIME):null,onChange:s=>{o(s==null?void 0:s.format(ga.DOLPHINDB_DATETIME))}})}},{label:t("components.template-run-param-select.type-select.options.db-select"),typeValue:gt.DbSelect,valueRender(r,o){return a.jsx(_b,{className:xa.multiSelect,value:r,onChange:o})}},{label:t("components.template-run-param-select.type-select.options.db-tb-select"),typeValue:gt.DbTbSelect,valueRender(r,o){return a.jsx(Ju,{className:xa.multiSelect,value:r,onChange:o})}},{label:t("components.template-run-param-select.type-select.options.db-tb-col-select"),typeValue:gt.DbTbColSelect,valueRender(r,o){return a.jsx(xb,{className:xa.multiSelect,value:r,onChange:o})}},...e??[]],[e,t])}const wa=e=>{if(qi(e))throw new Error(ma.t("components.template-run-param-select.validator.value-empty"))},Zi={[gt.Bool]:()=>wa,[gt.String]:()=>wa,[gt.Int]:()=>La(wa,e=>{if(!em(e))throw new Error(ma.t("components.template-run-param-select.validator.int-invalid"))}),[gt.Short]:()=>La(wa,e=>{if(!tm(e))throw new Error(ma.t("components.template-run-param-select.validator.short-invalid"))}),[gt.Long]:()=>La(wa,e=>{if(!am(e))throw new Error(ma.t("components.template-run-param-select.validator.long-invalid"))}),[gt.Float]:()=>La(wa),[gt.Double]:()=>La(wa),[gt.Date]:()=>La(wa),[gt.Time]:()=>La(wa),[gt.DateTime]:()=>La(wa),[gt.DbSelect]:()=>La(wa),[gt.DbTbSelect]:()=>La(wa),[gt.DbTbColSelect]:()=>La(wa)},el=async(e,t,n)=>{var o;const r=(o=t[e.type])==null?void 0:o.call(t,n);e.value&&r&&await r(e.value)};function kb(e){const{...t}=e,{t:n}=Z(),r=k.useMemo(()=>[{label:n("components.template-run-param-select.type-select.options.prev-test-result"),typeValue:gt.PrevTestResult,valueRender(){return null}}],[n]),o=Xi(r);return a.jsx(Ji,{typeOptions:o,...t})}function Cb(e){return el(e,Zi,null)}const Eb="_preset_15ia7_1",Hl={preset:Eb};function on(e){const{templateId:t,readonly:n,listLabelCol:r,withTemplateSelect:o,namePath:s,listField:i}=e,u=B.useFormInstance(),c=k.useMemo(()=>Wc({namePath:s,listField:i}),[s,i]),l=k.useMemo(()=>c.getItemNamePath("template_id"),[c]),p=k.useMemo(()=>c.getFullNamePath("template_id"),[c]),d=B.useWatch(p),m=t||d,h=k.useMemo(()=>c.getItemNamePath("template_params"),[c]),b=k.useMemo(()=>c.getFullNamePath("template_params"),[c]),{t:y}=Z(),{getTemplateParameters:x,data:I}=Yi({swr:{revalidateIfStale:!1}}),w=k.useMemo(()=>I==null?void 0:I.items.map(j=>({label:j.name,value:j.template_id,template:j})),[I==null?void 0:I.items]),A=k.useMemo(()=>m?x(m):null,[x,m]),f=m?a.jsx(B.Item,{label:y("common.use-preset.label"),hidden:n,children:a.jsx(Hi,{containerClassName:Hl.preset,presetType:`analysis_template_${m}`,presetValue:()=>JSON.stringify(u.getFieldValue(b)),onChange:(j,C)=>{const g=u.getFieldValue(b),E=JSON.parse(C.value),v=g.map(_=>{const S=E==null?void 0:E.find(P=>P.name===_.name);return S||_});u.setFieldValue(b,v)}})}):null;return a.jsxs(a.Fragment,{children:[a.jsx(B.Item,{label:y("components.analysis-template-run-form.template-select.label"),name:l,hidden:!o,initialValue:t,required:!0,rules:[{required:!0}],children:a.jsx(kt,{options:w,onChange:(j,C)=>{var g,E;u.setFieldValue(b,(E=(g=C.template)==null?void 0:g.params)==null?void 0:E.map(v=>({name:v.name,type:v.type})))}})}),f,A?a.jsx(B.List,{name:h,children:j=>j.map((C,g)=>{const E=u.getFieldValue(ha(b,C.name)),v=A==null?void 0:A.find(S=>S.name===(E==null?void 0:E.name)),_=!!(v!=null&&v.type);return a.jsx(B.Item,{labelCol:r,label:v==null?void 0:v.name,tooltip:v==null?void 0:v.description,name:C.name,className:Hl.templateParam,rules:[{validator:async(S,P)=>Cb(P)}],children:a.jsx(kb,{disableType:_})},g)})}):null]})}const Ab="_modal_1brcd_1",Pb="_content_1brcd_5",Kl={modal:Ab,content:Pb},Tb=ke.create(({paramsValue:e})=>{const t=ke.useModal(),{t:n}=Z(),r=k.useMemo(()=>JSON.parse(e??"{}"),[e]);return a.jsx(aa,{open:t.visible,footer:null,onCancel:t.hide,afterClose:t.remove,title:n("pages.factor-run.run-params"),width:800,className:Kl.modal,children:a.jsx("div",{className:Kl.content,children:a.jsx(B,{labelCol:{span:6},disabled:!0,initialValues:r,children:a.jsx(on,{readonly:!0,withTemplateSelect:!0})})})})}),Qu=e=>{const{paramsValue:t,...n}=e,{t:r}=Z(),o=he(async()=>{await ke.show(Tb,{paramsValue:t})});return a.jsx(Ae,{type:"link",onClick:o,...n,children:r("pages.analysis-record.component.view-run-params")})},Ob="_block_uy3j2_1",Rb="_footer_uy3j2_7",Io={block:Ob,footer:Rb};function Fb(){const{t:e}=Z(),{id:t}=$t(),{data:n,isLoading:r,isValidating:o}=Gu(t),s=k.useMemo(()=>ff(n==null?void 0:n.result)?Object.keys((n==null?void 0:n.result)??{}).reduce((i,u)=>{var p;const c=(p=n==null?void 0:n.result)==null?void 0:p[u],l=Array.isArray(c)&&c.every(d=>hf(d))?"table":"json";return i[l].push(u),i},{table:[],json:[]}):!1,[n==null?void 0:n.result]);return a.jsx(Ys,{headerBottomMargin:!0,headerAction:a.jsx(it,{children:a.jsx(Qu,{paramsValue:n==null?void 0:n.params})}),autoBreadcrumb:{addonItems:[{title:e("pages.analysis-record.pages.detail-data.title"),menu:{items:[{title:a.jsx(Ue,{to:Se.analysisRecordDetailReport(t),children:e("pages.analysis-record.pages.detail-visual-report.title")})}]}}]},notFound:!t,validating:o,loading:r,status:n==null?void 0:n.status,failedReason:n==null?void 0:n.failed_reason,children:s?a.jsxs(a.Fragment,{children:[s.table.map(i=>{var c;const u=(c=n==null?void 0:n.result)==null?void 0:c[i];return a.jsxs("div",{className:Io.block,children:[a.jsx(De.Title,{level:5,children:i}),a.jsx(Js,{footer:()=>a.jsx("div",{className:Io.footer,children:e("pages.analysis-record.pages.detail-data.table-footer",{count:u==null?void 0:u.length})}),size:"small",dataSource:u,pagination:{hideOnSinglePage:!0}},i)]},i)}),s.json.map(i=>{var c;const u=(c=n==null?void 0:n.result)==null?void 0:c[i];return a.jsxs("div",{className:Io.block,children:[a.jsx(De.Title,{level:5,children:i}),a.jsx(ib,{src:u,name:!1,enableClipboard:!1})]},i)})]}):a.jsx(Fi,{showIcon:!0,type:"error",message:e("pages.analysis-record.pages.detail-data.data-illegal"),description:e("pages.analysis-record.pages.detail-data.data-illegal-description")})})}const Gr={},Lb=({children:e})=>e,Xu=e=>e.type,Zu=e=>e.props,ed=e=>e.children,td=jt.createContext({components:Gr,decorators:Gr,interceptors:Gr,getComponentType:Xu,getComponentProps:Zu,getComponentChildren:ed});function ad({node:e,idPath:t,index:n}){var x;const{components:r,decorators:o,getComponentChildren:s,getComponentProps:i,getComponentType:u,interceptors:c}=k.useContext(td);if(!e)return null;const l=u(e),p=r[l],d=i(e),m=c==null?void 0:c[l],h=m?m==null?void 0:m(e):e,b=(x=s(h))==null?void 0:x.map((I,w)=>a.jsx(ad,{node:I,idPath:[...t,e.id],index:w},I.id)),y=(o==null?void 0:o[l])??Lb;if(p)return a.jsx(y,{item:e,idPath:[...t,e.id],index:n,children:b?a.jsx(p,{...d,children:b}):a.jsx(p,{...d})})}function tl(e){const{root:t,getComponentType:n=Xu,getComponentProps:r=Zu,getComponentChildren:o=ed,decorators:s=Gr,components:i=Gr,interceptors:u=Gr}=e;return a.jsx(td.Provider,{value:{components:i,decorators:s,interceptors:u,getComponentType:n,getComponentProps:r,getComponentChildren:o},children:a.jsx(ad,{node:t,idPath:[],index:0})})}const Nb=()=>null;var Aa=(e=>(e.H1="h1",e.H2="h2",e.H3="h3",e.H4="h4",e.H5="h5",e.Text="text",e))(Aa||{}),za=(e=>(e.Full="full",e.DivideTwo="divide-two",e.DivideThree="divide-three",e))(za||{}),ia=(e=>(e.DEFAULT="default",e.CUSTOM_1="custom-1",e.CUSTOM_2="custom-2",e.CUSTOM_3="custom-3",e.CUSTOM_4="custom-4",e))(ia||{}),et=(e=>(e.Line="line",e.Area="area",e.Bar="bar",e.Column="column",e.Pie="pie",e.Violin="violin",e.Histogram="histogram",e.Heatmap="heatmap",e))(et||{});const Db=/\${([^}]+)}/g;function Mb(e,t){const n=(r,o)=>{let s=t;for(const i of o.trim().split("."))s=s?s[i]:void 0;return s?String(s):r};return e.replace(Db,n)}const[al,Xa]=Xr(e=>{const{dataSource:t}=e,n=k.useCallback(s=>{try{return Mb(s,t)}catch{return s}},[t]),r=k.useCallback(s=>gf(s,i=>{if(typeof i=="string")return n(i)}),[n]),o=k.useCallback(s=>t[s]??[],[t]);return{compile:n,compileObject:r,get:o}});var vr=(e=>(e.Edit="edit",e.Screen="screen",e.Print="print",e))(vr||{});const[rd,Wb]=Xr(e=>e);var _r=(e=>(e.Raw="raw",e.Number="number",e.Time="time",e.Percent="percent",e))(_r||{});function pa(e,t,n){return t==="number"?Dc(e,{mantissa:(n==null?void 0:n.mantissa)??4,thousandSeparated:(n==null?void 0:n.thousandSeparated)??!1,trimMantissa:!1}):t==="time"?Qe(e,(n==null?void 0:n.timeFormat)??ga.DOLPHINDB_DATE):t==="percent"?Mc(e,{mantissa:(n==null?void 0:n.mantissa)??2,trimMantissa:!1}):e}const[Bb,ln]=Xr(e=>({chartTheme:e.chartTheme,themeConfig:e.chartTheme}));function nd(e){const{dataSource:t}=e,{get:n}=Xa(),{chartTheme:r}=ln(),o=n(t);return k.useMemo(()=>{const{xAxis:s,yAxis:i,legend:u,groupSeriesField:c,stackSeriesField:l,slider:p,tooltip:d,label:m,chartRef:h}=e;return{data:o,animation:!1,xField:s.field,yField:i.field,xAxis:{title:s.showTitle&&s.name?{text:s.name}:null},yAxis:{title:i.showTitle&&i.name?{text:i.name}:null},seriesField:l||c,isStack:!!l,groupField:c,isGroup:!!c,label:m?{position:"middle"}:!1,tooltip:d?{shared:!0}:!1,legend:u?{layout:"horizontal",position:"top"}:!1,slider:p?{start:0,end:1}:!1,padding:"auto",appendPadding:8,meta:{[s.field]:{alias:s.name,formatter:b=>pa(b,s.formatType,s.formatOptions)},[i.field]:{alias:i.name,formatter:b=>pa(b,i.formatType,i.formatOptions)}},theme:r,chartRef:h}},[e,o,r])}function $b(e){return a.jsx(yf,{...nd(e)})}function Vb(e){return a.jsx(bf,{...nd(e)})}function qb(e){const{dataSource:t}=e,{get:n}=Xa(),{chartTheme:r}=ln(),o=n(t);return k.useMemo(()=>{const{tooltip:s,legend:i,label:u,xAxis:c,yAxis:l,valueField:p,formatType:d,formatOptions:m,chartRef:h}=e;return{data:o,animation:!1,xField:c.field,yField:l.field,xAxis:{title:c.showTitle&&c.name?{text:c.name}:null},yAxis:{title:l.showTitle&&l.name?{text:l.name}:null},colorField:p,legend:i?{position:"top"}:!1,label:u?{position:"middle"}:!1,tooltip:s?{shared:!0}:!1,padding:"auto",appendPadding:8,meta:{[p]:{formatter:b=>pa(b,d,m)},[c.field]:{alias:c.name,formatter:b=>pa(b,c.formatType,c.formatOptions)},[l.field]:{alias:l.name,formatter:b=>pa(b,l.formatType,l.formatOptions)}},theme:r,chartRef:h}},[e,o,r])}function zb(e){return a.jsx(vf,{...qb(e)})}function Gb(e){const{dataSource:t}=e,{get:n}=Xa(),{chartTheme:r}=ln(),o=n(t);return k.useMemo(()=>{const{legend:s,tooltip:i,label:u,binField:c,binWidth:l=1,stackSeriesField:p,chartRef:d}=e;return{data:o,animation:!1,binField:c,binWidth:l,stackField:p,label:u?{position:"middle"}:!1,tooltip:i?{shared:!0}:!1,legend:s?{layout:"horizontal",position:"top"}:!1,padding:"auto",appendPadding:8,theme:r,chartRef:d}},[e,o,r])}function Ub(e){return a.jsx(_f,{...Gb(e)})}function sd(e){const{dataSource:t}=e,{get:n}=Xa(),{chartTheme:r}=ln(),o=n(t);return k.useMemo(()=>{const{xAxis:s,yAxis:i,legend:u,groupSeriesField:c,slider:l,tooltip:p,label:d,chartRef:m}=e;return{data:o,animation:!1,xField:s.field,yField:i.field,xAxis:{title:s.showTitle&&s.name?{text:s.name}:null},yAxis:{title:i.showTitle&&i.name?{text:i.name}:null},label:d?{position:"middle"}:void 0,seriesField:c,tooltip:p?{shared:!0,showCrosshairs:!0}:!1,legend:u?{layout:"horizontal",position:"top"}:!1,slider:l?{start:0,end:1}:!1,padding:"auto",appendPadding:8,meta:{[s.field]:{alias:s.name,formatter:h=>pa(h,s.formatType,s.formatOptions)},[i.field]:{alias:i.name,formatter:h=>pa(h,i.formatType,i.formatOptions)}},theme:r,chartRef:m}},[e,o,r])}function Hb(e){return a.jsx(xf,{...sd(e)})}function Kb(e){return a.jsx(wf,{...sd(e)})}function Yb(e){const{dataSource:t}=e,{get:n}=Xa(),{chartTheme:r}=ln(),o=n(t);return k.useMemo(()=>{const{nameField:s,valueField:i,legend:u,tooltip:c,label:l,ring:p,formatType:d,formatOptions:m,chartRef:h}=e;return{data:o,animation:!1,tooltip:c?{showMarkers:!1}:!1,legend:u?{layout:"horizontal",position:"top",flipPage:!0}:!1,label:l?{type:"outer"}:void 0,radius:.9,innerRadius:p?.45:0,statistic:{title:!1,content:!1},padding:"auto",appendPadding:24,angleField:i,colorField:s,interactions:[{type:"element-active"}],meta:{[i]:{formatter:b=>pa(b,d,m)}},theme:r,chartRef:h}},[o,e,r])}function Jb(e){return a.jsx(jf,{...Yb(e)})}const Yl=["high","q1","median","q3","low"];function Qb(e){const{dataSource:t}=e,{t:n}=Z(),{get:r}=Xa(),{chartTheme:o}=ln(),s=r(t);return k.useMemo(()=>{const{xAxis:i,yAxis:u,legend:c,groupSeriesField:l,groupSeriesName:p,slider:d,tooltip:m,chartRef:h}=e;return{data:s,animation:!1,xField:i.field,yField:u.field,xAxis:{title:i.showTitle&&i.name?{text:i.name}:null},yAxis:{title:u.showTitle&&u.name?{text:u.name}:null},seriesField:l,tooltip:m?{showCrosshairs:!0,fields:l?[l,...Yl]:Yl}:!1,legend:c?{layout:"horizontal",position:"top"}:!1,slider:d?{start:0,end:1}:!1,padding:"auto",appendPadding:8,meta:Object.assign({high:{alias:n("components.visual-schema-render-components.chart.violin.high"),formatter:b=>pa(b,u.formatType,u.formatOptions)},low:{alias:n("components.visual-schema-render-components.chart.violin.low"),formatter:b=>pa(b,u.formatType,u.formatOptions)},q1:{alias:n("components.visual-schema-render-components.chart.violin.q1"),formatter:b=>pa(b,u.formatType,u.formatOptions)},q3:{alias:n("components.visual-schema-render-components.chart.violin.q3"),formatter:b=>pa(b,u.formatType,u.formatOptions)},median:{alias:n("components.visual-schema-render-components.chart.violin.median"),formatter:b=>pa(b,u.formatType,u.formatOptions)},[i.field]:{formatter(b){return pa(b,i.formatType,i.formatOptions)}}},l?{[l]:{alias:p}}:null),theme:o,chartRef:h}},[e,s,n,o])}function Xb(e){return a.jsx(If,{...Qb(e)})}function od(e){const{compileObject:t}=Xa(),n=jt.useRef(),{mode:r}=Wb(),o=k.useMemo(()=>({...t(e),chartRef:n}),[t,e]),[s]=Ei(r,(l,p)=>{var d;if(l===vr.Print&&p!==vr.Print){const m=(d=n.current)==null?void 0:d.chart,h=m==null?void 0:m.getCanvas(),b=h==null?void 0:h.get("el");return b==null?void 0:b.toDataURL("image/png")}else return null}),{type:i,title:u}=o;let c=null;switch(i){case et.Line:c=a.jsx(Hb,{...o});break;case et.Area:c=a.jsx(Kb,{...o});break;case et.Pie:c=a.jsx(Jb,{...o});break;case et.Violin:c=a.jsx(Xb,{...o});break;case et.Bar:c=a.jsx($b,{...o});break;case et.Column:c=a.jsx(Vb,{...o});break;case et.Histogram:c=a.jsx(Ub,{...o});break;case et.Heatmap:c=a.jsx(zb,{...o});break}return a.jsxs(a.Fragment,{children:[u&&a.jsx(De.Title,{level:5,children:u}),a.jsx("div",{children:s?a.jsx("img",{src:s,style:{width:"100%",height:"auto"}}):c})]})}const Zb="_row_gtgfr_1",ev="_col_gtgfr_6",Jl={row:Zb,col:ev},tv=e=>{const{layout:t,minHeight:n,children:r}=e,o=k.useMemo(()=>{switch(t){case za.Full:return 100;case za.DivideTwo:return 100/2;case za.DivideThree:return 100/3}},[t]);return a.jsx("div",{className:Jl.row,style:{minHeight:n},children:jt.Children.map(r,s=>a.jsx("div",{className:Jl.col,style:{width:`${o}%`},children:s}))})};function av(e){const{get:t,compileObject:n}=Xa(),{title:r,dataSource:o,config:s,column:i}=k.useMemo(()=>n(e),[n,e]),u=k.useMemo(()=>{const l=t(o);return s.map(p=>({key:p.key,title:p.name,children:pa(Wn(l,[0,p.key]),p.formatType,p.formatOptions)}))},[s,o,t]),c=Math.floor(24/i);return a.jsxs(a.Fragment,{children:[r&&a.jsx(De.Title,{level:5,children:r}),a.jsx(Ls,{gutter:[16,16],children:u==null?void 0:u.map(l=>a.jsx(yr,{span:c,children:a.jsx(xn,{title:l.title,value:l.children??" "})},l.key))})]})}function rv(e){const{get:t,compileObject:n}=Xa(),{title:r,dataSource:o,config:s,pagination:i,showAllData:u}=k.useMemo(()=>n(e),[n,e]),c=t(o),l=k.useMemo(()=>new Map(s.map(h=>[h.key,h])),[s]),p=k.useMemo(()=>{const h=s.map(y=>y.key);return u?Sf(h,Object.keys((c==null?void 0:c[0])??{})):h},[s,c,u]),d=k.useMemo(()=>p.map(h=>{const b=l.get(h);return{key:h,dataIndex:h,title:(b==null?void 0:b.name)??h,fixed:b==null?void 0:b.fixed,width:(b==null?void 0:b.width)??200,render:b?(y,x)=>pa(Wn(x,b.key),b.formatType,b.formatOptions):void 0}}),[l,p]),m=k.useMemo(()=>p.reduce((h,b)=>{var y;return h+(((y=l.get(b))==null?void 0:y.width)??200)},0),[l,p]);return a.jsxs(a.Fragment,{children:[r&&a.jsx(De.Title,{level:5,children:r}),a.jsx(vt,{dataSource:c,columns:d,expandable:{showExpandColumn:!1},scroll:{x:m},pagination:i!=null&&i.pageSize?i:!1})]})}const nv="_text_dusoy_1",sv="_title_dusoy_2",Dr={text:nv,title:sv},ov=e=>{const{compileObject:t}=Xa(),{level:n,content:r}=k.useMemo(()=>t(e),[t,e]);return k.useMemo(()=>{switch(n){case Aa.H1:return a.jsx(De.Title,{level:1,className:Dr.title,children:r});case Aa.H2:return a.jsx(De.Title,{level:2,className:Dr.title,children:r});case Aa.H3:return a.jsx(De.Title,{level:3,className:Dr.title,children:r});case Aa.H4:return a.jsx(De.Title,{level:4,className:Dr.title,children:r});case Aa.H5:return a.jsx(De.Title,{level:5,className:Dr.title,children:r});default:return a.jsx(De.Paragraph,{className:Dr.text,children:r})}},[r,n])},id={text:ov,row:tv,table:rv,overview:av,chart:od,_placeholder:Nb},ld=jt.createContext(null),iv="_root_1s14t_1",lv="_title_1s14t_13",cv="_statistic_1s14t_17",fr={root:iv,title:lv,statistic:cv};function Hn(e){const{children:t,chartTheme:n,showInfo:r,...o}=e,{t:s}=Z(),i=k.useContext(ld);return a.jsx(Bb,{chartTheme:n,children:a.jsxs("div",{...o,className:fr.root,id:"template-analysis-report-root",children:[r&&a.jsx(an,{theme:{components:{Statistic:{contentFontSize:16}}},children:a.jsxs("div",{className:fr.header,children:[a.jsx(De.Title,{className:fr.title,level:1,children:i==null?void 0:i.title}),a.jsxs(Ls,{justify:"center",children:[(i==null?void 0:i.factor)&&a.jsx(yr,{span:6,children:a.jsx(xn,{className:fr.statistic,title:s("components.visual-schema-render-components.root.analysis-template.factor"),value:i==null?void 0:i.factor})}),a.jsx(yr,{span:6,children:a.jsx(xn,{className:fr.statistic,title:s("components.visual-schema-render-components.root.analysis-template.author"),value:i==null?void 0:i.author})}),a.jsx(yr,{span:6,children:a.jsx(xn,{className:fr.statistic,title:s("components.visual-schema-render-components.root.analysis-template.template-name"),value:i==null?void 0:i.templateName})}),a.jsx(yr,{span:6,children:a.jsx(xn,{className:fr.statistic,title:s("components.visual-schema-render-components.root.analysis-template.time"),value:i==null?void 0:i.time})})]})]})}),t]})})}Hn.InfoContext=ld;function rl(e,t){return Oe(()=>e?[ti.SWR_KEY,e]:null,()=>ti(e),{dedupingInterval:0,...t})}const uv="_empty_4idou_1",dv="_renderError_4idou_5",pv="_header_4idou_9",mv="_affixHeader_4idou_15",Zn={empty:uv,renderError:dv,header:pv,affixHeader:mv},fv={...id,root:Hn};function hv(){const{t:e}=Z(),[t,n]=k.useState(vr.Screen),{id:r}=$t(),{data:o,isLoading:s,isValidating:i}=Gu(r),{modal:u}=at.useApp(),{useStorageState:c}=rm(),[l,p]=c("analysis-record-detail-report-page:visual-config-version",{defaultValue:"snapshot"}),{data:d,isLoading:m}=rl(o==null?void 0:o.analysis_template_id),h=ea(async()=>{const x=e("pages.analysis-record.pages.detail-visual-report.print-help-modal.content",{returnObjects:!0});u.info({title:e("pages.analysis-record.pages.detail-visual-report.print-help-modal.title"),closable:!1,maskClosable:!1,width:600,content:a.jsx("div",{children:x.map((I,w)=>a.jsx("p",{children:I},w))}),afterClose(){requestAnimationFrame(()=>{Am.flushSync(()=>{n(vr.Print)}),requestAnimationFrame(()=>{window.print(),n(vr.Screen)})})}})}),b=k.useMemo(()=>xr((l==="latest"?d==null?void 0:d.visual_config:o==null?void 0:o.visual_config)??"null",null),[l,d==null?void 0:d.visual_config,o==null?void 0:o.visual_config]),y=k.useMemo(()=>o!=null&&o.factor_name&&(o!=null&&o.func_name)?`${o==null?void 0:o.factor_name}::${o==null?void 0:o.func_name}`:null,[o]);return a.jsx(Ys,{classNames:{header:Zn.header,affixHeader:Zn.affixHeader},affixHeader:!0,headerAction:a.jsxs(it,{children:[a.jsx(Qu,{paramsValue:o==null?void 0:o.params}),(o==null?void 0:o.status)===Xe.SUCCESS&&a.jsxs(a.Fragment,{children:[a.jsxs("div",{children:[e("pages.analysis-record.pages.detail-visual-report.config-version.label"),a.jsx(Qc,{value:l,options:[{label:e("pages.analysis-record.pages.detail-visual-report.config-version.latest"),value:"latest"},{label:e("pages.analysis-record.pages.detail-visual-report.config-version.snapshot"),value:"snapshot"}],onChange:p})]}),a.jsx(Ae,{icon:a.jsx(Pm,{}),onClick:h,children:e("pages.analysis-record.pages.detail-visual-report.print")})]})]}),autoBreadcrumb:{addonItems:[{title:e("pages.analysis-record.pages.detail-visual-report.title"),menu:{items:[{title:a.jsx(Ue,{to:Se.analysisRecordDetailData(r),children:e("pages.analysis-record.pages.detail-data.title")})}]}}]},validating:i,loading:s||m,status:o==null?void 0:o.status,failedReason:o==null?void 0:o.failed_reason,children:b?a.jsx(nm,{resetKeys:[b],fallback:a.jsx(Di,{status:"error",className:Zn.renderError,title:e("pages.analysis-record.pages.detail-visual-report.render-error.title"),subTitle:e("pages.analysis-record.pages.detail-visual-report.render-error.sub-title")}),children:a.jsx(al,{dataSource:(o==null?void 0:o.result)??{},children:a.jsx(Hn.InfoContext.Provider,{value:{title:e("pages.analysis-record.pages.detail-visual-report.report-title"),templateName:(o==null?void 0:o.analysis_template_name)??"",author:(o==null?void 0:o.creator)??"",time:o!=null&&o.create_time?Qe(o.create_time,ga.DOLPHINDB_DATETIME):"-",factor:y??""},children:a.jsx(rd,{mode:t,children:a.jsx(tl,{root:b.layout,components:fv})})})})}):a.jsx(Ma,{className:Zn.empty,image:Ma.PRESENTED_IMAGE_SIMPLE,description:e(l==="latest"?"pages.analysis-record.pages.detail-visual-report.no-latest-config":"pages.analysis-record.pages.detail-visual-report.no-snapshot-config")})})}const gv=(e,t)=>a.jsxs(Bc,{children:[t==null?void 0:t.map(n=>a.jsx(lr,{...n},JSON.stringify(n.from))),e.map(n=>k.createElement(ys,{...n,key:n.path}))]}),Ar=e=>{const{routes:t,redirect:n,renderRoutes:r=gv,...o}=e,s=Ft(),i=k.useMemo(()=>t.map(l=>({label:l.label,key:l.path})),[t]),u=he(l=>{const p=t.find(d=>d.path===l);s.push({pathname:l,search:p==null?void 0:p.search})}),c=r?r(t,lu(n)):null;return a.jsxs(a.Fragment,{children:[a.jsx(Tm,{items:i,onTabClick:u,activeKey:s.location.pathname,destroyInactiveTabPane:!0,...o}),c]})};var Mt=(e=>(e[e.PrivateFactor=1]="PrivateFactor",e[e.PublicFactor=2]="PublicFactor",e[e.NonFactor=3]="NonFactor",e))(Mt||{});const Pn=async e=>ee.requestFunc("facplf_get_analysis_records",e);Pn.SWR_KEY="facplf_get_analysis_records";const cd=e=>ee.requestFunc("facplf_delete_analysis_record",{analysis_record_id:e});cd.SWR_KEY="facplf_delete_analysis_record";function ws(e){return ee.requestFunc("facplf_get_test_detail",{test_id:e})}ws.SWR_KEY="facplf_get_test_detail";const yv=e=>{const{t}=Z(),{modal:n,loading:r,message:o}=e;return a.jsx(aa,{width:1e3,styles:{body:{maxHeight:600,overflow:"auto"}},title:t("common.error-info"),open:n.visible,onCancel:n.hide,afterClose:n.remove,footer:null,children:a.jsx(kr,{spinning:r,children:a.jsx(Xc,{children:a.jsx(Du,{text:o??""})})})})},ud=e=>ke.create(t=>{const n=sm(),{data:r,isLoading:o}=Oe([e,t],async()=>e(t));return a.jsx(yv,{modal:n,message:r??"",loading:o})}),bv=ud(e=>ws(e.id).then(t=>t.failed_reason)),dd=ud(e=>xs(e.id).then(t=>t.failed_reason)),vv={[Xe.RUNNING]:"processing",[Xe.SUCCESS]:"success",[Xe.FAILED]:"error",[Xe.PARTIAL_FAILED]:"warning"},Bt=e=>{const{status:t,...n}=e,{t:r}=Z();return a.jsx(yt,{bordered:!1,color:vv[t],...n,children:r(`constants.status.${t}`)})};function pd(e){const{prefixColumns:t,onRefresh:n,...r}=e,{t:o}=Z(),{message:s}=at.useApp(),i=k.useCallback(async c=>{try{await cd(c),s.success(o("common.delete-success")),n==null||n()}catch(l){throw s.error(Be(l)),l}},[s,n,o]),u=k.useMemo(()=>[...t??[],{title:o("pages.analysis-record.list.template-name"),width:200,dataIndex:"analysis_template_name"},{title:o("common.create-time"),width:200,dataIndex:"create_time",render:c=>c?Qe(c):"-"},{title:o("common.status"),width:200,dataIndex:"status",render:c=>a.jsx(Bt,{status:c})},{title:o("common.table.operation.title"),width:200,dataIndex:"operation",render:(c,l)=>a.jsxs(Vt,{children:[l.status===Xe.SUCCESS&&a.jsx(Ue,{to:Se.analysisRecordDetailData(l.analysis_record_id),children:o("pages.analysis-record.list.view-data")}),l.status===Xe.SUCCESS&&a.jsx(Ue,{to:Se.analysisRecordDetailReport(l.analysis_record_id),children:o("pages.analysis-record.list.view-report")}),l.status===Xe.FAILED&&a.jsx("a",{onClick:()=>ke.show(dd,{id:l.analysis_record_id}),children:o("common.view-error")}),a.jsx(la,{title:o("common.delete-confirm"),description:o("common.delete-confirm-description"),onConfirm:()=>i(l.analysis_record_id),placement:"topRight",children:a.jsx(De.Link,{type:"danger",children:o("common.delete")})})]})}],[i,t,o]);return a.jsx(vt,{...r,columns:u})}const _v={items:[],total:0},md=e=>{const{data:t=_v,isLoading:n}=Yi({swr:{revalidateIfStale:!1}}),r=k.useMemo(()=>t.items.map(o=>({label:o.name,value:o.template_id,template:o})),[t]);return a.jsx(kt,{options:r,loading:n,...e})},fd=Sr({getValues:e=>[Xe.SUCCESS,Xe.RUNNING,Xe.FAILED,e.withPartialFailed?Xe.PARTIAL_FAILED:null].filter(t=>t!==null),getLabelMap:e=>e("constants.status",{returnObjects:!0})}),xv="_form_1je5t_1",wv={form:xv};function jv(e){const{values:t,onSearch:n}=e,{t:r}=Z(),o=$c(ga.DOLPHINDB_DATE);return a.jsxs(Ai,{className:wv.form,onFinish:n,withTimestamp:!0,syncedValues:t,itemColProps:{span:8},children:[a.jsx(B.Item,{label:r("pages.analysis-record.list.search-form.template"),name:"analysis_template_ids",children:a.jsx(md,{allowClear:!0,mode:"multiple"})}),a.jsx(B.Item,{label:r("common.status"),name:"status",children:a.jsx(fd,{allowClear:!0,mode:"multiple"})}),a.jsx(B.Item,{label:r("common.create-time"),name:"create_time",...o,children:a.jsx(Sn.RangePicker,{allowClear:!0})})]})}function Iv(){const[e,t]=Os(),{data:n,isLoading:r,mutate:o}=Oe(["custom",Pn.SWR_KEY,e],async()=>Pn({type:[Mt.NonFactor],analysis_template_ids:e.analysis_template_ids,status:e.status,create_time:e.create_time}));return a.jsxs(a.Fragment,{children:[a.jsx(jv,{values:e,onSearch:t}),a.jsx(pd,{dataSource:n==null?void 0:n.items,loading:r,onRefresh:o})]})}const Sv="_form_1je5t_1",kv={form:Sv},Cv=Sr({getValues:()=>[Mt.PrivateFactor,Mt.PublicFactor],getLabelMap:e=>({[Mt.PrivateFactor]:e("pages.analysis-record.list.search-form.factor-type.private-factor"),[Mt.PublicFactor]:e("pages.analysis-record.list.search-form.factor-type.public-factor")})});function Ev(e){const{values:t,onSearch:n}=e,{t:r}=Z(),o=$c(ga.DOLPHINDB_DATE);return a.jsxs(Ai,{className:kv.form,onFinish:n,withTimestamp:!0,syncedValues:t,itemColProps:{span:8},children:[a.jsx(B.Item,{label:r("pages.analysis-record.list.search-form.keyword"),name:"keyword",children:a.jsx(Ne,{})}),a.jsx(B.Item,{label:r("pages.analysis-record.list.search-form.factor-type.label"),name:"factor_type",children:a.jsx(Cv,{allowClear:!0})}),a.jsx(B.Item,{label:r("pages.analysis-record.list.search-form.template"),name:"analysis_template_ids",children:a.jsx(md,{allowClear:!0,mode:"multiple"})}),a.jsx(B.Item,{label:r("common.status"),name:"status",children:a.jsx(fd,{allowClear:!0,mode:"multiple"})}),a.jsx(B.Item,{label:r("common.create-time"),name:"create_time",...o,children:a.jsx(Sn.RangePicker,{allowClear:!0})})]})}const Av=()=>{const[e,t]=Os(),{t:n}=Z(),{data:r,isLoading:o,mutate:s}=Oe(["factor",Pn.SWR_KEY,e],async()=>Pn(om({type:e.factor_type?[e.factor_type]:[Mt.PrivateFactor,Mt.PublicFactor],analysis_template_ids:e.analysis_template_ids,status:e.status,create_time:e.create_time,keyword:e.keyword,factor_id:e.factor_id,test_id:e.test_id}))),i=k.useMemo(()=>[{title:n("pages.analysis-record.list.factor-name"),width:200,dataIndex:"factor_name"},{title:n("pages.analysis-record.list.func-name"),width:200,dataIndex:"func_name"}],[n]),u=e.factor_id||e.test_id;return a.jsxs(a.Fragment,{children:[!u&&a.jsx(Ev,{values:e,onSearch:t}),a.jsx(pd,{dataSource:r==null?void 0:r.items,loading:o,prefixColumns:i,onRefresh:s})]})},[Pv,T5]=Xr(e=>e.value),Tv={from:"/analysis/record/list",to:"/analysis/record/list/factor",exact:!0};function Ov(){const{t:e}=Z(),[t]=Os(),n=k.useMemo(()=>{const{analysis_template_ids:o,status:s,create_time:i}=t;return{analysis_template_ids:o,status:s,create_time:i}},[t]),r=k.useMemo(()=>[{path:"/analysis/record/list/factor",search:mt.stringify(n),label:e("pages.analysis-record.tabs.factor"),component:Av},{path:"/analysis/record/list/custom",search:mt.stringify(n),label:e("pages.analysis-record.tabs.custom"),component:Iv}].filter(s=>!!s),[e,n]);return a.jsx(nt,{children:a.jsx(Pv,{value:n,children:a.jsx(Ar,{routes:r,redirect:Tv})})})}function Tn(e){return{...e,factor_properties:Ja(e.factor_properties),tags:Ja(e.tags)}}async function ni(){const{total:e,items:t}=await ee.requestFunc("facplf_get_private_factor_template_list");return{total:e,items:t.map(Tn)}}ni.SWR_KEY="facplf_get_private_factor_template_list";async function si(e){const{total:t,items:n}=await ee.requestFunc("facplf_get_public_factor_template_list",{department:e||null});return{total:t,items:n.map(Tn)}}si.SWR_KEY="facplf_get_public_factor_template_list";async function oi(e){const t=await ee.requestFunc("facplf_get_private_factor_template_detail",{template_id:e});return Tn(t)}oi.SWR_KEY="facplf_get_private_factor_template_detail";function Rv(e){return ee.requestFunc("facplf_get_template_params",{template_id:e}).catch(()=>[])}async function ii(e){const t=await ee.requestFunc("facplf_get_user_all_templates").then(r=>({private:r.private.map(Tn),public:r.public.map(Tn)}));async function n(r){return{...r,params:e!=null&&e.withParams?await Rv(r.template_id):[]}}return{private:await Promise.all(t.private.map(n)),public:await Promise.all(t.public.map(n))}}ii.SWR_KEY="facplf_get_user_all_templates";const nl=e=>{const{data:t,...n}=Oe(()=>[ii.SWR_KEY,{withParams:e.withParams??!0}],()=>ii({withParams:e.withParams??!0}),e.swr),r=k.useMemo(()=>[...(t==null?void 0:t.private)??[],...(t==null?void 0:t.public)??[]],[t]),o=k.useCallback(s=>{const i=(t==null?void 0:t.private)??[],u=(t==null?void 0:t.public)??[],c=i.find(l=>l.template_id===s)||u.find(l=>l.template_id===s);return c==null?void 0:c.params},[t]);return{allTemplates:r,getTemplateParameters:o,data:t,...n}};function Fv(e){const{references:{templateIndex:t},...n}=e,{t:r}=Z(),o=k.useMemo(()=>kf(0,t).map(u=>({label:r("components.template-run-param-select.prev-task-result.option.name",{index:u+1}),value:u})),[r,t]),s=k.useMemo(()=>[{label:r("components.template-run-param-select.type-select.options.prev-task-result"),typeValue:gt.PrevTaskResult,valueRender(u,c){return a.jsx(kt,{className:xa.control,value:u,onChange:c,options:o})}},{label:r("components.template-run-param-select.type-select.options.factor"),typeValue:gt.Factor,valueRender(){return null}}],[r,o]),i=Xi(s);return a.jsx(Ji,{typeOptions:i,...n})}const Lv={...Zi,[gt.PrevTaskResult]:e=>La(wa,t=>{if(t>=e.templateIndex)throw new Error(ma.t("components.template-run-param-select.validator.prev-task"))})};function Nv(e,t){return el(e,Lv,t)}const Dv="_option_1lrd3_1",Mv="_level_1lrd3_5",Ql={option:Dv,level:Mv};function Wv(e){const{factors:t,items:n,...r}=e,{t:o}=Z(),s=nl({}).allTemplates,{matched:i,unmatched:u}=k.useMemo(()=>{const l=n??s,p=Cf(...lu(t??[]).map(d=>d.properties));return l.reduce((d,m)=>(p.some(b=>m.factor_properties.includes(b))?d.matched.push({label:m.name,value:m.template_id,template:m}):d.unmatched.push({label:m.name,value:m.template_id,template:m}),d),{matched:[],unmatched:[]})},[t,n,s]),c=l=>{const p=l.template,d="public_level"in p;return a.jsxs(kt.Option,{label:l.label,value:l.value,template:l.template,className:Ql.option,children:[l.label,a.jsx(yt,{className:Ql.level,color:d?"green":"purple",children:o(d?"components.factor-run-form.template-select.public":"components.factor-run-form.template-select.private")}),d&&!!p.is_custom&&a.jsxs(yt,{color:"blue",children:[o("components.factor-run-form.template-select.creator"),p.creator]})]},l.value)};return a.jsx(kt,{placeholder:o("components.factor-run-form.template-select.placeholder"),optionLabelProp:"label",...r,children:t?a.jsxs(a.Fragment,{children:[i.length>0&&a.jsx(kt.OptGroup,{label:o("components.factor-run-form.template-select.matched"),children:i.map(l=>c(l))}),u.length>0&&a.jsx(kt.OptGroup,{label:o("components.factor-run-form.template-select.unmatched"),children:u.map(l=>c(l))})]}):[...i,...u].map(l=>c(l))})}const Bv="_error_110vb_1",$v="_templates_110vb_5",Vv="_preset_110vb_10",qv="_template_110vb_5",zv="_templateContent_110vb_18",Gv="_templateParam_110vb_22",Uv="_addition_110vb_26",Mr={error:Bv,templates:$v,preset:Vv,template:qv,templateContent:zv,templateParam:Gv,addition:Uv};function cn(e){const{name:t,factors:n,labelCol:r,className:o,readonly:s}=e,i=B.useFormInstance(),{t:u}=Z(),c=nl({swr:{revalidateIfStale:!1}}).allTemplates;return a.jsx(Rs,{name:t,initialValue:[{}],rules:[{validator:async(l,p)=>{if(!(p!=null&&p.length))throw new Error(u("components.factor-run-form.run-template-list.rules.required"))}}],hideActions:s,renderRoot:(l,p,d,{errors:m,warnings:h})=>a.jsxs("div",{className:o,children:[l,a.jsx(B.ErrorList,{className:Mr.error,errors:m,warnings:h}),!s&&p.addition]}),renderItem:(l,p,d,m,{isLast:h})=>a.jsxs(a.Fragment,{children:[a.jsxs("div",{className:Mr.template,children:[a.jsxs("div",{className:Mr.templateContent,children:[a.jsx(B.Item,{label:u("components.factor-run-form.templates.id.label")+(p+1),name:[l.name,"template_id"],required:!0,rules:[{required:!0}],children:a.jsx(Wv,{items:c,factors:n,onChange:(b,y)=>{var x,I;i.setFieldValue(ha(t,[l.name,"template_params"]),(I=(x=y.template)==null?void 0:x.params)==null?void 0:I.map(w=>({name:w.name,type:w.type})))}})}),a.jsx(ja,{dependencies:[ha(t,[l.name,"template_id"])],children:b=>{const y=Wn(b,ha(t,[l.name,"template_id"]));return y?a.jsx(B.Item,{label:u("components.factor-run-form.templates.preset.label"),hidden:s,name:[l.name,"preset"],children:a.jsx(Hi,{containerClassName:Mr.preset,presetType:`factor_template_${y}`,presetValue:()=>JSON.stringify(i.getFieldValue(ha(t,[l.name,"template_params"]))),onChange:(x,I)=>{const w=i.getFieldValue(ha(t,[l.name,"template_params"])),A=JSON.parse(I.value),f=w.map(j=>{const C=A==null?void 0:A.find(g=>g.name===j.name);return C||j});i.setFieldValue(ha(t,[l.name,"template_params"]),f)}})}):null}}),a.jsx(B.List,{name:[l.name,"template_params"],children:b=>{const y=i.getFieldValue(ha(t,[l.name,"template_id"])),x=c.find(I=>I.template_id===y);return b.map((I,w)=>{const A=i.getFieldValue(ha(t,[l.name,"template_params",I.name])),f=x==null?void 0:x.params.find(C=>C.name===(A==null?void 0:A.name)),j=!!(f!=null&&f.type);return a.jsx(ja,{dependencies:[t],children:()=>{const C={templateIndex:p};return a.jsx(B.Item,{labelCol:{offset:1,...r},label:(f==null?void 0:f.name)??(A==null?void 0:A.name),tooltip:f==null?void 0:f.description,name:I.name,className:Mr.templateParam,rules:[{validator:async(g,E)=>Nv(E,C)}],children:a.jsx(Fv,{disableType:j,references:C})})}},w)})}})]}),!s&&d.remove]}),!h&&a.jsx(ba,{})]}),addItemInitialValue:{},renderAddition:u("components.factor-run-form.templates.add"),additionClassName:Mr.addition})}const Xs=e=>{const{factors:t,includePrivate:n=!1,includePublic:r=!1,onChange:o,value:s,...i}=e,{t:u}=Z(),{data:c=[]}=Oe(()=>t?null:["facplf_get_factors_funcs",n,r],async()=>ee.requestFunc("facplf_get_factors_funcs",{include_private:n,include_public:r})),l=t??c,p=k.useMemo(()=>s?s.reduce((h,b)=>{var y;return(y=b==null?void 0:b.funcs)==null||y.forEach(x=>{h.push([b.factor_id,x])}),h},[]):[],[s]),d=ea(h=>{const b=h.reduce((y,x)=>{var A;const[I,w]=x;if(!w){const f=l.find(j=>j.factor_id===I);return f&&(y[f.factor_id]=f),y}if(y[I])y[I].funcs.push(w);else{const f=(A=l.find(j=>j.factor_id===I))==null?void 0:A.type;f&&(y[I]={type:f,factor_id:I,funcs:[w]})}return y},{});o==null||o(Object.values(b))}),m=k.useMemo(()=>l.map(h=>({label:h.factor_name,value:h.factor_id,children:h.funcs.map(b=>({label:b,value:b}))})),[l]);return a.jsx(Om,{showSearch:!0,options:m,multiple:!0,onChange:d,value:p,placeholder:u("components.factor-func-select.placeholder"),...i})},Hv="_calculateTemplates_4mx0f_1",Kv={calculateTemplates:Hv},hd=Ha({useDrawerProps:({t:e})=>({title:e("pages.analysis-template.run-template-drawer.title"),width:700,styles:{body:{padding:16}}}),useFormProps:({props:e})=>({labelCol:{span:6},initialValues:{analysis_template:{template_id:e.template.template_id,template_params:e.template.params.map(t=>({name:t.name,type:t.type}))}}}),useFormRender:({t:e,props:t,formProps:n})=>{const r=k.useMemo(()=>e("pages.factor-public.create-batch-test.form.name.initialValue",{timestamp:Date.now()}),[e]);return a.jsxs(B,{...n,children:[a.jsx(B.Item,{label:e("pages.analysis-template.run-template-drawer.form.run-type.label"),name:"type",initialValue:Mt.NonFactor,children:a.jsxs(ya.Group,{children:[a.jsx(ya,{value:Mt.NonFactor,children:e("pages.analysis-template.run-template-drawer.form.run-type.non-factor")}),a.jsx(ya,{value:Mt.PrivateFactor,children:a.jsx(qo,{tooltipContent:e("pages.analysis-template.run-template-drawer.form.run-type.private-factor.tip"),children:e("pages.analysis-template.run-template-drawer.form.run-type.private-factor.title")})}),a.jsx(ya,{value:Mt.PublicFactor,children:a.jsx(qo,{tooltipContent:e("pages.analysis-template.run-template-drawer.form.run-type.public-factor.tip"),children:e("pages.analysis-template.run-template-drawer.form.run-type.public-factor.title")})})]})}),a.jsx(ja,{dependencies:["type"],children:o=>{const{type:s}=o;return s===Mt.NonFactor?null:a.jsxs(a.Fragment,{children:[s===Mt.PublicFactor&&a.jsxs(a.Fragment,{children:[a.jsx(B.Item,{label:e("pages.analysis-template.run-template-drawer.form.name.label"),name:"name",required:!0,rules:[{required:!0}],initialValue:r,children:a.jsx(Ne,{})}),a.jsx(B.Item,{label:e("pages.analysis-template.run-template-drawer.form.comment.label"),name:"comment",children:a.jsx(Ne.TextArea,{autoSize:{minRows:3,maxRows:5}})})]}),a.jsx(B.Item,{label:e("pages.factor-draft.components.run-params-form.factor.label"),name:"factors",required:!0,rules:[{type:"array",required:!0}],children:a.jsx(Xs,{includePrivate:s===Mt.PrivateFactor,includePublic:s===Mt.PublicFactor})}),a.jsx("h3",{children:e("pages.analysis-template.run-template-drawer.form.calculate-template")}),a.jsx(cn,{className:Kv.calculateTemplates,labelCol:n.labelCol,name:"factor_templates"})]})}}),a.jsx("h3",{children:e("pages.analysis-template.run-template-drawer.form.analysis-template-params")}),a.jsx(on,{listLabelCol:{span:6},templateId:t.template.template_id,namePath:"analysis_template"})]})},onSubmit:async(e,{t,antApp:{message:n},props:r})=>{var o;try{await((o=r.beforeSubmit)==null?void 0:o.call(r))}catch(s){throw n.error(Be(s)),s}await ee.requestFunc("facplf_run_analysis",e),n.success(a.jsx(Vc,{t,i18nKey:"pages.analysis-template.run-template-drawer.success",components:{link:a.jsx(Ue,{to:e.type===Mt.NonFactor?Se.analysisRecordCustomList():Se.analysisRecordFactorList()})}}))}}),sl=e=>{const{t}=Z();return a.jsxs(a.Fragment,{children:[a.jsx(B.Item,{name:"name",label:t("pages.analysis-template.components.create-form.label.name"),help:e.nameHelp,rules:[{required:!0},{pattern:Uy,message:t("common.validate.ddb-var-name-rule-message")}],children:a.jsx(Ne,{placeholder:t("pages.analysis-template.components.create-form.placeholder.name")})}),a.jsx(B.Item,{name:"tags",label:t("pages.analysis-template.components.create-form.label.tags"),children:a.jsx(sn,{tagType:Er.ANALYSIS_LIB})}),a.jsx(B.Item,{name:"comment",label:t("pages.analysis-template.components.create-form.label.comment"),children:a.jsx(Ne.TextArea,{rows:4,placeholder:t("pages.analysis-template.components.create-form.placeholder.comment")})})]})},Yv=_a({useFormRender:({formProps:e})=>{const t=va({zh:{labelCol:{span:4}},en:{labelCol:{span:6}}});return a.jsx(B,{...t,...e,children:a.jsx(sl,{...e})})},onSubmit:async(e,{t,antApp:{message:n}})=>{var r;await ee.requestFunc("facplf_create_new_analysis_template",{...e,tags:((r=e==null?void 0:e.tags)==null?void 0:r.join(","))??""}),n.success(t("pages.analysis-template.components.create-template-modal.success-msg"))},useModalProps:({t:e})=>({title:e("pages.analysis-template.components.create-template-modal.title"),width:640})}),Jv=Ha({useFormRender:({formProps:e,t})=>{const n=va({zh:{labelCol:{span:4}},en:{labelCol:{span:6}}});return a.jsx(B,{...n,...e,children:a.jsx(sl,{...e,nameHelp:t("common.template-rename-help")})})},useFormProps:({props:e})=>({initialValues:e.template}),onSubmit:async(e,{t,antApp:{message:n},props:r})=>{var o;await ee.requestFunc("facplf_edit_analysis_template",{...e,template_id:r.templateId,tags:((o=e==null?void 0:e.tags)==null?void 0:o.join(","))??""}),n.success(t("pages.analysis-template.components.modify-template-drawer.success-msg"))},useDrawerProps:({t:e})=>({title:e("pages.analysis-template.components.modify-template-drawer.title"),width:640})}),Qv=_a({useFormRender:({formProps:e,t})=>{const n=va({zh:{labelCol:{span:4}},en:{labelCol:{span:6}}});return a.jsx(B,{...n,...e,children:a.jsx(sl,{...e,nameHelp:t("common.template-rename-help")})})},useFormProps:({props:e})=>({initialValues:{...e.template,name:`${e.template.name}_copy`}}),onSubmit:async(e,{props:t,t:n,antApp:{message:r}})=>{var o;await ee.requestFunc("facplf_copy_analysis_template",{...e,template_id:t.templateId,tags:((o=e==null?void 0:e.tags)==null?void 0:o.join(","))??""}),r.success(n("common.copy-success"))},useModalProps:({t:e})=>({title:e("pages.analysis-template.components.copy-template-modal.title"),width:640})}),Xv="_content_1xenz_1",Zv="_footer_1xenz_6",e_="_action_1xenz_12",es={content:Xv,footer:Zv,action:e_},t_=ke.create(e=>{const{templateId:t}=e,n=ke.useModal(),{t:r}=Z(),o=k.useCallback(()=>{n.resolve(),n.hide()},[n]);return a.jsxs(aa,{...ke.antdModal(n),footer:null,title:r("common.confirm"),children:[a.jsx("div",{className:es.content,children:r("pages.analysis-template.pages.code-edit.confirm-modal.content")}),a.jsxs(Rm,{className:es.footer,children:[a.jsx(Ue,{className:es.action,component:Ae,to:Se.analysisTemplateVisualEdit(t),children:r("pages.analysis-template.pages.code-edit.confirm-modal.to-visual")}),a.jsx(Ae,{className:es.action,type:"primary",onClick:o,children:r("common.run")})]})]})}),a_=()=>{const{id:e}=$t(),[t,n]=k.useState(""),r=Ft(),{t:o}=Z(),{data:s,isLoading:i,mutate:u}=rl(e,{onSuccess:d=>{t||n(d.source_code)}}),c=he(async()=>{await ke.show(Jv,{template:{name:(s==null?void 0:s.name)??"",comment:(s==null?void 0:s.comment)??"",tags:(s==null?void 0:s.tags)||[]},templateId:e}),u()}),l=he(async()=>{await ee.requestFunc("facplf_edit_analysis_template_code",{template_id:e,code:t}),u()}),p=ea(async()=>{s&&(s.visual_config||await ke.show(t_,{templateId:e}),ke.show(hd,{history:r,template:s}))});return a.jsx(nt,{autoBreadcrumb:{addonItems:[{title:s==null?void 0:s.name},{title:o("pages.analysis-template.pages.code-edit.title")}]},headerAction:a.jsxs(it,{size:"large",children:[a.jsx("a",{onClick:c,children:o("pages.analysis-template.pages.code-edit.edit-template-meta")}),a.jsx(Ue,{to:Se.analysisTemplateVisualEdit(e),children:o("pages.analysis-template.pages.visual-edit.title")}),a.jsx(Ae,{type:"primary",onClick:p,children:o("pages.analysis-template.pages.code-edit.run")})]}),headerBottomMargin:8,children:a.jsx(nn,{title:o("pages.analysis-template.pages.code-edit.title"),code:t,sourceCode:s==null?void 0:s.source_code,onChange:n,onSave:l,loading:i})})},r_="_btnWrapper_1p2yf_1",n_="_comment_1p2yf_5",s_={btnWrapper:r_,comment:n_},o_=()=>{const e=ca(),{t}=Z(),{message:n}=at.useApp(),r=Ra(y=>y.user),o=Ft(),{data:s,mutate:i,isLoading:u}=Yi(),c=he(y=>y.creator===(r==null?void 0:r.username)),l=he(y=>y.creator===(r==null?void 0:r.username)||e.isSystemAdmin()||e.hasSystemAuth(At.REVIEW)),p=he(async()=>{await ke.show(Yv),i()}),d=he(y=>{ke.show(hd,{history:o,template:y})}),m=he(async y=>{await ke.show(Qv,{template:{name:y.name,tags:y.tags,comment:y.comment},templateId:y.template_id}),i()}),h=he(async y=>{try{await ee.requestFunc("facplf_delete_analysis_template",{template_id:y.template_id}),i(),n.success(t("common.delete-success"))}catch(x){n.error(Be(x))}}),b=k.useMemo(()=>[{title:t("pages.analysis-template.pages.template-list.table.name"),dataIndex:"name",width:200,fixed:"left"},{title:t("pages.analysis-template.pages.template-list.table.tags"),dataIndex:"tags",width:200,render:y=>y!=null&&y.length?a.jsx(Gt,{ellipsisTagProps:{color:"blue"},max:3,children:y.map(x=>a.jsx(yt,{color:"blue",children:x},x))}):"-"},{title:t("pages.analysis-template.pages.template-list.table.run-record"),width:100,align:"center",dataIndex:"run_record_count",render:(y,x)=>y&&a.jsx(Ue,{to:Se.analysisRecordFactorList({analysis_template_ids:[x.template_id]}),children:y})},{title:t("pages.analysis-template.pages.template-list.table.creator"),dataIndex:"creator",width:150},{title:t("pages.analysis-template.pages.template-list.table.create-time"),dataIndex:"create_time",width:200,render:y=>y?Qe(y):"-"},{title:t("pages.analysis-template.pages.template-list.table.update-time"),dataIndex:"update_time",width:200,render:y=>y?Qe(y):"-"},{title:t("pages.analysis-template.pages.template-list.table.comment"),dataIndex:"comment",width:200,render:y=>a.jsx(De.Paragraph,{ellipsis:{expandable:!0,rows:2},children:y})},{title:t("common.table.operation.title"),dataIndex:"operation",width:300,fixed:"right",render:(y,x)=>a.jsxs(Vt,{max:3,children:[a.jsx("a",{onClick:()=>d(x),children:t("common.table.operation.run")}),c(x)&&a.jsx(Ue,{to:Se.analysisTemplateCodeEdit(x.template_id),children:t("pages.analysis-template.table.edit-code")}),c(x)&&a.jsx(Ue,{to:Se.analysisTemplateVisualEdit(x.template_id),children:t("pages.analysis-template.table.edit-visual")}),a.jsx(mr,{code:x.source_code}),a.jsx("a",{onClick:()=>m(x),children:t("common.table.operation.copy")}),l(x)&&a.jsx(la,{title:t("pages.analysis-template.pages.template-list.message.delete-confirm",{name:x.name}),onConfirm:()=>h(x),placement:"topRight",children:a.jsx(De.Link,{type:"danger",children:t("common.table.operation.delete")})})]})}],[t,c,l,d,m,h]);return a.jsxs(nt,{children:[a.jsx("div",{className:s_.btnWrapper,children:a.jsx(Ae,{type:"primary",icon:a.jsx(Ua,{}),onClick:p,children:t("pages.analysis-template.pages.template-list.create-btn")})}),a.jsx(vt,{scroll:{x:1200},dataSource:s==null?void 0:s.items,loading:u,columns:b,rowKey:"template_id"})]})},i_="_addPanel_68jsh_1",l_="_divider_68jsh_4",c_="_groupTitle_68jsh_10",u_="_compButton_68jsh_14",fs={addPanel:i_,divider:l_,groupTitle:c_,compButton:u_},d_=e=>a.jsx(Ae,{...e,className:fs.compButton});function gd(e){const{componentGroups:t,onAdd:n}=e,{t:r}=Z(),o=k.useCallback(s=>a.jsx(yr,{span:8,children:a.jsxs(d_,{onClick:()=>{n(s)},children:[s.icon,s.name]})},s.name),[n]);return a.jsx(Qa,{arrow:!1,trigger:["click"],placement:"bottomLeft",content:a.jsx("div",{className:fs.addPanel,children:t.map(s=>a.jsxs(jt.Fragment,{children:[a.jsx(ba,{className:fs.divider,children:a.jsx(De.Title,{level:5,className:fs.groupTitle,children:s.name})}),a.jsx(Ls,{wrap:!0,gutter:[16,16],children:s.components.map(o)})]},s.name))}),children:a.jsxs(Ae,{children:[r("pages.analysis-template.pages.visual-edit.header.add-component"),a.jsx(Zc,{})]})})}var p_=function(t){return m_(t)&&!f_(t)};function m_(e){return!!e&&typeof e=="object"}function f_(e){var t=Object.prototype.toString.call(e);return t==="[object RegExp]"||t==="[object Date]"||y_(e)}var h_=typeof Symbol=="function"&&Symbol.for,g_=h_?Symbol.for("react.element"):60103;function y_(e){return e.$$typeof===g_}function b_(e){return Array.isArray(e)?[]:{}}function On(e,t){return t.clone!==!1&&t.isMergeableObject(e)?Yr(b_(e),e,t):e}function v_(e,t,n){return e.concat(t).map(function(r){return On(r,n)})}function __(e,t){if(!t.customMerge)return Yr;var n=t.customMerge(e);return typeof n=="function"?n:Yr}function x_(e){return Object.getOwnPropertySymbols?Object.getOwnPropertySymbols(e).filter(function(t){return Object.propertyIsEnumerable.call(e,t)}):[]}function Xl(e){return Object.keys(e).concat(x_(e))}function yd(e,t){try{return t in e}catch{return!1}}function w_(e,t){return yd(e,t)&&!(Object.hasOwnProperty.call(e,t)&&Object.propertyIsEnumerable.call(e,t))}function j_(e,t,n){var r={};return n.isMergeableObject(e)&&Xl(e).forEach(function(o){r[o]=On(e[o],n)}),Xl(t).forEach(function(o){w_(e,o)||(yd(e,o)&&n.isMergeableObject(t[o])?r[o]=__(o,n)(e[o],t[o],n):r[o]=On(t[o],n))}),r}function Yr(e,t,n){n=n||{},n.arrayMerge=n.arrayMerge||v_,n.isMergeableObject=n.isMergeableObject||p_,n.cloneUnlessOtherwiseSpecified=On;var r=Array.isArray(t),o=Array.isArray(e),s=r===o;return s?r?n.arrayMerge(e,t,n):j_(e,t,n):On(t,n)}Yr.all=function(t,n){if(!Array.isArray(t))throw new Error("first argument should be an array");return t.reduce(function(r,o){return Yr(r,o,n)},{})};var I_=Yr,S_=I_;const ol=tn(S_);var bd=Symbol.for("immer-nothing"),Zl=Symbol.for("immer-draftable"),Ta=Symbol.for("immer-state");function Va(e,...t){throw new Error(`[Immer] minified error nr: ${e}. Full error at: https://bit.ly/3cXEKWf`)}var Jr=Object.getPrototypeOf;function Qr(e){return!!e&&!!e[Ta]}function wr(e){var t;return e?vd(e)||Array.isArray(e)||!!e[Zl]||!!((t=e.constructor)!=null&&t[Zl])||eo(e)||to(e):!1}var k_=Object.prototype.constructor.toString();function vd(e){if(!e||typeof e!="object")return!1;const t=Jr(e);if(t===null)return!0;const n=Object.hasOwnProperty.call(t,"constructor")&&t.constructor;return n===Object?!0:typeof n=="function"&&Function.toString.call(n)===k_}function Rn(e,t){Zs(e)===0?Object.entries(e).forEach(([n,r])=>{t(n,r,e)}):e.forEach((n,r)=>t(r,n,e))}function Zs(e){const t=e[Ta];return t?t.type_:Array.isArray(e)?1:eo(e)?2:to(e)?3:0}function li(e,t){return Zs(e)===2?e.has(t):Object.prototype.hasOwnProperty.call(e,t)}function _d(e,t,n){const r=Zs(e);r===2?e.set(t,n):r===3?e.add(n):e[t]=n}function C_(e,t){return e===t?e!==0||1/e===1/t:e!==e&&t!==t}function eo(e){return e instanceof Map}function to(e){return e instanceof Set}function hr(e){return e.copy_||e.base_}function ci(e,t){if(eo(e))return new Map(e);if(to(e))return new Set(e);if(Array.isArray(e))return Array.prototype.slice.call(e);if(!t&&vd(e))return Jr(e)?{...e}:Object.assign(Object.create(null),e);const n=Object.getOwnPropertyDescriptors(e);delete n[Ta];let r=Reflect.ownKeys(n);for(let o=0;o<r.length;o++){const s=r[o],i=n[s];i.writable===!1&&(i.writable=!0,i.configurable=!0),(i.get||i.set)&&(n[s]={configurable:!0,writable:!0,enumerable:i.enumerable,value:e[s]})}return Object.create(Jr(e),n)}function il(e,t=!1){return ao(e)||Qr(e)||!wr(e)||(Zs(e)>1&&(e.set=e.add=e.clear=e.delete=E_),Object.freeze(e),t&&Rn(e,(n,r)=>il(r,!0))),e}function E_(){Va(2)}function ao(e){return Object.isFrozen(e)}var A_={};function jr(e){const t=A_[e];return t||Va(0,e),t}var Fn;function xd(){return Fn}function P_(e,t){return{drafts_:[],parent_:e,immer_:t,canAutoFreeze_:!0,unfinalizedDrafts_:0}}function ec(e,t){t&&(jr("Patches"),e.patches_=[],e.inversePatches_=[],e.patchListener_=t)}function ui(e){di(e),e.drafts_.forEach(T_),e.drafts_=null}function di(e){e===Fn&&(Fn=e.parent_)}function tc(e){return Fn=P_(Fn,e)}function T_(e){const t=e[Ta];t.type_===0||t.type_===1?t.revoke_():t.revoked_=!0}function ac(e,t){t.unfinalizedDrafts_=t.drafts_.length;const n=t.drafts_[0];return e!==void 0&&e!==n?(n[Ta].modified_&&(ui(t),Va(4)),wr(e)&&(e=js(t,e),t.parent_||Is(t,e)),t.patches_&&jr("Patches").generateReplacementPatches_(n[Ta].base_,e,t.patches_,t.inversePatches_)):e=js(t,n,[]),ui(t),t.patches_&&t.patchListener_(t.patches_,t.inversePatches_),e!==bd?e:void 0}function js(e,t,n){if(ao(t))return t;const r=t[Ta];if(!r)return Rn(t,(o,s)=>rc(e,r,t,o,s,n)),t;if(r.scope_!==e)return t;if(!r.modified_)return Is(e,r.base_,!0),r.base_;if(!r.finalized_){r.finalized_=!0,r.scope_.unfinalizedDrafts_--;const o=r.copy_;let s=o,i=!1;r.type_===3&&(s=new Set(o),o.clear(),i=!0),Rn(s,(u,c)=>rc(e,r,o,u,c,n,i)),Is(e,o,!1),n&&e.patches_&&jr("Patches").generatePatches_(r,n,e.patches_,e.inversePatches_)}return r.copy_}function rc(e,t,n,r,o,s,i){if(Qr(o)){const u=s&&t&&t.type_!==3&&!li(t.assigned_,r)?s.concat(r):void 0,c=js(e,o,u);if(_d(n,r,c),Qr(c))e.canAutoFreeze_=!1;else return}else i&&n.add(o);if(wr(o)&&!ao(o)){if(!e.immer_.autoFreeze_&&e.unfinalizedDrafts_<1)return;js(e,o),(!t||!t.scope_.parent_)&&Is(e,o)}}function Is(e,t,n=!1){!e.parent_&&e.immer_.autoFreeze_&&e.canAutoFreeze_&&il(t,n)}function O_(e,t){const n=Array.isArray(e),r={type_:n?1:0,scope_:t?t.scope_:xd(),modified_:!1,finalized_:!1,assigned_:{},parent_:t,base_:e,draft_:null,copy_:null,revoke_:null,isManual_:!1};let o=r,s=ll;n&&(o=[r],s=Ln);const{revoke:i,proxy:u}=Proxy.revocable(o,s);return r.draft_=u,r.revoke_=i,u}var ll={get(e,t){if(t===Ta)return e;const n=hr(e);if(!li(n,t))return R_(e,n,t);const r=n[t];return e.finalized_||!wr(r)?r:r===So(e.base_,t)?(ko(e),e.copy_[t]=mi(r,e)):r},has(e,t){return t in hr(e)},ownKeys(e){return Reflect.ownKeys(hr(e))},set(e,t,n){const r=wd(hr(e),t);if(r!=null&&r.set)return r.set.call(e.draft_,n),!0;if(!e.modified_){const o=So(hr(e),t),s=o==null?void 0:o[Ta];if(s&&s.base_===n)return e.copy_[t]=n,e.assigned_[t]=!1,!0;if(C_(n,o)&&(n!==void 0||li(e.base_,t)))return!0;ko(e),pi(e)}return e.copy_[t]===n&&(n!==void 0||t in e.copy_)||Number.isNaN(n)&&Number.isNaN(e.copy_[t])||(e.copy_[t]=n,e.assigned_[t]=!0),!0},deleteProperty(e,t){return So(e.base_,t)!==void 0||t in e.base_?(e.assigned_[t]=!1,ko(e),pi(e)):delete e.assigned_[t],e.copy_&&delete e.copy_[t],!0},getOwnPropertyDescriptor(e,t){const n=hr(e),r=Reflect.getOwnPropertyDescriptor(n,t);return r&&{writable:!0,configurable:e.type_!==1||t!=="length",enumerable:r.enumerable,value:n[t]}},defineProperty(){Va(11)},getPrototypeOf(e){return Jr(e.base_)},setPrototypeOf(){Va(12)}},Ln={};Rn(ll,(e,t)=>{Ln[e]=function(){return arguments[0]=arguments[0][0],t.apply(this,arguments)}});Ln.deleteProperty=function(e,t){return Ln.set.call(this,e,t,void 0)};Ln.set=function(e,t,n){return ll.set.call(this,e[0],t,n,e[0])};function So(e,t){const n=e[Ta];return(n?hr(n):e)[t]}function R_(e,t,n){var o;const r=wd(t,n);return r?"value"in r?r.value:(o=r.get)==null?void 0:o.call(e.draft_):void 0}function wd(e,t){if(!(t in e))return;let n=Jr(e);for(;n;){const r=Object.getOwnPropertyDescriptor(n,t);if(r)return r;n=Jr(n)}}function pi(e){e.modified_||(e.modified_=!0,e.parent_&&pi(e.parent_))}function ko(e){e.copy_||(e.copy_=ci(e.base_,e.scope_.immer_.useStrictShallowCopy_))}var F_=class{constructor(e){this.autoFreeze_=!0,this.useStrictShallowCopy_=!1,this.produce=(t,n,r)=>{if(typeof t=="function"&&typeof n!="function"){const s=n;n=t;const i=this;return function(c=s,...l){return i.produce(c,p=>n.call(this,p,...l))}}typeof n!="function"&&Va(6),r!==void 0&&typeof r!="function"&&Va(7);let o;if(wr(t)){const s=tc(this),i=mi(t,void 0);let u=!0;try{o=n(i),u=!1}finally{u?ui(s):di(s)}return ec(s,r),ac(o,s)}else if(!t||typeof t!="object"){if(o=n(t),o===void 0&&(o=t),o===bd&&(o=void 0),this.autoFreeze_&&il(o,!0),r){const s=[],i=[];jr("Patches").generateReplacementPatches_(t,o,s,i),r(s,i)}return o}else Va(1,t)},this.produceWithPatches=(t,n)=>{if(typeof t=="function")return(i,...u)=>this.produceWithPatches(i,c=>t(c,...u));let r,o;return[this.produce(t,n,(i,u)=>{r=i,o=u}),r,o]},typeof(e==null?void 0:e.autoFreeze)=="boolean"&&this.setAutoFreeze(e.autoFreeze),typeof(e==null?void 0:e.useStrictShallowCopy)=="boolean"&&this.setUseStrictShallowCopy(e.useStrictShallowCopy)}createDraft(e){wr(e)||Va(8),Qr(e)&&(e=L_(e));const t=tc(this),n=mi(e,void 0);return n[Ta].isManual_=!0,di(t),n}finishDraft(e,t){const n=e&&e[Ta];(!n||!n.isManual_)&&Va(9);const{scope_:r}=n;return ec(r,t),ac(void 0,r)}setAutoFreeze(e){this.autoFreeze_=e}setUseStrictShallowCopy(e){this.useStrictShallowCopy_=e}applyPatches(e,t){let n;for(n=t.length-1;n>=0;n--){const o=t[n];if(o.path.length===0&&o.op==="replace"){e=o.value;break}}n>-1&&(t=t.slice(n+1));const r=jr("Patches").applyPatches_;return Qr(e)?r(e,t):this.produce(e,o=>r(o,t))}};function mi(e,t){const n=eo(e)?jr("MapSet").proxyMap_(e,t):to(e)?jr("MapSet").proxySet_(e,t):O_(e,t);return(t?t.scope_:xd()).drafts_.push(n),n}function L_(e){return Qr(e)||Va(10,e),jd(e)}function jd(e){if(!wr(e)||ao(e))return e;const t=e[Ta];let n;if(t){if(!t.modified_)return t.base_;t.finalized_=!0,n=ci(e,t.scope_.immer_.useStrictShallowCopy_)}else n=ci(e,!0);return Rn(n,(r,o)=>{_d(n,r,jd(o))}),t&&(t.finalized_=!1),n}var Oa=new F_,Co=Oa.produce;Oa.produceWithPatches.bind(Oa);Oa.setAutoFreeze.bind(Oa);Oa.setUseStrictShallowCopy.bind(Oa);Oa.applyPatches.bind(Oa);Oa.createDraft.bind(Oa);Oa.finishDraft.bind(Oa);let Pr=(e=21)=>crypto.getRandomValues(new Uint8Array(e)).reduce((t,n)=>(n&=63,n<36?t+=n.toString(36):n<62?t+=(n-26).toString(36).toUpperCase():n>62?t+="-":t+="_",t),"");const N_=e=>k.createElement("svg",{width:"1em",height:"1em",viewBox:"0 0 46 46",fill:"none",xmlns:"http://www.w3.org/2000/svg",...e},k.createElement("path",{d:"M4.3125 40.25L4.3125 34.5C4.3125 32.9123 5.59978 31.625 7.1875 31.625L27.3125 31.625C28.9002 31.625 30.1875 32.9123 30.1875 34.5L30.1875 40.25C30.1875 41.8377 28.9002 43.125 27.3125 43.125L7.1875 43.125C5.59978 43.125 4.3125 41.8377 4.3125 40.25ZM27.3125 40.25L27.3125 34.5L7.1875 34.5L7.1875 40.25L27.3125 40.25ZM4.3125 25.875L4.3125 20.125C4.3125 18.5373 5.59978 17.25 7.1875 17.25L38.8125 17.25C40.4002 17.25 41.6875 18.5373 41.6875 20.125L41.6875 25.875C41.6875 27.4627 40.4002 28.75 38.8125 28.75L7.1875 28.75C5.59978 28.75 4.3125 27.4627 4.3125 25.875ZM38.8125 25.875L38.8125 20.125L7.1875 20.125L7.1875 25.875L38.8125 25.875ZM4.3125 11.5L4.3125 5.75C4.3125 4.16228 5.59978 2.875 7.1875 2.875L21.5625 2.875C23.1502 2.875 24.4375 4.16228 24.4375 5.75L24.4375 11.5C24.4375 13.0877 23.1502 14.375 21.5625 14.375L7.1875 14.375C5.59978 14.375 4.3125 13.0877 4.3125 11.5ZM21.5625 11.5L21.5625 5.75L7.1875 5.75L7.1875 11.5L21.5625 11.5Z",fill:"black"})),D_=e=>k.createElement(Ga,{component:N_,...e}),M_=e=>k.createElement("svg",{width:"1em",height:"1em",viewBox:"0 0 46 46",fill:"none",xmlns:"http://www.w3.org/2000/svg",...e},k.createElement("path",{d:"M40.25 41.6875H34.5C32.9123 41.6875 31.625 40.4002 31.625 38.8125V18.6875C31.625 17.0998 32.9123 15.8125 34.5 15.8125H40.25C41.8377 15.8125 43.125 17.0998 43.125 18.6875V38.8125C43.125 40.4002 41.8377 41.6875 40.25 41.6875ZM40.25 18.6875H34.5V38.8125H40.25V18.6875ZM25.875 41.6875H20.125C18.5373 41.6875 17.25 40.4002 17.25 38.8125V7.1875C17.25 5.59978 18.5373 4.3125 20.125 4.3125H25.875C27.4627 4.3125 28.75 5.59978 28.75 7.1875V38.8125C28.75 40.4002 27.4627 41.6875 25.875 41.6875ZM25.875 7.1875H20.125V38.8125H25.875V7.1875ZM11.5 41.6875H5.75C4.16228 41.6875 2.875 40.4002 2.875 38.8125V24.4375C2.875 22.8498 4.16228 21.5625 5.75 21.5625H11.5C13.0877 21.5625 14.375 22.8498 14.375 24.4375V38.8125C14.375 40.4002 13.0877 41.6875 11.5 41.6875ZM11.5 24.4375H5.75V38.8125H11.5V24.4375Z",fill:"black"})),W_=e=>k.createElement(Ga,{component:M_,...e}),B_=e=>k.createElement("svg",{t:1703229150722,className:"icon",viewBox:"0 0 1024 1024",xmlns:"http://www.w3.org/2000/svg","p-id":7380,xmlnsXlink:"http://www.w3.org/1999/xlink",width:"1em",height:"1em",...e},k.createElement("path",{d:"M193.207547 193.207547h637.584906v637.584906H193.207547z",fill:"#A8A8A8","p-id":7381}),k.createElement("path",{d:"M212.528302 212.528302h135.245283v135.245283h-135.245283z",fill:"#EAEAEA","p-id":7382}),k.createElement("path",{d:"M367.09434 212.528302h135.245283v135.245283h-135.245283z",fill:"#D6D6D6","p-id":7383}),k.createElement("path",{d:"M521.660377 212.528302h135.245283v135.245283h-135.245283z",fill:"#FFFFFF","p-id":7384}),k.createElement("path",{d:"M676.226415 212.528302h135.245283v135.245283h-135.245283z",fill:"#F5F5F5","p-id":7385}),k.createElement("path",{d:"M212.528302 367.09434h135.245283v135.245283h-135.245283z",fill:"#FFFFFF","p-id":7386}),k.createElement("path",{d:"M367.09434 367.09434h135.245283v135.245283h-135.245283z",fill:"#EAEAEA","p-id":7387}),k.createElement("path",{d:"M521.660377 367.09434h135.245283v135.245283h-135.245283z",fill:"#D6D6D6","p-id":7388}),k.createElement("path",{d:"M676.226415 367.09434h135.245283v135.245283h-135.245283z m-463.698113 154.566037h135.245283v135.245283h-135.245283z",fill:"#EAEAEA","p-id":7389}),k.createElement("path",{d:"M367.09434 521.660377h135.245283v135.245283h-135.245283z",fill:"#E0E0E0","p-id":7390}),k.createElement("path",{d:"M521.660377 521.660377h135.245283v135.245283h-135.245283z",fill:"#FFFFFF","p-id":7391}),k.createElement("path",{d:"M676.226415 521.660377h135.245283v135.245283h-135.245283z",fill:"#E0E0E0","p-id":7392}),k.createElement("path",{d:"M212.528302 676.226415h135.245283v135.245283h-135.245283z",fill:"#D6D6D6","p-id":7393}),k.createElement("path",{d:"M367.09434 676.226415h135.245283v135.245283h-135.245283z m154.566037 0h135.245283v135.245283h-135.245283z",fill:"#EAEAEA","p-id":7394}),k.createElement("path",{d:"M676.226415 676.226415h135.245283v135.245283h-135.245283z",fill:"#F5F5F5","p-id":7395})),$_=e=>k.createElement(Ga,{component:B_,...e}),V_=e=>k.createElement("svg",{t:1703229074111,className:"icon",viewBox:"0 0 1024 1024",xmlns:"http://www.w3.org/2000/svg","p-id":4234,xmlnsXlink:"http://www.w3.org/1999/xlink",width:"1em",height:"1em",...e},k.createElement("path",{d:"M416 896V128h192v768h-192zM128 896V448h192v448H128z m576 0V320h192v576h-192z",fill:"#606266","p-id":4235})),q_=e=>k.createElement(Ga,{component:V_,...e}),z_=e=>k.createElement("svg",{width:"1em",height:"1em",viewBox:"0 0 46 46",fill:"none",xmlns:"http://www.w3.org/2000/svg",...e},k.createElement("path",{d:"M37.1863 33.3111H8.81367C6.48223 33.3111 4.58203 31.4109 4.58203 29.0795V11.3488C4.58203 9.01738 6.48223 7.11719 8.81367 7.11719H37.1863C39.5178 7.11719 41.418 9.01738 41.418 11.3488V29.0795C41.418 31.4109 39.5178 33.3111 37.1863 33.3111ZM8.81367 10.2617C8.21621 10.2617 7.72656 10.7514 7.72656 11.3488V29.0795C7.72656 29.677 8.21621 30.1666 8.81367 30.1666H37.1863C37.7838 30.1666 38.2734 29.677 38.2734 29.0795V11.3488C38.2734 10.7514 37.7838 10.2617 37.1863 10.2617H8.81367ZM32.9906 38.8904H13.0094C12.1424 38.8904 11.4371 38.1852 11.4371 37.3182C11.4371 36.4512 12.1424 35.7459 13.0094 35.7459H32.9906C33.8576 35.7459 34.5629 36.4512 34.5629 37.3182C34.5629 38.1852 33.8576 38.8904 32.9906 38.8904Z",fill:"black"}),k.createElement("path",{d:"M12.6815 25.2247C12.2772 25.2247 11.8774 25.0719 11.5719 24.762C10.9565 24.1465 10.9565 23.1538 11.5719 22.5383L18.4495 15.6608C19.0649 15.0454 20.0577 15.0454 20.6731 15.6608L26.4411 21.4288L32.209 15.6653C32.8245 15.0499 33.8172 15.0499 34.4327 15.6653C35.0481 16.2807 35.0481 17.2735 34.4327 17.8889L27.5506 24.762C26.9352 25.3774 25.9424 25.3774 25.327 24.762L19.559 18.9985L13.7911 24.762C13.4856 25.0719 13.0858 25.2247 12.6815 25.2247Z",fill:"black"}),k.createElement("path",{d:"M33.3186 25.215C32.4516 25.215 31.7463 24.5098 31.7463 23.6428V18.3555H26.459C25.592 18.3555 24.8867 17.6502 24.8867 16.7832C24.8867 15.9162 25.592 15.2109 26.459 15.2109H33.3186C34.1855 15.2109 34.8908 15.9162 34.8908 16.7832V23.6428C34.8908 24.5098 34.1855 25.215 33.3186 25.215Z",fill:"black"})),G_=e=>k.createElement(Ga,{component:z_,...e}),U_=e=>k.createElement("svg",{width:"1em",height:"1em",viewBox:"0 0 50 29",fill:"none",xmlns:"http://www.w3.org/2000/svg",...e},k.createElement("rect",{x:.5,y:.5,width:15,height:28,stroke:"black",fill:"transparent",strokeDasharray:"2 2"}),k.createElement("rect",{x:18,width:32,height:29,fill:"#D0D0D0"})),H_=e=>k.createElement(Ga,{component:U_,...e}),K_=e=>k.createElement("svg",{width:"1em",height:"1em",viewBox:"0 0 46 46",fill:"none",xmlns:"http://www.w3.org/2000/svg",...e},k.createElement("path",{d:"M41 40H7.57143C6.88944 40 6.23539 39.7366 5.75315 39.2678C5.27092 38.7989 5 38.163 5 37.5V5H7.57143V37.5H41V40Z",fill:"black"}),k.createElement("path",{d:"M21.4933 12.2787L19.1905 8.40375V5H16.7143V8.40375L14.4114 12.2787C13.4876 13.8333 12.9997 15.6121 13 17.425V17.5775C12.9997 19.39 13.4876 21.1684 14.4114 22.7225L16.7143 26.5975V35H19.1905V26.5963L21.4933 22.7213C22.4172 21.1667 22.9051 19.3879 22.9048 17.575V17.4225C22.905 15.61 22.4172 13.8328 21.4933 12.2787ZM17.9524 11.1788L19.37 13.5662C19.8565 14.3907 20.1818 15.3018 20.3283 16.25H15.5752C15.7218 15.3014 16.0471 14.3899 16.5335 13.565L17.9524 11.1788ZM17.9524 23.8212L16.5348 21.4338C16.0483 20.6093 15.723 19.6982 15.5765 18.75H20.3283C20.1818 19.6986 19.8565 20.6101 19.37 21.435L17.9524 23.8212ZM37.5886 17.2787L35.2857 13.4037V5H32.8095V13.4037L30.5067 17.2787C29.5828 18.8333 29.0949 20.6121 29.0952 22.425V22.5775C29.095 24.39 29.5828 26.1684 30.5067 27.7225L32.8095 31.5975V35H35.2857V31.5963L37.5886 27.7213C38.5124 26.1667 39.0003 24.3879 39 22.575V22.4225C39.0003 20.61 38.5124 18.8316 37.5886 17.2775M34.0476 16.1775L35.4652 18.5637C35.952 19.389 36.2773 20.3009 36.4235 21.25H31.673C31.8191 20.3015 32.144 19.39 32.63 18.565L34.0476 16.1775ZM34.0476 28.8188L32.63 26.4338C32.1435 25.6093 31.8182 24.6982 31.6717 23.75H36.4223C36.2761 24.6985 35.9513 25.61 35.4652 26.435L34.0476 28.8188Z",fill:"black"})),Y_=e=>k.createElement(Ga,{component:K_,...e}),ro=Symbol("STOP");function un(e,t){var r;!e||t(e)===ro||"children"in e&&((r=e.children)==null||r.forEach(o=>un(o,t)))}un.STOP=ro;function ts(e,t){let n=null;return un(e,r=>{if(r.id===t)return n=r,ro}),n}function J_(e,t){let n=null;return un(e,r=>{var o;if((o=r.children)!=null&&o.some(s=>s.id===t))return n=r,ro}),n}function Id(e){const t={name:e("pages.analysis-template.pages.visual-edit.add-panel.normal"),components:[{name:e("pages.analysis-template.pages.visual-edit.add-panel.text"),icon:a.jsx(Fm,{}),defaultConfig:{type:"text",props:{content:e("pages.analysis-template.pages.visual-edit.add-panel.text"),level:Aa.Text}}},{name:e("pages.analysis-template.pages.visual-edit.add-panel.table"),icon:a.jsx(Mi,{}),defaultConfig:{type:"table",props:{pagination:{pageSize:0},config:[{name:e("pages.analysis-template.pages.visual-edit.settings.form.overview.default-name")+"1",key:"key1"},{name:e("pages.analysis-template.pages.visual-edit.settings.form.overview.default-name")+"2",key:"key2"},{name:e("pages.analysis-template.pages.visual-edit.settings.form.overview.default-name")+"3",key:"key3"}]}}},{name:e("pages.analysis-template.pages.visual-edit.add-panel.overview"),icon:a.jsx(G_,{}),defaultConfig:{type:"overview",props:{column:3,config:[{name:e("pages.analysis-template.pages.visual-edit.settings.form.overview.default-name")+"1",key:"key1"},{name:e("pages.analysis-template.pages.visual-edit.settings.form.overview.default-name")+"2",key:"key2"},{name:e("pages.analysis-template.pages.visual-edit.settings.form.overview.default-name")+"3",key:"key3"}]}}}]},n={name:e("pages.analysis-template.pages.visual-edit.add-panel.chart"),components:[{name:e("pages.analysis-template.pages.visual-edit.add-panel.line-chart"),icon:a.jsx(Lm,{}),defaultConfig:{type:"chart",props:{type:"line",xAxis:{field:"x"},yAxis:{field:"y"},legend:!0,tooltip:!0}}},{name:e("pages.analysis-template.pages.visual-edit.add-panel.area-chart"),icon:a.jsx(Nm,{}),defaultConfig:{type:"chart",props:{type:"area",xAxis:{field:"x"},yAxis:{field:"y"},legend:!0,tooltip:!0}}},{name:e("pages.analysis-template.pages.visual-edit.add-panel.bar-chart"),icon:a.jsx(D_,{}),defaultConfig:{type:"chart",props:{type:"bar",xAxis:{field:"x"},yAxis:{field:"y"},legend:!0,tooltip:!0}}},{name:e("pages.analysis-template.pages.visual-edit.add-panel.column-chart"),icon:a.jsx(W_,{}),defaultConfig:{type:"chart",props:{type:"column",xAxis:{field:"x"},yAxis:{field:"y"},legend:!0,tooltip:!0}}},{name:e("pages.analysis-template.pages.visual-edit.add-panel.histogram-chart"),icon:a.jsx(q_,{}),defaultConfig:{type:"chart",props:{type:"histogram",binField:"value",binWidth:1,legend:!0,tooltip:!0}}},{name:e("pages.analysis-template.pages.visual-edit.add-panel.heatmap-chart"),icon:a.jsx($_,{}),defaultConfig:{type:"chart",props:{type:"heatmap",xAxis:{field:"x"},yAxis:{field:"y"},valueField:"value",legend:!0,tooltip:!0}}},{name:e("pages.analysis-template.pages.visual-edit.add-panel.pie-chart"),icon:a.jsx(Dm,{}),defaultConfig:{type:"chart",props:{type:"pie",legend:!0,tooltip:!0,nameField:"name",valueField:"value"}}},{name:e("pages.analysis-template.pages.visual-edit.add-panel.violin-chart"),icon:a.jsx(Y_,{}),defaultConfig:{type:"chart",props:{type:"violin",xAxis:{field:"x"},yAxis:{field:"y"},legend:!0,tooltip:!0}}}]},r={name:e("pages.analysis-template.pages.visual-edit.add-panel.container"),components:[{name:e("pages.analysis-template.pages.visual-edit.add-panel.row"),icon:a.jsx(H_,{}),defaultConfig:{type:"row",props:{layout:za.DivideThree,minHeight:300},children:[cl()]}}]};return{Normal:t,Charts:n,Containers:r}}function Sd(e){const t=Ef(e);return un(t,n=>{n.id=Pr()}),t}function cl(){return{id:Pr(),type:"_placeholder",props:{}}}const Q_=(...e)=>ol.all(e,{arrayMerge:(t,n)=>n}),[X_,Tr]=Xr(e=>{const{config:t,setConfig:n}=e,[r,o]=k.useState(!1),s=k.useCallback(I=>{o(!0),n(I)},[n]),[i,u]=k.useState(null),[c,l]=k.useState(null),p=k.useMemo(()=>{const I=new Map;return un(t.layout,w=>{var A;"children"in w&&((A=w.children)==null||A.forEach(f=>{I.set(f.id,w)}))}),I},[t.layout]),d=k.useMemo(()=>c?ts(t.layout,c):null,[c,t.layout]),m=k.useMemo(()=>{if(!d)return[];const I=[];let w=d;for(;p.has(w.id);)I.unshift(w),w=p.get(w.id);return I.unshift(w),I},[d,p]),h=k.useCallback(I=>ts(t.layout,I),[t.layout]),b=k.useCallback((I,w)=>{s(Co(A=>{const f=ts(A.layout,I);f&&Object.assign(f,Q_(f,w))}))},[s]),y=k.useCallback((I,w={})=>{s(Co(A=>{var j,C;const f=J_(A.layout,I);f&&(w.fillPlaceholder?f.children=(C=f.children)==null?void 0:C.map(g=>g.id===I?cl():g):f.children=(j=f.children)==null?void 0:j.filter(g=>g.id!==I))}))},[s]),x=k.useCallback((I,w,A)=>{s(Co(f=>{const j=ts(f.layout,I);j&&(j.children||(j.children=[]),qi(A)&&(A=j.children.length),j.children[A]={...w,id:Pr()})}))},[s]);return{isDirty:r,setIsDirty:o,parentMap:p,activeNodePath:m,config:t,hoverId:i,setHoverId:u,activeId:c,activeNode:d,setActiveId:l,getById:h,updateById:b,removeById:y,insertIn:x}});function Z_(e){return t=>{e.forEach(n=>{typeof n=="function"?n(t):n!=null&&(n.current=t)})}}const er="$$root$$",Ss="visual-editor-root-element",kd=jt.createContext({node:null}),Cd=jt.createContext({});function Ed(e){const{node:t}=jt.useContext(kd),n=jt.useContext(Cd),{hoverId:r,activeId:o,setActiveId:s,removeById:i,getById:u}=Tr(),c=e?u(e):t,l=r===(c==null?void 0:c.id),p=o===(c==null?void 0:c.id),d=ea(h=>{c&&(h==null||h.stopPropagation(),s(c.id))}),m=ea(h=>{c&&(h==null||h.stopPropagation(),i(c.id,n))});return{node:c,isHover:l,isActive:p,active:d,remove:m}}const e0="_decorator_15gk3_1",t0="_action_15gk3_8",a0="_actionTop_15gk3_15",r0="_actionBottom_15gk3_18",n0="_sort_15gk3_21",Wr={decorator:e0,action:t0,actionTop:a0,actionBottom:r0,sort:n0},dn=k.forwardRef((e,t)=>{const{children:n,item:r,sortContainer:o,activatable:s=!0,idPath:i,index:u,...c}=e,{isActive:l,isHover:p,active:d,remove:m}=Ed(r.id),[h,b]=k.useState(),y=k.useRef(null);k.useLayoutEffect(()=>{if(!y.current||!l)return;const _=y.current.getBoundingClientRect(),P=document.querySelector(`.${Ss}`).getBoundingClientRect();b(_.top-P.top<24?"bottom":"top")},[l]);const x=im({id:e.item.id}),{setNodeRef:I,transform:w,transition:A,listeners:f,attributes:j,isDragging:C,setActivatorNodeRef:g}=x,E=k.useMemo(()=>{const _={position:"relative",touchAction:"none",transform:`translate3d(${(w==null?void 0:w.x)||0}px, ${(w==null?void 0:w.y)||0}px, 0)`,transition:`${w?"all 200ms ease":""}`},S={transition:A,opacity:"0.4",zIndex:10,transform:`translate3d(${(w==null?void 0:w.x)||0}px, ${(w==null?void 0:w.y)||0}px, 0)`};return C?{..._,...S,...e.style}:{..._,...e.style}},[C,w,A,e.style]),v=o?a.jsx(qc,{items:r.children??[],strategy:o==="horizontal"?lm:zc,id:r.id,children:n}):n;return a.jsx(kd.Provider,{value:{node:r},children:a.jsxs("div",{...c,className:Wt(Wr.decorator,{active:s&&l,hover:s&&p},c.className),ref:Z_([I,y,t]),onClick:s?d:void 0,"data-editor-element-id":r.id,"data-editor-element-activatable":s,style:E,...j,children:[a.jsxs(it,{direction:"horizontal",size:"small",className:Wt(Wr.action,{[Wr.actionTop]:h==="top",[Wr.actionBottom]:h==="bottom"}),children:[a.jsx(Ae,{size:"small",type:"primary",...f,className:Wr.sort,icon:a.jsx(Mm,{}),ref:g}),a.jsx(Ae,{icon:a.jsx(Li,{}),size:"small",type:"primary",className:Wr.remove,onClick:m})]}),v]})})}),s0="_placeholder_1k4px_1",o0={placeholder:s0},i0=e=>{const{index:t,item:n}=e,{t:r}=Z(),{insertIn:o,parentMap:s}=Tr(),i=k.useMemo(()=>{const{Normal:l,Charts:p}=Id(r);return[l,p]},[r]),u=s.get(n.id),c=k.useCallback(l=>{u&&o(u.id,Sd(l.defaultConfig),t)},[t,o,u]);return a.jsx(dn,{...e,activatable:!1,children:a.jsx("div",{className:o0.placeholder,children:a.jsx(gd,{componentGroups:i,onAdd:c})})})};function l0(e){return a.jsx(dn,{...e,children:e.children})}function c0(e){return a.jsx(dn,{...e,children:e.children})}const ul=jt.createContext(null);function fi(e){return new Proxy({},{get(){return e}})}const as=[{x:"2018/8/1",group:"download",y:4623},{x:"2018/8/1",group:"register",y:2208},{x:"2018/8/1",group:"bill",y:182},{x:"2018/8/2",group:"download",y:6145},{x:"2018/8/2",group:"register",y:2016},{x:"2018/8/2",group:"bill",y:257},{x:"2018/8/3",group:"download",y:508},{x:"2018/8/3",group:"register",y:2916},{x:"2018/8/3",group:"bill",y:289},{x:"2018/8/4",group:"download",y:6268},{x:"2018/8/4",group:"register",y:4512},{x:"2018/8/4",group:"bill",y:428},{x:"2018/8/5",group:"download",y:6411},{x:"2018/8/5",group:"register",y:8281},{x:"2018/8/5",group:"bill",y:619},{x:"2018/8/6",group:"download",y:1890},{x:"2018/8/6",group:"register",y:2008},{x:"2018/8/6",group:"bill",y:87},{x:"2018/8/7",group:"download",y:4251},{x:"2018/8/7",group:"register",y:1963},{x:"2018/8/7",group:"bill",y:706},{x:"2018/8/8",group:"download",y:2978},{x:"2018/8/8",group:"register",y:2367},{x:"2018/8/8",group:"bill",y:387},{x:"2018/8/9",group:"download",y:3880},{x:"2018/8/9",group:"register",y:2956},{x:"2018/8/9",group:"bill",y:488},{x:"2018/8/10",group:"download",y:3606},{x:"2018/8/10",group:"register",y:678},{x:"2018/8/10",group:"bill",y:507},{x:"2018/8/11",group:"download",y:4311},{x:"2018/8/11",group:"register",y:3188},{x:"2018/8/11",group:"bill",y:548},{x:"2018/8/12",group:"download",y:4116},{x:"2018/8/12",group:"register",y:3491},{x:"2018/8/12",group:"bill",y:456},{x:"2018/8/13",group:"download",y:6419},{x:"2018/8/13",group:"register",y:2852},{x:"2018/8/13",group:"bill",y:689},{x:"2018/8/14",group:"download",y:1643},{x:"2018/8/14",group:"register",y:4788},{x:"2018/8/14",group:"bill",y:280},{x:"2018/8/15",group:"download",y:445},{x:"2018/8/15",group:"register",y:4319},{x:"2018/8/15",group:"bill",y:176}],u0=[{x:"hot dog",value:70,y:"AD"},{x:"burger",value:54,y:"AD"},{x:"sandwich",value:49,y:"AD"},{x:"kebab",value:4,y:"AD"},{x:"fries",value:11,y:"AD"},{x:"donut",value:68,y:"AD"},{x:"junk",value:49,y:"AD"},{x:"sushi",value:47,y:"AD"},{x:"ramen",value:64,y:"AD"},{x:"curry",value:51,y:"AD"},{x:"udon",value:6,y:"AD"},{x:"hot dog",value:45,y:"AE"},{x:"burger",value:97,y:"AE"},{x:"sandwich",value:69,y:"AE"},{x:"kebab",value:68,y:"AE"},{x:"fries",value:14,y:"AE"},{x:"donut",value:93,y:"AE"},{x:"junk",value:0,y:"AE"},{x:"sushi",value:84,y:"AE"},{x:"ramen",value:57,y:"AE"},{x:"curry",value:73,y:"AE"},{x:"udon",value:73,y:"AE"},{x:"hot dog",value:43,y:"AF"},{x:"burger",value:61,y:"AF"},{x:"sandwich",value:28,y:"AF"},{x:"kebab",value:12,y:"AF"},{x:"fries",value:22,y:"AF"},{x:"donut",value:54,y:"AF"},{x:"junk",value:90,y:"AF"},{x:"sushi",value:24,y:"AF"},{x:"ramen",value:72,y:"AF"},{x:"curry",value:40,y:"AF"},{x:"udon",value:78,y:"AF"},{x:"hot dog",value:35,y:"AG"},{x:"burger",value:6,y:"AG"},{x:"sandwich",value:64,y:"AG"},{x:"kebab",value:92,y:"AG"},{x:"fries",value:45,y:"AG"},{x:"donut",value:88,y:"AG"},{x:"junk",value:44,y:"AG"},{x:"sushi",value:16,y:"AG"},{x:"ramen",value:0,y:"AG"},{x:"curry",value:75,y:"AG"},{x:"udon",value:57,y:"AG"},{x:"hot dog",value:3,y:"AI"},{x:"burger",value:6,y:"AI"},{x:"sandwich",value:34,y:"AI"},{x:"kebab",value:72,y:"AI"},{x:"fries",value:21,y:"AI"},{x:"donut",value:30,y:"AI"},{x:"junk",value:99,y:"AI"},{x:"sushi",value:40,y:"AI"},{x:"ramen",value:1,y:"AI"},{x:"curry",value:70,y:"AI"},{x:"udon",value:58,y:"AI"},{x:"hot dog",value:40,y:"AL"},{x:"burger",value:90,y:"AL"},{x:"sandwich",value:24,y:"AL"},{x:"kebab",value:69,y:"AL"},{x:"fries",value:97,y:"AL"},{x:"donut",value:70,y:"AL"},{x:"junk",value:49,y:"AL"},{x:"sushi",value:90,y:"AL"},{x:"ramen",value:92,y:"AL"},{x:"curry",value:90,y:"AL"},{x:"udon",value:65,y:"AL"},{x:"hot dog",value:72,y:"AM"},{x:"burger",value:47,y:"AM"},{x:"sandwich",value:30,y:"AM"},{x:"kebab",value:51,y:"AM"},{x:"fries",value:23,y:"AM"},{x:"donut",value:63,y:"AM"},{x:"junk",value:30,y:"AM"},{x:"sushi",value:43,y:"AM"},{x:"ramen",value:8,y:"AM"},{x:"curry",value:49,y:"AM"},{x:"udon",value:61,y:"AM"},{x:"hot dog",value:83,y:"AO"},{x:"burger",value:6,y:"AO"},{x:"sandwich",value:17,y:"AO"},{x:"kebab",value:40,y:"AO"},{x:"fries",value:61,y:"AO"},{x:"donut",value:72,y:"AO"},{x:"junk",value:61,y:"AO"},{x:"sushi",value:50,y:"AO"},{x:"ramen",value:77,y:"AO"},{x:"curry",value:97,y:"AO"},{x:"udon",value:17,y:"AO"},{x:"hot dog",value:15,y:"AQ"},{x:"burger",value:34,y:"AQ"},{x:"sandwich",value:26,y:"AQ"},{x:"kebab",value:80,y:"AQ"},{x:"fries",value:100,y:"AQ"},{x:"donut",value:97,y:"AQ"},{x:"junk",value:34,y:"AQ"},{x:"sushi",value:81,y:"AQ"},{x:"ramen",value:25,y:"AQ"},{x:"curry",value:100,y:"AQ"},{x:"udon",value:56,y:"AQ"}],d0=[{value:1.2},{value:3.4},{value:3.7},{value:4.3},{value:5.2},{value:5.8},{value:6.1},{value:6.5},{value:6.8},{value:7.1},{value:7.3},{value:7.7},{value:8.3},{value:8.6},{value:8.8},{value:9.1},{value:9.2},{value:9.4},{value:9.5},{value:9.7},{value:10.5},{value:10.7},{value:10.8},{value:11},{value:11},{value:11.1},{value:11.2},{value:11.3},{value:11.4},{value:11.4},{value:11.7},{value:12},{value:12.9},{value:12.9},{value:13.3},{value:13.7},{value:13.8},{value:13.9},{value:14},{value:14.2},{value:14.5},{value:15},{value:15.2},{value:15.6},{value:16},{value:16.3},{value:17.3},{value:17.5},{value:17.9},{value:18},{value:18},{value:20.6},{value:21},{value:23.4}],p0=[{stack:"Ideal",value:61.4},{stack:"Good",value:64},{stack:"Ideal",value:59.2},{stack:"Ideal",value:60.9},{stack:"Premium",value:61.4},{stack:"Ideal",value:62.4},{stack:"Ideal",value:61.3},{stack:"Ideal",value:62.4},{stack:"Premium",value:62.5},{stack:"Premium",value:62.5},{stack:"Very-Good",value:62.9},{stack:"Ideal",value:61.2},{stack:"Ideal",value:62.2},{stack:"Very-Good",value:62.3},{stack:"Very-Good",value:63.4},{stack:"Ideal",value:61.8},{stack:"Ideal",value:61.7},{stack:"Very-Good",value:62.1},{stack:"Very-Good",value:60.7},{stack:"Ideal",value:61.8},{stack:"Very-Good",value:61.7},{stack:"Premium",value:61.1},{stack:"Very-Good",value:58.1},{stack:"Very-Good",value:62.2},{stack:"Very-Good",value:60.5},{stack:"Ideal",value:61.4},{stack:"Ideal",value:61.7},{stack:"Fair",value:66},{stack:"Very-Good",value:61.5},{stack:"Very-Good",value:63},{stack:"Premium",value:60.2},{stack:"Very-Good",value:63},{stack:"Very-Good",value:60.4},{stack:"Premium",value:61.2},{stack:"Very-Good",value:59.6},{stack:"Ideal",value:61.6},{stack:"Fair",value:64.7},{stack:"Ideal",value:61.1},{stack:"Premium",value:62},{stack:"Ideal",value:62.6},{stack:"Ideal",value:62.3},{stack:"Ideal",value:62.4},{stack:"Ideal",value:61},{stack:"Very-Good",value:59.4},{stack:"Very-Good",value:63.1},{stack:"Ideal",value:62.5},{stack:"Premium",value:61.5},{stack:"Ideal",value:62.1},{stack:"Very-Good",value:63.4},{stack:"Premium",value:61.4},{stack:"Ideal",value:63.8},{stack:"Ideal",value:62.7},{stack:"Ideal",value:62},{stack:"Premium",value:59.1},{stack:"Premium",value:59.3},{stack:"Premium",value:61.2},{stack:"Good",value:63.6},{stack:"Premium",value:61.9},{stack:"Premium",value:62.2},{stack:"Very-Good",value:63.1},{stack:"Premium",value:62.9},{stack:"Ideal",value:62},{stack:"Ideal",value:60.6},{stack:"Ideal",value:61.5},{stack:"Very-Good",value:61.4},{stack:"Very-Good",value:62.9},{stack:"Ideal",value:62.3},{stack:"Ideal",value:63},{stack:"Good",value:63.5},{stack:"Very-Good",value:59.6},{stack:"Ideal",value:62.6},{stack:"Ideal",value:62.9},{stack:"Ideal",value:61.4},{stack:"Ideal",value:61.3},{stack:"Very-Good",value:62.7},{stack:"Very-Good",value:61.9},{stack:"Ideal",value:62.2},{stack:"Fair",value:64.8},{stack:"Very-Good",value:59.3},{stack:"Ideal",value:60.1},{stack:"Ideal",value:62.3},{stack:"Ideal",value:64},{stack:"Premium",value:61.2},{stack:"Very-Good",value:61.5},{stack:"Ideal",value:61.8},{stack:"Ideal",value:62.1},{stack:"Ideal",value:61.7},{stack:"Ideal",value:61.5},{stack:"Very-Good",value:62.4},{stack:"Very-Good",value:61.2},{stack:"Premium",value:62.2},{stack:"Premium",value:60.8},{stack:"Good",value:56.9},{stack:"Very-Good",value:58.6},{stack:"Ideal",value:61.8},{stack:"Ideal",value:62.4},{stack:"Ideal",value:61.3},{stack:"Premium",value:60.9},{stack:"Premium",value:62.9},{stack:"Ideal",value:61.2}],rs=[{x:"2010",y:782},{x:"2011",y:1089},{x:"2012",y:745},{x:"2013",y:680},{x:"2014",y:802},{x:"2015",y:697},{x:"2016",y:583},{x:"2017",y:456},{x:"2018",y:524},{x:"2019",y:398},{x:"2020",y:278},{x:"2021",y:195},{x:"2022",y:145},{x:"2023",y:207}],m0=[{name:"分类一",value:27},{name:"分类二",value:25},{name:"分类三",value:18},{name:"分类四",value:15},{name:"分类五",value:10},{name:"其他",value:5}],nc=[{x:"1991",y:3,stack:"Lon"},{x:"1992",y:4,stack:"Lon"},{x:"1993",y:3.5,stack:"Lon"},{x:"1994",y:5,stack:"Lon"},{x:"1995",y:4.9,stack:"Lon"},{x:"1996",y:6,stack:"Lon"},{x:"1997",y:7,stack:"Lon"},{x:"1998",y:9,stack:"Lon"},{x:"1999",y:13,stack:"Lon"},{x:"1991",y:3,stack:"Bor"},{x:"1992",y:4,stack:"Bor"},{x:"1993",y:3.5,stack:"Bor"},{x:"1994",y:5,stack:"Bor"},{x:"1995",y:4.9,stack:"Bor"},{x:"1996",y:6,stack:"Bor"},{x:"1997",y:7,stack:"Bor"},{x:"1998",y:9,stack:"Bor"},{x:"1999",y:13,stack:"Bor"}],sc=[{group:"文科",x:"Jan.",y:70,stack:"语文"},{group:"理科",x:"Jan.",y:67,stack:"数学"},{group:"文科",x:"Jan.",y:90.5,stack:"英语"},{group:"文科",x:"Jan.",y:62.4,stack:"美术"},{group:"理科",x:"Jan.",y:72.4,stack:"线性代数"},{group:"文科",x:"Feb.",y:82.5,stack:"语文"},{group:"理科",x:"Feb.",y:65.5,stack:"数学"},{group:"文科",x:"Feb.",y:79,stack:"英语"},{group:"文科",x:"Feb.",y:81.5,stack:"美术"},{group:"理科",x:"Feb.",y:82.4,stack:"线性代数"},{group:"文科",x:"Mar.",y:77.5,stack:"英语"},{group:"理科",x:"Mar.",y:65.5,stack:"数学"},{group:"文科",x:"Mar.",y:72,stack:"语文"},{group:"文科",x:"Mar.",y:85.4,stack:"美术"},{group:"理科",x:"Mar.",y:82.5,stack:"线性代数"}],oc=[{group:"I. setosa",x:"PetalWidth",y:.2},{group:"I. setosa",x:"PetalLength",y:1.4},{group:"I. setosa",x:"SepalWidth",y:3.5},{group:"I. setosa",x:"SepalLength",y:5.1},{group:"I. setosa",x:"PetalWidth",y:.2},{group:"I. setosa",x:"PetalLength",y:1.4},{group:"I. setosa",x:"SepalWidth",y:3},{group:"I. setosa",x:"SepalLength",y:4.9},{group:"I. setosa",x:"PetalWidth",y:.2},{group:"I. setosa",x:"PetalLength",y:1.3},{group:"I. setosa",x:"SepalWidth",y:3.2},{group:"I. setosa",x:"SepalLength",y:4.7},{group:"I. setosa",x:"PetalWidth",y:.2},{group:"I. setosa",x:"PetalLength",y:1.5},{group:"I. setosa",x:"SepalWidth",y:3.1},{group:"I. setosa",x:"SepalLength",y:4.6},{group:"I. setosa",x:"PetalWidth",y:.2},{group:"I. setosa",x:"PetalLength",y:1.4},{group:"I. setosa",x:"SepalWidth",y:3.6},{group:"I. setosa",x:"SepalLength",y:5},{group:"I. setosa",x:"PetalWidth",y:.4},{group:"I. setosa",x:"PetalLength",y:1.7},{group:"I. setosa",x:"SepalWidth",y:3.9},{group:"I. setosa",x:"SepalLength",y:5.4},{group:"I. setosa",x:"PetalWidth",y:.3},{group:"I. setosa",x:"PetalLength",y:1.4},{group:"I. setosa",x:"SepalWidth",y:3.4},{group:"I. setosa",x:"SepalLength",y:4.6},{group:"I. setosa",x:"PetalWidth",y:.2},{group:"I. setosa",x:"PetalLength",y:1.5},{group:"I. setosa",x:"SepalWidth",y:3.4},{group:"I. setosa",x:"SepalLength",y:5},{group:"I. setosa",x:"PetalWidth",y:.2},{group:"I. setosa",x:"PetalLength",y:1.4},{group:"I. setosa",x:"SepalWidth",y:2.9},{group:"I. setosa",x:"SepalLength",y:4.4},{group:"I. setosa",x:"PetalWidth",y:.1},{group:"I. setosa",x:"PetalLength",y:1.5},{group:"I. setosa",x:"SepalWidth",y:3.1},{group:"I. setosa",x:"SepalLength",y:4.9},{group:"I. setosa",x:"PetalWidth",y:.2},{group:"I. setosa",x:"PetalLength",y:1.5},{group:"I. setosa",x:"SepalWidth",y:3.7},{group:"I. setosa",x:"SepalLength",y:5.4},{group:"I. setosa",x:"PetalWidth",y:.2},{group:"I. setosa",x:"PetalLength",y:1.6},{group:"I. setosa",x:"SepalWidth",y:3.4},{group:"I. setosa",x:"SepalLength",y:4.8},{group:"I. setosa",x:"PetalWidth",y:.1},{group:"I. setosa",x:"PetalLength",y:1.4},{group:"I. setosa",x:"SepalWidth",y:3},{group:"I. setosa",x:"SepalLength",y:4.8},{group:"I. setosa",x:"PetalWidth",y:.1},{group:"I. setosa",x:"PetalLength",y:1.1},{group:"I. setosa",x:"SepalWidth",y:3},{group:"I. setosa",x:"SepalLength",y:4.3},{group:"I. setosa",x:"PetalWidth",y:.2},{group:"I. setosa",x:"PetalLength",y:1.2},{group:"I. setosa",x:"SepalWidth",y:4},{group:"I. setosa",x:"SepalLength",y:5.8},{group:"I. setosa",x:"PetalWidth",y:.4},{group:"I. setosa",x:"PetalLength",y:1.5},{group:"I. setosa",x:"SepalWidth",y:4.4},{group:"I. setosa",x:"SepalLength",y:5.7},{group:"I. setosa",x:"PetalWidth",y:.4},{group:"I. setosa",x:"PetalLength",y:1.3},{group:"I. setosa",x:"SepalWidth",y:3.9},{group:"I. setosa",x:"SepalLength",y:5.4},{group:"I. setosa",x:"PetalWidth",y:.3},{group:"I. setosa",x:"PetalLength",y:1.4},{group:"I. setosa",x:"SepalWidth",y:3.5},{group:"I. setosa",x:"SepalLength",y:5.1},{group:"I. setosa",x:"PetalWidth",y:.3},{group:"I. setosa",x:"PetalLength",y:1.7},{group:"I. setosa",x:"SepalWidth",y:3.8},{group:"I. setosa",x:"SepalLength",y:5.7},{group:"I. setosa",x:"PetalWidth",y:.3},{group:"I. setosa",x:"PetalLength",y:1.5},{group:"I. setosa",x:"SepalWidth",y:3.8},{group:"I. setosa",x:"SepalLength",y:5.1},{group:"I. setosa",x:"PetalWidth",y:.2},{group:"I. setosa",x:"PetalLength",y:1.7},{group:"I. setosa",x:"SepalWidth",y:3.4},{group:"I. setosa",x:"SepalLength",y:5.4},{group:"I. setosa",x:"PetalWidth",y:.4},{group:"I. setosa",x:"PetalLength",y:1.5},{group:"I. setosa",x:"SepalWidth",y:3.7},{group:"I. setosa",x:"SepalLength",y:5.1},{group:"I. setosa",x:"PetalWidth",y:.2},{group:"I. setosa",x:"PetalLength",y:1},{group:"I. setosa",x:"SepalWidth",y:3.6},{group:"I. setosa",x:"SepalLength",y:4.6},{group:"I. setosa",x:"PetalWidth",y:.5},{group:"I. setosa",x:"PetalLength",y:1.7},{group:"I. setosa",x:"SepalWidth",y:3.3},{group:"I. setosa",x:"SepalLength",y:5.1},{group:"I. setosa",x:"PetalWidth",y:.2},{group:"I. setosa",x:"PetalLength",y:1.9},{group:"I. setosa",x:"SepalWidth",y:3.4},{group:"I. setosa",x:"SepalLength",y:4.8},{group:"I. setosa",x:"PetalWidth",y:.2},{group:"I. setosa",x:"PetalLength",y:1.6},{group:"I. setosa",x:"SepalWidth",y:3},{group:"I. setosa",x:"SepalLength",y:5},{group:"I. setosa",x:"PetalWidth",y:.4},{group:"I. setosa",x:"PetalLength",y:1.6},{group:"I. setosa",x:"SepalWidth",y:3.4},{group:"I. setosa",x:"SepalLength",y:5},{group:"I. setosa",x:"PetalWidth",y:.2},{group:"I. setosa",x:"PetalLength",y:1.5},{group:"I. setosa",x:"SepalWidth",y:3.5},{group:"I. setosa",x:"SepalLength",y:5.2},{group:"I. setosa",x:"PetalWidth",y:.2},{group:"I. setosa",x:"PetalLength",y:1.4},{group:"I. setosa",x:"SepalWidth",y:3.4},{group:"I. setosa",x:"SepalLength",y:5.2},{group:"I. setosa",x:"PetalWidth",y:.2},{group:"I. setosa",x:"PetalLength",y:1.6},{group:"I. setosa",x:"SepalWidth",y:3.2},{group:"I. setosa",x:"SepalLength",y:4.7},{group:"I. setosa",x:"PetalWidth",y:.2},{group:"I. setosa",x:"PetalLength",y:1.6},{group:"I. setosa",x:"SepalWidth",y:3.1},{group:"I. setosa",x:"SepalLength",y:4.8},{group:"I. setosa",x:"PetalWidth",y:.4},{group:"I. setosa",x:"PetalLength",y:1.5},{group:"I. setosa",x:"SepalWidth",y:3.4},{group:"I. setosa",x:"SepalLength",y:5.4},{group:"I. setosa",x:"PetalWidth",y:.1},{group:"I. setosa",x:"PetalLength",y:1.5},{group:"I. setosa",x:"SepalWidth",y:4.1},{group:"I. setosa",x:"SepalLength",y:5.2},{group:"I. setosa",x:"PetalWidth",y:.2},{group:"I. setosa",x:"PetalLength",y:1.4},{group:"I. setosa",x:"SepalWidth",y:4.2},{group:"I. setosa",x:"SepalLength",y:5.5},{group:"I. setosa",x:"PetalWidth",y:.2},{group:"I. setosa",x:"PetalLength",y:1.5},{group:"I. setosa",x:"SepalWidth",y:3.1},{group:"I. setosa",x:"SepalLength",y:4.9},{group:"I. setosa",x:"PetalWidth",y:.2},{group:"I. setosa",x:"PetalLength",y:1.2},{group:"I. setosa",x:"SepalWidth",y:3.2},{group:"I. setosa",x:"SepalLength",y:5},{group:"I. setosa",x:"PetalWidth",y:.2},{group:"I. setosa",x:"PetalLength",y:1.3},{group:"I. setosa",x:"SepalWidth",y:3.5},{group:"I. setosa",x:"SepalLength",y:5.5},{group:"I. setosa",x:"PetalWidth",y:.1},{group:"I. setosa",x:"PetalLength",y:1.4},{group:"I. setosa",x:"SepalWidth",y:3.6},{group:"I. setosa",x:"SepalLength",y:4.9},{group:"I. setosa",x:"PetalWidth",y:.2},{group:"I. setosa",x:"PetalLength",y:1.3},{group:"I. setosa",x:"SepalWidth",y:3},{group:"I. setosa",x:"SepalLength",y:4.4},{group:"I. setosa",x:"PetalWidth",y:.2},{group:"I. setosa",x:"PetalLength",y:1.5},{group:"I. setosa",x:"SepalWidth",y:3.4},{group:"I. setosa",x:"SepalLength",y:5.1},{group:"I. setosa",x:"PetalWidth",y:.3},{group:"I. setosa",x:"PetalLength",y:1.3},{group:"I. setosa",x:"SepalWidth",y:3.5},{group:"I. setosa",x:"SepalLength",y:5},{group:"I. setosa",x:"PetalWidth",y:.3},{group:"I. setosa",x:"PetalLength",y:1.3},{group:"I. setosa",x:"SepalWidth",y:2.3},{group:"I. setosa",x:"SepalLength",y:4.5},{group:"I. setosa",x:"PetalWidth",y:.2},{group:"I. setosa",x:"PetalLength",y:1.3},{group:"I. setosa",x:"SepalWidth",y:3.2},{group:"I. setosa",x:"SepalLength",y:4.4},{group:"I. setosa",x:"PetalWidth",y:.6},{group:"I. setosa",x:"PetalLength",y:1.6},{group:"I. setosa",x:"SepalWidth",y:3.5},{group:"I. setosa",x:"SepalLength",y:5},{group:"I. setosa",x:"PetalWidth",y:.4},{group:"I. setosa",x:"PetalLength",y:1.9},{group:"I. setosa",x:"SepalWidth",y:3.8},{group:"I. setosa",x:"SepalLength",y:5.1},{group:"I. setosa",x:"PetalWidth",y:.3},{group:"I. setosa",x:"PetalLength",y:1.4},{group:"I. setosa",x:"SepalWidth",y:3},{group:"I. setosa",x:"SepalLength",y:4.8},{group:"I. setosa",x:"PetalWidth",y:.2},{group:"I. setosa",x:"PetalLength",y:1.6},{group:"I. setosa",x:"SepalWidth",y:3.8},{group:"I. setosa",x:"SepalLength",y:5.1},{group:"I. setosa",x:"PetalWidth",y:.2},{group:"I. setosa",x:"PetalLength",y:1.4},{group:"I. setosa",x:"SepalWidth",y:3.2},{group:"I. setosa",x:"SepalLength",y:4.6},{group:"I. setosa",x:"PetalWidth",y:.2},{group:"I. setosa",x:"PetalLength",y:1.5},{group:"I. setosa",x:"SepalWidth",y:3.7},{group:"I. setosa",x:"SepalLength",y:5.3},{group:"I. setosa",x:"PetalWidth",y:.2},{group:"I. setosa",x:"PetalLength",y:1.4},{group:"I. setosa",x:"SepalWidth",y:3.3},{group:"I. setosa",x:"SepalLength",y:5},{group:"I. versicolor",x:"PetalWidth",y:1.4},{group:"I. versicolor",x:"PetalLength",y:4.7},{group:"I. versicolor",x:"SepalWidth",y:3.2},{group:"I. versicolor",x:"SepalLength",y:7},{group:"I. versicolor",x:"PetalWidth",y:1.5},{group:"I. versicolor",x:"PetalLength",y:4.5},{group:"I. versicolor",x:"SepalWidth",y:3.2},{group:"I. versicolor",x:"SepalLength",y:6.4},{group:"I. versicolor",x:"PetalWidth",y:1.5},{group:"I. versicolor",x:"PetalLength",y:4.9},{group:"I. versicolor",x:"SepalWidth",y:3.1},{group:"I. versicolor",x:"SepalLength",y:6.9},{group:"I. versicolor",x:"PetalWidth",y:1.3},{group:"I. versicolor",x:"PetalLength",y:4},{group:"I. versicolor",x:"SepalWidth",y:2.3},{group:"I. versicolor",x:"SepalLength",y:5.5},{group:"I. versicolor",x:"PetalWidth",y:1.5},{group:"I. versicolor",x:"PetalLength",y:4.6},{group:"I. versicolor",x:"SepalWidth",y:2.8},{group:"I. versicolor",x:"SepalLength",y:6.5},{group:"I. versicolor",x:"PetalWidth",y:1.3},{group:"I. versicolor",x:"PetalLength",y:4.5},{group:"I. versicolor",x:"SepalWidth",y:2.8},{group:"I. versicolor",x:"SepalLength",y:5.7},{group:"I. versicolor",x:"PetalWidth",y:1.6},{group:"I. versicolor",x:"PetalLength",y:4.7},{group:"I. versicolor",x:"SepalWidth",y:3.3},{group:"I. versicolor",x:"SepalLength",y:6.3},{group:"I. versicolor",x:"PetalWidth",y:1},{group:"I. versicolor",x:"PetalLength",y:3.3},{group:"I. versicolor",x:"SepalWidth",y:2.4},{group:"I. versicolor",x:"SepalLength",y:4.9},{group:"I. versicolor",x:"PetalWidth",y:1.3},{group:"I. versicolor",x:"PetalLength",y:4.6},{group:"I. versicolor",x:"SepalWidth",y:2.9},{group:"I. versicolor",x:"SepalLength",y:6.6},{group:"I. versicolor",x:"PetalWidth",y:1.4},{group:"I. versicolor",x:"PetalLength",y:3.9},{group:"I. versicolor",x:"SepalWidth",y:2.7},{group:"I. versicolor",x:"SepalLength",y:5.2},{group:"I. versicolor",x:"PetalWidth",y:1},{group:"I. versicolor",x:"PetalLength",y:3.5},{group:"I. versicolor",x:"SepalWidth",y:2},{group:"I. versicolor",x:"SepalLength",y:5},{group:"I. versicolor",x:"PetalWidth",y:1.5},{group:"I. versicolor",x:"PetalLength",y:4.2},{group:"I. versicolor",x:"SepalWidth",y:3},{group:"I. versicolor",x:"SepalLength",y:5.9},{group:"I. versicolor",x:"PetalWidth",y:1},{group:"I. versicolor",x:"PetalLength",y:4},{group:"I. versicolor",x:"SepalWidth",y:2.2},{group:"I. versicolor",x:"SepalLength",y:6},{group:"I. versicolor",x:"PetalWidth",y:1.4},{group:"I. versicolor",x:"PetalLength",y:4.7},{group:"I. versicolor",x:"SepalWidth",y:2.9},{group:"I. versicolor",x:"SepalLength",y:6.1},{group:"I. versicolor",x:"PetalWidth",y:1.3},{group:"I. versicolor",x:"PetalLength",y:3.6},{group:"I. versicolor",x:"SepalWidth",y:2.9},{group:"I. versicolor",x:"SepalLength",y:5.6},{group:"I. versicolor",x:"PetalWidth",y:1.4},{group:"I. versicolor",x:"PetalLength",y:4.4},{group:"I. versicolor",x:"SepalWidth",y:3.1},{group:"I. versicolor",x:"SepalLength",y:6.7},{group:"I. versicolor",x:"PetalWidth",y:1.5},{group:"I. versicolor",x:"PetalLength",y:4.5},{group:"I. versicolor",x:"SepalWidth",y:3},{group:"I. versicolor",x:"SepalLength",y:5.6},{group:"I. versicolor",x:"PetalWidth",y:1},{group:"I. versicolor",x:"PetalLength",y:4.1},{group:"I. versicolor",x:"SepalWidth",y:2.7},{group:"I. versicolor",x:"SepalLength",y:5.8},{group:"I. versicolor",x:"PetalWidth",y:1.5},{group:"I. versicolor",x:"PetalLength",y:4.5},{group:"I. versicolor",x:"SepalWidth",y:2.2},{group:"I. versicolor",x:"SepalLength",y:6.2},{group:"I. versicolor",x:"PetalWidth",y:1.1},{group:"I. versicolor",x:"PetalLength",y:3.9},{group:"I. versicolor",x:"SepalWidth",y:2.5},{group:"I. versicolor",x:"SepalLength",y:5.6},{group:"I. versicolor",x:"PetalWidth",y:1.8},{group:"I. versicolor",x:"PetalLength",y:4.8},{group:"I. versicolor",x:"SepalWidth",y:3.2},{group:"I. versicolor",x:"SepalLength",y:5.9},{group:"I. versicolor",x:"PetalWidth",y:1.3},{group:"I. versicolor",x:"PetalLength",y:4},{group:"I. versicolor",x:"SepalWidth",y:2.8},{group:"I. versicolor",x:"SepalLength",y:6.1},{group:"I. versicolor",x:"PetalWidth",y:1.5},{group:"I. versicolor",x:"PetalLength",y:4.9},{group:"I. versicolor",x:"SepalWidth",y:2.5},{group:"I. versicolor",x:"SepalLength",y:6.3},{group:"I. versicolor",x:"PetalWidth",y:1.2},{group:"I. versicolor",x:"PetalLength",y:4.7},{group:"I. versicolor",x:"SepalWidth",y:2.8},{group:"I. versicolor",x:"SepalLength",y:6.1},{group:"I. versicolor",x:"PetalWidth",y:1.3},{group:"I. versicolor",x:"PetalLength",y:4.3},{group:"I. versicolor",x:"SepalWidth",y:2.9},{group:"I. versicolor",x:"SepalLength",y:6.4},{group:"I. versicolor",x:"PetalWidth",y:1.4},{group:"I. versicolor",x:"PetalLength",y:4.4},{group:"I. versicolor",x:"SepalWidth",y:3},{group:"I. versicolor",x:"SepalLength",y:6.6},{group:"I. versicolor",x:"PetalWidth",y:1.4},{group:"I. versicolor",x:"PetalLength",y:4.8},{group:"I. versicolor",x:"SepalWidth",y:2.8},{group:"I. versicolor",x:"SepalLength",y:6.8},{group:"I. versicolor",x:"PetalWidth",y:1.7},{group:"I. versicolor",x:"PetalLength",y:5},{group:"I. versicolor",x:"SepalWidth",y:3},{group:"I. versicolor",x:"SepalLength",y:6.7},{group:"I. versicolor",x:"PetalWidth",y:1.5},{group:"I. versicolor",x:"PetalLength",y:4.5},{group:"I. versicolor",x:"SepalWidth",y:2.9},{group:"I. versicolor",x:"SepalLength",y:6},{group:"I. versicolor",x:"PetalWidth",y:1},{group:"I. versicolor",x:"PetalLength",y:3.5},{group:"I. versicolor",x:"SepalWidth",y:2.6},{group:"I. versicolor",x:"SepalLength",y:5.7},{group:"I. versicolor",x:"PetalWidth",y:1.1},{group:"I. versicolor",x:"PetalLength",y:3.8},{group:"I. versicolor",x:"SepalWidth",y:2.4},{group:"I. versicolor",x:"SepalLength",y:5.5},{group:"I. versicolor",x:"PetalWidth",y:1},{group:"I. versicolor",x:"PetalLength",y:3.7},{group:"I. versicolor",x:"SepalWidth",y:2.4},{group:"I. versicolor",x:"SepalLength",y:5.5},{group:"I. versicolor",x:"PetalWidth",y:1.2},{group:"I. versicolor",x:"PetalLength",y:3.9},{group:"I. versicolor",x:"SepalWidth",y:2.7},{group:"I. versicolor",x:"SepalLength",y:5.8},{group:"I. versicolor",x:"PetalWidth",y:1.6},{group:"I. versicolor",x:"PetalLength",y:5.1},{group:"I. versicolor",x:"SepalWidth",y:2.7},{group:"I. versicolor",x:"SepalLength",y:6},{group:"I. versicolor",x:"PetalWidth",y:1.5},{group:"I. versicolor",x:"PetalLength",y:4.5},{group:"I. versicolor",x:"SepalWidth",y:3},{group:"I. versicolor",x:"SepalLength",y:5.4},{group:"I. versicolor",x:"PetalWidth",y:1.6},{group:"I. versicolor",x:"PetalLength",y:4.5},{group:"I. versicolor",x:"SepalWidth",y:3.4},{group:"I. versicolor",x:"SepalLength",y:6},{group:"I. versicolor",x:"PetalWidth",y:1.5},{group:"I. versicolor",x:"PetalLength",y:4.7},{group:"I. versicolor",x:"SepalWidth",y:3.1},{group:"I. versicolor",x:"SepalLength",y:6.7},{group:"I. versicolor",x:"PetalWidth",y:1.3},{group:"I. versicolor",x:"PetalLength",y:4.4},{group:"I. versicolor",x:"SepalWidth",y:2.3},{group:"I. versicolor",x:"SepalLength",y:6.3},{group:"I. versicolor",x:"PetalWidth",y:1.3},{group:"I. versicolor",x:"PetalLength",y:4.1},{group:"I. versicolor",x:"SepalWidth",y:3},{group:"I. versicolor",x:"SepalLength",y:5.6},{group:"I. versicolor",x:"PetalWidth",y:1.3},{group:"I. versicolor",x:"PetalLength",y:4},{group:"I. versicolor",x:"SepalWidth",y:2.5},{group:"I. versicolor",x:"SepalLength",y:5.5},{group:"I. versicolor",x:"PetalWidth",y:1.2},{group:"I. versicolor",x:"PetalLength",y:4.4},{group:"I. versicolor",x:"SepalWidth",y:2.6},{group:"I. versicolor",x:"SepalLength",y:5.5},{group:"I. versicolor",x:"PetalWidth",y:1.4},{group:"I. versicolor",x:"PetalLength",y:4.6},{group:"I. versicolor",x:"SepalWidth",y:3},{group:"I. versicolor",x:"SepalLength",y:6.1},{group:"I. versicolor",x:"PetalWidth",y:1.2},{group:"I. versicolor",x:"PetalLength",y:4},{group:"I. versicolor",x:"SepalWidth",y:2.6},{group:"I. versicolor",x:"SepalLength",y:5.8},{group:"I. versicolor",x:"PetalWidth",y:1},{group:"I. versicolor",x:"PetalLength",y:3.3},{group:"I. versicolor",x:"SepalWidth",y:2.3},{group:"I. versicolor",x:"SepalLength",y:5},{group:"I. versicolor",x:"PetalWidth",y:1.3},{group:"I. versicolor",x:"PetalLength",y:4.2},{group:"I. versicolor",x:"SepalWidth",y:2.7},{group:"I. versicolor",x:"SepalLength",y:5.6},{group:"I. versicolor",x:"PetalWidth",y:1.2},{group:"I. versicolor",x:"PetalLength",y:4.2},{group:"I. versicolor",x:"SepalWidth",y:3},{group:"I. versicolor",x:"SepalLength",y:5.7},{group:"I. versicolor",x:"PetalWidth",y:1.3},{group:"I. versicolor",x:"PetalLength",y:4.2},{group:"I. versicolor",x:"SepalWidth",y:2.9},{group:"I. versicolor",x:"SepalLength",y:5.7},{group:"I. versicolor",x:"PetalWidth",y:1.3},{group:"I. versicolor",x:"PetalLength",y:4.3},{group:"I. versicolor",x:"SepalWidth",y:2.9},{group:"I. versicolor",x:"SepalLength",y:6.2},{group:"I. versicolor",x:"PetalWidth",y:1.1},{group:"I. versicolor",x:"PetalLength",y:3},{group:"I. versicolor",x:"SepalWidth",y:2.5},{group:"I. versicolor",x:"SepalLength",y:5.1},{group:"I. versicolor",x:"PetalWidth",y:1.3},{group:"I. versicolor",x:"PetalLength",y:4.1},{group:"I. versicolor",x:"SepalWidth",y:2.8},{group:"I. versicolor",x:"SepalLength",y:5.7},{group:"I. virginica",x:"PetalWidth",y:2.5},{group:"I. virginica",x:"PetalLength",y:6},{group:"I. virginica",x:"SepalWidth",y:3.3},{group:"I. virginica",x:"SepalLength",y:6.3},{group:"I. virginica",x:"PetalWidth",y:1.9},{group:"I. virginica",x:"PetalLength",y:5.1},{group:"I. virginica",x:"SepalWidth",y:2.7},{group:"I. virginica",x:"SepalLength",y:5.8},{group:"I. virginica",x:"PetalWidth",y:2.1},{group:"I. virginica",x:"PetalLength",y:5.9},{group:"I. virginica",x:"SepalWidth",y:3},{group:"I. virginica",x:"SepalLength",y:7.1},{group:"I. virginica",x:"PetalWidth",y:1.8},{group:"I. virginica",x:"PetalLength",y:5.6},{group:"I. virginica",x:"SepalWidth",y:2.9},{group:"I. virginica",x:"SepalLength",y:6.3},{group:"I. virginica",x:"PetalWidth",y:2.2},{group:"I. virginica",x:"PetalLength",y:5.8},{group:"I. virginica",x:"SepalWidth",y:3},{group:"I. virginica",x:"SepalLength",y:6.5},{group:"I. virginica",x:"PetalWidth",y:2.1},{group:"I. virginica",x:"PetalLength",y:6.6},{group:"I. virginica",x:"SepalWidth",y:3},{group:"I. virginica",x:"SepalLength",y:7.6},{group:"I. virginica",x:"PetalWidth",y:1.7},{group:"I. virginica",x:"PetalLength",y:4.5},{group:"I. virginica",x:"SepalWidth",y:2.5},{group:"I. virginica",x:"SepalLength",y:4.9},{group:"I. virginica",x:"PetalWidth",y:1.8},{group:"I. virginica",x:"PetalLength",y:6.3},{group:"I. virginica",x:"SepalWidth",y:2.9},{group:"I. virginica",x:"SepalLength",y:7.3},{group:"I. virginica",x:"PetalWidth",y:1.8},{group:"I. virginica",x:"PetalLength",y:5.8},{group:"I. virginica",x:"SepalWidth",y:2.5},{group:"I. virginica",x:"SepalLength",y:6.7},{group:"I. virginica",x:"PetalWidth",y:2.5},{group:"I. virginica",x:"PetalLength",y:6.1},{group:"I. virginica",x:"SepalWidth",y:3.6},{group:"I. virginica",x:"SepalLength",y:7.2},{group:"I. virginica",x:"PetalWidth",y:2},{group:"I. virginica",x:"PetalLength",y:5.1},{group:"I. virginica",x:"SepalWidth",y:3.2},{group:"I. virginica",x:"SepalLength",y:6.5},{group:"I. virginica",x:"PetalWidth",y:1.9},{group:"I. virginica",x:"PetalLength",y:5.3},{group:"I. virginica",x:"SepalWidth",y:2.7},{group:"I. virginica",x:"SepalLength",y:6.4},{group:"I. virginica",x:"PetalWidth",y:2.1},{group:"I. virginica",x:"PetalLength",y:5.5},{group:"I. virginica",x:"SepalWidth",y:3},{group:"I. virginica",x:"SepalLength",y:6.8},{group:"I. virginica",x:"PetalWidth",y:2},{group:"I. virginica",x:"PetalLength",y:5},{group:"I. virginica",x:"SepalWidth",y:2.5},{group:"I. virginica",x:"SepalLength",y:5.7},{group:"I. virginica",x:"PetalWidth",y:2.4},{group:"I. virginica",x:"PetalLength",y:5.1},{group:"I. virginica",x:"SepalWidth",y:2.8},{group:"I. virginica",x:"SepalLength",y:5.8},{group:"I. virginica",x:"PetalWidth",y:2.3},{group:"I. virginica",x:"PetalLength",y:5.3},{group:"I. virginica",x:"SepalWidth",y:3.2},{group:"I. virginica",x:"SepalLength",y:6.4},{group:"I. virginica",x:"PetalWidth",y:1.8},{group:"I. virginica",x:"PetalLength",y:5.5},{group:"I. virginica",x:"SepalWidth",y:3},{group:"I. virginica",x:"SepalLength",y:6.5},{group:"I. virginica",x:"PetalWidth",y:2.2},{group:"I. virginica",x:"PetalLength",y:6.7},{group:"I. virginica",x:"SepalWidth",y:3.8},{group:"I. virginica",x:"SepalLength",y:7.7},{group:"I. virginica",x:"PetalWidth",y:2.3},{group:"I. virginica",x:"PetalLength",y:6.9},{group:"I. virginica",x:"SepalWidth",y:2.6},{group:"I. virginica",x:"SepalLength",y:7.7},{group:"I. virginica",x:"PetalWidth",y:1.5},{group:"I. virginica",x:"PetalLength",y:5},{group:"I. virginica",x:"SepalWidth",y:2.2},{group:"I. virginica",x:"SepalLength",y:6},{group:"I. virginica",x:"PetalWidth",y:2.3},{group:"I. virginica",x:"PetalLength",y:5.7},{group:"I. virginica",x:"SepalWidth",y:3.2},{group:"I. virginica",x:"SepalLength",y:6.9},{group:"I. virginica",x:"PetalWidth",y:2},{group:"I. virginica",x:"PetalLength",y:4.9},{group:"I. virginica",x:"SepalWidth",y:2.8},{group:"I. virginica",x:"SepalLength",y:5.6},{group:"I. virginica",x:"PetalWidth",y:2},{group:"I. virginica",x:"PetalLength",y:6.7},{group:"I. virginica",x:"SepalWidth",y:2.8},{group:"I. virginica",x:"SepalLength",y:7.7},{group:"I. virginica",x:"PetalWidth",y:1.8},{group:"I. virginica",x:"PetalLength",y:4.9},{group:"I. virginica",x:"SepalWidth",y:2.7},{group:"I. virginica",x:"SepalLength",y:6.3},{group:"I. virginica",x:"PetalWidth",y:2.1},{group:"I. virginica",x:"PetalLength",y:5.7},{group:"I. virginica",x:"SepalWidth",y:3.3},{group:"I. virginica",x:"SepalLength",y:6.7},{group:"I. virginica",x:"PetalWidth",y:1.8},{group:"I. virginica",x:"PetalLength",y:6},{group:"I. virginica",x:"SepalWidth",y:3.2},{group:"I. virginica",x:"SepalLength",y:7.2},{group:"I. virginica",x:"PetalWidth",y:1.8},{group:"I. virginica",x:"PetalLength",y:4.8},{group:"I. virginica",x:"SepalWidth",y:2.8},{group:"I. virginica",x:"SepalLength",y:6.2},{group:"I. virginica",x:"PetalWidth",y:1.8},{group:"I. virginica",x:"PetalLength",y:4.9},{group:"I. virginica",x:"SepalWidth",y:3},{group:"I. virginica",x:"SepalLength",y:6.1},{group:"I. virginica",x:"PetalWidth",y:2.1},{group:"I. virginica",x:"PetalLength",y:5.6},{group:"I. virginica",x:"SepalWidth",y:2.8},{group:"I. virginica",x:"SepalLength",y:6.4},{group:"I. virginica",x:"PetalWidth",y:1.6},{group:"I. virginica",x:"PetalLength",y:5.8},{group:"I. virginica",x:"SepalWidth",y:3},{group:"I. virginica",x:"SepalLength",y:7.2},{group:"I. virginica",x:"PetalWidth",y:1.9},{group:"I. virginica",x:"PetalLength",y:6.1},{group:"I. virginica",x:"SepalWidth",y:2.8},{group:"I. virginica",x:"SepalLength",y:7.4},{group:"I. virginica",x:"PetalWidth",y:2},{group:"I. virginica",x:"PetalLength",y:6.4},{group:"I. virginica",x:"SepalWidth",y:3.8},{group:"I. virginica",x:"SepalLength",y:7.9},{group:"I. virginica",x:"PetalWidth",y:2.2},{group:"I. virginica",x:"PetalLength",y:5.6},{group:"I. virginica",x:"SepalWidth",y:2.8},{group:"I. virginica",x:"SepalLength",y:6.4},{group:"I. virginica",x:"PetalWidth",y:1.5},{group:"I. virginica",x:"PetalLength",y:5.1},{group:"I. virginica",x:"SepalWidth",y:2.8},{group:"I. virginica",x:"SepalLength",y:6.3},{group:"I. virginica",x:"PetalWidth",y:1.4},{group:"I. virginica",x:"PetalLength",y:5.6},{group:"I. virginica",x:"SepalWidth",y:2.6},{group:"I. virginica",x:"SepalLength",y:6.1},{group:"I. virginica",x:"PetalWidth",y:2.3},{group:"I. virginica",x:"PetalLength",y:6.1},{group:"I. virginica",x:"SepalWidth",y:3},{group:"I. virginica",x:"SepalLength",y:7.7},{group:"I. virginica",x:"PetalWidth",y:2.4},{group:"I. virginica",x:"PetalLength",y:5.6},{group:"I. virginica",x:"SepalWidth",y:3.4},{group:"I. virginica",x:"SepalLength",y:6.3},{group:"I. virginica",x:"PetalWidth",y:1.8},{group:"I. virginica",x:"PetalLength",y:5.5},{group:"I. virginica",x:"SepalWidth",y:3.1},{group:"I. virginica",x:"SepalLength",y:6.4},{group:"I. virginica",x:"PetalWidth",y:1.8},{group:"I. virginica",x:"PetalLength",y:4.8},{group:"I. virginica",x:"SepalWidth",y:3},{group:"I. virginica",x:"SepalLength",y:6},{group:"I. virginica",x:"PetalWidth",y:2.1},{group:"I. virginica",x:"PetalLength",y:5.4},{group:"I. virginica",x:"SepalWidth",y:3.1},{group:"I. virginica",x:"SepalLength",y:6.9},{group:"I. virginica",x:"PetalWidth",y:2.4},{group:"I. virginica",x:"PetalLength",y:5.6},{group:"I. virginica",x:"SepalWidth",y:3.1},{group:"I. virginica",x:"SepalLength",y:6.7},{group:"I. virginica",x:"PetalWidth",y:2.3},{group:"I. virginica",x:"PetalLength",y:5.1},{group:"I. virginica",x:"SepalWidth",y:3.1},{group:"I. virginica",x:"SepalLength",y:6.9},{group:"I. virginica",x:"PetalWidth",y:1.9},{group:"I. virginica",x:"PetalLength",y:5.1},{group:"I. virginica",x:"SepalWidth",y:2.7},{group:"I. virginica",x:"SepalLength",y:5.8},{group:"I. virginica",x:"PetalWidth",y:2.3},{group:"I. virginica",x:"PetalLength",y:5.9},{group:"I. virginica",x:"SepalWidth",y:3.2},{group:"I. virginica",x:"SepalLength",y:6.8},{group:"I. virginica",x:"PetalWidth",y:2.5},{group:"I. virginica",x:"PetalLength",y:5.7},{group:"I. virginica",x:"SepalWidth",y:3.3},{group:"I. virginica",x:"SepalLength",y:6.7},{group:"I. virginica",x:"PetalWidth",y:2.3},{group:"I. virginica",x:"PetalLength",y:5.2},{group:"I. virginica",x:"SepalWidth",y:3},{group:"I. virginica",x:"SepalLength",y:6.7},{group:"I. virginica",x:"PetalWidth",y:1.9},{group:"I. virginica",x:"PetalLength",y:5},{group:"I. virginica",x:"SepalWidth",y:2.5},{group:"I. virginica",x:"SepalLength",y:6.3},{group:"I. virginica",x:"PetalWidth",y:2},{group:"I. virginica",x:"PetalLength",y:5.2},{group:"I. virginica",x:"SepalWidth",y:3},{group:"I. virginica",x:"SepalLength",y:6.5},{group:"I. virginica",x:"PetalWidth",y:2.3},{group:"I. virginica",x:"PetalLength",y:5.4},{group:"I. virginica",x:"SepalWidth",y:3.4},{group:"I. virginica",x:"SepalLength",y:6.2},{group:"I. virginica",x:"PetalWidth",y:1.8},{group:"I. virginica",x:"PetalLength",y:5.1},{group:"I. virginica",x:"SepalWidth",y:3},{group:"I. virginica",x:"SepalLength",y:5.9}],f0="_mockDataTrigger_vkjei_1",h0={mockDataTrigger:f0},g0=ke.create(({data:e})=>{const t=ke.useModal(),{t:n}=Z();return a.jsx(aa,{...ke.antdModal(t),title:n("pages.analysis-template.pages.visual-edit.mock-data.title"),width:800,footer:null,children:a.jsx(Js,{size:"small",columnActions:!1,dataSource:e})})}),ns=e=>({...e,x:e.y,y:e.x}),y0={[et.Line]:{normal:rs,group:as},[et.Area]:{normal:rs,group:as},[et.Violin]:{normal:oc,group:oc},[et.Bar]:{normal:rs.map(ns),group:as.map(ns),stack:nc.map(ns),"stack-group":sc.map(ns)},[et.Column]:{normal:rs,group:as,stack:nc,"stack-group":sc},[et.Histogram]:{normal:d0,stack:p0},[et.Pie]:{normal:m0},[et.Heatmap]:{normal:u0}};function b0(e){const{type:t}=e,{t:n}=Z(),r=k.useMemo(()=>ol.all([{},e,{xAxis:{field:"x"},yAxis:{field:"y"},binField:"value",groupSeriesField:"groupSeriesField"in e&&e.groupSeriesField?"group":void 0,stackSeriesField:"stackSeriesField"in e&&e.stackSeriesField?"stack":void 0,nameField:"name",valueField:"value"}]),[e]),o="groupSeriesField"in e&&!!e.groupSeriesField,s="stackSeriesField"in e&&!!e.stackSeriesField,i=k.useMemo(()=>{let c="normal";switch(!0){case(o&&s):c="stack-group";break;case o:c="group";break;case s:c="stack";break}return fi(y0[t][c])},[o,s,t]),u=k.useCallback(()=>{ke.show(g0,{data:i.value})},[i]);return a.jsxs(al,{dataSource:i,children:[a.jsx(Wm,{title:n("pages.analysis-template.pages.visual-edit.mock-data.title"),children:a.jsx(Ae,{size:"small",type:"text",icon:a.jsx(Bm,{}),className:h0.mockDataTrigger,onClick:u})}),a.jsx(od,{...r})]})}const v0="_container_1i7wq_1",_0="_root_1i7wq_7",x0="_hover_1i7wq_19",w0="_active_1i7wq_23",j0="_action_1i7wq_27",I0="_tip_1i7wq_31",gn={container:v0,root:_0,hover:x0,active:w0,action:j0,tip:I0},Ad=(e,t,n)=>{if(!e)return null;if(t(e))return e;if(n(e))return null;const r=e.parentElement;return r?Ad(r,t,n):null},Pd={...id,chart:b0},S0=fi([97.3,46.6,81.4,36,98.1,32,12,86,33.7,62.2].map(e=>fi(e))),k0=e=>{const{children:t}=e,{t:n}=Z(),r=k.useRef(null),{parentMap:o,hoverId:s,setHoverId:i,activeId:u,activeNode:c,setActiveId:l,config:p,updateById:d}=Tr(),m=s===er,h=u===er,b=k.useContext(ul),y=ea(f=>{f.stopPropagation(),l(er)}),x=ea(f=>{f.stopPropagation();const j=Ad(f.target,C=>!!C.dataset.editorElementId&&C.dataset.editorElementActivatable==="true",C=>C.classList.contains(Ss));j&&i(j.dataset.editorElementId)}),I=ea(f=>{f.stopPropagation(),i(null)}),w=ea(f=>{const{active:j,over:C}=f;if(!C)return;const g=j.id,E=C.id;if(!(o.get(g)===o.get(E)))return;const _=o.get(g),S=_.children.findIndex(T=>T.id===g),P=_.children.findIndex(T=>T.id===E);d(_.id,{children:cm(_.children??[],S,P)})}),A=k.useMemo(()=>({title:n("pages.analysis-template.pages.visual-edit.root.title"),factor:"XXX",templateName:b.name,author:b.creator,time:ga.DOLPHINDB_DATETIME}),[n,b]);return a.jsx(al,{dataSource:S0,children:a.jsx(Hn.InfoContext.Provider,{value:A,children:a.jsxs("div",{className:gn.container,children:[a.jsx("div",{className:Wt(gn.root,Ss,{[gn.active]:h,[gn.hover]:m}),ref:r,onClick:y,onMouseMove:x,onMouseLeave:I,"data-editor-element-id":er,"data-editor-element-activatable":"true",children:a.jsxs(um,{onDragEnd:w,collisionDetection:dm,children:[a.jsx(qc,{items:p.layout.children??[],strategy:zc,children:t}),$m.createPortal(a.jsx(pm,{children:c?a.jsx(tl,{root:c,components:Pd}):null}),document.body)]})}),a.jsxs("div",{className:gn.tip,children:[a.jsx(Vm,{}),n("pages.analysis-template.pages.visual-edit.mock-tip")]})]})})})};function Td(e){switch(e){case za.Full:return 1;case za.DivideTwo:return 2;case za.DivideThree:return 3}}function C0(e){var n;const t=Td(e.props.layout);return((n=e.children)==null?void 0:n.length)===t}function Od(e,t=[]){const n=Td(e),r=t.slice(0,n)??[];for(let o=0;o<n;o++)r[o]=(t==null?void 0:t[o])??cl();return r}function E0(e){const{item:t}=e,{updateById:n}=Tr(),r=k.useRef(null);return k.useLayoutEffect(()=>{if(C0(t))return;const o=Od(t.props.layout,t.children);n(t.id,{children:o})},[t,n]),a.jsx(dn,{...e,sortContainer:"horizontal",ref:r,children:a.jsx(Cd.Provider,{value:{fillPlaceholder:!0},children:e.children})})}function A0(e){return a.jsx(dn,{...e,children:e.children})}function P0(e){return a.jsx(dn,{...e,children:e.children})}const T0={},O0={text:P0,row:E0,table:A0,overview:c0,chart:l0,root:k0,_placeholder:i0},R0={...Pd,root:Hn};function dl(e){let t=requestAnimationFrame(()=>{t=requestAnimationFrame(()=>{e(),t=null})});return()=>{t&&(cancelAnimationFrame(t),t=null)}}const Or={[ia.DEFAULT]:{sequenceColors:["#B8E1FF","#9AC5FF","#7DAAFF","#5B8FF9","#3D76DD","#085EC0","#0047A5","#00318A","#001D70"],styleSheet:{paletteQualitative10:["#5B8FF9","#61DDAA","#65789B","#F6BD16","#7262fd","#78D3F8","#9661BC","#F6903D","#008685","#F08BB4"],paletteQualitative20:["#5B8FF9","#CDDDFD","#61DDAA","#CDF3E4","#65789B","#CED4DE","#F6BD16","#FCEBB9","#7262fd","#D3CEFD","#78D3F8","#D3EEF9","#9661BC","#DECFEA","#F6903D","#FFE0C7","#008685","#BBDEDE","#F08BB4","#FFE0ED"]}},[ia.CUSTOM_1]:{sequenceColors:["#ffe1d0","#ffdecb","#ffbd99","#ff9d68","#ff8d59","#ff7d4a","#ff6b3b","#ec5b2c","#d84a1d","#c5390c"],styleSheet:{brandColor:"#FF6B3B",paletteQualitative10:["#FF6B3B","#626681","#FFC100","#9FB40F","#76523B","#DAD5B5","#0E8E89","#E19348","#F383A2","#247FEA"],paletteQualitative20:["#FF6B3B","#626681","#FFC100","#9FB40F","#76523B","#DAD5B5","#0E8E89","#E19348","#F383A2","#247FEA","#2BCB95","#B1ABF4","#1D42C2","#1D9ED1","#D64BC0","#255634","#8C8C47","#8CDAE5","#8E283B","#791DC9"]}},[ia.CUSTOM_2]:{sequenceColors:["#ffd8c2","#ffb188","#ff894e","#ff7231","#ff6322","#ff5211","#f94000","#e73000","#d51e00","#c30000"],styleSheet:{brandColor:"#FF4500",paletteQualitative10:["#FF4500","#1AAF8B","#406C85","#F6BD16","#B40F0F","#2FB8FC","#4435FF","#FF5CA2","#BBE800","#FE8A26"],paletteQualitative20:["#FF4500","#1AAF8B","#406C85","#F6BD16","#B40F0F","#2FB8FC","#4435FF","#FF5CA2","#BBE800","#FE8A26","#946DFF","#6C3E00","#6193FF","#FF988E","#36BCCB","#004988","#FFCF9D","#CCDC8A","#8D00A1","#1CC25E"]}},[ia.CUSTOM_3]:{sequenceColors:["#f2d8ff","#e6b1ff","#d98aff","#cc63ff","#bf3bff","#b214ff","#a500e6","#8c00cc","#7300b3","#590099"],styleSheet:{brandColor:"#bf3bff",paletteQualitative10:["#bf3bff","#B83700","#1957DB","#FAB129","#F06C00","#011A51","#7EA3F1","#487BEA","#FBC55F","#54D2D2"],paletteQualitative20:["#bf3bff","#B83700","#1957DB","#FAB129","#F06C00","#011A51","#7EA3F1","#487BEA","#FBC55F","#54D2D2","#bf3bff","#B83700","#1957DB","#FAB129","#F06C00","#011A51","#7EA3F1","#487BEA","#FBC55F","#54D2D2"]}},[ia.CUSTOM_4]:{sequenceColors:["#E7EEEE","#CEDEDD","#B6CDCC","#9EBCBB","#86ACAA","#719A98","#558A88","#3D7977","#246966","#0C5855"],styleSheet:{brandColor:"#719A98",paletteQualitative10:["#719A98","#BAE8E8","#2C698D","#49B2B8","#09006F","#FF7575","#272643","#E3E8F6","#2D8973","#9FACA0"],paletteQualitative20:["#719A98","#BAE8E8","#2C698D","#49B2B8","#09006F","#FF7575","#272643","#E3E8F6","#2D8973","#9FACA0","#272643","#FF7575","#719A98","#BAE8E8","#2C698D","#49B2B8","#09006F","#E3E8F6","#2D8973","#9FACA0"]}}};Bn(ia.DEFAULT,Or[ia.DEFAULT]);Bn(ia.CUSTOM_1,Or[ia.CUSTOM_1]);Bn(ia.CUSTOM_2,Or[ia.CUSTOM_2]);Bn(ia.CUSTOM_3,Or[ia.CUSTOM_3]);Bn(ia.CUSTOM_4,Or[ia.CUSTOM_4]);const F0="_line_rd3y1_1",L0="_option_rd3y1_7",N0="_box_rd3y1_13",hi={line:F0,option:L0,box:N0},D0=e=>a.jsx("div",{className:hi.line,children:Or[e].styleSheet.paletteQualitative10.slice(0,5).map(t=>a.jsx("div",{style:{backgroundColor:t},className:hi.box},t))}),M0=Object.keys(Or).map(e=>({label:D0(e),value:e})),W0=e=>{const{t}=Z(),n=k.useCallback(r=>a.jsx("div",{className:hi.option,children:r.label}),[]);return a.jsx(kt,{placeholder:t("pages.analysis-template.pages.visual-edit.theme-select-placeholder"),optionRender:n,options:M0,popupMatchSelectWidth:!1,...e})},B0="_header_118vq_1",$0="_name_118vq_8",V0="_action_118vq_13",Eo={header:B0,name:$0,action:V0};function q0(){const e=k.useContext(ul),{message:t}=at.useApp(),{updateById:n,insertIn:r,config:o,isDirty:s,setIsDirty:i}=Tr(),u=Ft(),{t:c}=Z(),{node:l}=Ed(er),p=ea(x=>{n(er,{props:{chartTheme:x}})}),d=ea(x=>{n(er,{props:{showInfo:x.target.checked}})}),m=ea(async()=>{try{await ee.requestFunc("facplf_edit_analysis_template_config",{template_id:e.template_id,visual_config:JSON.stringify(o)}),i(!1),t.success(c("common.save-success"))}catch(x){t.error(Be(x))}}),h=ea(()=>{u.length>1?u.goBack():u.push(Se.analysisTemplateList())}),b=k.useMemo(()=>{const x=Id(c);return[x.Normal,x.Charts,x.Containers]},[c]),y=k.useCallback(x=>{r(er,Sd(x.defaultConfig)),dl(()=>{const I=document.querySelector(`.${Ss}`),w=I==null?void 0:I.querySelectorAll("[data-editor-element-id]");w!=null&&w.length&&w[w.length-1].scrollIntoView()})},[r]);return a.jsxs("div",{className:Eo.header,children:[a.jsx(Ci,{when:s,message:c("common.leave-page.content")}),a.jsxs(it,{size:"large",children:[a.jsxs("a",{onClick:h,children:[a.jsx(eu,{}),c("common.back")]}),a.jsx(W0,{style:{width:160},value:l==null?void 0:l.props.chartTheme,onChange:p}),a.jsx(Ni,{checked:l==null?void 0:l.props.showInfo,onChange:d,children:c("pages.analysis-template.pages.visual-edit.header.show-report-info")}),a.jsx(gd,{componentGroups:b,onAdd:y})]}),a.jsx("div",{className:Eo.name,children:e.name}),a.jsx(it,{className:Eo.action,children:a.jsx(Ae,{type:"primary",icon:a.jsx(Kc,{}),onClick:m,children:c("common.save")})})]})}function Ea(e){const{value:t,onChange:n,...r}=e,{t:o}=Z(),s=k.useCallback(i=>{var u;n==null||n((u=i==null?void 0:i.target)==null?void 0:u.value)},[n]);return a.jsxs(ya.Group,{value:t,onChange:s,...r,children:[a.jsx(ya,{value:!0,children:o("components.bool-radio-group.true")}),a.jsx(ya,{value:!1,children:o("components.bool-radio-group.false")})]})}function pl(){const{t:e}=Z();return a.jsx(B.Item,{label:e("pages.analysis-template.pages.visual-edit.settings.form.common-field.data-source.label"),name:"dataSource",children:a.jsx(Ne,{placeholder:e("pages.analysis-template.pages.visual-edit.settings.form.common-field.data-source.placeholder")})})}const z0=Sr({getValues:()=>[_r.Number,_r.Percent,_r.Time],getLabelMap:e=>e("constants.simple-format-type",{returnObjects:!0})}),G0=[{value:ga.DATE},{value:ga.FULL_TIME},{value:ga.TIME}];function zr(e){var s;const t=ha(e.namePath,(s=e.listField)==null?void 0:s.name,"formatType"),{t:n}=Z(),r=k.useCallback(i=>{var u;return e.listField?ha((u=e.listField)==null?void 0:u.name,i):ha(e.namePath,i)},[e.listField,e.namePath]),o=k.useCallback(i=>r(["formatOptions",i]),[r]);return a.jsxs(a.Fragment,{children:[a.jsx(B.Item,{label:n("pages.analysis-template.pages.visual-edit.settings.form.common-field.format-type"),name:r("formatType"),children:a.jsx(z0,{allowClear:!0})}),a.jsx(ja,{dependencies:[t],children:i=>{const u=Wn(i,t),c=u===_r.Number,l=u===_r.Percent,p=u===_r.Time;return a.jsxs(a.Fragment,{children:[(c||l)&&a.jsx(B.Item,{name:o("mantissa"),label:n("pages.analysis-template.pages.visual-edit.settings.form.common-field.format-options.mantissa"),children:a.jsx(qa,{min:0,placeholder:c?"4":"2"})}),c&&a.jsx(B.Item,{label:n("pages.analysis-template.pages.visual-edit.settings.form.common-field.format-options.thousand-separated"),name:o("thousandSeparated"),initialValue:!1,children:a.jsx(Ea,{})}),p&&a.jsx(B.Item,{label:n("pages.analysis-template.pages.visual-edit.settings.form.common-field.format-options.time-format"),name:o("timeFormat"),initialValue:ga.DATE,children:a.jsx(Yc,{options:G0})})]})}})]})}const U0={getEventValue:e=>e.target.value};function H0(e){const{getEventValue:t}={...U0,...e};return function(r,o,s,i){const u=k.useRef(!1),[c,l]=k.useState(r),p=k.useRef(o),d=k.useRef(s),m=k.useRef(i);k.useLayoutEffect(()=>{p.current=o,d.current=s,m.current=i},[o,s,i]),Ei(r,l);const h=k.useCallback((...A)=>{var j;const f=t(...A);if(f!==c){if(u.current){l(f);return}return(j=p.current)==null?void 0:j.call(p,...A)}},[c,p]),b=k.useCallback(A=>{var f;u.current=!0,(f=d.current)==null||f.call(d,A)},[d]),y=k.useCallback(A=>{var j,C;u.current=!1,(j=m.current)==null||j.call(m,A);const f=t(A);l(f),f!==r&&(A.type="change",(C=p.current)==null||C.call(p,A))},[r,m,p]),x=r!==void 0,I=x;return{value:x&&u.current?c:r,onChange:I?h:o,onCompositionStart:I?b:s,onCompositionEnd:I?y:i}}}const K0=H0(),Y0=e=>{const{onChange:t,value:n,...r}=e,o=K0(n,t);return a.jsx(Ne,{...r,...o})};function ml(){const{t:e}=Z();return a.jsx(B.Item,{label:e("pages.analysis-template.pages.visual-edit.settings.form.common-field.title"),name:"title",children:a.jsx(Y0,{})})}const J0="_root_3bh91_1",Q0={root:J0};function Kn(e){const{className:t,...n}=e;return a.jsx(an,{theme:{components:{Collapse:{headerPadding:"8px 12px",borderRadiusLG:0}}},children:a.jsx(Pa,{...n,className:Wt(Q0.root,t)})})}const X0=Sr({getValues:()=>[et.Line,et.Area,et.Bar,et.Column,et.Pie,et.Violin,et.Histogram,et.Heatmap],getLabelMap(e){return e("constants.visual-schema.chart-type",{returnObjects:!0})}}),Z0=e=>{const{t}=Z(),n=B.useWatch("type"),r=a.jsx(B.Item,{label:t("pages.analysis-template.pages.visual-edit.settings.form.chart.label"),name:"label",initialValue:!1,children:a.jsx(Ea,{})}),o=a.jsx(B.Item,{label:t("pages.analysis-template.pages.visual-edit.settings.form.chart.slider"),name:"slider",initialValue:!1,children:a.jsx(Ea,{})}),s=a.jsx(B.Item,{label:t("pages.analysis-template.pages.visual-edit.settings.form.chart.group-series-field"),name:"groupSeriesField",children:a.jsx(Ne,{placeholder:"group"})}),i=a.jsx(B.Item,{label:t("pages.analysis-template.pages.visual-edit.settings.form.chart.stack-series-field"),name:"stackSeriesField",children:a.jsx(Ne,{placeholder:"stack"})});return a.jsx(Kn,{defaultActiveKey:["basic","x-axis","y-axis","pie","histogram","heatmap"],items:[{key:"basic",label:t("pages.analysis-template.pages.visual-edit.settings.form.collapse-group.basic"),forceRender:!0,enable:!0,children:a.jsxs(a.Fragment,{children:[a.jsx(B.Item,{label:t("pages.analysis-template.pages.visual-edit.settings.form.chart.type"),name:"type",children:a.jsx(X0,{})}),a.jsx(ml,{}),a.jsx(pl,{}),a.jsx(B.Item,{label:t("pages.analysis-template.pages.visual-edit.settings.form.chart.legend"),name:"legend",children:a.jsx(Ea,{})}),a.jsx(B.Item,{label:t("pages.analysis-template.pages.visual-edit.settings.form.chart.tooltip"),name:"tooltip",children:a.jsx(Ea,{})}),(()=>{switch(n){case et.Line:case et.Area:return a.jsxs(a.Fragment,{children:[o,r,s]});case et.Violin:return a.jsxs(a.Fragment,{children:[o,s,a.jsx(B.Item,{label:t("pages.analysis-template.pages.visual-edit.settings.form.chart.group-series-name"),name:"groupSeriesName",children:a.jsx(Ne,{})})]});case et.Bar:case et.Column:return a.jsxs(a.Fragment,{children:[o,r,i,s]});case et.Pie:return a.jsx(a.Fragment,{children:r});case et.Heatmap:return a.jsx(a.Fragment,{children:r});case et.Histogram:return a.jsxs(a.Fragment,{children:[r,i]});default:return null}})()]})},{label:t("pages.analysis-template.pages.visual-edit.settings.form.collapse-group.x-axis"),key:"x-axis",enable:![et.Pie,et.Histogram].includes(n),forceRender:!0,children:a.jsxs(a.Fragment,{children:[a.jsx(B.Item,{label:t("pages.analysis-template.pages.visual-edit.settings.form.chart.axis.name"),name:["xAxis","name"],children:a.jsx(Ne,{})}),a.jsx(B.Item,{name:["xAxis","showTitle"],label:t("pages.analysis-template.pages.visual-edit.settings.form.chart.axis.show-title"),initialValue:!1,children:a.jsx(Ea,{})}),a.jsx(B.Item,{label:t("pages.analysis-template.pages.visual-edit.settings.form.chart.axis.field"),tooltip:t("pages.analysis-template.pages.visual-edit.settings.form.chart.x-axis.field-tooltip"),name:["xAxis","field"],children:a.jsx(Ne,{})}),a.jsx(zr,{namePath:"xAxis"})]})},{label:t("pages.analysis-template.pages.visual-edit.settings.form.collapse-group.y-axis"),key:"y-axis",enable:![et.Pie,et.Histogram].includes(n),forceRender:!0,children:a.jsxs(a.Fragment,{children:[a.jsx(B.Item,{label:t("pages.analysis-template.pages.visual-edit.settings.form.chart.axis.name"),name:["yAxis","name"],children:a.jsx(Ne,{})}),a.jsx(B.Item,{name:["yAxis","showTitle"],label:t("pages.analysis-template.pages.visual-edit.settings.form.chart.axis.show-title"),initialValue:!1,children:a.jsx(Ea,{})}),a.jsx(B.Item,{label:t("pages.analysis-template.pages.visual-edit.settings.form.chart.axis.field"),name:["yAxis","field"],extra:n===et.Violin&&t("pages.analysis-template.pages.visual-edit.settings.form.chart.y-axis.violin-tip"),children:a.jsx(Ne,{})}),a.jsx(zr,{namePath:"yAxis"})]})},{label:t("pages.analysis-template.pages.visual-edit.settings.form.collapse-group.pie"),key:"pie",enable:n===et.Pie,forceRender:!0,children:a.jsxs(a.Fragment,{children:[a.jsx(B.Item,{label:t("pages.analysis-template.pages.visual-edit.settings.form.chart.pie.name-field"),name:"nameField",children:a.jsx(Ne,{})}),a.jsx(B.Item,{label:t("pages.analysis-template.pages.visual-edit.settings.form.chart.pie.value-field"),name:"valueField",children:a.jsx(Ne,{})}),a.jsx(zr,{}),a.jsx(B.Item,{label:t("pages.analysis-template.pages.visual-edit.settings.form.chart.pie.ring"),name:"ring",initialValue:!1,children:a.jsx(Ea,{})})]})},{label:t("pages.analysis-template.pages.visual-edit.settings.form.collapse-group.histogram"),key:"histogram",enable:n===et.Histogram,forceRender:!0,children:a.jsxs(a.Fragment,{children:[a.jsx(B.Item,{label:t("pages.analysis-template.pages.visual-edit.settings.form.chart.histogram.bin-field"),name:"binField",children:a.jsx(Ne,{})}),a.jsx(B.Item,{label:t("pages.analysis-template.pages.visual-edit.settings.form.chart.histogram.bin-width"),name:"binWidth",initialValue:1,children:a.jsx(qa,{min:0,placeholder:"1"})})]})},{label:t("pages.analysis-template.pages.visual-edit.settings.form.collapse-group.heatmap"),key:"heatmap",enable:n===et.Heatmap,forceRender:!0,children:a.jsxs(a.Fragment,{children:[a.jsx(B.Item,{label:t("pages.analysis-template.pages.visual-edit.settings.form.chart.pie.value-field"),name:"valueField",children:a.jsx(Ne,{})}),a.jsx(zr,{})]})}].filter(u=>u.enable)})},e1="_normal_19sd9_1",t1="_edit_19sd9_6",ic={normal:e1,edit:t1};function Rd(e){const{value:t,onChange:n}=e,[r,o]=jt.useState(!1),[s,i]=jt.useState(t),u=jt.useRef(!1),c=jt.useRef();jt.useEffect(()=>{i(t)},[t]);const l=k.useCallback(()=>{o(!0)},[]),p=k.useCallback(({target:I})=>{i(I.value.replace(/[\n\r]/g,""))},[]),d=k.useCallback(()=>{u.current=!0},[]),m=k.useCallback(()=>{u.current=!1},[]),h=k.useCallback(I=>{I.stopPropagation();const{key:w}=I;u.current||(c.current=w)},[]),b=k.useCallback(()=>{n==null||n((s==null?void 0:s.trim())??""),o(!1)},[s,n]),y=k.useCallback(I=>{const{ctrlKey:w,altKey:A,metaKey:f,shiftKey:j,key:C}=I;c.current===C&&!u.current&&!w&&!A&&!f&&!j&&(C==="Enter"?b():C==="Escape"&&o(!1))},[b]),x=k.useCallback(()=>{b()},[b]);return r?a.jsx(Ne,{value:s,onChange:p,onBlur:x,onKeyDown:h,onKeyUp:y,suffix:a.jsx(qm,{}),onCompositionStart:d,onCompositionEnd:m}):a.jsxs("div",{className:ic.normal,children:[e.value,a.jsx(zm,{className:ic.edit,onClick:l})]})}const a1="_colPanel_1ppp7_1",r1="_colCollapse_1ppp7_5",n1="_addition_1ppp7_9",s1="_remove_1ppp7_13",dr={colPanel:a1,colCollapse:r1,addition:n1,remove:s1},o1=e=>{const{t}=Z();return a.jsxs(Kn,{defaultActiveKey:["basic","cols"],children:[a.jsxs(Pa.Panel,{header:t("pages.analysis-template.pages.visual-edit.settings.form.collapse-group.basic"),children:[a.jsx(ml,{}),a.jsx(pl,{}),a.jsx(B.Item,{label:t("pages.analysis-template.pages.visual-edit.settings.form.overview.column"),name:"column",children:a.jsx(qa,{min:1})})]},"basic"),a.jsx(Pa.Panel,{header:t("pages.analysis-template.pages.visual-edit.settings.form.collapse-group.cols"),className:dr.colPanel,children:a.jsx(Gc,{name:"config",addItemInitialValue:n=>({name:t("pages.analysis-template.pages.visual-edit.settings.form.overview.default-name")+(n+1),key:`key_${Pr(4)}`,formatType:"",formatOptions:{}}),renderRoot:(n,r)=>a.jsxs(an,{theme:{components:{Collapse:{headerPadding:"8px 0",paddingSM:0,contentPadding:"0 0 0 16px"}}},children:[n,a.jsx("div",{className:dr.addition,children:r.addition})]}),renderItem:(n,r,o,s)=>a.jsx(Pa,{ghost:!0,className:dr.colCollapse,collapsible:"icon",defaultActiveKey:["col"],children:a.jsxs(Pa.Panel,{forceRender:!0,extra:a.jsxs(a.Fragment,{children:[o.sort,a.jsx(Ae,{type:"default",className:dr.remove,onClick:()=>s.remove(n.name),icon:a.jsx(Wi,{})})]}),header:a.jsx(B.Item,{noStyle:!0,name:[n.name,"name"],children:a.jsx(Rd,{})}),children:[a.jsx(B.Item,{label:t("pages.analysis-template.pages.visual-edit.settings.form.overview.cols.key"),name:[n.name,"key"],children:a.jsx(Ne,{})}),a.jsx(zr,{namePath:"config",listField:n})]},"col")})})},"cols")]})},i1=Sr({getValues:()=>[za.Full,za.DivideTwo,za.DivideThree],getLabelMap(e){return e("constants.visual-schema.row-layout",{returnObjects:!0})}}),Fd=e=>{const{t}=Z();return a.jsx(Kn,{defaultActiveKey:["basic"],children:a.jsxs(Pa.Panel,{header:t("pages.analysis-template.pages.visual-edit.settings.form.collapse-group.basic"),forceRender:!0,children:[a.jsx(B.Item,{label:t("pages.analysis-template.pages.visual-edit.settings.form.row.layout"),name:"layout",children:a.jsx(i1,{})}),a.jsx(B.Item,{label:t("pages.analysis-template.pages.visual-edit.settings.form.row.min-height"),name:"minHeight",children:a.jsx(qa,{min:0,addonAfter:"PX",step:50})})]},"basic")})};Fd.getDerivedNodeFromNewProps=(e,t)=>{const{layout:n}=e,r=Od(n,t.children);return{...t,props:e,children:r}};const l1=e=>{const{t}=Z();return a.jsxs(Kn,{defaultActiveKey:["basic","cols"],children:[a.jsxs(Pa.Panel,{header:t("pages.analysis-template.pages.visual-edit.settings.form.collapse-group.basic"),children:[a.jsx(ml,{}),a.jsx(pl,{}),a.jsx(B.Item,{label:t("pages.analysis-template.pages.visual-edit.settings.form.table.pagination.page-size.label"),name:["pagination","pageSize"],tooltip:t("pages.analysis-template.pages.visual-edit.settings.form.table.pagination.page-size.tooltip"),initialValue:0,children:a.jsx(qa,{min:0})}),a.jsx(B.Item,{label:t("pages.analysis-template.pages.visual-edit.settings.form.table.pagination.show-all-data.label"),name:"showAllData",valuePropName:"checked",tooltip:t("pages.analysis-template.pages.visual-edit.settings.form.table.pagination.show-all-data.tooltip"),children:a.jsx(Gm,{})})]},"basic"),a.jsx(Pa.Panel,{header:t("pages.analysis-template.pages.visual-edit.settings.form.collapse-group.cols"),className:dr.colPanel,children:a.jsx(Gc,{name:"config",addItemInitialValue:n=>({name:t("pages.analysis-template.pages.visual-edit.settings.form.table.default-name")+(n+1),key:`key_${Pr(4)}`,width:200,formatType:"",formatOptions:{}}),renderRoot:(n,r)=>a.jsxs(an,{theme:{components:{Collapse:{headerPadding:"8px 0",paddingSM:0,contentPadding:"0 0 0 16px"}}},children:[n,a.jsx("div",{className:dr.addition,children:r.addition})]}),renderItem:(n,r,o,s)=>a.jsx(Pa,{ghost:!0,className:dr.colCollapse,collapsible:"icon",defaultActiveKey:["col"],children:a.jsxs(Pa.Panel,{forceRender:!0,extra:a.jsxs(a.Fragment,{children:[o.sort,a.jsx(Ae,{type:"default",className:dr.remove,onClick:()=>s.remove(n.name),icon:a.jsx(Wi,{})})]}),header:a.jsx(B.Item,{noStyle:!0,name:[n.name,"name"],children:a.jsx(Rd,{})}),children:[a.jsx(B.Item,{label:t("pages.analysis-template.pages.visual-edit.settings.form.table.cols.key"),name:[n.name,"key"],children:a.jsx(Ne,{})}),a.jsx(B.Item,{label:t("pages.analysis-template.pages.visual-edit.settings.form.table.cols.width"),name:[n.name,"width"],initialValue:200,children:a.jsx(qa,{min:0,placeholder:"200",addonAfter:"PX"})}),a.jsx(B.Item,{label:t("pages.analysis-template.pages.visual-edit.settings.form.overview.cols.fixed.label"),name:[n.name,"fixed"],initialValue:!1,children:a.jsx(Qc,{options:[{value:!1,label:t("pages.analysis-template.pages.visual-edit.settings.form.overview.cols.fixed.false")},{value:"left",label:t("pages.analysis-template.pages.visual-edit.settings.form.overview.cols.fixed.left")},{value:"right",label:t("pages.analysis-template.pages.visual-edit.settings.form.overview.cols.fixed.right")}]})}),a.jsx(zr,{namePath:"config",listField:n})]},"col")})})},"cols")]})},c1=Sr({getValues:()=>[Aa.H1,Aa.H2,Aa.H3,Aa.H4,Aa.H5,Aa.Text],getLabelMap(e){return e("constants.visual-schema.text-level",{returnObjects:!0})}});function u1(e){const{t}=Z();return a.jsx(Kn,{defaultActiveKey:["basic"],children:a.jsxs(Pa.Panel,{header:t("pages.analysis-template.pages.visual-edit.settings.form.collapse-group.basic"),children:[a.jsx(B.Item,{label:t("pages.analysis-template.pages.visual-edit.settings.form.text.content"),name:"content",children:a.jsx(Ne,{})}),a.jsx(B.Item,{label:t("pages.analysis-template.pages.visual-edit.settings.form.text.level"),name:"level",children:a.jsx(c1,{})})]},"basic")})}const d1="_form_1go1l_1",p1={form:d1},m1={text:u1,row:Fd,chart:Z0,overview:o1,table:l1},f1=()=>{const{t:e}=Z();return a.jsx(Ma,{image:Ma.PRESENTED_IMAGE_SIMPLE,style:{marginTop:100},description:e("pages.analysis-template.pages.visual-edit.settings.no-form-description")})};function h1(e){const{node:t}=e,n=m1[e.node.type]??f1,{updateById:r}=Tr(),[o]=B.useForm();k.useEffect(()=>{o.setFieldsValue(t.props)},[o,t]);const s=k.useCallback(()=>{var l;const u=o.getFieldsValue(),c=((l=n.getDerivedNodeFromNewProps)==null?void 0:l.call(n,u,t))??{props:u};r(t.id,c)},[n,o,t,r]),i=ea(()=>{dl(s)});return a.jsx(B,{className:p1.form,labelAlign:"left",labelCol:{span:8},colon:!1,form:o,onValuesChange:i,children:a.jsx(n,{...e})})}const g1="_setting_oh3x1_1",y1="_header_oh3x1_9",b1="_title_oh3x1_15",v1="_navigation_oh3x1_18",_1="_settingOpen_oh3x1_23",yn={setting:g1,header:y1,title:b1,navigation:v1,settingOpen:_1};function x1(){const[e,t]=k.useState(!0),{t:n}=Z(),{activeNode:r,setActiveId:o,activeNodePath:s}=Tr(),i=n("pages.analysis-template.pages.visual-edit.type-names",{returnObjects:!0}),u=k.useCallback(()=>{t(!1)},[]),c=k.useCallback(()=>{t(!0)},[]),l=k.useMemo(()=>s.map((p,d)=>{const m=d===s.length-1,h=i[p.type];return{title:m?h:a.jsx("a",{children:h}),onClick:m?void 0:()=>o(p.id)}}),[s,o,i]);return e?a.jsxs("div",{className:yn.setting,children:[a.jsxs(it,{className:yn.header,children:[a.jsx("h3",{className:yn.title,children:n("pages.analysis-template.pages.visual-edit.property")}),a.jsx(Ae,{type:"text",icon:a.jsx(Wi,{}),onClick:u})]}),r?a.jsxs(a.Fragment,{children:[a.jsx(Hc,{separator:">",className:yn.navigation,items:l}),a.jsx(h1,{node:r},r.id)]}):a.jsx(Ma,{image:Ma.PRESENTED_IMAGE_SIMPLE,style:{marginTop:100},description:n("pages.analysis-template.pages.visual-edit.settings.empty-description")})]}):a.jsx(Ae,{size:"large",icon:a.jsx(Fs,{}),onClick:c,className:yn.settingOpen})}const w1="_editor_i3m0c_1",j1={editor:w1},lc={version:"1",layout:{id:er,type:"root",props:{chartTheme:ia.DEFAULT,showInfo:!0},children:[]}},I1=()=>{const{id:e}=$t(),[t,n]=Uc(lc),{data:r,isValidating:o}=rl(e,{onSuccess:s=>{n(xr(s.visual_config,lc))}});return a.jsx(nt,{fullWidth:!0,autoBreadcrumb:!1,loading:o,children:a.jsx(ul.Provider,{value:r,children:a.jsxs(X_,{config:t,setConfig:n,children:[a.jsx(q0,{}),a.jsx("div",{className:j1.editor,children:a.jsxs(rd,{mode:vr.Edit,children:[a.jsx(tl,{root:t.layout,components:R0,decorators:O0,interceptors:T0}),a.jsx(x1,{})]})})]})})})},S1="_wrapper_e1d85_1",k1="_bottomButtons_e1d85_6",C1="_title_e1d85_12",Ao={wrapper:S1,bottomButtons:k1,title:C1},ta=e=>{const{title:t,bottomButtons:n,children:r,className:o}=e;return a.jsxs("div",{className:Wt(Ao.wrapper,o),children:[!!t&&a.jsx("h3",{className:Ao.title,children:t}),r,a.jsx(it,{split:a.jsx(ba,{type:"vertical"}),className:Ao.bottomButtons,children:n})]})},Ld=e=>({...e,tags:Ja(e.tags)});function E1(e){return ee.requestFunc("facplf_get_data_import_template_params",{template_id:e}).catch(()=>[])}async function Nd(e){return{...e,params:await E1(e.template_id)}}async function gi(){const e=await ee.requestFunc("facplf_data_import_template_list");return{items:await Promise.all(e.items.map(Ld).map(Nd)),total:e.total}}gi.SWR_KEY="facplf_data_import_template_list";async function yi(e){const t=await ee.requestFunc("facplf_data_import_template_detail",{template_id:e});return Nd(Ld(t))}yi.SWR_KEY="facplf_data_import_template_detail";function no(e){const t=ca(),n=t.hasDepartmentAuth(ot.DATA_IMPORT)||t.hasSystemAuth(At.DATA_IMPORT),{data:r,...o}=Oe(()=>n?gi.SWR_KEY:null,gi,e==null?void 0:e.swr);return{getTemplateParameters:k.useCallback(i=>{const u=r==null?void 0:r.items.find(c=>c.template_id===i);return u==null?void 0:u.params},[r]),data:r,...o}}function A1(e){const{...t}=e,n=Xi();return a.jsx(Ji,{typeOptions:n,...t})}function P1(e){return el(e,Zi,null)}const T1="_preset_15ia7_1",cc={preset:T1};function fl(e){const{templateId:t,listFieldName:n,readonly:r,labelCol:o,namePath:s,hidePreset:i}=e,u=B.useFormInstance(),c=k.useMemo(()=>ha(s,n,"template_params"),[s,n]),l=k.useMemo(()=>ha(n,"template_params"),[n]),{t:p}=Z(),{getTemplateParameters:d}=no({swr:{revalidateIfStale:!1}}),m=d(t),h=t&&!i?a.jsx(B.Item,{label:p("common.use-preset.label"),hidden:r,children:a.jsx(Hi,{containerClassName:cc.preset,presetType:`data_import_template_${t}`,presetValue:()=>JSON.stringify(u.getFieldValue(c)),onChange:(b,y)=>{const x=u.getFieldValue(c),I=JSON.parse(y.value),w=x.map(A=>{const f=I==null?void 0:I.find(j=>j.name===A.name);return f||A});u.setFieldValue(c,w)}})}):null;return a.jsxs(a.Fragment,{children:[h,a.jsx(B.List,{name:l,children:b=>b.map((y,x)=>{const I=u.getFieldValue(ha(c,y.name)),w=m==null?void 0:m.find(f=>f.name===(I==null?void 0:I.name)),A=!!(w!=null&&w.type);return a.jsx(B.Item,{labelCol:o,label:w==null?void 0:w.name,tooltip:w==null?void 0:w.description,name:y.name,className:cc.templateParam,rules:[{validator:async(f,j)=>P1(j)}],children:a.jsx(A1,{disableType:A})},x)})})]})}const O1=e=>{const{templateId:t,params:n,text:r,type:o,...s}=e,[i,{setTrue:u,setFalse:c}]=Ir(!1),{t:l}=Z();return a.jsxs(a.Fragment,{children:[o==="link"?a.jsx(De.Link,{onClick:u,children:r??l("pages.data-import.components.view-run-params-btn.text")}):a.jsx(Ae,{onClick:u,...s,children:r??l("pages.data-import.components.view-run-params-btn.text")}),a.jsx(tu,{width:700,title:l("pages.data-import.components.view-run-params-btn.drawer-title"),open:i,onClose:c,children:a.jsx(B,{initialValues:{template_params:n},disabled:!0,children:a.jsx(fl,{templateId:t,hidePreset:!0,labelCol:{span:4}})})})]})},R1=()=>{var i;const{id:e}=$t(),{t}=Z(),{data:n,isLoading:r,isValidating:o}=Oe(["facplf_get_data_import_record_detail",e],async()=>ee.requestFunc("facplf_get_data_import_record_detail",{import_record_id:e}),{refreshInterval:u=>(u==null?void 0:u.status)===Xe.RUNNING?5e3:0}),s=k.useMemo(()=>[{label:t("pages.data-import.pages.run-record-detail.label.name"),children:(n==null?void 0:n.template_name)??"-"},{label:t("pages.data-import.pages.run-record-detail.label.import-db"),children:(n==null?void 0:n.db_name)??"-"},{label:t("pages.data-import.pages.run-record-detail.label.import-tb"),children:(n==null?void 0:n.tb_name)??"-"},{label:t("pages.data-import.pages.run-record-detail.label.create-time"),children:n!=null&&n.create_time?Qe(n.create_time):"-"},{label:t("pages.data-import.pages.run-record-detail.label.creator"),children:n==null?void 0:n.creator},{label:t("pages.data-import.pages.run-record-detail.label.status"),children:n!=null&&n.status?a.jsx(Bt,{status:n.status}):null}],[t,n]);return a.jsx(Ys,{validating:o,loading:r,status:n==null?void 0:n.status,failedReason:n==null?void 0:n.failed_reason,notFound:!e,beforeContent:a.jsx(ta,{title:t("pages.data-import.pages.run-record-detail.basic-info"),bottomButtons:n&&a.jsx(O1,{type:"link",templateId:(n==null?void 0:n.template_id)??"",params:JSON.parse((n==null?void 0:n.params)??"[]")}),children:a.jsx(Cr,{layout:"vertical",colon:!1,column:4,items:s})}),children:a.jsx(ta,{title:t("pages.data-import.pages.run-record-detail.import-result"),children:a.jsx(Js,{dataSource:(i=n==null?void 0:n.result)==null?void 0:i.data})})})},F1={items:[],total:0},Dd=e=>{const{data:t=F1,isLoading:n}=no({swr:{revalidateIfStale:!1}}),r=k.useMemo(()=>t.items.map(o=>({label:o.name,value:o.template_id,template:o})),[t]);return a.jsx(kt,{options:r,loading:n,...e})},L1="_form_1je5t_1",N1={form:L1},D1=()=>{const{t:e}=Z(),[t,n]=Os({}),{data:r,isLoading:o}=Oe(["facplf_get_data_import_records",t],async()=>ee.requestFunc("facplf_get_data_import_records",{template_id:t.template_id})),s=k.useMemo(()=>[{title:e("pages.data-import.pages.run-record-list.table.database"),dataIndex:"db_name",width:200},{title:e("pages.data-import.pages.run-record-list.table.table-name"),dataIndex:"tb_name",width:200},{title:e("pages.data-import.pages.run-record-list.table.status"),dataIndex:"status",render:i=>a.jsx(Bt,{status:i}),width:150},{title:e("pages.data-import.pages.run-record-list.table.creator"),dataIndex:"creator",width:150},{title:e("pages.data-import.pages.run-record-list.table.create-time"),dataIndex:"create_time",render:i=>i?Qe(i):"-",width:200},{title:e("common.table.operation.title"),dataIndex:"operation",width:150,render:(i,u)=>a.jsx(Vt,{children:a.jsx(Ue,{to:Se.dataImportRecordDetail(u.import_record_id),children:e("common.table.operation.view-detail")})})}],[e]);return a.jsxs(nt,{headerBottomMargin:!0,autoBreadcrumb:{addonItems:[{title:e("pages.data-import.pages.run-record-list.table.run-record")}]},children:[a.jsx(Ai,{className:N1.form,onValuesChange:i=>n(i),syncedValues:t,noAction:!0,children:a.jsx(B.Item,{label:e("pages.data-import.pages.run-record-list.search.template"),name:"template_id",children:a.jsx(Dd,{})})}),a.jsx(vt,{loading:o,columns:s,dataSource:(r==null?void 0:r.items)||[]})]})},Md=e=>{const{t}=Z();return a.jsxs(a.Fragment,{children:[a.jsx(B.Item,{name:"name",label:t("pages.data-import.components.create-form.label.name"),help:e.nameHelp,rules:[{required:!0},{pattern:Gy,message:t("common.validate.ddb-var-name-rule-message")}],children:a.jsx(Ne,{placeholder:t("pages.data-import.components.create-form.placeholder.name")})}),a.jsx(B.Item,{name:"tags",label:t("pages.data-import.components.create-form.label.tags"),children:a.jsx(sn,{tagType:Er.DATA_IMPORT_TEMPLATE})}),a.jsx(B.Item,{name:"comment",label:t("pages.data-import.components.create-form.label.comment"),children:a.jsx(Ne.TextArea,{rows:4,placeholder:t("pages.data-import.components.create-form.placeholder.comment")})})]})},M1=_a({useFormRender:({formProps:e})=>{const t=va({zh:{labelCol:{span:4}},en:{labelCol:{span:6}}});return a.jsx(B,{...t,...e,children:a.jsx(Md,{...e})})},onSubmit:async(e,{t,antApp:{message:n}})=>{var r;await ee.requestFunc("facplf_create_new_data_import_template",{...e,tags:((r=e==null?void 0:e.tags)==null?void 0:r.join(","))??""}),n.success(t("pages.data-import.components.create-template-modal.success-msg"))},useModalProps:({t:e})=>({title:e("pages.data-import.components.create-template-modal.title"),width:640})}),W1=Ha({useFormRender:({formProps:e,t})=>{const n=va({zh:{labelCol:{span:4}},en:{labelCol:{span:6}}});return a.jsx(B,{...n,...e,children:a.jsx(Md,{...e,nameHelp:t("common.template-rename-help")})})},useFormProps:({props:e})=>({initialValues:e.dataImportTemplate}),onSubmit:async(e,{t,antApp:{message:n},props:r})=>{var o;await ee.requestFunc("facplf_edit_data_import_template",{...e,template_id:r.templateId,tags:((o=e==null?void 0:e.tags)==null?void 0:o.join(","))??""}),n.success(t("pages.data-import.components.modify-template-drawer.success-msg"))},useDrawerProps:({t:e})=>({title:e("pages.data-import.components.modify-template-drawer.title"),width:640})}),B1="_title_881wa_1",$1={title:B1},Wd=Ha({useDrawerProps:({t:e})=>({title:e("pages.data-import.run-template-drawer.title"),width:700,styles:{body:{padding:16}}}),useFormProps:({props:e})=>({labelCol:{span:6},initialValues:{template_params:e.template.params.map(t=>({name:t.name,type:t.type}))}}),useFormRender:({t:e,formProps:t,props:n})=>a.jsxs(B,{...t,children:[a.jsx("h3",{className:$1.title,children:e("pages.data-import.run-template-drawer.form.params-title")}),a.jsx(fl,{labelCol:{span:6},templateId:n.template.template_id})]}),onSubmit:async(e,{t,antApp:{message:n},props:r})=>{var i;try{await((i=r.beforeSubmit)==null?void 0:i.call(r))}catch(u){throw n.error(Be(u)),u}const{template_params:o}=e,{import_record_id:s}=await ee.requestFunc("facplf_run_data_import",{template_id:r.template.template_id,template_params:o});n.success(t("common.run-success")),setTimeout(()=>{window.open(r.history.createHref(Se.dataImportRecordDetail(s)))},1e3)}}),V1=()=>{const{id:e}=$t(),[t,n]=k.useState(""),r=Ft(),{t:o}=Z(),{data:s,isLoading:i,mutate:u}=Oe([yi.SWR_KEY,e],async()=>yi(e),{onSuccess:d=>{t||n(d.source_code)}}),c=he(async()=>{await ke.show(W1,{dataImportTemplate:{name:(s==null?void 0:s.name)??"",comment:(s==null?void 0:s.comment)??"",tags:(s==null?void 0:s.tags)||[]},templateId:e}),u()}),l=he(async()=>{await ee.requestFunc("facplf_edit_data_import_template_code",{template_id:e,code:t}),u()}),p=he(async()=>{s&&ke.show(Wd,{history:r,template:s})});return a.jsx(nt,{loading:i,autoBreadcrumb:{addonItems:[{title:s==null?void 0:s.name}]},headerBottomMargin:8,headerAction:a.jsxs(it,{children:[a.jsx(Ae,{type:"link",onClick:c,children:o("pages.data-import.pages.template-edit.edit-template-basic-info-btn")}),a.jsx(Ae,{type:"primary",onClick:p,children:o("pages.data-import.pages.template-edit.start-data-import")})]}),children:a.jsx(nn,{title:o("pages.data-import.pages.template-edit.title"),code:t,sourceCode:s==null?void 0:s.source_code,onChange:n,onSave:l,loading:i})})},q1="_btnWrapper_18yu2_1",z1="_comment_18yu2_5",G1={btnWrapper:q1,comment:z1},U1=()=>{const e=ca(),{t}=Z(),{message:n}=at.useApp(),r=Ra(b=>b.user),o=Ft(),{data:s,mutate:i,isLoading:u}=no(),c=he(b=>b.creator===(r==null?void 0:r.username)),l=he(b=>b.creator===(r==null?void 0:r.username)||e.isSystemAdmin()||e.hasSystemAuth(At.REVIEW)),p=he(async()=>{await ke.show(M1),i()}),d=he(b=>{ke.show(Wd,{history:o,template:b})}),m=he(async b=>{try{await ee.requestFunc("facplf_delete_data_import_template",{template_id:b.template_id}),i(),n.success(t("common.delete-success"))}catch(y){n.error(Be(y))}}),h=k.useMemo(()=>[{title:t("pages.data-import.pages.template-list.table.name"),dataIndex:"name",width:200,fixed:"left"},{title:t("pages.data-import.pages.template-list.table.tags"),dataIndex:"tags",width:200,render:b=>b!=null&&b.length?a.jsx(Gt,{ellipsisTagProps:{color:"blue"},max:3,children:b.map(y=>a.jsx(yt,{color:"blue",children:y},y))}):"-"},{title:t("pages.data-import.pages.template-list.table.run-record"),width:100,dataIndex:"run_record_count",render:(b,y)=>b&&a.jsx(Ue,{to:Se.dataImportRecordList({template_id:y.template_id}),children:b})},{title:t("pages.data-import.pages.template-list.table.creator"),dataIndex:"creator",width:200},{title:t("pages.data-import.pages.template-list.table.create-time"),dataIndex:"create_time",width:200,render:b=>b?Qe(b):"-"},{title:t("pages.data-import.pages.template-list.table.update-time"),dataIndex:"update_time",width:200,render:b=>b?Qe(b):"-"},{title:t("pages.data-import.pages.template-list.table.comment"),dataIndex:"comment",width:200,render:b=>a.jsx(De.Paragraph,{ellipsis:{expandable:!0,rows:2},children:b})},{title:t("common.table.operation.title"),dataIndex:"operation",width:250,fixed:"right",render:(b,y)=>a.jsxs(Vt,{max:4,children:[a.jsx("a",{onClick:()=>d(y),children:t("common.table.operation.run")}),c(y)&&a.jsx(Ue,{to:Se.dataImportTemplateEdit(y.template_id),children:t("pages.data-import.table.edit-code")}),a.jsx(mr,{code:y.source_code}),l(y)&&a.jsx(la,{title:t("pages.data-import.pages.template-list.message.delete-confirm",{name:y.name}),onConfirm:()=>m(y),children:a.jsx(De.Link,{type:"danger",children:t("common.table.operation.delete")})})]})}],[l,c,d,m,t]);return a.jsxs(nt,{headerBottomMargin:!0,children:[a.jsx("div",{className:G1.btnWrapper,children:a.jsx(Ae,{type:"primary",icon:a.jsx(Ua,{}),onClick:p,children:t("pages.data-import.pages.template-list.create-btn")})}),a.jsx(vt,{rowKey:"name",scroll:{x:1200},dataSource:s==null?void 0:s.items,loading:u,columns:h})]})},Bd=()=>{const{t:e}=Z();return a.jsxs(a.Fragment,{children:[a.jsx(B.Item,{label:e("pages.data-import-lib.lib-modal.form.name.label"),required:!0,name:"name",validateFirst:!0,rules:[{required:!0},{validator:async(t,n)=>{if(!$u.test(n))throw e("common.validate.ddb-var-name-rule-message")}}],children:a.jsx(Ne,{})}),a.jsx(B.Item,{name:"tags",label:e("pages.data-import-lib.lib-modal.form.tags.label"),initialValue:[],children:a.jsx(sn,{tagType:Er.DATA_IMPORT_LIB})}),a.jsx(B.Item,{name:"comment",label:e("common.comment"),initialValue:"",children:a.jsx(Ne.TextArea,{autoSize:{minRows:3,maxRows:5}})})]})},H1=_a({useModalProps:({t:e})=>({title:e("pages.data-import-lib.lib-modal.create-title")}),useFormProps:()=>({labelCol:{span:6}}),useFormRender:({formProps:e})=>a.jsx(B,{...e,children:a.jsx(Bd,{})}),onSubmit:async(e,{t,antApp:{message:n},props:r})=>{var s;const{lib_id:o}=await ee.requestFunc("facplf_create_new_data_import_lib",{name:e.name,tags:e.tags.join(","),comment:e.comment});n.success(t("common.create-success")),(s=r==null?void 0:r.history)==null||s.push(Se.dataImportLibEdit(o))}}),K1=Ha({useDrawerProps:({t:e})=>({title:e("pages.data-import-lib.lib-modal.edit-title"),width:720}),useFormProps:({props:e})=>{var t,n,r;return{initialValues:{name:(t=e.lib)==null?void 0:t.name,tags:(n=e.lib)==null?void 0:n.tags,comment:(r=e.lib)==null?void 0:r.comment},labelCol:{span:6}}},useFormRender:({formProps:e})=>a.jsx(B,{...e,children:a.jsx(Bd,{})}),onSubmit:async(e,{props:t,t:n,antApp:{message:r}})=>{await ee.requestFunc("facplf_edit_data_import_lib",{lib_id:t.lib.lib_id,name:e.name,tags:e.tags.join(","),comment:e.comment}),r.success(n("common.save-success"))}});function $d(e){return{...e,tags:Ja(e.tags)}}async function bi(){const e=await ee.requestFunc("facplf_data_import_lib_list");return{items:e.items.map($d),total:e.total}}bi.SWR_KEY="facplf_data_import_lib_list";async function vi(e){const t=await ee.requestFunc("facplf_data_import_lib_detail",{lib_id:e});return $d(t)}vi.SWR_KEY="facplf_data_import_lib_detail";function Y1(e,t){return Oe([vi.SWR_KEY,e],()=>vi(e),t)}function J1(){const e=$t(),{t}=Z(),[n,r]=k.useState(""),{data:o,isLoading:s,mutate:i}=Y1(e.id,{onSuccess(d){n||r(d.source_code)}}),u=he(async()=>{await ee.requestFunc("facplf_save_data_import_lib_code",{lib_id:e.id,code:n})}),c=he(async()=>{await u(),i()}),l=k.useCallback(d=>{r(d??"")},[]),p=he(async()=>{o&&(await ke.show(K1,{lib:o}),i())});return a.jsx(nt,{autoBreadcrumb:{addonItems:[{title:o==null?void 0:o.name}]},headerAction:a.jsx("a",{onClick:p,children:t("pages.data-import-lib.edit.actions.edit-lib")}),loading:s,headerBottomMargin:!0,children:a.jsx(nn,{title:t("pages.data-import-lib.edit.code.title"),code:n,sourceCode:o==null?void 0:o.source_code,onChange:l,onSave:c,declarationCode:`module ${o==null?void 0:o.name}`})})}const Q1="_folderIcon_177xc_1",X1="_operations_177xc_5",Z1="_comment_177xc_9",ex="_breadcrumb_177xc_13",Po={folderIcon:Q1,operations:X1,comment:Z1,breadcrumb:ex};function tx(){const{data:e,isLoading:t,mutate:n}=Oe(bi.SWR_KEY,()=>bi()),r=Ft(),o=Ra(d=>d.user),s=ca(),{t:i}=Z(),{message:u}=at.useApp(),c=he(async()=>{await ke.show(H1,{history:r}),n()}),l=he(async d=>{try{await ee.requestFunc("facplf_delete_data_import_lib",{lib_id:d.lib_id}),u.success(i("common.delete-success")),n()}catch(m){u.error(Be(m))}}),p=k.useMemo(()=>[{title:i("common.table.name"),dataIndex:"name",key:"name",fixed:"left",width:200},{title:i("common.table.tags"),dataIndex:"tags",key:"tags",width:200,className:Po.tags,render(d,m){var h;return(h=m.tags)!=null&&h.length?a.jsx(Gt,{children:m.tags.map(b=>a.jsx(yt,{color:"blue",children:b},b))}):"-"}},{title:i("common.table.creator"),dataIndex:"creator",key:"creator",width:150},{title:i("common.table.create_time"),dataIndex:"create_time",key:"create_time",align:"center",width:200,render(d){return d?Qe(d):null}},{title:i("common.table.update_time"),dataIndex:"update_time",key:"update_time",align:"center",width:200,render(d){return d?Qe(d):null}},{title:i("common.comment"),dataIndex:"comment",key:"comment",width:300,render(d){return a.jsx(De.Paragraph,{className:Po.comment,ellipsis:{rows:2,expandable:!0},children:d})}},{title:i("common.table.operation.title"),key:"operation",width:250,fixed:"right",render:(d,m)=>{const h=m.creator===(o==null?void 0:o.username),b=h||s.isSystemAdmin()||s.isMatch({systemAuth:[At.REVIEW]});return a.jsxs(Vt,{max:3,children:[a.jsx(mr,{code:m.source_code}),h&&a.jsx(Ue,{to:Se.dataImportLibEdit(m.lib_id),children:i("pages.data-import-lib.list.table.operation.edit-code")}),b&&a.jsx(la,{title:i("pages.data-import-lib.list.table.operation.delete-confirm.title"),description:i("pages.data-import-lib.list.table.operation.delete-confirm.description",{record:m}),onConfirm:()=>l(m),children:a.jsx(De.Link,{type:"danger",children:i("common.delete")})})]})}}],[i,o==null?void 0:o.username,s,l]);return a.jsxs(nt,{headerBottomMargin:!0,children:[a.jsx(it,{className:Po.operations,children:a.jsx(Ae,{type:"primary",icon:a.jsx(Ua,{}),onClick:c,children:i("pages.data-import-lib.list.create-new")})}),a.jsx(vt,{loading:t,rowKey:"lib_id",columns:p,dataSource:(e==null?void 0:e.items)??[],pagination:{pageSize:20},scroll:{x:1500}})]})}const ax="_nameItem_q3cro_1",rx="_nameLine_q3cro_5",nx="_nameControl_q3cro_12",sx="_check_q3cro_16",ss={nameItem:ax,nameLine:rx,nameControl:nx,check:sx},Vd=({factorId:e})=>{const{t}=Z(),{message:n}=at.useApp(),r=B.useFormInstance(),o=k.useCallback(async()=>{const s=r.getFieldValue("name");if(s)try{(await ee.requestFunc("facplf_duplicate_factor_name_check",{factor_id:e,name:s})).is_duplicate?aa.error({title:t("pages.factor-list.factor-modal.duplicate-check-result.title"),content:t("pages.factor-list.factor-modal.duplicate-check-result.existed")}):aa.success({title:t("pages.factor-list.factor-modal.duplicate-check-result.title"),content:t("pages.factor-list.factor-modal.duplicate-check-result.not-existed")})}catch(i){n.error(Be(i))}},[e,r,n,t]);return a.jsxs(a.Fragment,{children:[a.jsx(B.Item,{className:ss.nameItem,label:t("pages.factor-list.factor-modal.form.factor-name.label"),required:!0,children:a.jsxs("div",{className:ss.nameLine,children:[a.jsx(B.Item,{name:"name",validateFirst:!0,className:ss.nameControl,rules:[{required:!0,message:t("pages.factor-list.factor-modal.form.factor-name.required")},{validator:async(s,i)=>{if(!Vy.test(i))throw t("common.validate.ddb-var-name-rule-message")}}],children:a.jsx(Ne,{})}),a.jsx(qo,{className:ss.check,tooltipContent:t("pages.factor-list.factor-modal.form.factor-name.duplicate-check-tip"),children:a.jsx("a",{onClick:o,children:t("pages.factor-list.factor-modal.form.factor-name.duplicate-check")})})]})}),a.jsx(B.Item,{name:"properties",label:t("pages.factor-list.factor-modal.form.properties.label"),initialValue:[],children:a.jsx(Wu,{})}),a.jsx(B.Item,{name:"tags",label:t("pages.factor-list.factor-modal.form.tags.label"),initialValue:[],children:a.jsx(sn,{tagType:Er.FACTOR})}),a.jsx(B.Item,{name:"comment",label:t("pages.factor-list.factor-modal.form.comment.label"),initialValue:"",children:a.jsx(Ne.TextArea,{autoSize:{minRows:3,maxRows:5}})})]})},ox=_a({useModalProps:({t:e})=>({title:e("pages.factor-list.factor-modal.title")}),useFormProps:()=>({labelCol:{span:6}}),useFormRender:({formProps:e})=>a.jsx(B,{...e,children:a.jsx(Vd,{})}),onSubmit:async(e,{t,antApp:{message:n},props:r})=>{var s;const{factor_id:o}=await ee.requestFunc("facplf_create_new_factor",{name:e.name,properties:e.properties.join(","),tags:e.tags.join(","),comment:e.comment});n.success(t("common.create-success")),(s=r==null?void 0:r.history)==null||s.push(Se.factorDraftEdit(o))}}),qd=Ha({useDrawerProps:({t:e})=>({title:e("pages.factor-list.edit-factor-modal.title"),width:720}),useFormProps:({props:e})=>{var t,n,r,o;return{initialValues:{name:(t=e.factor)==null?void 0:t.name,properties:(n=e.factor)==null?void 0:n.properties,tags:(r=e.factor)==null?void 0:r.tags,comment:(o=e.factor)==null?void 0:o.comment},labelCol:{span:6}}},useFormRender:({formProps:e,props:t})=>a.jsx(B,{...e,children:a.jsx(Vd,{factorId:t.factor.factor_id})}),onSubmit:async(e,{props:t,antApp:{message:n},t:r})=>{await ee.requestFunc("facplf_edit_factor",{factor_id:t.factor.factor_id,name:e.name,properties:e.properties.join(","),tags:e.tags.join(","),comment:e.comment}),n.success(r("common.save-success"))}}),ix="_container_kw5k7_1",lx="_title_kw5k7_1",cx="_task_kw5k7_5",ux="_analysis_kw5k7_9",dx="_name_kw5k7_12",px="_view_kw5k7_16",or={container:ix,title:lx,task:cx,analysis:ux,name:dx,view:px};function mx(e){const{testId:t}=e,{t:n}=Z(),{data:r}=Oe(["facplf_get_test_status",t],()=>ee.requestFunc("facplf_get_test_status",{test_id:t}),{refreshInterval:u=>{var c;return(u==null?void 0:u.test.status)===Xe.RUNNING||((c=u==null?void 0:u.analysis)==null?void 0:c.status)===Xe.RUNNING?5e3:0}}),o=r==null?void 0:r.test,s=r==null?void 0:r.analysis,i=k.useCallback(u=>{switch(u){case Xe.RUNNING:return a.jsx(Bt,{icon:a.jsx(Hm,{}),status:u});case Xe.SUCCESS:return a.jsx(Bt,{icon:a.jsx($i,{}),status:u});case Xe.FAILED:return a.jsx(Bt,{icon:a.jsx(Um,{}),status:u});default:return a.jsx(yt,{icon:a.jsx(Bi,{}),children:n("pages.factor-draft.components.run-result-tracker.status.unknown")})}},[n]);return a.jsxs("div",{className:or.container,children:[a.jsxs(ba,{orientation:"left",orientationMargin:0,plain:!0,className:or.title,type:"horizontal",children:[r==null?void 0:r.factor_name,"-",r==null?void 0:r.func_name,":"]}),o&&a.jsxs("div",{className:or.task,children:[a.jsx("span",{className:or.name,children:n("pages.factor-draft.components.run-result-tracker.task.label")}),i(o==null?void 0:o.status),o.status!==Xe.RUNNING&&a.jsx(Ue,{className:or.view,target:"_blank",to:Se.factorTestDetail(o.test_id),children:n("pages.factor-draft.components.run-result-tracker.view")})]}),(s==null?void 0:s.analysis_id)&&a.jsxs("div",{className:or.analysis,children:[a.jsx("span",{className:or.name,children:n("pages.factor-draft.components.run-result-tracker.analysis.label")}),i(s==null?void 0:s.status),(s==null?void 0:s.status)!==Xe.RUNNING&&a.jsx(Ue,{className:or.view,target:"_blank",to:Se.analysisRecordDetailData(s.analysis_id),children:n("pages.factor-draft.components.run-result-tracker.view")})]})]})}const fx="_container_18572_1",hx={container:fx};function gx(e){const{testIds:t}=e;return a.jsx(it,{className:hx.container,direction:"vertical",children:t.map(n=>a.jsx(mx,{testId:n},n))})}const yx="_templateList_y8nuo_1",bx="_sectionTitle_y8nuo_7",To={templateList:yx,sectionTitle:bx};function vx(e){const{formProps:t,factor:n}=e,[r]=B.useForm(t.form),{t:o}=Z(),s=k.useMemo(()=>[{type:"private",factor_id:n.factor_id,factor_name:n.name,funcs:n.func_list}],[n]);return a.jsxs(B,{form:r,...t,children:[a.jsxs("div",{children:[a.jsx("h3",{className:To.sectionTitle,children:o("pages.factor-draft.components.run-params-form.templates.title")}),a.jsx(B.Item,{label:o("pages.factor-draft.components.run-params-form.factor.label"),name:"factors",rules:[{required:!0}],children:a.jsx(Xs,{factors:s})}),a.jsx(cn,{className:To.templateList,labelCol:t.labelCol,name:"factor_templates",factors:n})]}),a.jsx("h3",{className:To.sectionTitle,children:o("pages.factor-draft.components.run-params-form.analysis.title")}),a.jsx(B.Item,{name:"analysis",label:o("pages.factor-draft.components.run-params-form.is-analysis"),initialValue:!0,children:a.jsx(Ea,{})}),a.jsx(ja,{dependencies:["analysis"],children:({analysis:i})=>i?a.jsx(on,{withTemplateSelect:!0,namePath:"analysis_template"}):null})]})}const zd=Ha({useExtra:()=>({notification:at.useApp().notification}),useDrawerProps:({t:e})=>({title:e("pages.factor-edit.form.title"),width:700,styles:{body:{padding:16}}}),useFormProps:()=>({labelCol:{span:6}}),useFormRender:({formProps:e,props:t})=>a.jsx(vx,{factor:t.factor,formProps:e}),onSubmit:async(e,{t,props:n,antApp:{message:r},extra:{notification:o}})=>{var s;try{await((s=n.beforeSubmit)==null?void 0:s.call(n))}catch(i){throw r.error(Be(i)),i}try{const i=await ee.requestFunc("facplf_create_draft_test",e);o.open({message:t("pages.factor-draft.components.run-modal.notification.title"),description:a.jsx(gx,{testIds:i.tests}),duration:null})}catch(i){r.error(Be(i))}}});function Gd(e){return{...e,properties:Ja(e.properties),tags:Ja(e.tags)}}async function Ud(){const e=await ee.requestFunc("facplf_get_factor_list");return{total:e.total,items:e.items.map(t=>Gd(t))}}Ud.SWR_KEY="facplf_get_factor_list";async function _i(e){const t=await ee.requestFunc("facplf_get_factor_detail",{factor_id:e});return Gd(t)}_i.SWR_KEY="facplf_get_factor_detail";function Hd(e,t){return Oe([_i.SWR_KEY,e],()=>_i(e),t)}function _x(){const e=Ft(),t=$t(),{t:n}=Z(),[r,o]=k.useState(""),{data:s,isLoading:i,mutate:u}=Hd(t.id,{onSuccess(h){r||o(h.code)}}),{data:c,mutate:l}=Oe("facplf_get_factor_histories",async()=>ee.requestFunc("facplf_get_factor_histories",{factor_id:t.id})),p=he(async()=>{await ee.requestFunc("facplf_save_factor_code",{factor_id:t.id,code:r}),l(),u()}),d=he(async()=>{await ke.show(qd,{factor:s}),u()}),m=he(async()=>{s&&await ke.show(zd,{factor:s,beforeSubmit:p,history:e})});return a.jsx(nt,{autoBreadcrumb:{addonItems:[{title:s==null?void 0:s.name}]},headerAction:a.jsxs(it,{children:[a.jsx(Ae,{type:"primary",onClick:m,children:n("pages.factor-edit.actions.try-run")}),a.jsx(Ae,{type:"link",onClick:d,children:n("pages.factor-edit.actions.edit-factor")})]}),headerBottomMargin:8,children:a.jsx(nn,{title:n("pages.factor-edit.code.title"),code:r,sourceCode:s==null?void 0:s.code,onChange:o,onSave:p,declarationCode:`module ${s==null?void 0:s.name}`,histories:c,loading:i})})}const xx="_optionLabel_1m46w_1",wx={optionLabel:xx},xi=e=>{const{factorId:t}=e,{t:n}=Z(),{data:r=[],isLoading:o}=Oe("facplf_get_factor_analysis_report_list"+t,async()=>ee.requestFunc("facplf_get_factor_analysis_report_list",{factor_id:t}));return a.jsx(kt,{placeholder:n("pages.factor-list.publish-factor-modal.form.select-report"),mode:"multiple",loading:o,optionLabelProp:"label",...e,children:r.map(s=>a.jsx(kt.Option,{value:s.analysis_id,label:Qe(s.create_time),children:a.jsxs("div",{className:wx.optionLabel,children:[Qe(s.create_time),a.jsx(Bt,{status:s.status})]})},s.analysis_id))})};function jx(e){var t;return(t=mm.get(e))==null?void 0:t.data}function ks(e,t=ma.t){var n;switch(e){case qr:return t("constants.scope.facplf_public");default:{const r=(n=jx(Kr.SWR_KEY))==null?void 0:n.items.find(o=>o.name===e);return(r==null?void 0:r.nickname)||(r==null?void 0:r.name)||e}}}const Ix="_review_1t6hm_1",Sx={review:Ix},kx=e=>{const{value:t,onChange:n,departmentReview:r,disabled:o,sysReviewers:s,excludeScopes:i,suffix:u}=e,{t:c}=Z(),l=k.useMemo(()=>{const h=(r==null?void 0:r.departments.map(x=>({label:ks(x.department),value:x.department})))??[],b=(t==null?void 0:t.department)===qr?[{label:ks(qr),value:qr}]:[],y=new Set(i);return[...h,...b].filter(x=>!y.has(x.value))},[r==null?void 0:r.departments,i,t==null?void 0:t.department]),p=k.useMemo(()=>{var b;const h=t==null?void 0:t.department;return h?h===qr?s.map(y=>({label:y,value:y})):(b=r.departments.find(y=>y.department===h))==null?void 0:b.reviewers.map(y=>({label:y,value:y})):[]},[r.departments,s,t]),d=k.useCallback(h=>{n&&n({department:h})},[n]),m=k.useCallback(h=>{n&&n({department:t==null?void 0:t.department,reviewers:h})},[n,t==null?void 0:t.department]);return a.jsxs("div",{className:Sx.review,children:[a.jsx(kt,{style:{width:"200px"},placeholder:c("components.review-select.form.review-dep"),options:l,showSearch:!0,disabled:kl(o,t),value:t==null?void 0:t.department,onChange:d}),a.jsx(kt,{style:{width:"200px"},mode:"multiple",placeholder:c("components.review-select.form.review-man"),options:p,value:t==null?void 0:t.reviewers,onChange:m}),kl(u,t)]})},Cx={departments:[]},Ex={reviewers:[]},Cs=e=>{var c,l;const{t}=Z(),n=((c=e.lastReviews)==null?void 0:c.scope)??[],r=k.useMemo(()=>Wc({namePath:e.namePath,listField:e.listField}),[e.listField,e.namePath]),o=k.useMemo(()=>{var p;return(p=e.lastReviews)!=null&&p.scope.length?e.lastReviews.scope.map(d=>({department:d,reviewers:[]})):[{}]},[(l=e.lastReviews)==null?void 0:l.scope]),{data:s=Cx}=Oe("facplf_get_review_list",async()=>ee.requestFunc("facplf_get_review_list")),{data:i=Ex}=Oe("facplf_get_pub_review",async()=>ee.requestFunc("facplf_get_pub_review")),u=r.getFullNamePath("reviews");return a.jsx(Rs,{name:r.getItemNamePath("reviews"),rootFormItemProps:{required:!0,label:t("components.review-select.form.review")},initialValue:o,addItemInitialValue:{},rules:[{validator:async(p,d)=>{if(!(d!=null&&d.length))throw new Error(t("components.review-select.form.list-validate.min-message"));const m=new Set;if(d.some(b=>b!=null&&b.department?m.has(b.department)?!0:(m.add(b.department),!1):!1))throw new Error(t("components.review-select.form.list-validate.department-repeat"))}}],renderItem:(p,d,m)=>a.jsx(ja,{dependencies:[u],children:h=>{const b=Wn(h,u),y=(b==null?void 0:b.reduce((x,I,w)=>!(I!=null&&I.department)||w===d?x:Af(x,I.department),[]))??[];return a.jsx(B.Item,{name:p.name,rules:[{validator:async(x,I)=>{var w;if(!(I!=null&&I.department))throw new Error(t("components.review-select.form.review-dep-warn"));if(!((w=I==null?void 0:I.reviewers)!=null&&w.length))throw new Error(t("components.review-select.form.review-man-warn"))}}],children:a.jsx(kx,{departmentReview:s,sysReviewers:i.reviewers,excludeScopes:y,disabled:x=>!!(x!=null&&x.department)&&n.includes(x==null?void 0:x.department),suffix:x=>x!=null&&x.department&&n.includes(x==null?void 0:x.department)?a.jsx("span",{}):m.remove})},p.name)}})})},Ax="_titleWrap_121wa_1",Px="_note_121wa_6",Tx="_reportSelect_121wa_10",Ox="_titleLine_121wa_14",gr={titleWrap:Ax,note:Px,reportSelect:Tx,titleLine:Ox},Rx=Ha({fetchInitialData:async({factors:e})=>ee.requestFunc("facplf_get_factor_multi_post",{factors:e.map(t=>({factor_id:t.factor_id,factor_name:t.name}))}),useDrawerProps:({t:e})=>({title:e("pages.factor-list.publish-factor-modal.batch-title"),width:700,maskClosable:!1}),useFormProps:({data:e})=>({labelCol:{span:5},initialValues:{first_publish:{factors:e==null?void 0:e.first_publish.factors.map(t=>({...t,report_ids:[]}))},re_publish:e==null?void 0:e.re_publish.factors.map(t=>({factors:[{factor_id:t.factor_id,factor_name:t.factor_name}],reviews:t.scope.map(n=>({department:n})),encrypt:t.is_encrypt}))}}),useFormRender:({t:e,props:t,formProps:n,data:r})=>{if(!r)return null;const o=[];return r.first_publish.total!==0&&o.push({key:"1",label:e("pages.factor-list.publish-factor-modal.drawer.sub-title-first"),children:a.jsxs(a.Fragment,{children:[a.jsx(B.List,{name:["first_publish","factors"],children:s=>s.map((i,u)=>a.jsx(B.Item,{name:[u,"report_ids"],label:r.first_publish.factors[u].factor_name,className:gr.reportSelect,children:a.jsx(xi,{factorId:r.first_publish.factors[u].factor_id})},r.first_publish.factors[u].factor_id))}),a.jsx(Cs,{lastReviews:null,namePath:"first_publish"}),a.jsx(B.Item,{name:["first_publish","encrypt"],required:!0,label:e("pages.factor-list.publish-factor-modal.form.is-encrypt"),initialValue:!0,children:a.jsx(Ea,{})}),a.jsx(B.Item,{name:["first_publish","note"],label:e("pages.factor-list.factor-modal.form.comment.label"),initialValue:"",className:gr.note,children:a.jsx(Ne.TextArea,{autoSize:{minRows:3,maxRows:5}})})]})}),r.re_publish.total!==0&&o.push({key:"2",label:e("pages.factor-list.publish-factor-modal.drawer.sub-title-re"),children:a.jsx(a.Fragment,{children:a.jsx(B.List,{name:"re_publish",children:s=>s.map((i,u)=>a.jsxs(a.Fragment,{children:[a.jsx(B.List,{name:[u,"factors"],children:c=>c.map((l,p)=>a.jsx(B.Item,{name:[p,"report_ids"],label:r.re_publish.factors[u].factor_name,className:gr.reportSelect,children:a.jsx(xi,{factorId:r.re_publish.factors[u].factor_id})},r.re_publish.factors[u].factor_id))}),a.jsx(Cs,{lastReviews:{scope:r.re_publish.factors[u].scope,is_encrypt:r.re_publish.factors[u].is_encrypt},listField:i,namePath:"re_publish"}),a.jsx(B.Item,{name:[u,"note"],label:e("pages.factor-list.factor-modal.form.comment.label"),initialValue:"",className:gr.note,children:a.jsx(Ne.TextArea,{autoSize:{minRows:3,maxRows:5}})}),u!==s.length-1&&a.jsx(ba,{})]}))})})}),a.jsx(a.Fragment,{children:a.jsxs(B,{...n,children:[a.jsxs("div",{children:[a.jsx("div",{children:e("pages.factor-list.publish-factor-modal.drawer.title-all",{num:t.factors.length})}),r.first_publish.total!==0&&a.jsx("div",{className:gr.titleLine,children:e("pages.factor-list.publish-factor-modal.drawer.title-first",{num:r.first_publish.total})}),r.re_publish.total!==0&&a.jsx("div",{className:gr.titleLine,children:e("pages.factor-list.publish-factor-modal.drawer.title-re",{num:r.re_publish.total})})]}),a.jsx(ba,{}),a.jsx(Pa,{items:o,defaultActiveKey:o==null?void 0:o.map(s=>s.key),bordered:!1})]})})},onSubmit:async(e,{t,antApp:{message:n},data:r})=>{const o=async()=>new Promise(i=>{aa.confirm({title:t("pages.factor-list.publish-factor-modal.title"),icon:a.jsx(kn,{}),content:t("pages.factor-list.publish-factor-modal.message.title-patch"),okText:t("pages.factor-list.publish-factor-modal.message.sure"),cancelText:t("pages.factor-list.publish-factor-modal.message.cancel"),onOk:()=>i(!0),onCancel:()=>i(!1)})});if((r==null?void 0:r.re_publish.total)!==0&&!await o())throw Ts.SUBMIT_INTERRUPT_SYMBOL;const s=[];e.first_publish&&s.push(e.first_publish),e.re_publish&&s.push(...e.re_publish),await ee.requestFunc("facplf_post_multi_factors",{publish:s}),n.success(t("pages.factor-list.publish-factor-modal.form.success"))}}),Fx=_a({fetchInitialData:async({factorId:e,factorName:t})=>ee.requestFunc("facplf_get_factor_post",{factor_id:e,factor_name:t}),useModalProps:({t:e})=>({title:e("pages.factor-list.publish-factor-modal.title"),width:700,maskClosable:!1}),useFormProps:({props:e,data:t})=>({labelCol:{span:5},initialValues:{factor_id:e.factorId,factor_name:e.factorName,reviews:t==null?void 0:t.scope.map(n=>({department:n}))}}),useFormRender:({t:e,props:t,formProps:n,data:r})=>a.jsxs(B,{...n,children:[a.jsx(B.Item,{name:"report_ids",label:t.factorName,className:gr.reportSelect,children:a.jsx(xi,{factorId:t.factorId})}),a.jsx(Cs,{lastReviews:r}),a.jsx(B.Item,{name:"encrypt",required:!0,label:e("pages.factor-list.publish-factor-modal.form.is-encrypt"),initialValue:r?r.is_encrypt:!0,children:a.jsx(Ea,{disabled:!!r})}),a.jsx(B.Item,{name:"note",label:e("common.comment"),initialValue:"",children:a.jsx(Ne.TextArea,{autoSize:{minRows:3,maxRows:5}})})]}),onSubmit:async(e,{props:t,t:n,antApp:{message:r},data:o})=>{if(o&&!await(async i=>new Promise(u=>{aa.confirm({title:n("pages.factor-list.publish-factor-modal.title"),icon:a.jsx(kn,{}),content:n("pages.factor-list.publish-factor-modal.message.title",{factor:i}),okText:n("pages.factor-list.publish-factor-modal.message.sure"),cancelText:n("common.cancel"),onOk:()=>u(!0),onCancel:()=>u(!1)})}))(t.factorName))throw Ts.SUBMIT_INTERRUPT_SYMBOL;e.factor_id=t.factorId,e.factor_name=t.factorName,o&&(e.encrypt=(o==null?void 0:o.is_encrypt)??!1);try{await ee.requestFunc("facplf_post_factor",e),r.success(n("pages.factor-list.publish-factor-modal.form.success"))}catch(i){r.error(Be(i))}}}),Lx="_folderIcon_177xc_1",Nx="_operations_177xc_5",Dx="_comment_177xc_9",Mx="_breadcrumb_177xc_13",Oo={folderIcon:Lx,operations:Nx,comment:Dx,breadcrumb:Mx};function Wx(){const{data:e,isLoading:t,mutate:n}=Oe("facplf_get_factor_list",()=>Ud()),r=Ft(),{t:o}=Z(),{message:s}=at.useApp(),i=Dn({getKey(y){return y.factor_id},clearDeps:[e]}),u=he(async()=>{await ke.show(ox,{history:r}),n()}),c=he(async y=>{await ke.show(qd,{factor:y}),n()}),l=he(async y=>{try{await ee.requestFunc("facplf_delete_factor",{factor_id:y.factor_id}),s.success(o("common.delete-success")),n()}catch(x){s.error(Be(x))}}),p=he(async()=>{try{const y=i.items.map(x=>x.factor_id);await ee.requestFunc("facplf_delete_factors",{factors:y}),s.success(o("common.delete-success")),n()}catch(y){s.error(Be(y))}}),d=he(async y=>{await ke.show(zd,{factor:y,history:r}),n()}),m=he(async y=>{const{factor_id:x,name:I}=y;try{await ke.show(Fx,{factorId:x,factorName:I}),n()}catch(w){s.error(Be(w))}}),h=he(async y=>{try{await ke.show(Rx,{factors:y}),n()}catch(x){s.error(Be(x))}}),b=k.useMemo(()=>[{title:o("pages.factor-list.table.columns.name"),dataIndex:"name",key:"name",fixed:"left",width:200,render(y){return a.jsx("span",{children:y})}},{title:o("pages.factor-list.table.columns.operator"),width:250,dataIndex:"func_list",render:y=>y!=null&&y.length?a.jsx(Gt,{max:4,ellipsisTagProps:{color:"cyan"},children:y==null?void 0:y.map(x=>a.jsx(yt,{color:"cyan",children:x},x))}):"-"},{title:o("pages.factor-list.table.columns.run-record"),dataIndex:"run_record_count",key:"run_record_count",align:"center",width:140,render:(y,x)=>x.run_record_count!==0?a.jsx(Ue,{to:Se.factorTestList({factor_id:x.factor_id}),children:y}):y},{title:o("pages.factor-list.table.columns.analysis-record"),dataIndex:"analysis_record_count",key:"analysis_record_count",align:"center",width:140,render:(y,x)=>x.analysis_record_count!==0?a.jsx(Ue,{to:Se.analysisRecordFactorList({factor_id:x.factor_id}),children:y}):y},{title:o("pages.factor-list.table.columns.properties"),dataIndex:"properties",key:"properties",width:180,render(y,x){var I;return(I=x.properties)!=null&&I.length?a.jsx(Gt,{children:x.properties.map(w=>a.jsx(yt,{color:"blue",children:o(`constants.factor-properties.${w}`)},w))}):"-"}},{title:o("pages.factor-list.table.columns.tags"),dataIndex:"tags",key:"tags",width:180,className:Oo.tags,render(y,x){var I;return(I=x.tags)!=null&&I.length?a.jsx(Gt,{children:x.tags.map(w=>a.jsx(yt,{color:"blue",children:w},w))}):"-"}},{title:o("pages.factor-list.table.columns.create-time"),dataIndex:"create_time",key:"create_time",align:"center",width:180,render(y){return y?Qe(y):null}},{title:o("pages.factor-list.table.columns.update-time"),dataIndex:"update_time",key:"update_time",align:"center",width:180,render(y){return y?Qe(y):null}},{title:o("pages.factor-list.table.columns.comment"),dataIndex:"comment",key:"comment",width:300,render(y){return a.jsx(De.Paragraph,{className:Oo.comment,ellipsis:{rows:2,expandable:!0},children:y})}},{title:o("common.table.operation.title"),key:"operation",width:250,fixed:"right",render:(y,x)=>a.jsxs(Vt,{max:3,children:[a.jsx(Ue,{to:Se.factorDraftEdit(x.factor_id),children:o("pages.factor-list.table.columns.operation.edit-code")}),a.jsx("a",{onClick:()=>d(x),children:o("pages.factor-list.table.columns.operation.test")}),a.jsx("a",{onClick:()=>c(x),children:o("common.edit")}),a.jsx("a",{onClick:()=>{m(x)},children:o("pages.factor-list.table.columns.operation.publish-factor")}),a.jsx(la,{title:o("pages.factor-list.table.columns.operation.delete-factor"),description:o("pages.factor-list.table.columns.operation.delete-factor-description",{record:x}),onConfirm:()=>l(x),children:a.jsx(De.Link,{type:"danger",children:o("common.delete")})})]})}],[o,c,d,m,l]);return a.jsxs(nt,{headerBottomMargin:!0,children:[a.jsxs(it,{className:Oo.operations,children:[a.jsx(Ae,{type:"primary",icon:a.jsx(Ua,{}),onClick:u,children:o("pages.factor-list.create-new")}),a.jsx(la,{title:o("common.batch-delete"),description:o("pages.factor-list.confirm-batch-delete-description"),onConfirm:p,disabled:!i.hasSelected,children:a.jsx(Ae,{disabled:!i.hasSelected,danger:!0,icon:a.jsx(Bi,{}),children:o("common.batch-delete")})}),a.jsx(Ae,{disabled:!i.hasSelected,onClick:()=>h(i.items),children:o("pages.factor-list.publish-factor-modal.patch-publish")})]}),a.jsx(vt,{loading:t,rowKey:"factor_id",columns:b,dataSource:(e==null?void 0:e.items)??[],rowSelection:i.tableRowSelectionProps,pagination:{pageSize:20},scroll:{x:2e3}})]})}const Bx=ke.create(e=>{const{testId:t,initialValues:n,title:r,readonly:o}=e,s=ke.useModal(),{t:i}=Z(),{message:u}=at.useApp(),c=Ft(),[l]=B.useForm(),p=k.useCallback(async d=>{try{const{analysis_record_id:m}=await ee.requestFunc("facplf_create_analysis_by_test",{test_id:t,...d});u.success(i("components.generate-report-drawer.success-message")),s.resolve(),s.hide(),setTimeout(()=>{window.open(c.createHref(Se.analysisRecordDetailData(m)))},1e3)}catch(m){u.error(Be(m))}},[t,u,i,s,c]);return a.jsx(tu,{width:800,...ke.antdDrawer(s),title:r,extra:!o&&a.jsx(Ae,{type:"primary",onClick:l.submit,children:i("components.generate-report-drawer.generate")}),destroyOnClose:!0,children:a.jsx(B,{disabled:o,labelCol:{span:6},colon:!1,form:l,onFinish:p,initialValues:n,children:a.jsx(on,{namePath:"analysis_template",withTemplateSelect:!0,readonly:o})})})});function Kd(e){const{testId:t,text:n,formInitialValues:r,readMode:o}=e,{t:s}=Z(),i=k.useCallback(()=>{ke.show(Bx,{readonly:o,initialValues:r,testId:t,title:s(o?"components.generate-report-drawer.test-report-params":"components.generate-report-drawer.title")})},[r,o,s,t]);return a.jsx("a",{onClick:i,children:n||s("components.generate-report-drawer.title")})}function $x(e,{autoRefreshUtilFinished:t=!0}={autoRefreshUtilFinished:!0}){return Oe(()=>e?[ws.SWR_KEY,e]:null,async()=>ws(e),{refreshInterval:n=>t&&(n==null?void 0:n.status)===Xe.RUNNING?5e3:0})}const Vx="_modal_1brcd_1",qx="_content_1brcd_5",uc={modal:Vx,content:qx},zx=ke.create(({paramsValue:e})=>{const t=ke.useModal(),{t:n}=Z(),r=k.useMemo(()=>({factor_templates:JSON.parse(e||"[]")}),[e]);return a.jsx(aa,{open:t.visible,footer:null,onCancel:t.hide,afterClose:t.remove,title:n("pages.factor-run.run-params"),width:800,className:uc.modal,children:a.jsx("div",{className:uc.content,children:a.jsx(B,{labelCol:{span:6},disabled:!0,initialValues:r,children:a.jsx(cn,{labelCol:{span:6},name:"factor_templates",readonly:!0})})})})}),Gx=e=>{const{paramsValue:t,...n}=e,{t:r}=Z(),o=he(async()=>{await ke.show(zx,{paramsValue:t})});return a.jsx(Ae,{type:"link",onClick:o,...n,children:r("pages.factor-run.view-run-params")})},Ux=()=>{const{id:e}=$t(),{t}=Z(),{data:n,isLoading:r,isValidating:o}=$x(e),s=k.useMemo(()=>n?[{label:t("pages.factor-run.factor-name"),children:n.factor_name||"-"},{label:t("pages.factor-run.func-name"),children:n.func_name||"-"},{label:t("pages.factor-run.time"),children:Qe(n.create_time)},{label:t("pages.factor-run.status"),children:a.jsx(Bt,{status:n.status})}]:[],[n,t]);return a.jsx(Ys,{validating:o,loading:r,status:n==null?void 0:n.status,failedReason:n==null?void 0:n.failed_reason,notFound:!e,headerBottomMargin:!0,autoBreadcrumb:{addonItems:[{title:n==null?void 0:n.factor_name},{title:t("pages.factor-run.title")}]},beforeContent:a.jsx(ta,{title:t("pages.factor-run.run-info"),bottomButtons:a.jsxs(a.Fragment,{children:[(n==null?void 0:n.status)===Xe.SUCCESS&&a.jsx(Kd,{testId:e}),a.jsx(mr,{code:(n==null?void 0:n.source_code)??"",children:t("pages.factor-run.view-run-code")}),a.jsx(Gx,{paramsValue:(n==null?void 0:n.params)??"{}"})]}),children:a.jsx(Cr,{layout:"vertical",colon:!1,items:s,column:4})}),children:a.jsx(ta,{title:t("pages.factor-run.run-result"),children:a.jsx(Js,{dataSource:n==null?void 0:n.result})})})},Hx=()=>{const e=$t(),{data:t}=Hd(e.factor_id),{data:n,isLoading:r}=Oe(["facplf_get_test_list",e],async()=>ee.requestFunc("facplf_get_test_list",{factor_id:e.factor_id})),{t:o}=Z(),s=k.useMemo(()=>[{title:o("pages.factor-run.func-name"),dataIndex:"func_name",width:200,fixed:"left"},{title:o("pages.factor-run.status"),width:100,dataIndex:"status",align:"center",render:i=>a.jsx(Bt,{status:i})},{title:o("pages.factor-run.analysis-count"),width:100,dataIndex:"report_count",align:"center",render:(i,u)=>i?a.jsx(Ue,{to:Se.analysisRecordFactorList({test_id:u.test_id}),children:i}):"0"},{title:o("pages.factor-run.create-time"),width:200,dataIndex:"create_time",render:i=>i?Qe(i):"-"},{title:o("common.table.operation.title"),fixed:"right",dataIndex:"operate",width:300,render:(i,u)=>a.jsxs(it,{wrap:!0,split:a.jsx(ba,{type:"vertical"}),children:[a.jsx(Ue,{to:Se.factorTestDetail(u.test_id),children:o("pages.factor-run.operate.view-detail")}),u.status===Xe.SUCCESS&&a.jsx(Kd,{testId:u.test_id})]})}],[o]);return a.jsx(nt,{autoBreadcrumb:{addonItems:[{title:t==null?void 0:t.name},{title:o("pages.factor-run.list-title")}]},headerBottomMargin:!0,children:a.jsx(vt,{rowKey:"test_id",scroll:{x:1400},columns:s,dataSource:n,loading:r})})},Kx="_templateListForm_emzw1_1",Yx={templateListForm:Kx},Ro={span:6},Jx=()=>{const[e]=B.useForm(),{id:t}=$t(),{t:n}=Z(),r=Ft(),{data:o,isLoading:s,isValidating:i}=Oe(["facplf_get_multi_tests_result",t],async()=>ee.requestFunc("facplf_get_multi_tests_result",{test_id:t}),{onSuccess:({params:l})=>{const p={...l,factor_templates:xr(l.factor_templates,[]),analysis_template:xr(l.analysis_template,{})};e.setFieldsValue(p)},refreshInterval(l){return(l==null?void 0:l.jobs.every(d=>d.test_status!==Xe.RUNNING&&d.analysis_status!==Xe.RUNNING))??!0?0:3e3}}),u=k.useMemo(()=>o?[{label:n("pages.public-factor.batch-test.list.name"),children:o.name},{label:n("pages.public-factor.batch-test.list.test-time"),children:Qe(o.create_time)},{label:n("pages.public-factor.batch-test.list.run-status"),children:a.jsx(Bt,{status:o.status})}]:[],[o,n]),c=k.useMemo(()=>[{title:n("pages.public-factor.batch-test.detail.factor-name"),dataIndex:"factor_name",key:"factor_name",width:300,render:(l,p)=>`${p.factor_name}::${p.func_name}`},{title:n("pages.public-factor.batch-test.detail.run-status"),dataIndex:"test_status",key:"test_status",width:200,align:"center",render:(l,p)=>{const d=p.test_status===Xe.FAILED,m=p.test_status===Xe.RUNNING;return a.jsxs(it,{children:[a.jsx(Bt,{status:p.test_status}),d?a.jsx(De.Link,{type:"danger",onClick:()=>ke.show(bv,{id:p.test_id}),children:n("common.table.operation.view-error")}):m?null:a.jsx(De.Link,{onClick:()=>window.open(r.createHref(Se.factorTestDetail(p.test_id))),children:n("common.table.operation.view-detail")})]})}},{title:n("pages.public-factor.batch-test.detail.analysis-status"),dataIndex:"analysis_status",key:"analysis_status",align:"center",width:200,render:(l,p)=>{if(qi(p.analysis_status))return"-";const d=p.analysis_status===Xe.FAILED,m=p.test_status===Xe.RUNNING;return a.jsxs(it,{children:[a.jsx(Bt,{status:p.analysis_status}),d?a.jsx(De.Link,{type:"danger",onClick:()=>ke.show(dd,{id:p.analysis_record_id}),children:n("common.table.operation.view-error")}):m?null:a.jsx(De.Link,{onClick:()=>window.open(r.createHref(Se.analysisRecordDetailData(p.analysis_record_id))),children:n("common.table.operation.view-detail")})]})}}],[r,n]);return a.jsxs(nt,{autoBreadcrumb:{addonItems:[{title:n("pages.public-factor.batch-test.list.title")}]},headerBottomMargin:!0,loading:s,children:[a.jsx(ta,{title:n("pages.public-factor.batch-test.detail.test-info"),children:a.jsx(Cr,{layout:"vertical",colon:!1,column:4,items:u})}),a.jsx(ba,{}),a.jsx(ta,{title:n("pages.public-factor.batch-test.detail.used-factors"),children:a.jsx(vt,{dataSource:o==null?void 0:o.jobs,loading:i,rowKey:"test_id",size:"small",columns:c})}),a.jsx(ba,{}),a.jsxs(B,{form:e,disabled:!0,className:Yx.templateListForm,labelCol:Ro,children:[a.jsx(ta,{title:n("pages.public-factor.batch-test.detail.calculate-template"),children:a.jsx(cn,{readonly:!0,name:"factor_templates",labelCol:Ro})}),a.jsx(ta,{title:n("pages.public-factor.batch-test.detail.analysis-template"),children:a.jsx(on,{readonly:!0,withTemplateSelect:!0,namePath:"analysis_template",listLabelCol:Ro})})]})]})},Qx="_form_qvsl0_1",Xx="_factor_templates_qvsl0_11",dc={form:Qx,factor_templates:Xx},pc={span:6};function Zx(e){const{mode:t,onFormSubmit:n,initialValues:r}=e,{t:o}=Z(),[s]=B.useForm(),[i,u]=k.useState(!1),c=k.useCallback(async l=>{u(!0);try{await(n==null?void 0:n(l))}finally{u(!1)}},[n]);return a.jsxs(B,{form:s,labelCol:pc,className:dc.form,initialValues:r,onFinish:c,disabled:t==="read",children:[a.jsx("h3",{children:o("pages.factor-public.create-batch-test.form.basic-section.title")}),a.jsx(B.Item,{label:o("pages.factor-public.create-batch-test.form.name.label"),name:"name",required:!0,rules:[{required:!0}],children:a.jsx(Ne,{placeholder:o("pages.factor-public.create-batch-test.form.name.placeholder")})}),a.jsx(B.Item,{label:o("pages.factor-public.create-batch-test.form.comment.label"),name:"comment",children:a.jsx(Ne.TextArea,{autoSize:{minRows:3,maxRows:5}})}),a.jsx("h3",{children:o("pages.factor-public.create-batch-test.form.factors-section.title")}),a.jsx(B.Item,{label:o("pages.factor-public.create-batch-test.form.factors.label"),name:"factors",required:!0,rules:[{type:"array",required:!0}],children:a.jsx(Xs,{includePublic:!0})}),a.jsx("h3",{children:o("pages.factor-public.create-batch-test.form.factor-templates-section.title")}),a.jsx("div",{className:dc.factor_templates,children:a.jsx(cn,{labelCol:pc,name:"factor_templates"})}),a.jsx("h3",{children:o("pages.factor-public.create-batch-test.form.analysis-templates-section.title")}),a.jsx(B.Item,{label:o("pages.factor-public.create-batch-test.form.analysis-templates-section.enable"),name:"analysis",initialValue:!0,children:a.jsx(Ea,{})}),a.jsx(ja,{dependencies:["analysis"],children:({analysis:l})=>l?a.jsx(on,{namePath:"analysis_template",withTemplateSelect:!0}):null}),t==="edit"&&a.jsx(Mn,{children:a.jsx(Ae,{loading:i,htmlType:"submit",type:"primary",children:o("common.submit")})})]})}function ew(){const{t:e}=Z(),{message:t}=at.useApp(),n=Ft(),r=k.useMemo(()=>e("pages.factor-public.create-batch-test.form.name.initialValue",{timestamp:Date.now()}),[e]),o=k.useCallback(async s=>{try{const{test_id:i}=await ee.requestFunc("facplf_create_public_tests",s);t.success(e("common.create-success")),n.push(Se.factorPublicBatchTestDetail(i))}catch(i){t.error(Be(i))}},[n,t,e]);return a.jsx(nt,{autoBreadcrumb:{addonItems:[{title:e("pages.factor-public.create-batch-test.breadcrumb.title")}]},children:a.jsx(Zx,{mode:"edit",initialValues:{name:r},onFormSubmit:o})})}const tw="_comment_1fmej_1",aw={comment:tw},rw=()=>{const{data:e,isLoading:t}=Oe("facplf_get_multi_tests_list",async()=>ee.requestFunc("facplf_get_multi_tests_list")),{t:n}=Z(),r=k.useMemo(()=>[{title:n("pages.public-factor.batch-test.list.name"),dataIndex:"name"},{title:n("pages.public-factor.batch-test.list.test-time"),dataIndex:"create_time",render:o=>o?Qe(o):"-"},{title:n("pages.public-factor.batch-test.list.run-status"),dataIndex:"status",render:o=>a.jsx(Bt,{status:o})},{title:n("pages.public-factor.batch-test.list.comment"),dataIndex:"comment",render:o=>a.jsx(De.Paragraph,{className:aw.comment,ellipsis:{rows:2,expandable:!0},children:o||"-"})},{title:n("common.table.operation.title"),key:"operation",render:(o,s)=>a.jsx(Ue,{to:Se.batchTestDetail(s.test_id),children:n("common.table.operation.view-detail")})}],[n]);return a.jsx(vt,{columns:r,dataSource:(e==null?void 0:e.items)||[],loading:t})};function nw(e){return{...e,properties:Ja(e.properties),tags:Ja(e.tags)??[]}}async function wi(e){const t=await ee.requestFunc("facplf_get_public_factor_list",e);return{total:t.total,items:t.items.map(n=>nw(n))}}wi.SWR_KEY="facplf_get_public_factor_list";var hs=(e=>(e.DEPARTMENT="department",e.SYSTEM="system",e))(hs||{});const Yd=()=>{const{t:e}=Z(),{data:t,isLoading:n}=Oe("facplf_get_pub_review",async()=>ee.requestFunc("facplf_get_pub_review")),r=()=>{const o=[];return t==null||t.reviewers.map(s=>o.push({label:s,value:s})),o};return a.jsx(B.Item,{name:"reviewers",required:!0,label:e("components.sys-reviewer-select.label"),rules:[{required:!0}],style:{marginBottom:"24px"},children:a.jsx(kt,{options:r(),placeholder:e("components.sys-reviewer-select.placeholder"),mode:"multiple",loading:n})})},sw=_a({useModalProps:({t:e})=>({title:e("pages.factor-public.title"),width:700}),useFormProps:({props:e})=>({labelCol:{span:6},initialValues:{factor_id:e.factor_id}}),useFormRender:({t:e,formProps:t})=>a.jsxs(B,{...t,children:[a.jsx(Yd,{}),a.jsx(B.Item,{name:"note",label:e("pages.factor-list.publish-factor-modal.form.comment"),initialValue:"",children:a.jsx(Ne.TextArea,{autoSize:{minRows:3,maxRows:5},placeholder:e("pages.factor-list.publish-factor-modal.form.comment-warn")})})]}),onSubmit:async(e,{props:t,t:n,antApp:{message:r}})=>{e.factor_id=t.factor_id;try{await ee.requestFunc("facplf_publish_factor",e),r.success(n("pages.factor-list.publish-factor-modal.form.success"))}catch(o){r.error(Be(o))}}}),ow="_folderIcon_dwsln_1",iw="_operations_dwsln_5",lw="_comment_dwsln_14",cw="_header_dwsln_18",uw="_department_dwsln_24",bn={folderIcon:ow,operations:iw,comment:lw,header:cw,department:uw},dw={items:[],total:0};function pw(){const{t:e}=Z(),{message:t}=at.useApp(),n=ca(),r=he(async b=>{await ke.show(sw,{factor_id:b.factor_id})}),o=he(async b=>{try{await ee.requestFunc("facplf_delete_public_factor",{factor_id:b.factor_id,department:s.scope}),t.success(e("common.delete-success")),p()}catch(y){t.error(Be(y))}}),[s,i]=k.useState({scope:null}),u=k.useCallback(b=>{i(b)},[i]),{data:c=dw,isLoading:l,mutate:p}=Oe(wi.SWR_KEY+s.scope,async()=>wi({department:s.scope})),d=he(b=>{if(b.public_level===hs.DEPARTMENT&&s.scope&&n.hasDepartmentAuth(ot.REVIEW,s.scope))return!0}),m=he(b=>b.public_level===hs.DEPARTMENT&&s.scope&&n.hasDepartmentAuth(ot.REVIEW,s.scope)?!0:!!(b.public_level===hs.SYSTEM&&s.scope&&n.hasSystemAuth(At.REVIEW))),h=k.useMemo(()=>[{title:e("pages.factor-public.table.name"),dataIndex:"name",key:"name",width:200,fixed:"left",render(b){return a.jsx("span",{children:b})}},{title:e("pages.factor-public.table.func-name"),dataIndex:"func_list",width:300,render:b=>b!=null&&b.length?a.jsx(Gt,{ellipsisTagProps:{color:"cyan"},children:b==null?void 0:b.map(y=>a.jsx(yt,{color:"cyan",children:y},y))}):"-"},{title:e("pages.factor-public.table.property"),dataIndex:"properties",key:"properties",width:200,render(b,y){var x;return(x=y.properties)!=null&&x.length?a.jsx(Gt,{children:y.properties.map(I=>a.jsx(yt,{color:"blue",children:e(`constants.factor-properties.${I}`)},I))}):"-"}},{title:e("pages.factor-public.table.tag"),dataIndex:"tags",key:"tags",width:250,className:bn.tags,render(b,y){var x;return(x=y.tags)!=null&&x.length?a.jsx(Gt,{children:y.tags.map(I=>a.jsx(yt,{color:"blue",children:I},I))}):"-"}},{title:e("pages.factor-public.table.public-level"),dataIndex:"public_level",key:"public_level",width:200,render:b=>e(`constants.public-level.${b}`)},{title:e("pages.factor-public.table.public-date"),dataIndex:"publish_time",key:"publish_time",width:200,render:b=>b?Qe(b):"-"},{title:e("pages.factor-public.table.author"),dataIndex:"creator",key:"creator",width:200,render(b){return a.jsx("span",{children:b})}},{title:e("pages.factor-public.table.note"),dataIndex:"comment",key:"comment",width:300,render(b){return a.jsx(De.Paragraph,{className:bn.comment,ellipsis:{rows:2,expandable:!0},children:b})}},{title:e("common.table.operation.title"),key:"operation",width:300,fixed:"right",render:(b,y)=>a.jsxs(Vt,{max:3,children:[!y.encrypt&&a.jsx(mr,{code:y.code??""}),d(y)&&a.jsx("a",{onClick:()=>r(y),children:e("pages.factor-public.table.public")}),m(y)&&a.jsx(la,{title:e("pages.factor-list.table.columns.operation.delete-factor"),description:e("pages.factor-public.table.delete-warn",{factor:y.name}),onConfirm:()=>o(y),children:a.jsx(De.Link,{type:"danger",children:e("common.delete")})})]})}],[o,m,d,r,e]);return a.jsxs("div",{children:[a.jsxs(it,{className:bn.operations,children:[a.jsx(B,{layout:"inline",onValuesChange:u,className:bn.filter,children:a.jsx(B.Item,{label:e("pages.review-list.my-review-list.filter.scope"),name:"scope",className:bn.department,children:a.jsx(Ki,{withPublic:!0,value:s.scope,allowClear:!0})})}),a.jsx(Ue,{to:Se.factorPublicCreateBatchTest(),children:a.jsx(Ae,{type:"primary",icon:a.jsx(Ua,{}),children:e("pages.factor-public.add-test")})})]}),a.jsx(vt,{loading:l,rowKey:"name",columns:h,dataSource:c.items,pagination:{pageSize:10},scroll:{x:1720}})]})}function mw(){const{t:e}=Z(),t=k.useMemo(()=>[{path:"/factor/public/list",label:e("pages.factor-public.factor-list"),component:pw},{path:"/factor/public/batch-test",label:e("pages.factor-public.factor-test"),component:rw}],[e]);return a.jsx(nt,{children:a.jsx(Ar,{routes:t,redirect:{from:"/factor/public",to:"/factor/public/list",exact:!0}})})}const Jd=e=>{const{nameHelp:t,...n}=e,{t:r}=Z(),o=va({zh:{labelCol:{span:6}},en:{labelCol:{span:8}}});return a.jsxs(B,{...o,...n,children:[a.jsx(B.Item,{name:"name",label:r("pages.factor-template.create.label.name"),help:t,rules:[{required:!0,message:r("pages.factor-template.create.message.name")},{pattern:qy,message:r("common.validate.ddb-var-name-rule-message")}],children:a.jsx(Ne,{placeholder:r("pages.factor-template.create.message.name")})}),a.jsx(B.Item,{name:"factor_properties",label:r("pages.factor-template.create.label.properties"),children:a.jsx(Wu,{})}),a.jsx(B.Item,{label:r("pages.factor-template.create.label.tag"),name:"tags",children:a.jsx(sn,{tagType:Er.FACTOR_TEMPLATE})}),a.jsx(B.Item,{name:"comment",label:r("common.comment"),children:a.jsx(Ne.TextArea,{rows:4,placeholder:r("pages.factor-template.create.message.comment")})})]})},fw=ke.create(e=>{const{history:t}=e,[n]=B.useForm(),r=ke.useModal(),{t:o}=Z(),{message:s}=at.useApp(),i=he(async()=>{if(!await n.validateFields())return;const{tags:u=[],factor_properties:c=[],...l}=n.getFieldsValue();try{const{template_id:p}=await ee.requestFunc("facplf_create_new_private_factor_template",{tags:u.join(","),factor_properties:c.join(","),...l});r.hide(),t.push(Se.factorTemplateEdit(p))}catch(p){s.error(Be(p))}});return a.jsx(aa,{open:r.visible,onCancel:r.hide,afterClose:r.remove,destroyOnClose:!0,footer:a.jsxs(a.Fragment,{children:[a.jsx(Ae,{onClick:r.hide,children:o("common.cancel")}),a.jsx(Ae,{type:"primary",onClick:i,children:o("common.create")})]}),title:o("pages.factor-template.create.title"),width:600,children:a.jsx(Jd,{form:n})})}),hw=Ha({useDrawerProps:({t:e})=>({width:700,title:e("pages.factor-template.edit.edit-template-title")}),useFormProps:({props:e})=>({initialValues:e.templateInfo}),useFormRender({formProps:e,t}){return a.jsx(Jd,{...e,nameHelp:t("common.template-rename-help")})},onSubmit:async(e,{props:t,t:n,antApp:{message:r}})=>{const{tags:o=[],factor_properties:s=[],...i}=e;await ee.requestFunc("facplf_edit_private_factor_template",{tags:o.join(","),factor_properties:s.join(","),template_id:t.templateInfo.template_id,...i}),r.success(n("common.edit-success"))}}),gw=()=>{const{id:e}=$t(),[t,n]=k.useState(""),{t:r}=Z(),{data:o,isLoading:s,mutate:i}=Oe([oi.SWR_KEY,e],async()=>oi(e),{onSuccess:d=>{t||n(d.code??"")}}),{data:u,mutate:c}=Oe(["facplf_get_private_factor_template_histories",e],async()=>ee.requestFunc("facplf_get_private_factor_template_histories",{template_id:e})),l=he(async()=>{o&&(await ke.show(hw,{templateInfo:o}),i())}),p=he(async()=>{await ee.requestFunc("facplf_save_private_factor_template_code",{template_id:e,code:t}),i(),c()});return a.jsx(nt,{autoBreadcrumb:{addonItems:[{title:o==null?void 0:o.name},{title:r("common.edit")}]},headerAction:a.jsx("a",{onClick:l,children:r("pages.factor-template.edit.view-template-info")}),headerBottomMargin:!0,children:a.jsx(nn,{code:t,onChange:n,title:r("pages.factor-template.create.template-code"),onSave:p,histories:u,loading:s,sourceCode:o==null?void 0:o.code})})};var Qd={},hl={};Object.defineProperty(hl,"__esModule",{value:!0});var yw={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M512 64C264.6 64 64 264.6 64 512s200.6 448 448 448 448-200.6 448-448S759.4 64 512 64zm0 820c-205.4 0-372-166.6-372-372s166.6-372 372-372 372 166.6 372 372-166.6 372-372 372z"}},{tag:"path",attrs:{d:"M464 688a48 48 0 1096 0 48 48 0 10-96 0zm24-112h48c4.4 0 8-3.6 8-8V296c0-4.4-3.6-8-8-8h-48c-4.4 0-8 3.6-8 8v272c0 4.4 3.6 8 8 8z"}}]},name:"exclamation-circle",theme:"outlined"};hl.default=yw;var Xd={};const Zd=Km(Ym);var gl={};(function(e){Object.defineProperty(e,"__esModule",{value:!0}),Object.defineProperty(e,"default",{enumerable:!0,get:function(){return r}});var t=k,n=(0,t.createContext)({}),r=n})(gl);var yl={},so={},pn={},ep={exports:{}};(function(e){function t(n){return n&&n.__esModule?n:{default:n}}e.exports=t,e.exports.__esModule=!0,e.exports.default=e.exports})(ep);var bw=ep.exports,bl={};Object.defineProperty(bl,"__esModule",{value:!0});bl.default=vw;function vw(){return!!(typeof window<"u"&&window.document&&window.document.createElement)}var vl={};Object.defineProperty(vl,"__esModule",{value:!0});vl.default=_w;function _w(e,t){if(!e)return!1;if(e.contains)return e.contains(t);for(var n=t;n;){if(n===e)return!0;n=n.parentNode}return!1}var tp=bw.default;Object.defineProperty(pn,"__esModule",{value:!0});pn.clearContainerCache=Cw;pn.injectCSS=_l;pn.removeCSS=Sw;pn.updateCSS=Ew;var xw=tp(bl),ww=tp(vl),mc="data-rc-order",fc="data-rc-priority",jw="rc-util-key",Es=new Map;function ap(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},t=e.mark;return t?t.startsWith("data-")?t:"data-".concat(t):jw}function oo(e){if(e.attachTo)return e.attachTo;var t=document.querySelector("head");return t||document.body}function Iw(e){return e==="queue"?"prependQueue":e?"prepend":"append"}function rp(e){return Array.from((Es.get(e)||e).children).filter(function(t){return t.tagName==="STYLE"})}function _l(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(!(0,xw.default)())return null;var n=t.csp,r=t.prepend,o=t.priority,s=o===void 0?0:o,i=Iw(r),u=i==="prependQueue",c=document.createElement("style");c.setAttribute(mc,i),u&&s&&c.setAttribute(fc,"".concat(s)),n!=null&&n.nonce&&(c.nonce=n==null?void 0:n.nonce),c.innerHTML=e;var l=oo(t),p=l.firstChild;if(r){if(u){var d=rp(l).filter(function(m){if(!["prepend","prependQueue"].includes(m.getAttribute(mc)))return!1;var h=Number(m.getAttribute(fc)||0);return s>=h});if(d.length)return l.insertBefore(c,d[d.length-1].nextSibling),c}l.insertBefore(c,p)}else l.appendChild(c);return c}function np(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},n=oo(t);return rp(n).find(function(r){return r.getAttribute(ap(t))===e})}function Sw(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},n=np(e,t);if(n){var r=oo(t);r.removeChild(n)}}function kw(e,t){var n=Es.get(e);if(!n||!(0,ww.default)(document,n)){var r=_l("",t),o=r.parentNode;Es.set(e,o),e.removeChild(r)}}function Cw(){Es.clear()}function Ew(e,t){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},r=oo(n);kw(r,n);var o=np(t,n);if(o){var s,i;if((s=n.csp)!==null&&s!==void 0&&s.nonce&&o.nonce!==((i=n.csp)===null||i===void 0?void 0:i.nonce)){var u;o.nonce=(u=n.csp)===null||u===void 0?void 0:u.nonce}return o.innerHTML!==e&&(o.innerHTML=e),o}var c=_l(e,n);return c.setAttribute(ap(n),t),c}var io={};Object.defineProperty(io,"__esModule",{value:!0});io.getShadowRoot=Aw;io.inShadow=op;function sp(e){var t;return e==null||(t=e.getRootNode)===null||t===void 0?void 0:t.call(e)}function op(e){return sp(e)instanceof ShadowRoot}function Aw(e){return op(e)?sp(e):null}var Wa={};Object.defineProperty(Wa,"__esModule",{value:!0});Wa.call=xl;Wa.default=void 0;Wa.note=cp;Wa.noteOnce=dp;Wa.preMessage=void 0;Wa.resetWarned=up;Wa.warning=lp;Wa.warningOnce=Yn;var ji={},ip=function(t){};Wa.preMessage=ip;function lp(e,t){}function cp(e,t){}function up(){ji={}}function xl(e,t,n){!t&&!ji[n]&&(e(!1,n),ji[n]=!0)}function Yn(e,t){xl(lp,e,t)}function dp(e,t){xl(cp,e,t)}Yn.preMessage=ip;Yn.resetWarned=up;Yn.noteOnce=dp;var Pw=Yn;Wa.default=Pw;(function(e){Object.defineProperty(e,"__esModule",{value:!0});function t(g,E){for(var v in E)Object.defineProperty(g,v,{enumerable:!0,get:E[v]})}t(e,{warning:function(){return b},isIconDefinition:function(){return y},normalizeAttrs:function(){return x},generate:function(){return I},getSecondaryColor:function(){return w},normalizeTwoToneColors:function(){return A},svgBaseProps:function(){return f},iconStyles:function(){return j},useInsertStyles:function(){return C}});var n=Zd,r=pn,o=io,s=l(Wa),i=d(k),u=l(gl);function c(g,E,v){return E in g?Object.defineProperty(g,E,{value:v,enumerable:!0,configurable:!0,writable:!0}):g[E]=v,g}function l(g){return g&&g.__esModule?g:{default:g}}function p(g){if(typeof WeakMap!="function")return null;var E=new WeakMap,v=new WeakMap;return(p=function(_){return _?v:E})(g)}function d(g,E){if(!E&&g&&g.__esModule)return g;if(g===null||typeof g!="object"&&typeof g!="function")return{default:g};var v=p(E);if(v&&v.has(g))return v.get(g);var _={},S=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var P in g)if(P!=="default"&&Object.prototype.hasOwnProperty.call(g,P)){var T=S?Object.getOwnPropertyDescriptor(g,P):null;T&&(T.get||T.set)?Object.defineProperty(_,P,T):_[P]=g[P]}return _.default=g,v&&v.set(g,_),_}function m(g){for(var E=1;E<arguments.length;E++){var v=arguments[E]!=null?arguments[E]:{},_=Object.keys(v);typeof Object.getOwnPropertySymbols=="function"&&(_=_.concat(Object.getOwnPropertySymbols(v).filter(function(S){return Object.getOwnPropertyDescriptor(v,S).enumerable}))),_.forEach(function(S){c(g,S,v[S])})}return g}function h(g){return g.replace(/-(.)/g,function(E,v){return v.toUpperCase()})}function b(g,E){(0,s.default)(g,"[@ant-design/icons] ".concat(E))}function y(g){return typeof g=="object"&&typeof g.name=="string"&&typeof g.theme=="string"&&(typeof g.icon=="object"||typeof g.icon=="function")}function x(){var g=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return Object.keys(g).reduce(function(E,v){var _=g[v];switch(v){case"class":E.className=_,delete E.class;break;default:delete E[v],E[h(v)]=_}return E},{})}function I(g,E,v){return v?i.default.createElement(g.tag,m({key:E},x(g.attrs),v),(g.children||[]).map(function(_,S){return I(_,"".concat(E,"-").concat(g.tag,"-").concat(S))})):i.default.createElement(g.tag,m({key:E},x(g.attrs)),(g.children||[]).map(function(_,S){return I(_,"".concat(E,"-").concat(g.tag,"-").concat(S))}))}function w(g){return(0,n.generate)(g)[0]}function A(g){return g?Array.isArray(g)?g:[g]:[]}var f={width:"1em",height:"1em",fill:"currentColor","aria-hidden":"true",focusable:"false"},j=`
.anticon {
  display: inline-block;
  color: inherit;
  font-style: normal;
  line-height: 0;
  text-align: center;
  text-transform: none;
  vertical-align: -0.125em;
  text-rendering: optimizeLegibility;
  -webkit-font-smoothing: antialiased;
  -moz-osx-font-smoothing: grayscale;
}

.anticon > * {
  line-height: 1;
}

.anticon svg {
  display: inline-block;
}

.anticon::before {
  display: none;
}

.anticon .anticon-icon {
  display: block;
}

.anticon[tabindex] {
  cursor: pointer;
}

.anticon-spin::before,
.anticon-spin {
  display: inline-block;
  -webkit-animation: loadingCircle 1s infinite linear;
  animation: loadingCircle 1s infinite linear;
}

@-webkit-keyframes loadingCircle {
  100% {
    -webkit-transform: rotate(360deg);
    transform: rotate(360deg);
  }
}

@keyframes loadingCircle {
  100% {
    -webkit-transform: rotate(360deg);
    transform: rotate(360deg);
  }
}
`,C=function(g){var E=(0,i.useContext)(u.default),v=E.csp,_=E.prefixCls,S=j;_&&(S=S.replace(/anticon/g,_)),(0,i.useEffect)(function(){var P=g.current,T=(0,o.getShadowRoot)(P);(0,r.updateCSS)(S,"@ant-design-icons",{prepend:!0,csp:v,attachTo:T})},[])}})(so);(function(e){Object.defineProperty(e,"__esModule",{value:!0}),Object.defineProperty(e,"default",{enumerable:!0,get:function(){return y}});var t=s(k),n=so;function r(x,I,w){return I in x?Object.defineProperty(x,I,{value:w,enumerable:!0,configurable:!0,writable:!0}):x[I]=w,x}function o(x){if(typeof WeakMap!="function")return null;var I=new WeakMap,w=new WeakMap;return(o=function(A){return A?w:I})(x)}function s(x,I){if(!I&&x&&x.__esModule)return x;if(x===null||typeof x!="object"&&typeof x!="function")return{default:x};var w=o(I);if(w&&w.has(x))return w.get(x);var A={},f=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var j in x)if(j!=="default"&&Object.prototype.hasOwnProperty.call(x,j)){var C=f?Object.getOwnPropertyDescriptor(x,j):null;C&&(C.get||C.set)?Object.defineProperty(A,j,C):A[j]=x[j]}return A.default=x,w&&w.set(x,A),A}function i(x){for(var I=1;I<arguments.length;I++){var w=arguments[I]!=null?arguments[I]:{},A=Object.keys(w);typeof Object.getOwnPropertySymbols=="function"&&(A=A.concat(Object.getOwnPropertySymbols(w).filter(function(f){return Object.getOwnPropertyDescriptor(w,f).enumerable}))),A.forEach(function(f){r(x,f,w[f])})}return x}function u(x,I){var w=Object.keys(x);if(Object.getOwnPropertySymbols){var A=Object.getOwnPropertySymbols(x);I&&(A=A.filter(function(f){return Object.getOwnPropertyDescriptor(x,f).enumerable})),w.push.apply(w,A)}return w}function c(x,I){return I=I??{},Object.getOwnPropertyDescriptors?Object.defineProperties(x,Object.getOwnPropertyDescriptors(I)):u(Object(I)).forEach(function(w){Object.defineProperty(x,w,Object.getOwnPropertyDescriptor(I,w))}),x}function l(x,I){if(x==null)return{};var w=p(x,I),A,f;if(Object.getOwnPropertySymbols){var j=Object.getOwnPropertySymbols(x);for(f=0;f<j.length;f++)A=j[f],!(I.indexOf(A)>=0)&&Object.prototype.propertyIsEnumerable.call(x,A)&&(w[A]=x[A])}return w}function p(x,I){if(x==null)return{};var w={},A=Object.keys(x),f,j;for(j=0;j<A.length;j++)f=A[j],!(I.indexOf(f)>=0)&&(w[f]=x[f]);return w}var d={primaryColor:"#333",secondaryColor:"#E6E6E6",calculated:!1};function m(x){var I=x.primaryColor,w=x.secondaryColor;d.primaryColor=I,d.secondaryColor=w||(0,n.getSecondaryColor)(I),d.calculated=!!w}function h(){return i({},d)}var b=function(x){var I=x.icon,w=x.className,A=x.onClick,f=x.style,j=x.primaryColor,C=x.secondaryColor,g=l(x,["icon","className","onClick","style","primaryColor","secondaryColor"]),E=t.useRef(),v=d;if(j&&(v={primaryColor:j,secondaryColor:C||(0,n.getSecondaryColor)(j)}),(0,n.useInsertStyles)(E),(0,n.warning)((0,n.isIconDefinition)(I),"icon should be icon definiton, but got ".concat(I)),!(0,n.isIconDefinition)(I))return null;var _=I;return _&&typeof _.icon=="function"&&(_=c(i({},_),{icon:_.icon(v.primaryColor,v.secondaryColor)})),(0,n.generate)(_.icon,"svg-".concat(_.name),c(i({className:w,onClick:A,style:f,"data-icon":_.name,width:"1em",height:"1em",fill:"currentColor","aria-hidden":"true"},g),{ref:E}))};b.displayName="IconReact",b.getTwoToneColors=h,b.setTwoToneColors=m;var y=b})(yl);var pp={};(function(e){Object.defineProperty(e,"__esModule",{value:!0});function t(h,b){for(var y in b)Object.defineProperty(h,y,{enumerable:!0,get:b[y]})}t(e,{setTwoToneColor:function(){return d},getTwoToneColor:function(){return m}});var n=i(yl),r=so;function o(h,b){(b==null||b>h.length)&&(b=h.length);for(var y=0,x=new Array(b);y<b;y++)x[y]=h[y];return x}function s(h){if(Array.isArray(h))return h}function i(h){return h&&h.__esModule?h:{default:h}}function u(h,b){var y=h==null?null:typeof Symbol<"u"&&h[Symbol.iterator]||h["@@iterator"];if(y!=null){var x=[],I=!0,w=!1,A,f;try{for(y=y.call(h);!(I=(A=y.next()).done)&&(x.push(A.value),!(b&&x.length===b));I=!0);}catch(j){w=!0,f=j}finally{try{!I&&y.return!=null&&y.return()}finally{if(w)throw f}}return x}}function c(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function l(h,b){return s(h)||u(h,b)||p(h,b)||c()}function p(h,b){if(h){if(typeof h=="string")return o(h,b);var y=Object.prototype.toString.call(h).slice(8,-1);if(y==="Object"&&h.constructor&&(y=h.constructor.name),y==="Map"||y==="Set")return Array.from(y);if(y==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(y))return o(h,b)}}function d(h){var b=l((0,r.normalizeTwoToneColors)(h),2),y=b[0],x=b[1];return n.default.setTwoToneColors({primaryColor:y,secondaryColor:x})}function m(){var h=n.default.getTwoToneColors();return h.calculated?[h.primaryColor,h.secondaryColor]:h.primaryColor}})(pp);(function(e){"use client";Object.defineProperty(e,"__esModule",{value:!0}),Object.defineProperty(e,"default",{enumerable:!0,get:function(){return E}});var t=h(k),n=d(Jm),r=Zd,o=d(gl),s=d(yl),i=pp,u=so;function c(v,_){(_==null||_>v.length)&&(_=v.length);for(var S=0,P=new Array(_);S<_;S++)P[S]=v[S];return P}function l(v){if(Array.isArray(v))return v}function p(v,_,S){return _ in v?Object.defineProperty(v,_,{value:S,enumerable:!0,configurable:!0,writable:!0}):v[_]=S,v}function d(v){return v&&v.__esModule?v:{default:v}}function m(v){if(typeof WeakMap!="function")return null;var _=new WeakMap,S=new WeakMap;return(m=function(P){return P?S:_})(v)}function h(v,_){if(!_&&v&&v.__esModule)return v;if(v===null||typeof v!="object"&&typeof v!="function")return{default:v};var S=m(_);if(S&&S.has(v))return S.get(v);var P={},T=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var z in v)if(z!=="default"&&Object.prototype.hasOwnProperty.call(v,z)){var V=T?Object.getOwnPropertyDescriptor(v,z):null;V&&(V.get||V.set)?Object.defineProperty(P,z,V):P[z]=v[z]}return P.default=v,S&&S.set(v,P),P}function b(v,_){var S=v==null?null:typeof Symbol<"u"&&v[Symbol.iterator]||v["@@iterator"];if(S!=null){var P=[],T=!0,z=!1,V,W;try{for(S=S.call(v);!(T=(V=S.next()).done)&&(P.push(V.value),!(_&&P.length===_));T=!0);}catch(ae){z=!0,W=ae}finally{try{!T&&S.return!=null&&S.return()}finally{if(z)throw W}}return P}}function y(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function x(v){for(var _=1;_<arguments.length;_++){var S=arguments[_]!=null?arguments[_]:{},P=Object.keys(S);typeof Object.getOwnPropertySymbols=="function"&&(P=P.concat(Object.getOwnPropertySymbols(S).filter(function(T){return Object.getOwnPropertyDescriptor(S,T).enumerable}))),P.forEach(function(T){p(v,T,S[T])})}return v}function I(v,_){var S=Object.keys(v);if(Object.getOwnPropertySymbols){var P=Object.getOwnPropertySymbols(v);_&&(P=P.filter(function(T){return Object.getOwnPropertyDescriptor(v,T).enumerable})),S.push.apply(S,P)}return S}function w(v,_){return _=_??{},Object.getOwnPropertyDescriptors?Object.defineProperties(v,Object.getOwnPropertyDescriptors(_)):I(Object(_)).forEach(function(S){Object.defineProperty(v,S,Object.getOwnPropertyDescriptor(_,S))}),v}function A(v,_){if(v==null)return{};var S=f(v,_),P,T;if(Object.getOwnPropertySymbols){var z=Object.getOwnPropertySymbols(v);for(T=0;T<z.length;T++)P=z[T],!(_.indexOf(P)>=0)&&Object.prototype.propertyIsEnumerable.call(v,P)&&(S[P]=v[P])}return S}function f(v,_){if(v==null)return{};var S={},P=Object.keys(v),T,z;for(z=0;z<P.length;z++)T=P[z],!(_.indexOf(T)>=0)&&(S[T]=v[T]);return S}function j(v,_){return l(v)||b(v,_)||C(v,_)||y()}function C(v,_){if(v){if(typeof v=="string")return c(v,_);var S=Object.prototype.toString.call(v).slice(8,-1);if(S==="Object"&&v.constructor&&(S=v.constructor.name),S==="Map"||S==="Set")return Array.from(S);if(S==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(S))return c(v,_)}}(0,i.setTwoToneColor)(r.blue.primary);var g=t.forwardRef(function(v,_){var S=v.className,P=v.icon,T=v.spin,z=v.rotate,V=v.tabIndex,W=v.onClick,ae=v.twoToneColor,Ce=A(v,["className","icon","spin","rotate","tabIndex","onClick","twoToneColor"]),we=t.useContext(o.default),ue=we.prefixCls,de=ue===void 0?"anticon":ue,be=we.rootClassName,Ie,Pe=(0,n.default)(be,de,(Ie={},p(Ie,"".concat(de,"-").concat(P.name),!!P.name),p(Ie,"".concat(de,"-spin"),!!T||P.name==="loading"),Ie),S),Re=V;Re===void 0&&W&&(Re=-1);var $e=z?{msTransform:"rotate(".concat(z,"deg)"),transform:"rotate(".concat(z,"deg)")}:void 0,st=j((0,u.normalizeTwoToneColors)(ae),2),re=st[0],qe=st[1];return t.createElement("span",w(x({role:"img","aria-label":P.name},Ce),{ref:_,tabIndex:Re,onClick:W,className:Pe}),t.createElement(s.default,{icon:P,primaryColor:re,secondaryColor:qe,style:$e}))});g.displayName="AntdIcon",g.getTwoToneColor=i.getTwoToneColor,g.setTwoToneColor=i.setTwoToneColor;var E=g})(Xd);(function(e){Object.defineProperty(e,"__esModule",{value:!0}),Object.defineProperty(e,"default",{enumerable:!0,get:function(){return m}});var t=u(k),n=s(hl),r=s(Xd);function o(h,b,y){return b in h?Object.defineProperty(h,b,{value:y,enumerable:!0,configurable:!0,writable:!0}):h[b]=y,h}function s(h){return h&&h.__esModule?h:{default:h}}function i(h){if(typeof WeakMap!="function")return null;var b=new WeakMap,y=new WeakMap;return(i=function(x){return x?y:b})(h)}function u(h,b){if(!b&&h&&h.__esModule)return h;if(h===null||typeof h!="object"&&typeof h!="function")return{default:h};var y=i(b);if(y&&y.has(h))return y.get(h);var x={},I=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var w in h)if(w!=="default"&&Object.prototype.hasOwnProperty.call(h,w)){var A=I?Object.getOwnPropertyDescriptor(h,w):null;A&&(A.get||A.set)?Object.defineProperty(x,w,A):x[w]=h[w]}return x.default=h,y&&y.set(h,x),x}function c(h){for(var b=1;b<arguments.length;b++){var y=arguments[b]!=null?arguments[b]:{},x=Object.keys(y);typeof Object.getOwnPropertySymbols=="function"&&(x=x.concat(Object.getOwnPropertySymbols(y).filter(function(I){return Object.getOwnPropertyDescriptor(y,I).enumerable}))),x.forEach(function(I){o(h,I,y[I])})}return h}function l(h,b){var y=Object.keys(h);if(Object.getOwnPropertySymbols){var x=Object.getOwnPropertySymbols(h);b&&(x=x.filter(function(I){return Object.getOwnPropertyDescriptor(h,I).enumerable})),y.push.apply(y,x)}return y}function p(h,b){return b=b??{},Object.getOwnPropertyDescriptors?Object.defineProperties(h,Object.getOwnPropertyDescriptors(b)):l(Object(b)).forEach(function(y){Object.defineProperty(h,y,Object.getOwnPropertyDescriptor(b,y))}),h}var d=function(h,b){return t.createElement(r.default,p(c({},h),{ref:b,icon:n.default}))},m=t.forwardRef(d)})(Qd);const Tw=tn(Qd),Ow=_a({fetchInitialData:async({templateId:e,templateName:t})=>await ee.requestFunc("facplf_get_temp_post",{template_id:e,template_name:t}),useModalProps:({t:e})=>({title:e("pages.factor-template.publish.title"),width:700}),useFormProps:({props:e,data:t})=>{var o,s;const{templateId:n,templateName:r}=e;return{labelCol:{span:5},initialValues:{template_id:n,template_name:r,reviews:(o=t==null?void 0:t.scope)!=null&&o.length?(s=t==null?void 0:t.scope)==null?void 0:s.map(i=>({department:i,reviewers:[]})):[{}]}}},useFormRender:({t:e,formProps:t,data:n})=>a.jsxs(B,{...t,children:[a.jsx(Cs,{lastReviews:n}),a.jsx(B.Item,{name:"note",label:e("pages.factor-list.publish-factor-modal.form.comment"),initialValue:"",children:a.jsx(Ne.TextArea,{autoSize:{minRows:3,maxRows:5},placeholder:e("pages.factor-list.publish-factor-modal.form.comment-warn")})})]}),onSubmit:async(e,{props:t,t:n,antApp:{message:r},data:o})=>{const s=async i=>new Promise(u=>{aa.confirm({title:n("pages.factor-template.publish.title"),icon:a.jsx(Tw,{}),content:n("pages.factor-list.publish-factor-modal.message.title",{factor:i}),okText:n("pages.factor-list.publish-factor-modal.message.sure"),cancelText:n("pages.factor-list.publish-factor-modal.message.cancel"),onOk:()=>u(!0),onCancel:()=>u(!1)})});if(e.template_id=t.templateId,e.template_name=t.templateName,o&&!await s(t.templateName))throw n("pages.factor-list.publish-factor-modal.form.cancel-err");try{await ee.requestFunc("facplf_post_temp",e),r.success(n("pages.factor-list.publish-factor-modal.form.success"))}catch(i){r.error(Be(i))}}}),Rw="_batchBtnWrapper_i0d8g_1",Fw="_comment_i0d8g_5",Lw="_popConfirm_i0d8g_9",Fo={batchBtnWrapper:Rw,comment:Fw,popConfirm:Lw},Nw={items:[],total:0},Dw=()=>{const{t:e}=Z(),t=Ft(),{message:n}=at.useApp(),{data:r=Nw,isLoading:o,mutate:s}=Oe(ni.SWR_KEY,ni),i=Dn({getKey:m=>m.template_id,isShowSelect:()=>!0,clearDeps:[r]}),u=he(async m=>{try{Array.isArray(m)&&m.length?await ee.requestFunc("facplf_delete_private_factor_templates",{templates:m}):await ee.requestFunc("facplf_delete_private_factor_template",{template_id:m}),s(),setTimeout(()=>n.success(e("common.delete-success")),1e3)}catch(h){n.error(Be(h))}}),c=he(async()=>{await u(i.items.map(m=>m.template_id))}),l=he(async()=>{await ke.show(fw,{history:t})}),p=he(async(m,h)=>{await ke.show(Ow,{templateId:m,templateName:h}),s()}),d=k.useMemo(()=>[{title:e("pages.factor-template.list.name"),dataIndex:"name",width:200,fixed:"left"},{title:e("pages.factor-template.list.properties"),dataIndex:"factor_properties",render:m=>m!=null&&m.length?a.jsx(Gt,{ellipsisTagProps:{bordered:!1,color:"orange"},autoReduceWrap:!1,max:3,children:m.map(h=>a.jsx(yt,{bordered:!1,color:"orange",children:e(`constants.factor-properties.${h}`)},h))}):"-",width:200},{title:e("pages.factor-template.list.tag"),dataIndex:"tags",width:200,render:m=>m!=null&&m.length?a.jsx(Gt,{ellipsisTagProps:{bordered:!1},children:m.map(h=>a.jsx(yt,{bordered:!1,color:"blue",children:h},h))}):"-"},{title:e("pages.factor-template.list.creator"),dataIndex:"creator",width:200},{title:e("pages.factor-template.list.create-time"),dataIndex:"create_time",render:m=>m?Qe(m):"-",width:200},{title:e("pages.factor-template.list.update-time"),dataIndex:"update_time",render:m=>m?Qe(m):"-",width:200},{title:e("pages.factor-template.list.comment"),dataIndex:"comment",width:200,render:m=>a.jsx(De.Paragraph,{className:Fo.comment,ellipsis:{rows:2,expandable:!0},children:m||"-"})},{title:e("common.table.operation.title"),dataIndex:"operation",width:250,fixed:"right",render:(m,h)=>a.jsxs(Vt,{max:3,children:[a.jsx(Ue,{to:Se.factorTemplateEdit(h.template_id),children:e("common.edit")}),a.jsx(De.Link,{onClick:()=>{p(h.template_id,h.name)},children:e("common.public")}),a.jsx(la,{title:e("pages.factor-template.list.confirm.delete-title"),description:e("pages.factor-template.list.confirm.delete",{name:h.name}),onConfirm:()=>u(h.template_id),children:a.jsx(De.Link,{type:"danger",children:e("common.delete")})})]})}],[u,p,e]);return a.jsxs("div",{children:[a.jsxs(it,{className:Fo.batchBtnWrapper,children:[a.jsxs(Ae,{type:"primary",onClick:l,children:[a.jsx(Ua,{}),e("pages.factor-template.list.create-template")]}),a.jsx(la,{disabled:!i.hasSelected,overlayClassName:Fo.popConfirm,title:e("pages.factor-template.list.confirm.delete-title"),description:e("pages.factor-template.list.confirm.batch-delete"),onConfirm:c,children:a.jsx(Ae,{danger:!0,disabled:!i.hasSelected,icon:a.jsx(Bi,{}),children:e("common.batch-delete")})})]}),a.jsx(vt,{dataSource:r==null?void 0:r.items,columns:d,loading:o,rowSelection:i.tableRowSelectionProps,rowKey:"template_id",pagination:{pageSize:10,hideOnSinglePage:!0},scroll:{x:1200}})]})},Mw=_a({useModalProps:({t:e})=>({width:600,title:e("pages.factor-template.components.public-template.publish-title")}),useFormProps:()=>({labelCol:{span:4}}),useFormRender:({t:e,formProps:t})=>a.jsxs(B,{...t,children:[a.jsx(Yd,{}),a.jsx(B.Item,{name:"note",label:e("common.comment"),children:a.jsx(Ne.TextArea,{rows:4})})]}),onSubmit:async(e,{t,props:n,antApp:{message:r}})=>{try{await ee.requestFunc("facplf_publish_temp",{...e,template_id:n.templateId}),r.success(t("pages.factor-template.components.public-template.submit-success"))}catch(o){r.error(Be(o))}}}),Ww="_popConfirm_fsxf7_1",Bw="_filter_fsxf7_5",$w="_department_fsxf7_8",Vw="_linkBtn_fsxf7_12",qw="_comment_fsxf7_17",Br={popConfirm:Ww,filter:Bw,department:$w,linkBtn:Vw,comment:qw},zw={items:[],total:0},Gw=()=>{const{t:e}=Z(),{message:t}=at.useApp(),n=ca(),[r,o]=k.useState(),s=he(b=>{o(b)}),{data:i=zw,isLoading:u,mutate:c}=Oe([si.SWR_KEY,r],async()=>si(r==null?void 0:r.scope)),l=he(async b=>{try{await ee.requestFunc("facplf_delete_public_factor_template",{template_id:b,department:r==null?void 0:r.scope}),c(),t.success(e("common.delete-success"))}catch(y){t.error(Be(y))}}),p=he(b=>{if(!(r!=null&&r.scope))return!1;switch(b.public_level){case ms.DEPARTMENT:return n.isDepartmentAdmin(r.scope);case ms.SYSTEM:return n.isSystemAdmin();default:return!1}}),d=he(b=>!(r!=null&&r.scope)||b.public_level===ms.SYSTEM?!1:n.hasDepartmentAuth(ot.REVIEW,r.scope)),m=he(b=>{ke.show(Mw,{templateId:b})}),h=k.useMemo(()=>[{title:e("pages.factor-template.list.name"),dataIndex:"name",width:200,fixed:"left"},{title:e("pages.factor-template.list.is-preset"),dataIndex:"is_custom",width:100,render:b=>e(b?"common.no":"common.yes")},{title:e("pages.factor-template.list.properties"),dataIndex:"factor_properties",render:b=>a.jsx(Gt,{ellipsisTagProps:{bordered:!1,color:"orange"},autoReduceWrap:!1,max:3,children:b.map(y=>a.jsx(yt,{bordered:!1,color:"orange",className:Br.tag,children:y},y))}),width:200},{title:e("pages.factor-template.list.tag"),dataIndex:"tags",width:200,render:b=>a.jsx(Gt,{ellipsisTagProps:{bordered:!1},children:b==null?void 0:b.map(y=>a.jsx(yt,{bordered:!1,color:"blue",children:y},y))})},{title:e("pages.factor-template.list.creator"),dataIndex:"creator",width:200},{title:e("pages.factor-template.list.publish-time"),dataIndex:"publish_time",render:b=>b?Qe(b):"-",width:200},{title:e("pages.factor-template.list.public-level"),dataIndex:"public_level",render:b=>e(`constants.public-level.${b}`,{defaultValue:"-"}),width:150},{title:e("pages.factor-template.list.comment"),dataIndex:"comment",width:200,render:b=>a.jsx(De.Paragraph,{className:Br.comment,ellipsis:{rows:2,expandable:!0},children:b||"-"})},{title:e("common.table.operation.title"),dataIndex:"operation",width:300,fixed:"right",render:(b,y)=>a.jsxs(Vt,{className:Br.btnWrapper,children:[a.jsx(mr,{code:y.code??""}),d(y)&&a.jsx(De.Link,{onClick:()=>m(y.template_id),children:e("common.public")}),p(y)&&a.jsx(la,{overlayClassName:Br.popConfirm,title:e("pages.factor-template.list.confirm.delete-title"),description:e("pages.factor-template.list.confirm.delete",{name:y.name}),onConfirm:()=>l(y.template_id),children:a.jsx(De.Link,{type:"danger",disabled:!p(y),children:e("common.delete")})})]})}],[d,l,p,m,e]);return a.jsxs(a.Fragment,{children:[a.jsx(B,{layout:"inline",onValuesChange:s,className:Br.filter,children:a.jsx(B.Item,{label:e("pages.review-list.my-review-list.filter.scope"),name:"scope",className:Br.department,children:a.jsx(Ki,{withPublic:!0,allowClear:!0})})}),a.jsx(vt,{dataSource:(i==null?void 0:i.items)||[],columns:h,loading:u,rowKey:"template_id",pagination:{pageSize:10,hideOnSinglePage:!0},scroll:{x:1200}})]})},Uw=()=>{const{t:e}=Z(),t=k.useMemo(()=>[{path:"/factor/template/private",label:e("pages.factor-template.list.template-type.private"),component:Dw},{path:"/factor/template/public",label:e("pages.factor-template.list.template-type.public"),component:Gw}],[e]);return a.jsx(nt,{children:a.jsx(Ar,{routes:t,redirect:{from:"/factor/template",to:"/factor/template/private",exact:!0}})})},Hw="_form_1lkms_1",Kw="_actions_1lkms_8",hc={form:Hw,actions:Kw};function Yw(){var p,d;const e=Ft(),t=Zr(),{t:n}=Z(),{message:r}=at.useApp(),[o,s]=Ir(!1),i=Ra(),u=k.useMemo(()=>mt.parse(t.search),[t.search]),[c]=B.useForm();k.useEffect(()=>{var m;c.setFieldValue("username",(m=i.sessionStorageValue)==null?void 0:m.username)},[c,(p=i.sessionStorageValue)==null?void 0:p.username]);const l=k.useCallback(async m=>{try{s.setTrue(),await i.login(m);const h=u.redirect||"/factors";e.push(h)}catch(h){r.error(Be(h))}finally{s.setFalse()}},[e,s,r,u,i]);return a.jsx(aa,{width:400,title:n("pages.login.title"),open:!0,closable:!1,maskClosable:!1,footer:null,children:a.jsxs(B,{form:c,initialValues:{username:(d=i.sessionStorageValue)==null?void 0:d.username},layout:"vertical",onFinish:l,className:hc.form,children:[a.jsx(B.Item,{name:"username",validateFirst:!0,rules:[{required:!0,message:n("pages.login.form.username.rule-message.required")}],children:a.jsx(Ne,{prefix:a.jsx(au,{}),placeholder:n("pages.login.form.username.placeholder")})}),a.jsx(B.Item,{name:"password",validateFirst:!0,rules:[{required:!0,message:n("pages.login.form.password.rule-message.required")}],children:a.jsx(Ne.Password,{prefix:a.jsx(ru,{}),placeholder:n("pages.login.form.password.placeholder")})}),a.jsx(B.Item,{className:hc.actions,children:a.jsx(Ae,{block:!0,type:"primary",htmlType:"submit",loading:o,children:n("pages.login.form.actions.login")})})]})})}const Jw="_result_zrrnd_1",Qw={result:Jw};function Xw(){const{t:e}=Z();return a.jsx(Di,{status:"404",title:e("pages.404.page-not-exist"),className:Qw.result,extra:a.jsx(Ue,{to:"/",children:a.jsx(Ae,{type:"primary",children:e("pages.404.back-to-home")})})})}const Zw="_loading_x54yw_1",ej="_tree_x54yw_11",tj="_empty_x54yw_15",Lo={loading:Zw,tree:ej,empty:tj},aj=e=>{const{treeData:t,setSelectTable:n,loading:r}=e,o=k.useRef(),[s,i]=k.useState([]),u=async c=>{const l=c[0]===void 0?o.current:c[0];if(l!==void 0){const p=l.toString();if(p.includes("&"))n(p);else{const d=[];let m=!1;for(const h of s)h===p?m=!0:d.push(h);m||d.push(p),i(d)}o.current=c[0]}};return a.jsx(kr,{spinning:r,wrapperClassName:Lo.loading,children:t.length?a.jsx(Vi,{showIcon:!0,focusable:!1,showLine:!0,treeData:t,height:650,className:Lo.tree,onSelect:u,expandedKeys:s,defaultSelectedKeys:[],onExpand:c=>{i(c)}}):a.jsx(Ma,{image:Ma.PRESENTED_IMAGE_SIMPLE,className:Lo.empty})})},rj="_table_38yk9_1",nj="_contentPanel_38yk9_5",sj="_leftPanel_38yk9_13",os={table:rj,contentPanel:nj,leftPanel:sj},oj={showSizeChanger:!1,defaultPageSize:10};function ij(e){const t=[];return e.forEach(({name:n,tables:r})=>{t.push({title:n,key:n,children:r.map(o=>({title:o.name,key:`${n}&${o.name}`,icon:a.jsx(Mi,{})})),icon:a.jsx(Qm,{})})}),t}function lj(){const[e,t]=k.useState(),{t:n}=Z(),r=[{title:n("pages.overview.table.name"),dataIndex:"name",key:"name"},{title:n("pages.overview.table.typeString"),dataIndex:"type_string",key:"type_string"},{title:n("pages.overview.table.comment"),dataIndex:"comment",key:"comment",width:400,render(c){return a.jsx(De.Paragraph,{className:os.comment,ellipsis:{rows:2,expandable:!0},children:c})}}],{data:o,isLoading:s}=Yu({department_names:null,withTableSchema:!0}),i=k.useMemo(()=>o?ij(o):[],[o]),u=k.useMemo(()=>{var p,d,m;const[c,l]=e?e.split("&"):["",""];return((m=(d=(p=o==null?void 0:o.find(h=>h.name===c))==null?void 0:p.tables)==null?void 0:d.find(h=>h.name===l))==null?void 0:m.schemas)??[]},[o,e]);return a.jsx(nt,{headerBottomMargin:!0,children:a.jsxs("div",{className:os.contentPanel,children:[a.jsx("div",{className:os.leftPanel,children:a.jsx(aj,{loading:s,treeData:i,setSelectTable:t})}),a.jsx(vt,{columns:r,dataSource:u,pagination:oj,className:os.table,bordered:!0,locale:{emptyText:n("pages.overview.table.placeholder")},rowKey:"name"})]})})}var Rt=(e=>(e[e.REVIEWING=0]="REVIEWING",e[e.PASSED=1]="PASSED",e[e.REVOKED=2]="REVOKED",e[e.PARTIALLY_PASSED=3]="PARTIALLY_PASSED",e[e.REJECT=-1]="REJECT",e))(Rt||{});const mp={[Rt.PASSED]:"#6ED86C",[Rt.REJECT]:"#EE0001",[Rt.REVIEWING]:"#1B91FF",[Rt.REVOKED]:"#FFC63D",[Rt.PARTIALLY_PASSED]:"#1B91FF"},cj={[Rt.PASSED]:"success",[Rt.REJECT]:"error",[Rt.REVIEWING]:"info",[Rt.REVOKED]:"warning",[Rt.PARTIALLY_PASSED]:"info"};function fp(e){const{request:t,requestSWRKey:n,operationsRender:r,batchOperationsRender:o,actionRef:s}=e,{t:i}=Z(),{data:u,isLoading:c,mutate:l}=Oe(n,t);k.useImperativeHandle(s,()=>({reload:()=>{l()}}));const p=Dn({getKey:m=>m.review_id,clearDeps:[u],isDisabled:m=>m.status!==Rt.REVIEWING}),d=k.useMemo(()=>[{title:i("pages.review-list.my-submit-list.factor.name"),dataIndex:"factor_name",render:(m,h)=>h.factor.name,width:200,fixed:"left"},{title:i("pages.review-list.my-submit-list.factor.properties"),dataIndex:"factor_properties",width:200,render:(m,h)=>h.factor.properties&&a.jsx(Gt,{ellipsisTagProps:{bordered:!1},children:h.factor.properties.split(",").map(b=>a.jsx(yt,{bordered:!1,color:"blue",children:b},b))})},{title:i("pages.review-list.my-submit-list.factor.submit-time"),width:200,dataIndex:"submit_time",render:m=>Qe(m)},{title:i("pages.review-list.my-submit-list.factor.scope"),width:150,dataIndex:"scope",render:(m,h)=>ks(h.scope,i)},{title:i("pages.review-list.my-submit-list.factor.creator"),width:100,dataIndex:"factor_creator",render:(m,h)=>h.factor.creator},{title:i("pages.review-list.my-submit-list.factor.submitter"),width:100,dataIndex:"submitter"},{title:i("pages.review-list.my-submit-list.factor.status"),width:100,dataIndex:"status",render:m=>a.jsx("span",{style:{color:mp[m]},children:i(`constants.review-status.${m}`)})},{title:i("common.table.operation.title"),width:350,dataIndex:"operation",fixed:"right",render:(m,h)=>r(h)}],[r,i]);return a.jsxs(a.Fragment,{children:[o==null?void 0:o(p.items,p),a.jsx(vt,{rowKey:"review_id",columns:d,dataSource:u==null?void 0:u.items,loading:c,rowSelection:o?p.tableRowSelectionProps:void 0,scroll:{x:1200}})]})}const hp=_a({useModalProps:({t:e})=>({title:e("pages.review-list.components.review-action.approve-modal.title")}),useFormProps:()=>({labelCol:{span:4}}),useFormRender:({t:e,formProps:t})=>a.jsx(B,{...t,children:a.jsx(B.Item,{name:"suggestion",children:a.jsx(Ne.TextArea,{placeholder:e("pages.review-list.components.review-action.approve-modal.form.suggestion.placeholder"),autoSize:{minRows:5,maxRows:10}})})}),onSubmit:async(e,{props:t})=>{await t.onSubmit(e)}}),uj={factor:"facplf_approve_factor",template:"facplf_approve_temp"};function As(e){const{reviewId:t,reviewType:n,onSuccess:r,as:o,...s}=e,{t:i}=Z(),{message:u}=at.useApp(),c=async()=>{ke.show(hp,{onSubmit:async p=>{const d=await ee.requestFunc(uj[n],{review_id:t,suggestion:p.suggestion});u.success(d.is_published?i("pages.review-list.components.review-action.approve-trigger.success.published"):i("pages.review-list.components.review-action.approve-trigger.success.unpublished")),r==null||r()}})},l=o==="Link"?De.Link:Ae;return a.jsx(l,{...s,onClick:c,children:i("pages.review-list.components.review-action.approve-trigger.name")})}const dj={factor:"facplf_approve_multi_factors",template:"facplf_approve_multi_temps"};function gc(e){const{reviews:t,reviewType:n,onSuccess:r,...o}=e,{t:s}=Z(),{message:i}=at.useApp(),u=async()=>{ke.show(hp,{onSubmit:async c=>{const l=await ee.requestFunc(dj[n],{reviews:t,suggestion:c.suggestion});i.success(l.is_all_published?s("pages.review-list.components.review-action.batch-approve-trigger.success.published"):s("pages.review-list.components.review-action.batch-approve-trigger.success.unpublished")),r==null||r()}})};return a.jsx(Ae,{...o,onClick:u,icon:a.jsx($i,{}),children:s("pages.review-list.components.review-action.batch-approve-trigger.name")})}const pj=_a({useModalProps:({t:e})=>({title:e("pages.review-list.components.review-action.reject-modal.title")}),useFormProps:()=>({labelCol:{span:4}}),useFormRender:({t:e,formProps:t})=>a.jsx(B,{...t,children:a.jsx(B.Item,{name:"suggestion",children:a.jsx(Ne.TextArea,{placeholder:e("pages.review-list.components.review-action.reject-modal.form.suggestion.placeholder"),autoSize:{minRows:5,maxRows:10}})})}),onSubmit:async(e,{props:t,t:n,antApp:{message:r}})=>{await t.onSubmit(e),r.success(n("pages.review-list.components.review-action.reject-modal.success"))}}),mj={factor:"facplf_reject_factor",template:"facplf_reject_temp"};function Ps(e){const{reviewId:t,reviewType:n,onSuccess:r,as:o,...s}=e,{t:i}=Z(),u=async()=>{ke.show(pj,{onSubmit:async l=>{await ee.requestFunc(mj[n],{review_id:t,suggestion:l.suggestion}),r==null||r()}})},c=o==="Link"?De.Link:Ae;return a.jsx(c,{...s,onClick:u,children:i("pages.review-list.components.review-action.reject-trigger.name")})}function gp(e){const{request:t,requestSWRKey:n,operationsRender:r,batchOperationsRender:o,actionRef:s}=e,{t:i}=Z(),{data:u,isLoading:c,mutate:l}=Oe(n,t);k.useImperativeHandle(s,()=>({reload:()=>{l()}}));const p=Dn({getKey:m=>m.review_id,clearDeps:[u],isDisabled:m=>m.status!==Rt.REVIEWING}),d=k.useMemo(()=>[{title:i("pages.review-list.my-submit-list.template.name"),width:200,dataIndex:"template_name",render:(m,h)=>h.template.name},{title:i("pages.review-list.my-submit-list.factor.properties"),width:200,dataIndex:"factor_Properties",render:(m,h)=>h.template.properties&&a.jsx(Gt,{ellipsisTagProps:{bordered:!1},children:h.template.properties.split(",").map(b=>a.jsx(yt,{bordered:!1,color:"blue",children:b},b))})},{title:i("pages.review-list.my-submit-list.factor.submit-time"),width:200,dataIndex:"submit_time",render:m=>Qe(m)},{title:i("pages.review-list.my-submit-list.factor.scope"),width:150,dataIndex:"scope",render:(m,h)=>ks(h.scope,i)},{title:i("pages.review-list.my-submit-list.factor.creator"),width:100,dataIndex:"creator",render:(m,h)=>h.template.creator},{title:i("pages.review-list.my-submit-list.factor.submitter"),width:100,dataIndex:"submitter"},{title:i("pages.review-list.my-submit-list.template.status"),width:100,dataIndex:"status",render:m=>a.jsx("span",{style:{color:mp[m]},children:i(`constants.review-status.${m}`)})},{title:i("common.table.operation.title"),width:350,dataIndex:"operation",render:(m,h)=>r==null?void 0:r(h)}],[r,i]);return a.jsxs(a.Fragment,{children:[o==null?void 0:o(p.items,p),a.jsx(vt,{rowKey:"review_id",columns:d,dataSource:u==null?void 0:u.items,loading:c,rowSelection:o?p.tableRowSelectionProps:void 0})]})}const fj="_filter_10f1n_1",hj="_department_10f1n_5",gj="_action_10f1n_9",is={filter:fj,department:hj,action:gj},yj=async([e,t])=>ee.requestFunc("facplf_get_my_factor_review_list",t),bj=async([e,t])=>ee.requestFunc("facplf_get_my_temp_review_list",t);function vj(){const{t:e}=Z(),[t,n]=Uc({scope:null}),r=jt.useRef(null),o=jt.useRef(null),s=k.useCallback(d=>{n(d)},[n]),i=he(()=>{var d;return(d=r.current)==null?void 0:d.reload()}),u=he(()=>{var d;return(d=o.current)==null?void 0:d.reload()}),c=he(()=>a.jsx(fp,{actionRef:r,request:yj,requestSWRKey:["facplf_get_my_factor_review_list",t],batchOperationsRender:(d,m)=>a.jsx("div",{className:is.action,children:a.jsx(gc,{reviews:d.map(h=>h.review_id),reviewType:"factor",disabled:!m.hasSelected,onSuccess:i})}),operationsRender:d=>a.jsxs(Vt,{children:[d.status!==Rt.REVOKED&&a.jsx(Ue,{to:Se.myReviewFactorDetail(d.review_id),children:e("common.table.operation.view-detail")}),d.status===Rt.REVIEWING&&a.jsx(As,{reviewId:d.review_id,reviewType:"factor",as:"Link",onSuccess:i}),d.status===Rt.REVIEWING&&a.jsx(Ps,{reviewId:d.review_id,reviewType:"factor",as:"Link",type:"danger",onSuccess:i})]})})),l=he(()=>a.jsx(gp,{actionRef:o,request:bj,requestSWRKey:["facplf_get_my_temp_review_list",t],batchOperationsRender:(d,m)=>a.jsx("div",{className:is.action,children:a.jsx(gc,{reviews:d.map(h=>h.review_id),reviewType:"template",disabled:!m.hasSelected,onSuccess:u})}),operationsRender:d=>a.jsxs(Vt,{children:[d.status!==Rt.REVOKED&&a.jsx(Ue,{to:Se.myReviewTemplateDetail(d.review_id),children:e("common.table.operation.view-detail")}),d.status===Rt.REVIEWING&&a.jsx(As,{as:"Link",reviewId:d.review_id,reviewType:"template",onSuccess:u}),d.status===Rt.REVIEWING&&a.jsx(Ps,{as:"Link",reviewId:d.review_id,reviewType:"template",type:"danger",onSuccess:u})]})})),p=k.useMemo(()=>[{path:"/review/my-review/factor",component:c,label:e("pages.review-list.my-submit-list.tab-type.factor")},{path:"/review/my-review/template",component:l,label:e("pages.review-list.my-submit-list.tab-type.template")}],[c,l,e]);return a.jsxs(nt,{children:[a.jsx(B,{layout:"inline",onValuesChange:s,className:is.filter,children:a.jsx(B.Item,{label:e("pages.review-list.my-review-list.filter.scope"),name:"scope",className:is.department,children:a.jsx(Ki,{withPublic:!0,value:t.scope,allowClear:!0})})}),a.jsx(Ar,{routes:p,redirect:{from:"/review/my-review",to:"/review/my-review/factor",exact:!0}})]})}const _j="_revokePopoverOverlay_125ug_1",xj="_revokeNote_125ug_5",No={revokePopoverOverlay:_j,revokeNote:xj},wj=async()=>ee.requestFunc("facplf_get_my_factor_submission_list"),jj=async()=>ee.requestFunc("facplf_get_my_temp_submission_list");function Ij(){const{t:e}=Z(),{message:t}=at.useApp(),n=jt.useRef(null),r=k.useCallback(async l=>{var p;try{await ee.requestFunc("facplf_withdraw_my_factor_submission",{review_id:l}),t.success(e("pages.review-list.my-submit-list.revoke-success")),(p=n.current)==null||p.reload()}catch(d){t.error(Be(d))}},[t,e]),o=jt.useRef(null),s=k.useCallback(async l=>{var p;try{await ee.requestFunc("facplf_withdraw_my_temp_submission",{review_id:l}),t.success(e("pages.review-list.my-submit-list.revoke-success")),(p=o.current)==null||p.reload()}catch(d){t.error(Be(d))}},[t,e]),i=k.useMemo(()=>a.jsx(fp,{actionRef:n,request:wj,requestSWRKey:"facplf_get_my_factor_submission_list",operationsRender:l=>a.jsxs(Vt,{children:[l.status!==Rt.REVOKED&&a.jsx(Ue,{to:Se.mySubmitFactorDetail(l.review_id),children:e("common.table.operation.view-detail")}),l.status===Rt.REVIEWING&&a.jsx(la,{title:a.jsxs(a.Fragment,{children:[a.jsx("div",{children:e("pages.review-list.my-submit-list.factor.revoke-factor-review",{name:l.factor.name})}),l.factor.is_republish&&a.jsx(De.Text,{type:"secondary",className:No.revokeNote,children:e("pages.review-list.my-submit-list.factor.revoke-republish-review",{name:l.factor.name})})]}),onConfirm:()=>r(l.review_id),overlayClassName:No.revokePopoverOverlay,children:a.jsx(De.Link,{children:e("common.table.operation.revoke")})})]})}),[r,e]),u=k.useMemo(()=>a.jsx(gp,{actionRef:o,request:jj,requestSWRKey:"facplf_get_my_temp_submission_list",operationsRender:l=>a.jsxs(Vt,{children:[l.status!==Rt.REVOKED&&a.jsx(Ue,{to:Se.mySubmitTemplateDetail(l.review_id),children:e("common.table.operation.view-detail")}),l.status===Rt.REVIEWING&&a.jsx(la,{title:e("pages.review-list.my-submit-list.factor.revoke-template-review",{name:l.template.name}),onConfirm:()=>s(l.review_id),overlayClassName:No.revokePopoverOverlay,children:a.jsx(De.Link,{disabled:l.status!==Rt.REVIEWING,children:e("common.table.operation.revoke")})})]})}),[s,e]),c=k.useMemo(()=>[{path:"/review/my-submit/factor",component:()=>i,label:e("pages.review-list.my-submit-list.tab-type.factor")},{path:"/review/my-submit/template",component:()=>u,label:e("pages.review-list.my-submit-list.tab-type.template")}],[i,u,e]);return a.jsx(nt,{children:a.jsx(Ar,{routes:c,redirect:{from:"/review/my-submit",to:"/review/my-submit/factor",exact:!0}})})}const Sj="_alert_iemss_1",kj={alert:Sj},yp=e=>{const{status:t,reviewer:n,suggestion:r,...o}=e;return a.jsx(Fi,{className:kj.alert,type:cj[t],showIcon:!0,message:go("constants.review-result-title",{returnObjects:!0})[t],description:n||r?a.jsxs(a.Fragment,{children:[a.jsx("div",{children:`${go("pages.review-list.review-factor-detail.reviewer")}${n}`}),a.jsx("div",{children:`${go("pages.review-list.review-factor-detail.suggestion")}${r||"-"}`})]}):null,...o})};var Nn=(e=>(e.REVIEWER="reviewer",e.SUBMITTER="submitter",e))(Nn||{});function bp(){return Zr().pathname.includes("my-review")?Nn.REVIEWER:Nn.SUBMITTER}const Cj="_actions_17p5u_1",Ej={actions:Cj},yc=()=>{const{id:e}=$t(),{t}=Z(),n=bp(),{data:r,isLoading:o,mutate:s}=Oe(["facplf_get_factor_submission_detail",e],async()=>ee.requestFunc("facplf_get_factor_submission_detail",{review_id:e})),i=k.useMemo(()=>r?[{label:t("pages.review-list.my-submit-list.factor.name"),children:r.factor.name},{label:t("pages.review-list.my-submit-list.factor.operator"),children:a.jsx(Gt,{max:2,ellipsisTagProps:{bordered:!1,color:"cyan"},children:r.factor.funcs.map(c=>a.jsx(yt,{color:"cyan",bordered:!1,children:c},c))})},{label:t("pages.review-list.my-submit-list.factor.properties"),children:r.factor.properties?a.jsx(Gt,{ellipsisTagProps:{bordered:!1},children:r.factor.properties.split(",").map(c=>a.jsx(yt,{bordered:!1,color:"blue",children:c},c))}):"-"},{label:t("pages.review-list.my-submit-list.factor.submit-time"),children:Qe(r.submit_time)},{label:t("pages.review-list.my-submit-list.factor.factor-comment"),children:r.factor.comment??"-"},{label:t("pages.review-list.review-factor-detail.publish-remark"),children:r.note??"-"}]:[],[r,t]),u=k.useMemo(()=>[{title:t("pages.review-list.review-factor-detail.analysis-id"),dataIndex:"analysis_id",width:400},{title:t("pages.review-list.review-factor-detail.func-name"),dataIndex:"func_name",width:200},{title:t("pages.review-list.review-factor-detail.create-time"),dataIndex:"create_time"},{title:t("common.table.operation.title"),render:(c,l)=>a.jsx(Ue,{to:Se.analysisRecordDetailData(l.analysis_id),children:t("common.table.operation.view-detail")})}],[t]);return a.jsx(nt,{autoBreadcrumb:{addonItems:[{title:t("pages.review-list.review-factor-detail.review-detail")}]},children:o||!r?a.jsx(en,{height:400}):a.jsxs(a.Fragment,{children:[n===Nn.REVIEWER&&r.status===Rt.REVIEWING&&a.jsxs(it,{className:Ej.actions,children:[a.jsx(As,{as:"Button",type:"primary",reviewId:e,reviewType:"factor",onSuccess:s}),a.jsx(Ps,{as:"Button",type:"primary",danger:!0,reviewId:e,reviewType:"factor",onSuccess:s})]}),a.jsx(yp,{status:r.status,suggestion:r.suggestion,reviewer:r.factor.reviewer}),a.jsx(ta,{title:t("pages.review-list.review-factor-detail.factor-info"),bottomButtons:r!=null&&r.encrypt?null:a.jsx(mr,{code:(r==null?void 0:r.factor.code)??""}),children:a.jsx(Cr,{layout:"vertical",colon:!1,column:4,items:i})}),a.jsx(ba,{}),a.jsx(ta,{title:t("pages.review-list.review-factor-detail.analysis-report"),children:a.jsx(vt,{columns:u,dataSource:r.reports,pagination:{pageSize:10,hideOnSinglePage:!0}})})]})})},Aj="_btnWrapper_wwe3j_1",Pj="_actions_wwe3j_5",Tj={btnWrapper:Aj,actions:Pj},bc=()=>{const{id:e}=$t(),{t}=Z(),n=bp(),{data:r,isLoading:o,mutate:s}=Oe(["facplf_get_temp_submission_detail",e],async()=>ee.requestFunc("facplf_get_temp_submission_detail",{review_id:e})),i=k.useMemo(()=>{var u,c;return r?[{label:t("pages.review-list.my-submit-list.template.name"),children:r.template.name},{label:t("pages.review-list.my-submit-list.factor.properties"),children:(c=(u=r.template)==null?void 0:u.properties)!=null&&c.length?a.jsx(Gt,{ellipsisTagProps:{bordered:!1},children:r.template.properties.split(",").map(l=>a.jsx(yt,{bordered:!1,color:"blue",children:l},l))}):"-"},{label:t("pages.review-list.my-submit-list.factor.submit-time"),children:Qe(r.submit_time)},{label:t("pages.review-list.my-submit-list.factor.factor-comment"),children:r.template.comment},{label:t("pages.review-list.review-template-detail.publish-comment"),children:r.note??"-"}]:[]},[r,t]);return a.jsx(nt,{autoBreadcrumb:{addonItems:[{title:t("pages.review-list.review-template-detail.review-detail")}]},children:o||!r?a.jsx(en,{height:400}):a.jsxs(a.Fragment,{children:[n===Nn.REVIEWER&&r.status===Rt.REVIEWING&&a.jsxs(it,{className:Tj.actions,children:[a.jsx(As,{as:"Button",type:"primary",reviewId:e,reviewType:"template",onSuccess:s}),a.jsx(Ps,{as:"Button",type:"primary",danger:!0,reviewId:e,reviewType:"template",onSuccess:s})]}),a.jsx(yp,{status:r.status,suggestion:r.suggestion,reviewer:r.template.reviewer}),a.jsx(ta,{title:t("pages.review-list.review-template-detail.template-info"),children:a.jsx(Cr,{layout:"vertical",colon:!1,column:4,items:i})}),a.jsx(Xc,{bodyStyle:{height:600},title:t("pages.review-list.review-template-detail.template-code"),children:a.jsx(Hs,{value:r.template.code??"",options:{readOnly:!0}})})]})})},Oj="_form_1v687_1",Rj={form:Oj};function vp(e){const{onInitialize:t,mode:n,onSubmit:r,onCancel:o,submitting:s}=e,{t:i}=Z(),[u]=B.useForm(),{isLoading:c,data:l}=Oe(["department-edit-form-initialize",t],()=>t==null?void 0:t(),{revalidateIfStale:!0});return Pi(async()=>{u.setFieldsValue(l)},[l]),a.jsx(kr,{spinning:c,children:a.jsxs(B,{form:u,className:Rj.form,onFinish:r,labelCol:{span:4},labelAlign:"right",children:[a.jsx(B.Item,{name:"name",required:!0,label:i("pages.department.edit-form.name.label"),rules:[{required:!0},{type:"string",max:23,pattern:zy,message:i("pages.department.edit-form.name.rules.pattern.message")}],children:a.jsx(Ne,{disabled:n==="edit"})}),a.jsx(B.Item,{name:"nickname",required:!0,label:i("pages.department.edit-form.nickname.label"),rules:[{required:!0}],children:a.jsx(Ne,{})}),a.jsx(ja,{dependencies:["members"],children:p=>a.jsx(B.Item,{name:"admins",required:!0,label:i("pages.department.edit-form.admins.label"),initialValue:[],rules:[{type:"array",min:1}],children:a.jsx(zl,{mode:"multiple",placeholder:i("pages.department.edit-form.admins.placeholder"),excludeUsernames:p.members})})}),a.jsx(ja,{dependencies:["admins"],children:p=>a.jsx(B.Item,{name:"members",label:i("pages.department.edit-form.members.label"),initialValue:[],children:a.jsx(zl,{mode:"multiple",placeholder:i("pages.department.edit-form.members.placeholder"),excludeUsernames:p.admins})})}),a.jsx(B.Item,{label:" ",colon:!1,children:a.jsxs(it,{children:[a.jsx(Ae,{type:"primary",htmlType:"submit",loading:s,children:i(n==="create"?"common.create":"common.save")}),a.jsx(Ae,{htmlType:"button",onClick:o,children:i("common.cancel")})]})})]})})}function Fj(){const{t:e}=Z(),t=Ft(),{message:n}=at.useApp(),{isMutating:r,trigger:o}=Ti("facplf_create_dept",(u,{arg:c})=>ee.requestFunc("facplf_create_dept",c)),s=k.useCallback(()=>{t.push(Se.departmentList())},[t]),i=k.useCallback(async u=>{await o(u),n.success(e("common.create-success")),t.push(Se.departmentList())},[t,n,e,o]);return a.jsx(nt,{headerBottomMargin:!0,autoBreadcrumb:{addonItems:[{title:e("pages.department.create.title")}]},children:a.jsx(vp,{mode:"create",onCancel:s,submitting:r,onSubmit:i})})}function Lj(){const{t:e}=Z(),{message:t}=at.useApp(),{name:n}=$t(),r=Ft(),{isMutating:o,trigger:s}=Ti("facplf_edit_dept",(l,{arg:p})=>ee.requestFunc("facplf_edit_dept",p)),i=k.useCallback(()=>{r.push(Se.departmentList())},[r]),u=k.useCallback(async()=>ee.requestFunc("facplf_get_dept_detail",{name:n}),[n]),c=k.useCallback(async l=>{await s(l),t.success(e("common.edit-success")),r.push(Se.departmentList())},[r,t,e,s]);return a.jsx(nt,{headerBottomMargin:!0,autoBreadcrumb:{addonItems:[{title:e("pages.department.edit.title")}]},children:a.jsx(vp,{mode:"edit",onInitialize:u,onCancel:i,submitting:o,onSubmit:c})})}const Nj="_form_1gkh8_1",Dj="_btnGroup_1gkh8_5",Mj="_table_1gkh8_9",Wj="_tree_1gkh8_13",Bj="_popContent_1gkh8_17",$j="_popText_1gkh8_22",Vj="_breadcrumb_1gkh8_26",vn={form:Nj,btnGroup:Dj,table:Mj,tree:Wj,popContent:Bj,popText:$j,breadcrumb:Vj},qj={defaultPageSize:10},{confirm:zj}=aa;function Gj(){const{t:e}=Z(),{message:t}=at.useApp(),{data:n,mutate:r,isLoading:o}=Oe(Kr.SWR_KEY,async()=>Kr(),{onError:p=>{t.error(Be(p))}}),s=k.useMemo(()=>n?n.items:[],[n]),i=he(p=>{const d=p,m=d==null?void 0:d.map((h,b)=>a.jsx(yt,{color:"blue",bordered:!1,children:h},b));return m.length?a.jsx("div",{className:vn.popContent,children:m}):a.jsx("div",{className:vn.popText,children:e("common.select.none")})}),u=he(p=>{const d=p,m=d==null?void 0:d.map((h,b)=>a.jsx(yt,{color:"blue",bordered:!1,children:h},b));return m.length?a.jsx("div",{className:vn.popContent,children:m}):a.jsx("div",{className:vn.popText,children:e("common.select.none")})}),c=he(p=>{zj({icon:a.jsx(kn,{}),title:e("pages.sys-manage-group.table.del1",{item:p.name}),content:e("pages.sys-manage-group.table.delPrompt"),async onOk(){try{await ee.requestFunc("facplf_del_dept",{name:p.name}),t.success(e("common.delete-success")),r()}catch(d){t.error(Be(d))}}})}),l=k.useMemo(()=>[{title:e("pages.sys-manage-group.table.name"),width:150,dataIndex:"name",key:"name"},{title:e("pages.sys-manage-group.table.nickname"),width:200,dataIndex:"nickname",key:"nickname"},{title:e("pages.sys-manage-group.table.createTime"),width:200,dataIndex:"create_time",key:"create_time",render:p=>p?Qe(p):"-"},{title:e("pages.sys-manage-group.table.users"),width:200,dataIndex:"members",key:"membersNum",render:p=>a.jsx(Qa,{placement:"bottomLeft",content:i(p),arrow:{pointAtCenter:!0},children:a.jsx(De.Link,{children:p==null?void 0:p.length})})},{title:e("pages.sys-manage-group.table.admin"),width:200,dataIndex:"admins",key:"admins",render:p=>a.jsx(Qa,{placement:"bottomLeft",content:u(p),arrow:{pointAtCenter:!0},children:a.jsx(De.Link,{children:p==null?void 0:p.length})})},{title:e("pages.sys-manage-group.table.action"),width:200,key:"action",render:(p,d)=>a.jsxs(it,{size:"large",children:[a.jsx(Ue,{to:Se.departmentEdit(d.name),children:e("pages.sys-manage-group.table.edit")}),a.jsx(De.Link,{type:"danger",onClick:()=>c(d),children:e("pages.sys-manage-group.table.del")})]})}],[c,u,i,e]);return a.jsxs(nt,{headerBottomMargin:!0,children:[a.jsx(Ue,{type:"primary",to:Se.departmentCreate(),children:a.jsx(Ae,{type:"primary",icon:a.jsx(Ua,{}),children:e("pages.sys-manage-group.create")})}),a.jsx(vt,{columns:l,loading:o,dataSource:s,pagination:qj,className:vn.table,rowKey:"name"})]})}const Uj={[ot.DATA_IMPORT]:"orange",[ot.REVIEW]:"cyan"},Hj=e=>{const{auths:t}=e,{t:n}=Z(),r=t==null?void 0:t.map(o=>a.jsx(yt,{color:Uj[o],children:n(`constants.auths.${o}`)},o));return a.jsx("div",{children:r})},Kj=ke.create(({username:e})=>{const{t}=Z(),{message:n}=at.useApp(),r=ke.useModal(),o=async s=>{try{await ee.requestFunc("facplf_resetPwd",{username:s.username,new_password:s.new_password}),n.success(t("common.edit-success"))}catch(i){n.error(Be(i))}r.resolve(),r.hide()};return a.jsx(aa,{title:t("pages.sys-manage-user.table.editPassword"),open:r.visible,closable:!1,afterClose:r.remove,footer:null,children:a.jsxs(B,{labelCol:{span:7},wrapperCol:{span:15},onFinish:o,initialValues:{username:e},children:[a.jsx(B.Item,{name:"username",required:!0,label:t("pages.sys-manage-user.table.username"),children:a.jsx(Ne,{disabled:!0})}),a.jsx(B.Item,{name:"new_password",required:!0,label:t("layout.user-info.change-password.new-password"),validateFirst:!0,validateTrigger:"onBlur",children:a.jsx(Ne.Password,{})}),a.jsx(B.Item,{style:{textAlign:"end"},children:a.jsxs(it,{children:[a.jsx(Ae,{type:"primary",htmlType:"submit",children:t("common.ok")}),a.jsx(Ae,{htmlType:"button",onClick:r.hide,children:t("common.cancel")})]})})]})})}),Yj="_form_1bcc0_1",Jj="_btnGroup_1bcc0_5",Qj="_table_1bcc0_9",Xj="_noActive_1bcc0_13",Zj="_breadcrumb_1bcc0_17",vc={form:Yj,btnGroup:Jj,table:Qj,noActive:Xj,breadcrumb:Zj},e2={defaultPageSize:10},{confirm:_c}=aa;function t2(){const{t:e}=Z(),{message:t}=at.useApp(),n=ca(),{user:r}=Ra(),{data:o,mutate:s,isLoading:i}=Oe("facplf_get_user_list",async()=>ee.requestFunc("facplf_get_user_list",{department_names:n.isSystemAdmin()?null:r==null?void 0:r.departments.filter(y=>y.is_admin).map(y=>y.name),include_not_activated:!!n.isSystemAdmin()}),{onError:y=>{t.error(Be(y))}}),u=k.useMemo(()=>o?o.items:[],[o]),c=Dn({getKey(y){return y.username},isDisabled:y=>y.is_active,clearDeps:[o]}),l=he(y=>y.is_admin?n.isSystemAdmin():!0),p=he(async y=>{const{username:x,is_active:I}=y;_c({icon:a.jsx(kn,{}),title:e("pages.sys-manage-user.table.active1",{status:e(I?"pages.sys-manage-user.table.disActive":"pages.sys-manage-user.table.active"),item:x}),async onOk(){try{I?await ee.requestFunc("facplf_deactivate_user",{username:x}):await ee.requestFunc("facplf_activate_user",{username:x}),t.success(e(I?"pages.sys-manage-user.table.activeStatus3":"pages.sys-manage-user.table.activeStatus1")),s()}catch(w){t.error(Be(w))}}})}),d=he(y=>{const x=y;_c({icon:a.jsx(kn,{}),title:e("pages.sys-manage-user.table.del1",{item:x.username}),content:e("pages.sys-manage-user.table.delPrompt"),async onOk(){try{await ee.requestFunc("facplf_del_user",{username:x.username}),t.success(e("common.delete-success")),s()}catch(I){t.error(Be(I))}}})}),{isMutating:m,trigger:h}=Ti("facplf_activate_multi",async()=>{const y=c.items;return ee.requestFunc("facplf_activate_multi",{username:y.filter(x=>!x.is_active).map(x=>x.username)})},{onSuccess:()=>{t.success(e("pages.sys-manage-user.table.activeStatus1")),s()}}),b=k.useMemo(()=>[{title:e("pages.sys-manage-user.table.username"),width:200,dataIndex:"username",key:"username"},{title:e("pages.sys-manage-user.table.groups"),width:250,dataIndex:"departments",key:"departments",render:(y,{departments:x})=>x!=null&&x.length?a.jsx(Gt,{max:3,ellipsisTagProps:{bordered:!1,color:"blue"},children:x==null?void 0:x.map(I=>a.jsx(yt,{bordered:!1,color:"blue",children:I.nickname||I.name},I.name))}):"-"},{title:e("pages.sys-manage-user.table.createTime"),width:200,dataIndex:"active_time",key:"active_time",render:y=>y?Qe(y):"-"},{title:e("pages.sys-manage-user.table.auth"),width:200,dataIndex:"system_auths",key:"system_auths",render:y=>y!=null&&y.length?a.jsx(Hj,{auths:y}):"-"},{title:e("pages.sys-manage-user.table.state"),width:200,dataIndex:"is_active",key:"is_active",render:y=>e(y?"pages.sys-manage-user.table.activeStatus1":"pages.sys-manage-user.table.activeStatus2")},{title:e("pages.sys-manage-user.table.action"),width:250,fixed:"right",key:"action",render:(y,x)=>a.jsxs(Vt,{max:3,children:[x.is_active&&l(x)&&a.jsx(Ue,{to:Se.userEdit(x.username),component:De.Link,children:e("pages.sys-manage-user.table.edit")}),n.isSystemAdmin()&&!x.is_admin&&a.jsx(De.Link,{onClick:()=>p({username:x.username,is_active:x.is_active}),children:x.is_active?e("pages.sys-manage-user.table.disActive"):e("pages.sys-manage-user.table.active")}),n.isSystemAdmin()&&x.is_active&&!x.is_admin&&a.jsx(De.Link,{onClick:async()=>{await ke.show(Kj,{username:x.username}),s()},children:e("pages.sys-manage-user.table.editPassword")}),n.isSystemAdmin()&&!x.is_admin&&a.jsx(De.Link,{type:"danger",onClick:()=>d(x),children:e("pages.sys-manage-user.table.del")})]})}],[e,n,l,p,s,d]);return a.jsxs(nt,{headerBottomMargin:!0,children:[n.isSystemAdmin()&&a.jsxs(it,{children:[n.isSystemAdmin()&&a.jsx(Ue,{to:Se.userCreate(),children:a.jsx(Ae,{type:"primary",icon:a.jsx(Ua,{}),children:e("pages.sys-manage-user.create")})}),a.jsx(Ae,{disabled:!c.hasSelected,type:"primary",loading:m,onClick:()=>h(),icon:a.jsx(Xm,{}),children:e("pages.sys-manage-user.batchActive")})]}),a.jsx(vt,{columns:b,loading:i,rowSelection:c.tableRowSelectionProps,dataSource:u,pagination:e2,className:vc.table,rowClassName:y=>y.is_active?"":vc.noActive,scroll:{x:1100},rowKey:y=>y.username})]})}const a2=Sr({getValues:()=>[ot.FACTOR,ot.DATA_IMPORT,ot.REVIEW],getLabelMap:e=>e("constants.auths",{returnObjects:!0})});var xc=function(e,t){var n=typeof Symbol=="function"&&e[Symbol.iterator];if(!n)return e;var r=n.call(e),o,s=[],i;try{for(;(t===void 0||t-- >0)&&!(o=r.next()).done;)s.push(o.value)}catch(u){i={error:u}}finally{try{o&&!o.done&&(n=r.return)&&n.call(r)}finally{if(i)throw i.error}}return s};function r2(e,t,n){for(var r=e.length,o=t.length,s=r+o,i={1:0},u=0;u<=s;++u)for(var c=-u;c<=u;c+=2){var l=void 0;c===-u||c!==u&&i[c-1]+1<i[c+1]?l=i[c+1]:l=i[c-1]+1;for(var p=l-c;l<r&&p<o&&n(e[l],t[p]);)l++,p++;if(l===r&&p===o)return u;i[c]=l}return-1}var wt;(function(e){e[e.none=0]="none",e[e.horizontal=1]="horizontal",e[e.vertical=2]="vertical",e[e.diagonal=4]="diagonal",e[e.all=7]="all"})(wt||(wt={}));function Ii(e,t,n,r,o,s,i,u,c,l,p){var d,m,h,b;if(i===0){p("same",e,t,n,r,o,s);return}else if(i===n-t+(s-o)){var y=(u&wt.horizontal?1:0)+(c&wt.vertical?1:0),x=(u&wt.vertical?1:0)+(c&wt.horizontal?1:0);y>=x?(t!==n&&p("remove",e,t,n,r,o,o),o!==s&&p("add",e,n,n,r,o,s)):(o!==s&&p("add",e,t,t,r,o,s),t!==n&&p("remove",e,t,n,r,s,s));return}for(var I=n-t,w=s-o,A=Math.floor(w/2),f={},j=-i-1;j<=i+1;++j)f[j]={d:1/0,segments:0,direct:wt.none};for(var C=(d={},d[-i-1]={d:1/0,segments:0,direct:wt.none},d[i+1]={d:1/0,segments:0,direct:wt.none},d),g=0;g<=A;++g){m=xc([C,f],2),f=m[0],C=m[1];for(var E=function(V){var W=g+V;if(g===0&&W===0)return f[V]={d:0,segments:0,direct:u},"continue";var ae=[{direct:wt.horizontal,d:f[V-1].d+1,segments:f[V-1].segments+(f[V-1].direct&wt.horizontal?0:1)},{direct:wt.vertical,d:C[V+1].d+1,segments:C[V+1].segments+(C[V+1].direct&wt.vertical?0:1)}];W>0&&W<=I&&g>0&&g<=w&&l(e[t+W-1],r[o+g-1])&&ae.push({direct:wt.diagonal,d:C[V].d,segments:C[V].segments+(C[V].direct&wt.diagonal?0:1)});var Ce=ae.reduce(function(we,ue){return we.d>ue.d||we.d===ue.d&&we.segments>ue.segments?ue:we});ae.forEach(function(we){Ce.d===we.d&&Ce.segments===we.segments&&(Ce.direct|=we.direct)}),f[V]=Ce},j=-i;j<=i;++j)E(j)}for(var v={},j=-i-1;j<=i+1;++j)v[j]={d:1/0,segments:0,direct:wt.none};for(var _=(h={},h[-i-1]={d:1/0,segments:0,direct:wt.none},h[i+1]={d:1/0,segments:0,direct:wt.none},h),g=w;g>=A;--g){b=xc([_,v],2),v=b[0],_=b[1];for(var S=function(W){var ae=g+W;if(g===w&&ae===I)return v[W]={d:0,segments:0,direct:c},"continue";var Ce=[{direct:wt.horizontal,d:v[W+1].d+1,segments:v[W+1].segments+(v[W+1].direct&wt.horizontal?0:1)},{direct:wt.vertical,d:_[W-1].d+1,segments:_[W-1].segments+(_[W-1].direct&wt.vertical?0:1)}];ae>=0&&ae<I&&g>=0&&g<w&&l(e[t+ae],r[o+g])&&Ce.push({direct:wt.diagonal,d:_[W].d,segments:_[W].segments+(_[W].direct&wt.diagonal?0:1)});var we=Ce.reduce(function(ue,de){return ue.d>de.d||ue.d===de.d&&ue.segments>de.segments?de:ue});Ce.forEach(function(ue){we.d===ue.d&&we.segments===ue.segments&&(we.direct|=ue.direct)}),v[W]=we},j=i;j>=-i;--j)S(j)}for(var P={k:-1,d:1/0,segments:0,direct:wt.none},j=-i;j<=i;++j){var T=f[j].d+v[j].d;if(T<P.d)P.k=j,P.d=T,P.segments=f[j].segments+v[j].segments+(f[j].segments&v[j].segments?0:1),P.direct=v[j].direct;else if(T===P.d){var z=f[j].segments+v[j].segments+(f[j].segments&v[j].segments?0:1);(z<P.segments||z===P.segments&&!(P.direct&wt.diagonal)&&v[j].direct&wt.diagonal)&&(P.k=j,P.d=T,P.segments=z,P.direct=v[j].direct)}}A+P.k===0&&A===0&&(A++,f[P.k].direct=v[P.k].direct,v[P.k].direct=_[P.k].direct),Ii(e,t,t+A+P.k,r,o,o+A,f[P.k].d,u,v[P.k].direct,l,p),Ii(e,t+A+P.k,n,r,o+A,s,v[P.k].d,f[P.k].direct,c,l,p)}function _p(e,t,n,r){var o=r2(e,t,n);Ii(e,0,e.length,t,0,t.length,o,wt.diagonal,wt.all,n,r)}function n2(e,t,n){n===void 0&&(n=function(o,s){return o===s});var r=[];return _p(e,t,n,function(o,s,i,u){if(o==="same")for(var c=i;c<u;++c)r.push(s[c])}),r}function ls(e,t,n){n===void 0&&(n=function(o,s){return o===s});var r={removed:[],added:[]};return _p(e,t,n,function(o,s,i,u,c,l,p){if(o==="add")for(var d=l;d<p;++d)r.added.push(c[d]);else if(o==="remove")for(var d=i;d<u;++d)r.removed.push(s[d])}),r}const Do=({added:e,removed:t})=>e.length!==0||t.length!==0,s2=(e,t)=>{if(!e||!t)return;const n=ls(e.departments||[],t.departments||[],(c,l)=>c.name===l.name),r=ls(e.system_auths||[],t.system_auths||[]),i=n2(e.departments||[],t.departments||[],(c,l)=>c.name===l.name).map(({name:c})=>{var m,h;const l=(m=e.departments)==null?void 0:m.find(b=>b.name===c),p=(h=t.departments)==null?void 0:h.find(b=>b.name===c),d=ls((l==null?void 0:l.access_tables)||[],(p==null?void 0:p.access_tables)||[],(b,y)=>b.database===y.database&&b.table===y.table);return{name:c,access_tables:d,auth:ls((l==null?void 0:l.auths)||[],(p==null?void 0:p.auths)||[])}}).filter(c=>{const{access_tables:l,auth:p}=c;return Do(l)||Do(p)}),u={username:t.username,system_auths:Do(r)?r:null,departments:{...n,revised:i}};return JSON.parse(JSON.stringify(u).replace(/\[\]/g,"null"))},xp=e=>{const{departments:t,system_auths:n,...r}=e;return{...r,system_auths:n!=null&&n.length?n:null,departments:t==null?void 0:t.map(o=>{var s,i,u;return{...o,auths:(s=o.auths)!=null&&s.length?o.auths:null,access_tables:(i=o==null?void 0:o.access_tables)!=null&&i.length?(u=o==null?void 0:o.access_tables)==null?void 0:u.reduce((c,l)=>{const p=JSON.parse(l);return Array.isArray(p)?c=c.concat(p):c.push(p),c},[]):null}})}},o2=e=>{const t=e==null?void 0:e.reduce((n,r)=>(n[r.database]?n[r.database].tables.push(r):n[r.database]={name:r.database,tables:[r]},n),{});return Object.values(t).map(({name:n,tables:r})=>({title:n,value:JSON.stringify(r.map(o=>({database:n,table:o.table}))),children:r.map(o=>({title:o.table,value:JSON.stringify({database:o.database,table:o.table})}))}))},i2="_wrapper_1dywe_1",l2="_departmentModule_1dywe_7",wc={wrapper:i2,departmentModule:l2},c2=e=>{const{field:t}=e,n=B.useWatch("departments"),{t:r}=Z(),{data:o}=Ui(),s=ca(),i=k.useCallback((c,l)=>{var d;const p=n.map(m=>m==null?void 0:m.name);return((d=Pf(p))==null?void 0:d[l])>1?Promise.reject(r("pages.sys-manage-user.create-user.message.name-repeat")):Promise.resolve()},[n,r]),u=va({zh:{labelCol:{span:4}},en:{labelCol:{span:8}}});return a.jsx("div",{className:wc.wrapper,children:a.jsxs("div",{className:wc.departmentModule,children:[a.jsx(B.Item,{...u,name:[t.name,"name"],label:r("pages.sys-manage-user.create-user.label.department-name"),rules:[{required:!0,message:r("pages.sys-manage-user.create-user.placeholder.department-name")},{validator:i}],children:a.jsx(Bu,{disabled:!s.isSystemAdmin()})}),k.createElement(B.Item,{...u,key:"auths",label:r("pages.sys-manage-user.create-user.label.auths"),name:[t.name,"auths"]},a.jsx(a2,{mode:"multiple",placeholder:r("pages.sys-manage-user.create-user.placeholder.user-auths")})),a.jsx(ja,{dependencies:[["departments",t.name,"name"]],children:c=>{var m;const{name:l}=c.departments[t.name],p=((m=o==null?void 0:o.items.find(h=>h.name===l))==null?void 0:m.access_tables)||[],d=o2(p);return a.jsx(B.Item,{...u,label:r("pages.sys-manage-user.create-user.label.access-tables"),name:[t.name,"access_tables"],children:a.jsx(Zm,{filterTreeNode:!0,treeData:d,treeCheckable:!0,tagRender:h=>{const{database:b,table:y}=JSON.parse(h.value);return a.jsx(yt,{bordered:!1,closable:h.closable,onClose:h.onClose,children:[b,y].join("/")})},placeholder:r("pages.sys-manage-user.create-user.placeholder.access-tables")})})}})]})},t.name)},u2="_list_1ruiz_1",d2="_department_1ruiz_5",Mo={list:u2,department:d2},p2=[{name:void 0,auths:[],access_tables:[]}],wp=()=>{const{t:e}=Z(),t=ca();return a.jsxs(a.Fragment,{children:[a.jsx("h3",{children:e("pages.sys-manage-user.create-user.department-info")}),a.jsx(Rs,{initialValue:p2,name:"departments",renderRoot:(n,r,o,{errors:s,warnings:i})=>a.jsxs("div",{className:Mo.list,children:[n,a.jsx(B.ErrorList,{className:Mo.error,errors:s,warnings:i}),t.isSystemAdmin()&&r.addition]}),renderItem:(n,r,o)=>a.jsxs("div",{className:Mo.department,children:[a.jsx(c2,{field:n},n.key),t.isSystemAdmin()&&o.remove]})})]})},jp=()=>{const{t:e}=Z();return ca().isSystemAdmin()?a.jsx(B.Item,{label:e("pages.sys-manage-user.create-user.label.sys-auth"),name:"system_auths",children:a.jsx(kt,{mode:"multiple",placeholder:e("pages.sys-manage-user.create-user.placeholder.sys-auth"),options:Oi([At.DATA_IMPORT,At.REVIEW],e("constants.system-auths",{returnObjects:!0}))})}):null},m2="_container_1nasu_1",f2="_input_1nasu_5",Wo={container:m2,input:f2},Ip=e=>{const{hidePassword:t,disabled:n}=e,{t:r}=Z();return a.jsxs("div",{className:Wo.container,children:[a.jsx("h3",{children:r("pages.sys-manage-user.create-user.user-info")}),a.jsx(B.Item,{label:r("pages.sys-manage-user.create-user.label.user-name"),name:"username",rules:[{required:!0,message:r("pages.sys-manage-user.create-user.placeholder.user-name")},{pattern:/^[a-zA-Z_][a-zA-Z0-9_]{0,29}$/g,message:r("pages.sys-manage-user.create-user.message.validate-username")}],help:r("pages.sys-manage-user.create-user.message.validate-username"),children:a.jsx(Ne,{placeholder:r("pages.sys-manage-user.create-user.placeholder.user-name"),className:Wo.input,disabled:n})}),!t&&a.jsx(B.Item,{label:r("pages.sys-manage-user.create-user.label.user-password"),name:"password",rules:[{required:!0,message:r("pages.sys-manage-user.create-user.placeholder.user-password")}],children:a.jsx(Ne,{placeholder:r("pages.sys-manage-user.create-user.placeholder.user-password"),className:Wo.input})})]})},h2="_form_wq3es_1",jc={form:h2},Ic=()=>{const{t:e}=Z(),{message:t}=at.useApp(),[n]=B.useForm(),r=Ft(),o=va({zh:{labelCol:{span:4}},en:{labelCol:{span:8}}}),s=he(()=>r.push(Se.userList())),i=he(async()=>{if(!await n.validateFields())return;const u=xp(n.getFieldsValue());try{await ee.requestFunc("facplf_create_user",u),t.success(e("pages.sys-manage-user.create-user.success-msg")),setTimeout(s,1e3)}catch(c){t.error(Be(c))}});return a.jsx(nt,{autoBreadcrumb:{addonItems:[{title:e("pages.sys-manage-user.create-user.title")}]},children:a.jsxs(B,{form:n,className:jc.form,...o,children:[a.jsx(Ip,{}),a.jsx(wp,{}),a.jsx(jp,{}),a.jsx(Mn,{children:a.jsxs(it,{children:[a.jsx(Ae,{onClick:s,children:e("pages.sys-manage-user.create-user.btn.cancel")}),a.jsx(Ae,{type:"primary",className:jc.createBtn,onClick:i,children:e("pages.sys-manage-user.create-user.btn.create")})]})})]})})},g2="_form_wq3es_1",y2={form:g2},Sc=()=>{const e=k.useId(),{username:t}=$t(),[n]=B.useForm(),{t:r}=Z(),{message:o}=at.useApp(),s=Ft(),i=va({zh:{labelCol:{span:4}},en:{labelCol:{span:8}}}),{data:u,isValidating:c}=Oe(["facplf_get_user_detail",t,e],async()=>ee.requestFunc("facplf_get_user_detail",{username:t}),{onSuccess:d=>n.setFieldsValue({...d,departments:d==null?void 0:d.departments.map(m=>{var h;return{...m,access_tables:(h=m==null?void 0:m.access_tables)==null?void 0:h.map(b=>JSON.stringify(b))}})})}),l=he(()=>s.push(Se.userList())),p=he(async()=>{if(!await n.validateFields())return;const d=xp(n.getFieldsValue());try{await ee.requestFunc("facplf_edit_user",s2(u,d)),o.success(r("pages.sys-manage-user.edit-user.success-msg")),setTimeout(l,1e3)}catch(m){o.error(Be(m))}});return a.jsx(nt,{loading:c,autoBreadcrumb:{addonItems:[{title:r("pages.sys-manage-user.edit-user.title")}]},children:a.jsxs(B,{className:y2.form,form:n,...i,children:[a.jsx(Ip,{hidePassword:!0,disabled:!0}),a.jsx(wp,{}),a.jsx(jp,{}),a.jsx(Mn,{children:a.jsxs(it,{children:[a.jsx(Ae,{onClick:l,children:r("pages.sys-manage-user.create-user.btn.cancel")}),a.jsx(Ae,{type:"primary",onClick:p,children:r("pages.sys-manage-user.edit-user.btn.edit")})]})})]})})};var Sp=(e=>(e.SINGLE="single",e.BATCH="batch",e))(Sp||{}),jn=(e=>(e.ALL="all",e.SINGLE="single",e.BATCH="batch",e))(jn||{}),tr=(e=>(e.All="all",e.Factor="factor",e.Other="other",e))(tr||{}),ar=(e=>(e.TEST="test",e.ANALYSIS="analysis",e.WORKFLOW="workflow",e.DATA_IMPORT="data-import",e))(ar||{});function lo({record:e,type:t,onInterrupted:n}){const{t:r}=Z(),{message:o}=at.useApp(),s=he(async()=>{try{await ee.requestFunc("facplf_cancel_job",{id:e.id,type:t}),o.success(r("pages.task-monitor.interrupt.success-message")),n==null||n()}catch(i){o.error(Be(i))}});return a.jsx(la,{title:r("pages.task-monitor.interrupt.action-name"),description:r("pages.task-monitor.interrupt.confirm",{task:e.name}),onConfirm:s,placement:"topLeft",children:a.jsx(De.Link,{type:"danger",children:r("pages.task-monitor.interrupt.action-name")})})}const b2=ke.create(({log:e})=>{const t=ke.useModal(),{t:n}=Z(),{message:r}=at.useApp(),[o,s]=Ir(!1),[i,u]=k.useState(""),c=Yo({dark:"vs-dark",light:"light"});return Pi(async()=>{try{s.setTrue();const l=await(typeof e=="function"?e():e);u(l)}catch(l){r.error(Be(l))}finally{s.setFalse()}},[e,s]),a.jsx(aa,{open:t.visible,footer:null,onCancel:t.hide,afterClose:t.remove,title:n("pages.task-monitor.log.modal-title"),width:1e3,children:a.jsx(vu,{height:400,theme:c,options:{readOnly:!0,minimap:{enabled:!1},wordWrap:"on"},value:o?n("common.loading"):i,language:"logs"})})}),v2=async(e,t)=>(await ee.requestFunc("facplf_get_job_message",{id:e,type:t})).text,co=e=>{const{id:t,type:n}=e,{t:r}=Z(),o=k.useCallback(async()=>{await ke.show(b2,{log:()=>v2(t,n)})},[t,n]);return a.jsx("a",{onClick:o,children:r("pages.task-monitor.log.action-name")})},_2={items:[],total:0},x2={[tr.All]:[Mt.NonFactor,Mt.PublicFactor,Mt.PrivateFactor],[tr.Factor]:[Mt.PublicFactor,Mt.PrivateFactor],[tr.Other]:[Mt.NonFactor]};function w2(e){const{t}=Z(),{type:n}=e,{data:r=_2,isLoading:o,mutate:s}=Oe(["facplf_get_analysis_monitoring_list",n],async()=>await ee.requestFunc("facplf_get_analysis_monitoring_list",{type:x2[n]})),i=k.useMemo(()=>[{title:t("pages.task-monitor.common.table.name"),dataIndex:"name",key:"name",width:200,fixed:"left",render(c){return a.jsx("span",{children:c})}},{title:t("pages.task-monitor.common.table.type"),dataIndex:"type",key:"type",width:200,render(c,l){return t(`constants.analysis-type.${l.type}`,{defaultValue:"-"})}},n!==tr.Other&&{title:t("pages.task-monitor.common.table.func-name"),dataIndex:"func_name",key:"func_name",width:200,render(c){return c||"-"}},{title:t("pages.task-monitor.common.table.start-time"),dataIndex:"create_time",key:"create_time",width:250,render(c){return c?Qe(c):"-"}},{title:t("pages.task-monitor.common.table.creator"),dataIndex:"creator",key:"creator",width:200,render:c=>a.jsx("span",{children:c})},{title:t("pages.task-monitor.common.table.node"),dataIndex:"run_node",key:"run_node",width:200,render:c=>c?a.jsx("span",{children:c}):"-"},{title:t("pages.task-monitor.common.table.status"),dataIndex:"status",key:"status",width:200,render(c){return a.jsx(Bt,{status:c||0})}},{title:t("common.table.operation.title"),key:"operation",width:300,fixed:"right",render:(c,l)=>a.jsxs(Vt,{max:2,children:[l.status!==Xe.RUNNING&&a.jsx(co,{id:l.id,type:ar.ANALYSIS}),l.status===Xe.RUNNING&&a.jsx(lo,{record:l,type:ar.ANALYSIS,onInterrupted:s})]})}].filter(fm),[s,t,n]);return a.jsx(vt,{loading:o,rowKey:"id",columns:i,dataSource:r.items,pagination:{defaultPageSize:10}})}const j2="_radioGroup_1qqva_1",I2={radioGroup:j2};function S2(){const{t:e}=Z(),t=Ft(),{type:n=tr.All}=$t(),r=he(o=>{var s;t.push({search:`?type=${(s=o==null?void 0:o.target)==null?void 0:s.value}`})});return a.jsxs(a.Fragment,{children:[a.jsxs(ya.Group,{value:n,onChange:r,className:I2.radioGroup,children:[a.jsx(ya.Button,{value:tr.All,children:e("pages.task-monitor.analysis.tabs.all")}),a.jsx(ya.Button,{value:tr.Factor,children:e("pages.task-monitor.analysis.tabs.factor")}),a.jsx(ya.Button,{value:tr.Other,children:e("pages.task-monitor.analysis.tabs.custom")})]}),a.jsx(w2,{type:n})]})}const k2="_node_eb9ag_1",C2="_tag_eb9ag_12",kc={node:k2,tag:C2};function kp(e,t){return e.map(n=>{const r={key:Pr(),title:a.jsxs("div",{className:kc.node,children:[n.name,a.jsx(Bt,{className:kc.tag,status:n.status||0})]})};return n.children&&(r.children=kp(n.children)),r})}const E2=e=>{const{id:t}=e,{t:n}=Z(),{data:r}=Oe(["facplf_get_data_import_progress_detail",t],async()=>await ee.requestFunc("facplf_get_data_import_progress_detail",{id:t})),o=k.useMemo(()=>r?kp([r])??[]:[],[r,n]);return a.jsx(Vi,{style:{minWidth:250,width:"max-content"},virtual:!0,selectable:!1,blockNode:!0,showLine:!0,switcherIcon:a.jsx(nu,{}),treeData:o,height:400})},A2="_statusPopover_vh0s7_1",P2={statusPopover:A2},T2={items:[],total:0};function O2(){const{t:e}=Z(),{data:t=T2,isLoading:n,mutate:r}=Oe("facplf_get_data_import_monitoring_list",async()=>await ee.requestFunc("facplf_get_data_import_monitoring_list")),o=k.useMemo(()=>[{title:e("pages.task-monitor.common.table.name"),dataIndex:"name",key:"name",width:200,fixed:"left",render(s){return a.jsx("span",{children:s})}},{title:e("pages.task-monitor.common.table.start-time"),dataIndex:"create_time",key:"create_time",width:250,render(s){return s?Qe(s):"-"}},{title:e("pages.task-monitor.common.table.creator"),dataIndex:"creator",key:"creator",width:200,render:s=>a.jsx("span",{children:s})},{title:e("pages.task-monitor.common.table.node"),dataIndex:"run_node",key:"run_node",width:200,render:s=>s?a.jsx("span",{children:s}):"-"},{title:e("pages.task-monitor.common.table.status"),dataIndex:"status",key:"status",width:200,render:(s,i)=>a.jsx(Qa,{placement:"bottomLeft",content:a.jsx(E2,{id:i.id}),arrow:{pointAtCenter:!0},className:P2.statusPopover,trigger:"click",children:a.jsx(Bt,{status:s||0})})},{title:e("common.table.operation.title"),key:"operation",width:300,fixed:"right",render:(s,i)=>a.jsxs(Vt,{children:[a.jsx(Ue,{to:Se.dataImportRecordDetail(i.id),children:e("common.view-detail")}),i.status!==Xe.RUNNING&&a.jsx(co,{id:i.id,type:ar.DATA_IMPORT}),i.status===Xe.RUNNING&&a.jsx(lo,{record:i,type:ar.DATA_IMPORT,onInterrupted:r})]})}],[r,e]);return a.jsx(vt,{loading:n,rowKey:"id",columns:o,dataSource:t.items,pagination:{pageSize:10}})}const R2="_node_1y5bu_1",F2="_tag_1y5bu_9",cs={node:R2,tag:F2};function Cp(e,t,n=""){return e.map((r,o)=>r.children?{title:a.jsxs("div",{className:cs.node,children:[t("pages.task-monitor.test.progress.factor",{name:r.name}),a.jsx(Bt,{className:cs.tag,status:r.status||0})]}),key:n+o,children:Cp(r.children,t,`${n}${o}-`)}:{title:a.jsxs("div",{className:cs.node,children:[t("pages.task-monitor.test.progress.operator",{name:r.name}),a.jsx(Bt,{className:cs.tag,status:r.status||0})]}),key:n+o})}const L2=e=>{const{id:t}=e,{t:n}=Z(),{data:r,isLoading:o}=Oe(["facplf_get_test_progress_detail",t],async()=>await ee.requestFunc("facplf_get_test_progress_detail",{id:t})),s=k.useMemo(()=>r?Cp(r,n)??[]:[],[r,n]);return o?a.jsx(kr,{spinning:!0}):r&&a.jsx(Vi,{style:{minWidth:250,width:"max-content"},virtual:!0,selectable:!1,blockNode:!0,showLine:!0,switcherIcon:a.jsx(nu,{}),treeData:s,height:400})},N2="_status_1eqx3_1",D2={status:N2};function M2(e){const{t}=Z(),{type:n}=e,{data:r={items:[],total:0},isLoading:o,mutate:s}=Oe(["facplf_get_test_monitoring_list",n],async()=>await ee.requestFunc("facplf_get_test_monitoring_list",{type:n})),i=k.useMemo(()=>[{title:t("pages.task-monitor.common.table.name"),dataIndex:"name",key:"name",width:200,fixed:"left",render(u){return a.jsx("span",{children:u})}},{title:t("pages.task-monitor.common.table.type"),dataIndex:"type",key:"type",width:200,render(u,c){return a.jsx("span",{children:c.type===Sp.SINGLE?t("pages.task-monitor.test.tabs.single"):t("pages.task-monitor.test.tabs.batch")})}},{title:t("pages.task-monitor.common.table.start-time"),dataIndex:"create_time",key:"create_time",width:250,render(u){return u?Qe(u):"-"}},{title:t("pages.task-monitor.common.table.creator"),dataIndex:"creator",key:"creator",width:200,render:u=>a.jsx("span",{children:u})},{title:t("pages.task-monitor.common.table.node"),dataIndex:"run_node",key:"run_node",width:200,render:u=>u?a.jsx("span",{children:u}):"-"},{title:t("pages.task-monitor.common.table.status"),dataIndex:"status",key:"status",width:200,render(u,c){return a.jsx(Qa,{placement:"bottomLeft",content:a.jsx(L2,{id:c.id}),arrow:{pointAtCenter:!0},trigger:"click",children:a.jsx(Bt,{status:u||0,className:D2.status})},c.id+c.create_time)}},{title:t("common.table.operation.title"),key:"operation",width:300,fixed:"right",render:(u,c)=>a.jsxs(Vt,{max:2,children:[c.status!==Xe.RUNNING&&a.jsx(co,{id:c.id,type:ar.TEST}),c.status===Xe.RUNNING&&a.jsx(lo,{record:c,type:ar.TEST,onInterrupted:s})]})}],[s,t]);return a.jsx(vt,{loading:o,rowKey:u=>u.name+u.create_time,columns:i,dataSource:r.items,pagination:{defaultPageSize:10}})}const W2="_radioGroup_1qqva_1",B2={radioGroup:W2};function $2(){const{t:e}=Z(),t=Ft(),{type:n=jn.ALL}=$t(),r=he(o=>{var s;t.push({search:`?type=${(s=o==null?void 0:o.target)==null?void 0:s.value}`})});return a.jsxs(a.Fragment,{children:[a.jsxs(ya.Group,{value:n,onChange:r,className:B2.radioGroup,children:[a.jsx(ya.Button,{value:jn.ALL,children:e("pages.task-monitor.test.tabs.all")}),a.jsx(ya.Button,{value:jn.SINGLE,children:e("pages.task-monitor.test.tabs.single")}),a.jsx(ya.Button,{value:jn.BATCH,children:e("pages.task-monitor.test.tabs.batch")})]}),a.jsx(M2,{type:n})]})}const V2="_node_vl60z_1",q2="_tag_vl60z_11",Cc={node:V2,tag:q2},z2=e=>{const{id:t}=e,{data:n}=Oe(["facplf_get_workflow_job_detail",t],async()=>await ee.requestFunc("facplf_get_workflow_job_detail",{id:t}));return a.jsx("div",{children:n==null?void 0:n.children.map((r,o)=>a.jsxs("div",{className:Cc.node,children:[a.jsxs("span",{children:[o+1,". ",r.name]}),a.jsx(Bt,{className:Cc.tag,status:r.status||0})]},o))})},G2="_statusPopover_vh0s7_1",U2={statusPopover:G2};function H2(){const{t:e}=Z(),{data:t={items:[],total:0},isLoading:n,mutate:r}=Oe("facplf_get_workflow_job_monitoring_list",async()=>await ee.requestFunc("facplf_get_workflow_job_monitoring_list")),o=k.useMemo(()=>[{title:e("pages.task-monitor.common.table.name"),dataIndex:"name",key:"name",width:200,fixed:"left",render(s){return a.jsx("span",{children:s})}},{title:e("pages.task-monitor.common.table.start-time"),dataIndex:"create_time",key:"create_time",width:250,render(s){return s?Qe(s):"-"}},{title:e("pages.task-monitor.common.table.creator"),dataIndex:"creator",key:"creator",width:200,render:s=>a.jsx("span",{children:s})},{title:e("pages.task-monitor.common.table.node"),dataIndex:"run_node",key:"run_node",width:200,render:s=>s?a.jsx("span",{children:s}):"-"},{title:e("pages.task-monitor.common.table.status"),dataIndex:"status",key:"status",width:200,render:(s,i)=>a.jsx(Qa,{placement:"bottomLeft",content:a.jsx(z2,{id:i.id}),arrow:{pointAtCenter:!0},className:U2.statusPopover,trigger:"click",children:a.jsx(Bt,{status:s||0})})},{title:e("common.table.operation.title"),key:"operation",width:250,fixed:"right",render:(s,i)=>a.jsxs(Vt,{max:3,children:[i.status!==Xe.RUNNING&&a.jsx(co,{id:i.id,type:ar.WORKFLOW}),i.status===Xe.RUNNING&&a.jsx(lo,{record:i,type:ar.WORKFLOW,onInterrupted:r})]})}],[r,e]);return a.jsx(vt,{loading:n,rowKey:s=>s.name+s.create_time,columns:o,dataSource:t.items,pagination:{pageSize:10}})}const K2={from:"/monitor",to:"/monitor/test",exact:!0};function Y2(){const{t:e}=Z(),t=ca(),n=t.hasDepartmentAuth(ot.DATA_IMPORT)||t.hasSystemAuth(At.DATA_IMPORT),r=k.useMemo(()=>[{path:"/monitor/test",label:e("pages.task-monitor.test.title"),component:$2},{path:"/monitor/analysis",label:e("pages.task-monitor.analysis.title"),component:S2},{path:"/monitor/workflow",label:e("pages.task-monitor.workflow.title"),component:H2},n?{path:"/monitor/data-import",label:e("pages.task-monitor.data-import.title"),component:O2}:null].filter(s=>!!s),[n,e]);return a.jsx(nt,{children:a.jsx(Ar,{routes:r,redirect:K2})})}var Da=(e=>(e.WEEK="W",e.MONTH="M",e.DAY="D",e))(Da||{}),Ot=(e=>(e[e.FACTOR=1]="FACTOR",e[e.STRATEGY=2]="STRATEGY",e[e.DATA_IMPORT=3]="DATA_IMPORT",e))(Ot||{});const Ep=_a({useModalProps:({t:e})=>({width:600,title:e("pages.workflow.components.workflow-create-modal.title")}),useFormProps:()=>({labelCol:{span:6}}),useFormRender:({t:e,formProps:t})=>a.jsxs(B,{...t,children:[a.jsx(B.Item,{name:"workflow_name",label:e("pages.workflow.components.workflow-create-modal.label.name"),rules:[{required:!0,message:e("pages.workflow.components.workflow-create-modal.placeholder.name")}],children:a.jsx(Ne,{placeholder:e("pages.workflow.components.workflow-create-modal.placeholder.name")})}),a.jsx(B.Item,{name:"comment",label:e("pages.workflow.components.workflow-create-modal.label.comment"),children:a.jsx(Ne.TextArea,{rows:4,placeholder:e("pages.workflow.components.workflow-create-modal.placeholder.comment")})})]}),onSubmit:async(e,{props:t})=>{var n;await((n=t==null?void 0:t.onSubmit)==null?void 0:n.call(t,e))}}),J2="_createBtn_148gd_1",Q2="_comment_148gd_5",Ec={createBtn:J2,comment:Q2},X2={items:[],total:0},Z2={[Ot.FACTOR]:"gold",[Ot.STRATEGY]:"blue",[Ot.DATA_IMPORT]:"cyan"},eI={position:{x:413,y:130},positionAbsolute:{x:413,y:130},selected:!1,width:200,height:43},tI={[Ot.DATA_IMPORT]:"data-import",[Ot.FACTOR]:"factor",[Ot.STRATEGY]:"strategy"},aI=()=>{const{t:e}=Z(),{message:t}=at.useApp(),n=Ft(),{data:r=X2,isLoading:o,mutate:s}=Oe("facplf_get_workflow_task_list",async()=>ee.requestFunc("facplf_get_workflow_task_list")),i=he(async l=>{try{await ee.requestFunc("facplf_delete_workflow_task",{job_id:l}),t.success(e("common.delete-success")),s()}catch(p){t.error(Be(p))}}),u=he(l=>{ke.show(Ep,{onSubmit:async p=>{try{const{workflow_id:d}=await ee.requestFunc("facplf_create_workflow",p);t.success(e("common.create-success")),s();const m={workflow_id:d,graph_data:{nodes:{[l.job_id]:{...eI,id:l.job_id,type:tI[l.job_type],data:{type:l.job_type,name:l.job_name,params:xr(l.params,{})}}},edges:[]}};await ee.requestFunc("facplf_save_workflow_graph",m),n.push(Se.workflowEdit(d))}catch(d){t.error(Be(d))}}})}),c=k.useMemo(()=>[{dataIndex:"job_name",title:e("pages.workflow.components.exist-task-table.title.name"),width:200,fixed:"left"},{dataIndex:"job_type",title:e("pages.workflow.components.exist-task-table.title.task-type"),render:l=>a.jsx(yt,{bordered:!1,color:Z2[l],children:e(`constants.job-type.${l}`)}),width:300},{dataIndex:"update_time",title:e("pages.workflow.components.exist-task-table.title.update-time"),render:l=>l?Qe(l):"-",width:300},{dataIndex:"comment",title:e("pages.workflow.components.exist-task-table.title.comment"),width:300,render:l=>a.jsx(De.Paragraph,{ellipsis:{rows:2,expandable:!0},className:Ec.comment,children:l??"-"})},{dataIndex:"operation",title:e("common.table.operation.title"),width:250,fixed:"right",render:(l,p)=>a.jsxs(Vt,{max:3,children:[a.jsx(De.Link,{onClick:()=>u(p),children:e("pages.workflow.components.exist-task-table.operations.create-workflow")}),a.jsx(Ue,{to:Se.workflowTaskEdit(p.job_id),children:e("pages.workflow.components.exist-task-table.operations.edit")}),a.jsx(la,{overlayInnerStyle:{maxWidth:400},onConfirm:()=>i(p.job_id),title:e("pages.workflow.components.exist-task-table.delete-comfirm",{name:p.job_name}),children:a.jsx(De.Link,{type:"danger",children:e("pages.workflow.components.exist-task-table.operations.delete")})})]})}],[u,i,e]);return a.jsxs(a.Fragment,{children:[a.jsx(Ue,{to:Se.workflowTaskCreate(),children:a.jsx(Ae,{type:"primary",className:Ec.createBtn,icon:a.jsx(Ua,{}),children:e("pages.workflow.components.exist-task-table.create-btn")})}),a.jsx(vt,{scroll:{x:1400},columns:c,rowKey:"job_id",dataSource:r.items,loading:o})]})},rI="_daySelectRow_1vhnb_1",nI="_btn_1vhnb_5",sI="_frequencySelect_1vhnb_15",Bo={daySelectRow:rI,btn:nI,frequencySelect:sI},oI=e=>{const{onChange:t,value:n={frequency:Da.DAY,days:[]}}=e,{t:r}=Z(),o=k.useMemo(()=>{switch(n.frequency){case Da.WEEK:return Object.entries(r("common.weekday",{returnObjects:!0})).map(([l,p])=>({label:p,value:Number(l)}));case Da.MONTH:return[...Array(32).keys()].slice(1).map(l=>({label:l,value:l}));default:return[]}},[r,n.frequency]),s=k.useMemo(()=>Oi([Da.DAY,Da.WEEK,Da.MONTH],r("constants.frequency-type",{returnObjects:!0})),[r]),i=he(l=>{var p;return(p=n.days)==null?void 0:p.includes(l.value)}),u=he(l=>{i(l)?t==null||t({...n,days:n.days.filter(p=>p!==l.value)}):t==null||t({...n,days:n.days.concat([l.value])})}),c=he(l=>{t==null||t({frequency:l,days:[]})});return a.jsxs(a.Fragment,{children:[a.jsx(kt,{className:Bo.frequencySelect,options:s,value:n.frequency,onChange:c}),a.jsx(Ls,{className:Bo.daySelectRow,children:o.map(l=>a.jsx(yr,{children:a.jsx(Ae,{className:Bo.btn,onClick:()=>u(l),type:i(l)?"primary":"default",ghost:i(l),children:l.label})},l.value))})]})},iI="_form_fxmru_1",lI="_datePicker_fxmru_5",cI="_frequencySelect_fxmru_9",uI="_timePickerWrapper_fxmru_16",dI="_timePicker_fxmru_16",_n={form:iI,datePicker:lI,frequencySelect:cI,timePickerWrapper:uI,timePicker:dI},Ac="YYYY.MM.DD",$o="HH:mm",Ap=_a({useModalProps:({t:e})=>({className:_n.modal,width:600,title:e("pages.workflow.components.scheduled-run-setting-modal.title")}),useFormProps:()=>({labelCol:{span:6}}),useFormRender:({t:e,formProps:t,props:n,form:r})=>{const{workflowId:o}=n,s=B.useWatch("run_times",r),{isLoading:i}=Oe(["facplf_get_schedule_workflow",o],async()=>ee.requestFunc("facplf_get_schedule_workflow",{workflow_id:o}),{onSuccess:c=>{let l={};c?l={time:[Ya(c.start_date),Ya(c.end_date)],run_days:{frequency:c.frequency,days:c.days},run_times:c.run_times.filter(p=>!!p).map(p=>({time:Ya(p,$o)}))}:l={run_days:{frequency:Da.DAY,days:[]}},r.setFieldsValue(l)}}),u=he(async(c,l)=>{const p=s.filter(d=>!!(d!=null&&d.time)).map(d=>d.time.unix()).sort();if(!p.length||!l)return Promise.reject(e("pages.workflow.components.scheduled-run-setting-modal.message.required-times"));for(let d=1;d<p.length;d++)if(p[d]-p[d-1]<5*60)return Promise.reject(e("pages.workflow.components.scheduled-run-setting-modal.message.times"));return Promise.resolve()});return a.jsx(kr,{spinning:i,children:a.jsxs(B,{...t,className:_n.form,children:[a.jsx(B.Item,{name:"time",label:e("pages.workflow.components.scheduled-run-setting-modal.label.start-and-end-time"),rules:[{required:!0}],children:a.jsx(Sn.RangePicker,{className:_n.datePicker})}),a.jsx(Rs,{initialValue:[{}],name:"run_times",rootFormItemProps:{label:e("pages.workflow.components.scheduled-run-setting-modal.label.run-time"),required:!0},renderItem:(c,l,p)=>a.jsxs("div",{className:_n.timePickerWrapper,children:[a.jsx(B.Item,{required:!0,name:[c.name,"time"],rules:[{validator:u}],children:a.jsx(Jc,{format:$o,className:_n.timePicker})}),p.remove]})}),a.jsx(B.Item,{name:"run_days",label:e("pages.workflow.components.scheduled-run-setting-modal.label.frequency"),required:!0,validateTrigger:"onBlur",rules:[{validator:async(c,l)=>{const{frequency:p,days:d}=l||{};return p!==Da.DAY&&!(d!=null&&d.length)?Promise.reject(e("pages.workflow.components.scheduled-run-setting-modal.message.frequency")):Promise.resolve()}}],children:a.jsx(oI,{})})]})})},onSubmit:async(e,{props:t,t:n,antApp:{message:r}})=>{const{time:o,run_days:{frequency:s,days:i},run_times:u}=e;try{await ee.requestFunc("facplf_schedule_workflow",{workflow_id:t.workflowId,start_date:o[0].format(Ac),end_date:o[1].format(Ac),frequency:s,days:i,run_times:u.map(c=>c.time.format($o))}),r.success(n("common.set-success"))}catch(c){r.error(Be(c))}}}),pI="_comment_uozct_1",mI="_action_uozct_5",Pc={comment:pI,action:mI},fI=()=>{const{t:e}=Z(),{message:t}=at.useApp(),n=Ft(),{data:r,isLoading:o,mutate:s}=Oe("facplf_get_workflow_list",async()=>ee.requestFunc("facplf_get_workflow_list")),i=he(async d=>{try{await ee.requestFunc("facplf_delete_workflow",{workflow_id:d}),s(),t.success(e("common.delete-success"))}catch(m){t.error(Be(m))}}),u=he(async d=>{try{await ee.requestFunc("facplf_workflow_run",{workflow_id:d}),t.success(e("pages.workflow.components.exist-workflow-table.run-success")),s()}catch(m){t.error(Be(m))}}),c=he(d=>{ke.show(Ap,{workflowId:d})}),l=he(()=>{ke.show(Ep,{onSubmit:async d=>{const{workflow_id:m}=await ee.requestFunc("facplf_create_workflow",d);t.success(e("common.create-success")),n.push(Se.workflowEdit(m))}})}),p=k.useMemo(()=>[{dataIndex:"workflow_name",title:e("pages.workflow.components.exist-workflow-table.title.workflow-name"),fixed:"left",width:300},{dataIndex:"run_record_count",title:e("pages.workflow.components.exist-workflow-table.title.run-record-count"),width:200,render:(d,m)=>m.run_record_count!==0?a.jsx(Ue,{to:Se.workflowRunRecordList({workflow_id:m.workflow_id}),children:d}):d},{dataIndex:"update_time",title:e("pages.workflow.components.exist-workflow-table.title.update-time"),render:d=>d?Qe(d):"-",width:200},{dataIndex:"comment",title:e("pages.workflow.components.exist-workflow-table.title.comment"),render:d=>a.jsx(De.Paragraph,{ellipsis:{rows:2,expandable:!0},className:Pc.comment,children:d??"-"}),width:300},{dataIndex:"operation",title:e("common.table.operation.title"),width:250,fixed:"right",render:(d,m)=>a.jsxs(Vt,{max:3,children:[a.jsx(De.Link,{onClick:()=>u(m.workflow_id),children:e("pages.workflow.components.exist-workflow-table.operations.run-now")}),a.jsx(Ue,{to:Se.workflowEdit(m.workflow_id),children:e("common.edit")}),a.jsx(De.Link,{onClick:()=>c(m.workflow_id),children:e("pages.workflow.components.exist-workflow-table.operations.scheduled-run-settings")}),a.jsx(la,{title:e("pages.workflow.components.exist-workflow-table.confirm-delete",{name:m.workflow_name}),onConfirm:()=>i(m.workflow_id),children:a.jsx(De.Link,{type:"danger",children:e("common.delete")})})]})}],[e,u,c,i]);return a.jsxs(a.Fragment,{children:[a.jsx(it,{className:Pc.action,children:a.jsx(Ae,{type:"primary",icon:a.jsx(Ua,{}),onClick:l,children:e("pages.workflow.components.exist-workflow-table.action.create")})}),a.jsx(vt,{rowKey:"workflow_name",columns:p,dataSource:(r==null?void 0:r.items)||[],loading:o,scroll:{x:1400}})]})},hI=()=>{const{t:e}=Z(),{message:t}=at.useApp(),{data:n,isLoading:r,mutate:o}=Oe("facplf_get_schedule_workflow_list",async()=>ee.requestFunc("facplf_get_schedule_workflow_list")),s=he(async l=>{try{await ee.requestFunc("facplf_delete_schedule_workflow",{workflow_id:l}),t.success(e("common.delete-success")),o()}catch(p){t.error(Be(p))}}),i=he(async l=>{await ke.show(Ap,{workflowId:l.workflow_id}),o()}),u=he(l=>{switch(l.frequency){case Da.DAY:return e(`constants.frequency-type.${l.frequency}`);case Da.WEEK:return l.days.sort().map(p=>e(`common.weekday.${p}`)).join(",");case Da.MONTH:return e(`constants.frequency-type.${l.frequency}`)+l.days.sort().join(",");default:return"-"}}),c=k.useMemo(()=>[{dataIndex:"workflow_name",width:200,fixed:"left",title:e("pages.workflow.components.timed-task-table.title.name")},{dataIndex:"start_date",title:e("pages.workflow.components.timed-task-table.title.start-date"),width:200,render:l=>Qe(l)},{dataIndex:"end_date",title:e("pages.workflow.components.timed-task-table.title.end-date"),width:200,render:l=>Qe(l)},{dataIndex:"run_times",title:e("pages.workflow.components.timed-task-table.title.run-times"),width:300,render:l=>a.jsx(Gt,{max:3,ellipsisTagProps:{bordered:!1},children:l.map(p=>a.jsx(yt,{color:"blue",bordered:!1,children:p},p))})},{dataIndex:"days",title:e("pages.workflow.components.timed-task-table.title.days"),width:300,render:(l,p)=>u(p)},{dataIndex:"operations",title:e("common.table.operation.title"),width:300,fixed:"right",render:(l,p)=>a.jsxs(Vt,{children:[a.jsx(De.Link,{onClick:()=>i(p),children:e("common.edit")}),a.jsx(la,{onConfirm:()=>s(p.workflow_id),title:e("pages.workflow.components.timed-task-table.delete-confirm",{name:p.workflow_name}),children:a.jsx(De.Link,{type:"danger",children:e("common.table.operation.delete")})})]})}],[u,s,i,e]);return a.jsx(vt,{columns:c,dataSource:n==null?void 0:n.items,loading:r,scroll:{x:1400}})},gI=()=>{const{t:e}=Z(),t=k.useMemo(()=>[{path:"/workflow/exist-task",component:aI,label:e("pages.workflow.list.tabs.title.exist-task")},{path:"/workflow/exist-workflow",component:fI,label:e("pages.workflow.list.tabs.title.exist-workflow")},{path:"/workflow/timed-task",component:hI,label:e("pages.workflow.list.tabs.title.timed-task")}],[e]);return a.jsx(nt,{children:a.jsx(Ar,{routes:t,redirect:{from:"/workflow",to:"/workflow/exist-task",exact:!0}})})},yI={info:{workflow_name:"",update_time:"",comment:"",creator:""},items:[],total:0};function bI(){const{t:e}=Z(),{id:t}=$t(),{data:n=yI,isLoading:r}=Oe(["facplf_get_workflow_run_detail",t],async()=>ee.requestFunc("facplf_get_workflow_run_detail",{run_id:t})),o=k.useMemo(()=>[{title:e("pages.workflow.workflow-run-record.record-detail-table.name"),dataIndex:"task_name"},{title:e("pages.workflow.workflow-run-record.record-detail-table.start-time"),dataIndex:"start_time",render:i=>Qe(i)},{title:e("pages.workflow.workflow-run-record.record-detail-table.run_node"),dataIndex:"run_node"},{title:e("pages.workflow.workflow-run-record.record-detail-table.status"),dataIndex:"status",render:i=>a.jsx(Bt,{status:i||0})}],[e]),s=k.useMemo(()=>[{label:e("pages.workflow.workflow-run-record.info.name"),children:n.info.workflow_name??"-"},{label:e("pages.workflow.workflow-run-record.info.update-time"),children:Qe(n.info.update_time)},{label:e("pages.workflow.workflow-run-record.info.creator"),children:n.info.creator??"-"},{label:e("pages.workflow.workflow-run-record.info.comment"),children:n.info.comment??"-"}],[n,e]);return a.jsx(nt,{autoBreadcrumb:{addonItems:[{title:e("pages.workflow.workflow-run-record.title-detail")}]},loading:r,children:a.jsxs(a.Fragment,{children:[a.jsx(ta,{title:e("pages.workflow.workflow-run-record.info.title"),children:a.jsx(Cr,{layout:"vertical",colon:!1,column:4,items:s})}),a.jsx(ba,{}),a.jsx(ta,{title:e("pages.workflow.workflow-run-record.record-detail-table.title"),children:a.jsx(vt,{columns:o,dataSource:n.items,pagination:{pageSize:10,hideOnSinglePage:!0}})})]})})}const vI=Ha({useDrawerProps({t:e}){return{title:e("pages.workflow.components.edit-workflow-drawer.title"),width:600}},useFormProps({props:e}){return{labelCol:{span:6},initialValues:{workflow_name:e.workflow.workflow_name,comment:e.workflow.comment}}},useFormRender({formProps:e,t}){return a.jsxs(B,{...e,children:[a.jsx(B.Item,{label:t("pages.workflow.components.edit-workflow-drawer.form.name.label"),name:"workflow_name",required:!0,rules:[{required:!0}],children:a.jsx(Ne,{})}),a.jsx(B.Item,{label:t("pages.workflow.components.edit-workflow-drawer.form.comment.label"),name:"comment",children:a.jsx(Ne.TextArea,{autoSize:{minRows:3,maxRows:5}})})]})},async onSubmit(e,{props:t,t:n,antApp:{message:r}}){try{await ee.requestFunc("facplf_edit_workflow",{workflow_id:t.workflow.workflow_id,workflow_name:e.workflow_name,comment:e.comment}),r.success(n("common.save-success"))}catch(o){r.error(Be(o))}}}),uo=k.createContext({flowProps:{nodes:[],edges:[],onConnect:Na,onNodeDragStart:Na,onNodeDragStop:Na,onNodesChange:Na,onEdgesChange:Na},setEdges:Na,setNodes:Na,setNode:Na,setNodeData:Na,removeNode:Na,setIsDirty:Na,isDirty:!1,isNodeDragging:!1}),Tc=(...e)=>ol.all(e,{arrayMerge:(t,n)=>n});function ir(e,t){return k.useCallback((...n)=>(t(!0),e(...n)),[e,t])}function _I({nodes:e,edges:t,setEdges:n,setNodes:r,onEdgesChange:o,onNodesChange:s}){const[i,u]=k.useState(!1),[c,l]=k.useState(!1),p=k.useCallback(x=>n(I=>Tf(x,I)),[n]),d=k.useCallback((x,I,w)=>{r(A=>A.map(f=>f.id!==x?f:w!=null&&w.replace?I:Tc({},f,I)))},[r]),m=k.useCallback((x,I,w)=>{r(A=>A.map(f=>{if(f.id!==x)return f;const{data:j,...C}=f;return{...C,data:w!=null&&w.replace?I:Tc(f.data,I)}}))},[r]),h=k.useCallback(x=>{s([{type:"remove",id:x}])},[s]),b=k.useCallback(()=>{l(!0)},[]),y=k.useCallback(()=>{l(!1)},[]);return{flowProps:{nodes:e,edges:t,onNodesChange:ir(s,u),onEdgesChange:ir(o,u),onConnect:ir(p,u),onNodeDragStart:b,onNodeDragStop:y},setNodes:ir(r,u),setEdges:ir(n,u),setNode:ir(d,u),setNodeData:ir(m,u),removeNode:ir(h,u),isDirty:i,setIsDirty:u,isNodeDragging:c}}const Si=()=>a.jsx(en,{height:"calc(100vh - 64px)"}),po=jt.createContext({});function xI(e){const{id:t,children:n}=e,{data:r=null,isLoading:o,mutate:s}=Oe(["facplf_get_workflow_detail",t],async()=>{const i=await ee.requestFunc("facplf_get_workflow_detail",{workflow_id:t}),u=xr(i.graph_data,{nodes:{},edges:[]});return{...i,graph_data:{edges:u.edges??[],nodes:Object.values(u.nodes)??[]}}});return o?a.jsx(Si,{}):a.jsx(po.Provider,{value:{workflow:r,mutate:s},children:n})}const wl=k.createContext({status:"editing",setStatus:Na,nodeValidateRefMap:new Map});function wI(){const[e,t]=k.useState("editing"),[n,r]=k.useState(()=>new Map);return{status:e,setStatus:t,nodeValidateRefMap:n}}function jI(e){const t=wI();return a.jsx(wl.Provider,{value:t,children:e.children})}const II=(e,t)=>{const n=r=>{const{data:{ui:o,...s},...i}=r;return{...i,data:s}};return{nodes:ou(e.map(n),"id"),edges:t}};function SI(){const{t:e}=Z(),{message:t}=at.useApp(),n=zi(),{workflow:r,mutate:o}=k.useContext(po),{status:s,setStatus:i,nodeValidateRefMap:u}=k.useContext(wl),{isDirty:c,setIsDirty:l}=k.useContext(uo),p=s==="saving",d=he(async()=>{try{i("saving"),await Nc(1e3);const b=n.getNodes(),y=n.getEdges();if(b.length===0)throw new Error(e("pages.workflow.edit.action.save-message.no-node"));if(!(b.length===1||b.every(A=>y.some(f=>f.target===A.id||f.source===A.id))))throw new Error(e("pages.workflow.edit.action.save-message.not-connect"));if(!(await Promise.all(b.map(A=>{var f,j;return(j=(f=u.get(A.id))==null?void 0:f.current)==null?void 0:j.updateNodeUIFormValidated()}))).every(A=>A))throw new Error(e("pages.workflow.edit.action.save-message.not-validated"));await ee.requestFunc("facplf_save_workflow_graph",{workflow_id:r==null?void 0:r.workflow_id,graph_data:II(b,y)}),l(!1),o()}finally{i("editing")}}),m=he(async()=>{const b="workflow.save";t.loading({key:b,content:e("pages.workflow.edit.action.save-message.validating"),duration:0});try{await d(),t.success({key:b,content:e("common.save-success")})}catch(y){t.error({key:b,content:Be(y)})}}),h=he(async()=>{const b="workflow.save-and-run";t.loading({key:b,content:e("pages.workflow.edit.action.save-message.validating"),duration:0});try{await d(),await ee.requestFunc("facplf_workflow_run",{workflow_id:r==null?void 0:r.workflow_id}),t.success({key:b,content:e("pages.workflow.edit.action.run-success")})}catch(y){t.error({key:b,content:Be(y)})}});return a.jsxs(Of,{position:"top-right",children:[a.jsx(Ci,{message:e("common.leave-page.content"),when:c}),a.jsxs(it,{size:"large",children:[a.jsx(Ae,{disabled:p,size:"small",type:"link",onClick:h,children:e("pages.workflow.edit.action.save-and-run")}),a.jsx(Ae,{disabled:p,size:"small",type:"primary",onClick:m,children:e("pages.workflow.edit.action.save")})]})]})}function kI(e){const{info:t,onClose:n}=e,{t:r}=Z(),o=k.useCallback(()=>{n()},[n]),{removeNode:s}=k.useContext(uo),i=k.useMemo(()=>({items:[{key:"delete",icon:a.jsx(Li,{}),label:r("pages.workflow.edit.canvas.context-menu.delete"),onClick:()=>{s((t==null?void 0:t.node.id)??""),o()}}]}),[o,t==null?void 0:t.node.id,s,r]);return a.jsx(su,{open:!!t,trigger:["click"],onOpenChange:o,menu:i,children:a.jsx("div",{className:"react-flow-context-menu-placeholder",style:{position:"absolute",top:t==null?void 0:t.y,left:t==null?void 0:t.x}})})}function CI(){const[e,t]=k.useState(null);return Rf({onChange:({nodes:n})=>{n&&n.length===1?t(n[0]):t(null)}}),e}const EI=e=>{const{t}=Z(),n=ca(),r=k.useMemo(()=>{const o=[];return n.hasDepartmentAuth(ot.FACTOR)&&o.push(Ot.FACTOR),n.hasDepartmentAuth(ot.DATA_IMPORT)&&o.push(Ot.DATA_IMPORT),Oi(o,t("constants.job-type",{returnObjects:!0}))},[n,t]);return a.jsx(kt,{options:r,placeholder:t("components.job-type-select.placeholder"),...e})},jl=e=>{const{hiddenFields:t,templateListProps:n}=e,{t:r}=Z(),o=B.useFormInstance(),s=he(async(c,l)=>{if(!(l!=null&&l.database)||!(l!=null&&l.table))return Promise.reject(r("pages.workflow.components.workflow-task-form.message.to-db"))}),i=he(()=>{o.setFieldsValue({templates:[{}],is_to_db:!1})}),u=he(c=>{switch(c){case Ot.FACTOR:return a.jsxs(a.Fragment,{children:[a.jsx(ba,{}),a.jsx(ta,{title:r("pages.workflow.components.workflow-task-form.factor"),children:a.jsx(B.Item,{name:"factors",label:r("pages.workflow.components.workflow-task-form.label.factor"),rules:[{type:"array",required:!0}],children:a.jsx(Xs,{includePrivate:!0,includePublic:!0})})}),a.jsx(ba,{}),a.jsx(ta,{title:r("pages.workflow.components.workflow-task-form.run-template"),children:a.jsx(cn,{name:"templates",labelCol:{span:6},...n})})]});case Ot.DATA_IMPORT:return a.jsxs(a.Fragment,{children:[a.jsx(ba,{}),a.jsx(ta,{title:r("pages.workflow.components.workflow-task-form.label.data-import-info"),children:a.jsx(B.List,{name:"templates",initialValue:[{}],children:l=>l.map(p=>a.jsxs(a.Fragment,{children:[a.jsx(B.Item,{name:[p.name,"template_id"],label:r("pages.workflow.components.workflow-task-form.label.data-import-template"),children:a.jsx(Dd,{onChange:(d,m)=>{const h=m.template.params.map(b=>({name:b.name,type:b.type}));o.setFieldValue(["templates",p.name,"template_params"],h)}})}),a.jsx(ja,{dependencies:[["templates",p.name,"template_id"]],children:({templates:d})=>{const{template_id:m}=d[p.name];return m&&a.jsx(fl,{namePath:"templates",labelCol:{span:4,offset:1},templateId:m,listFieldName:[p.name]})}})]}))})})]});default:return null}});return a.jsxs(a.Fragment,{children:[a.jsxs(ta,{title:r("pages.workflow.components.workflow-task-form.basic-infomation"),children:[a.jsx(B.Item,{name:"job_name",label:r("pages.workflow.components.workflow-task-form.label.name"),hidden:t==null?void 0:t.includes("job_name"),rules:[{required:!0}],children:a.jsx(Ne,{placeholder:r("pages.workflow.components.workflow-task-form.placeholder.name")})}),a.jsx(B.Item,{rules:[{required:!0,message:r("components.job-type-select.placeholder")}],name:"job_type",hidden:t==null?void 0:t.includes("job_type"),label:r("pages.workflow.components.workflow-task-form.label.job-type"),children:a.jsx(EI,{onChange:i})}),a.jsx(ja,{dependencies:["job_type"],children:({job_type:c})=>c===Ot.FACTOR&&a.jsxs(a.Fragment,{children:[a.jsx(B.Item,{rules:[{required:!0}],name:"is_to_db",initialValue:!1,label:r("pages.workflow.components.workflow-task-form.label.is-to-db"),children:a.jsx(Ea,{})}),a.jsx(ja,{dependencies:["is_to_db"],children:({is_to_db:l})=>l&&a.jsx(B.Item,{required:!0,validateTrigger:"onBlur",rules:[{validator:s}],name:"to_db",label:r("pages.workflow.components.workflow-task-form.label.to-db"),children:a.jsx(Ju,{type:Qs.EDITABLE})})})]})}),a.jsx(B.Item,{name:"comment",label:r("pages.workflow.components.workflow-task-form.label.comment"),hidden:t==null?void 0:t.includes("comment"),children:a.jsx(Ne.TextArea,{rows:4,placeholder:r("pages.workflow.components.workflow-task-form.placeholder.comment")})})]}),a.jsx(ja,{dependencies:["job_type"],children:({job_type:c})=>u(c)})]})};function AI(){let e,t;const n=new Promise((r,o)=>{e=r,t=o});return Object.assign(n,{resolve:e,reject:t})}function PI(e,t){return{template_id:e.template_id,template_params:(t==null?void 0:t.map(n=>{var s;const r=(s=e.template_params)==null?void 0:s.find(i=>i.name===n.name),o=n.type&&n.type!==(r==null?void 0:r.type);return{name:n.name,type:n.type??(r==null?void 0:r.type),value:o?null:r==null?void 0:r.value}}))??[]}}function Oc(e){const t=hm(()=>AI(),[]);return k.useEffect(()=>{e===!1&&t.resolve()},[t,e]),t}function Pp(){const{getTemplateParameters:e,isLoading:t}=nl({swr:{revalidateIfStale:!1}}),n=Oc(t),{getTemplateParameters:r,isLoading:o}=no({swr:{revalidateIfStale:!1}}),s=Oc(o),i=k.useMemo(()=>Promise.all([n,s]),[s,n]),u=k.useMemo(()=>({[Ot.DATA_IMPORT]:l=>r(l)??[],[Ot.FACTOR]:l=>e(l)??[],[Ot.STRATEGY]:l=>[]}),[r,e]);return{fixTemplatesParamsAsync:k.useCallback(async(l,p)=>(await i,l.map(d=>PI(d,u[p](d.template_id)))),[u,i]),loading:t||o}}const Tp=k.forwardRef(function(t,n){const{node:r,...o}=t,{setNodeData:s}=k.useContext(uo),{fixTemplatesParamsAsync:i,loading:u}=Pp(),[c]=B.useForm(t.form),l=he(async()=>{let d=!0;try{await c.validateFields({validateOnly:!0}),d=!0}catch(x){d=!x.errorFields.length}const{job_name:m,job_type:h,comment:b,...y}=c.getFieldsValue();return s(r==null?void 0:r.id,{name:m,type:h,params:y,ui:{formValidated:d}}),d});k.useImperativeHandle(n,()=>({updateNodeUIFormValidated:l})),Pi(async()=>{const{params:d,name:m,type:h}=r.data;c.setFieldsValue({job_name:m,job_type:h,...d,templates:d!=null&&d.templates?await i(d==null?void 0:d.templates,h):[{}]})},[i,c,r]);const p=he(()=>{dl(l)});return a.jsx(B,{labelCol:{span:6},...o,onValuesChange:p,form:c,children:u?a.jsx(en,{height:600}):a.jsx(jl,{hiddenFields:["job_type","comment"]})})}),TI="_container_c51ag_1",OI="_containerEmpty_c51ag_11",RI="_suspenseLoading_c51ag_17",Rc={container:TI,containerEmpty:OI,suspenseLoading:RI};function FI(){const e=CI(),{t}=Z();return a.jsx("div",{className:Wt(Rc.container,{[Rc.containerEmpty]:!e}),children:e?a.jsx(Tp,{node:e},e.id):a.jsx(Ma,{image:Ma.PRESENTED_IMAGE_SIMPLE,description:t("pages.workflow.edit.select-node-form.empty-description")})})}const LI="_creator_1jcny_1",NI="_icon_1jcny_20",DI="_content_1jcny_24",MI="_node_1jcny_30",WI="_selected_1jcny_41",BI="_validateFailed_1jcny_45",$I="_connectHandler_1jcny_50",Ka={creator:LI,icon:NI,content:DI,node:MI,selected:WI,validateFailed:BI,connectHandler:$I},VI={background:"#333"};function Il(e){var x;const{id:t,selected:n,data:r,className:o,icon:s,connectHandleFillStyle:i=VI}=e,u=zi(),{status:c,nodeValidateRefMap:l}=k.useContext(wl),p=k.useRef(null);Ff();const d=u.getNode(t),m=Lf(d,u.getNodes(),u.getEdges()),h=Nf(d,u.getNodes(),u.getEdges()),b=m.length===0,y=h.length===0;return k.useEffect(()=>(l.set(t,p),()=>{l.delete(t)}),[t,l]),a.jsxs(a.Fragment,{children:[a.jsx(Pl,{type:"target",position:Tl.Top,style:b?{}:i,className:Wt(Ka.connectHandler),isConnectable:b}),a.jsxs("div",{className:Wt(Ka.node,{[Ka.selected]:n,[Ka.validateFailed]:((x=r.ui)==null?void 0:x.formValidated)===!1},o),children:[s&&a.jsx("div",{className:Ka.icon,children:s}),a.jsx("div",{className:Ka.content,children:r.name})]}),a.jsx(Pl,{type:"source",position:Tl.Bottom,style:y?{}:i,className:Wt(Ka.connectHandler),isConnectable:y}),c==="saving"&&a.jsx(Tp,{ref:p,style:{display:"none"},node:d})]})}function Op(e){const{id:t,initialData:n,nodeType:r,icon:o,...s}=e,i=k.useCallback(u=>{u.dataTransfer.effectAllowed="move";const c={id:t,nodeType:r,initialData:n};u.dataTransfer.setData("application/reactflow",JSON.stringify(c))},[t,n,r]);return a.jsxs("div",{...s,onDragStart:i,draggable:!0,className:Wt(Ka.creator,e.className),children:[o&&a.jsx("div",{className:Ka.icon,children:o}),a.jsx("div",{className:Ka.content,children:e.children})]})}const qI=e=>k.createElement("svg",{width:"1em",height:"1em",viewBox:"0 0 22 22",xmlns:"http://www.w3.org/2000/svg",...e},k.createElement("path",{d:"M11 22C4.93391 22 0 17.0661 0 11C0 4.93391 4.93391 0 11 0C17.0661 0 22 4.93391 22 11C22 17.0661 17.0661 22 11 22ZM11 0.984818C5.47667 0.984818 0.984818 5.47667 0.984818 11C0.984818 16.5233 5.47667 21.0152 11 21.0152C16.5233 21.0152 21.0152 16.5233 21.0152 11C21.0152 5.47667 16.5233 0.984818 11 0.984818Z",fill:"#436D0E"}),k.createElement("path",{d:"M10.9997 17.7309C7.28883 17.7309 4.26807 14.7101 4.26807 10.9992C4.26807 7.28834 7.28883 4.26758 10.9997 4.26758C14.7106 4.26758 17.7313 7.28834 17.7313 10.9992C17.7313 14.7101 14.7106 17.7309 10.9997 17.7309ZM10.9997 5.2524C7.83158 5.2524 5.25288 7.8311 5.25288 10.9992C5.25288 14.1673 7.83158 16.746 10.9997 16.746C14.1678 16.746 16.7465 14.1673 16.7465 10.9992C16.7465 7.8311 14.1678 5.2524 10.9997 5.2524Z",fill:"#436D0E"}),k.createElement("path",{d:"M9.35693 11.0004C9.35693 11.2162 9.39943 11.4298 9.482 11.6292C9.56457 11.8285 9.68559 12.0096 9.83816 12.1622C9.99072 12.3148 10.1718 12.4358 10.3712 12.5184C10.5705 12.6009 10.7842 12.6434 10.9999 12.6434C11.2157 12.6434 11.4293 12.6009 11.6287 12.5184C11.828 12.4358 12.0091 12.3148 12.1617 12.1622C12.3143 12.0096 12.4353 11.8285 12.5179 11.6292C12.6004 11.4298 12.6429 11.2162 12.6429 11.0004C12.6429 10.5647 12.4698 10.1468 12.1617 9.83865C11.8536 9.53052 11.4357 9.35742 10.9999 9.35742C10.5642 9.35742 10.1463 9.53052 9.83816 9.83865C9.53004 10.1468 9.35693 10.5647 9.35693 11.0004Z",fill:"#436D0E"}),k.createElement("path",{d:"M10.9999 13.1336C9.82353 13.1336 8.86572 12.1758 8.86572 10.9994C8.86572 9.82304 9.82353 8.86523 10.9999 8.86523C12.1763 8.86523 13.1341 9.82304 13.1341 10.9994C13.1341 12.1758 12.1763 13.1336 10.9999 13.1336ZM10.9999 9.85005C10.3663 9.85005 9.85054 10.3658 9.85054 10.9994C9.85054 11.633 10.3663 12.1488 10.9999 12.1488C11.6335 12.1488 12.1493 11.633 12.1493 10.9994C12.1493 10.3658 11.6335 9.85005 10.9999 9.85005Z",fill:"#436D0E"})),Rp=e=>k.createElement(Ga,{component:qI,...e}),zI="_node_1av7z_1",GI="_creator_1av7z_7",Fp={node:zI,creator:GI};function UI(e){const{initialData:t,...n}=e,r=k.useMemo(()=>({...t,type:Ot.FACTOR,ui:{}}),[t]);return a.jsx(Op,{initialData:r,icon:a.jsx(Rp,{}),className:Wt(Fp.creator,e.className),...n,children:r.name})}function HI(e){return a.jsx(Il,{...e,className:Fp.node,icon:a.jsx(Rp,{}),connectHandleFillStyle:{backgroundColor:"#9cc964"}})}const KI=e=>k.createElement("svg",{width:"1em",height:"1em",viewBox:"0 0 21 22",fill:"none",xmlns:"http://www.w3.org/2000/svg",...e},k.createElement("path",{d:"M1.28529 16.4595V12.7703C2.93103 14.1239 5.99338 15.0405 9.5 15.0405V13.7351C4.48456 13.7351 1.28529 11.8196 1.28529 10.5V6.81081C2.93103 8.16446 5.99338 9.08108 9.5 9.08108C13.0066 9.08108 16.069 8.17297 17.7147 6.81081V12.075H19V4.54054C19 2.03189 14.7474 2.49419e-08 9.5 0C4.25265 -2.49419e-08 0 2.03189 0 4.54054V16.4595C0 18.9681 4.25265 21 9.5 21V19.6946C4.48456 19.6946 1.28529 17.7791 1.28529 16.4595ZM9.5 1.30541C14.5294 1.30541 17.7147 3.22095 17.7147 4.54054C17.7147 5.86014 14.5294 7.77568 9.5 7.77568C4.47059 7.77568 1.28529 5.86014 1.28529 4.54054C1.28529 3.22095 4.48456 1.30541 9.5 1.30541Z",fill:"#538EF4"}),k.createElement("path",{d:"M16 16H21V20H16V16Z",fill:"#538EF4"}),k.createElement("path",{d:"M11 17.5L16 22V13L11 17.5Z",fill:"#538EF4"})),Lp=e=>k.createElement(Ga,{component:KI,...e}),YI="_node_zq7pa_1",JI="_creator_zq7pa_7",Np={node:YI,creator:JI};function QI(e){const{initialData:t,...n}=e,r=k.useMemo(()=>({...t,type:Ot.DATA_IMPORT,ui:{}}),[t]);return a.jsx(Op,{initialData:r,icon:a.jsx(Lp,{}),className:Wt(Np.creator,e.className),...n,children:r.name})}function XI(e){return a.jsx(Il,{...e,className:Np.node,icon:a.jsx(Lp,{}),connectHandleFillStyle:{backgroundColor:"#bdd9fe"}})}const ZI="_search_32pdy_1",eS="_collapse_32pdy_5",tS="_creatorList_32pdy_20",us={search:ZI,collapse:eS,creatorList:tS};function Fc(e){return{id:e.job_id,initialData:{name:e.job_name,params:xr(e.params,{})}}}function aS(e){const{triggerClassName:t}=e,{t:n}=Z(),{data:r}=Oe("facplf_get_workflow_task_list",async()=>ee.requestFunc("facplf_get_workflow_task_list")),o=k.useMemo(()=>r==null?void 0:r.items.reduce((d,m)=>{switch(m.job_type){case Ot.FACTOR:d.factors.push(Fc(m));break;case Ot.DATA_IMPORT:d.dataImports.push(Fc(m));break}return d},{factors:[],dataImports:[]}),[r]),[s,i]=k.useState(""),u=k.useCallback(d=>{i(d.target.value)},[i]),c=k.useMemo(()=>{const d={id:"empty-factor",initialData:{name:n("pages.workflow.edit.components.tasks.empty-factor"),params:{}}},m=(o==null?void 0:o.factors.filter(y=>y.initialData.name.includes(s)))??[],h={id:"empty-data-import",initialData:{name:n("pages.workflow.edit.components.tasks.empty-data-import"),params:{}}},b=(o==null?void 0:o.dataImports.filter(y=>y.initialData.name.includes(s)))??[];return{factors:[...m,d],dataImports:[...b,h]}},[s,o,n]),l=ca(),p=k.useMemo(()=>{const d=[];return l.hasDepartmentAuth(ot.FACTOR)&&d.push({label:n(`constants.job-type.${Ot.FACTOR}`),key:Ot.FACTOR,children:a.jsx(it,{direction:"vertical",className:us.creatorList,children:c.factors.map(m=>a.jsx(UI,{id:m.id,nodeType:"factor",initialData:m.initialData},m.id))})}),l.hasDepartmentAuth(ot.DATA_IMPORT)&&d.push({label:n(`constants.job-type.${Ot.DATA_IMPORT}`),key:Ot.DATA_IMPORT,children:a.jsx(it,{direction:"vertical",className:us.creatorList,children:c.dataImports.map(m=>a.jsx(QI,{id:m.id,nodeType:"data-import",initialData:m.initialData},m.id))})}),d},[l,c,n]);return a.jsx(Qa,{trigger:"click",placement:"bottomLeft",arrow:!1,content:a.jsxs(a.Fragment,{children:[a.jsx(Ne,{className:us.search,prefix:a.jsx(ef,{}),value:s,onChange:u}),a.jsx(Pa,{ghost:!0,expandIconPosition:"end",defaultActiveKey:[Ot.DATA_IMPORT,Ot.FACTOR,Ot.STRATEGY],className:us.collapse,items:p})]}),children:a.jsx(Ae,{className:t,type:"primary",icon:a.jsx(Zc,{}),shape:"circle"})})}const Dp=[25,25];function rS(e,t=Dp){const[n,r]=t;return{x:Math.round(e.x/n)*n,y:Math.round(e.y/r)*r}}const nS="_content_cbjl1_1",sS="_canvas_cbjl1_7",oS="_tasks_cbjl1_13",Vo={content:nS,canvas:sS,tasks:oS},iS={"data-import":XI,factor:HI,strategy:Il},lS=e=>{switch(e.type){case"factor":return"#6EDE87";default:return"#EDEDED"}},cS={markerEnd:{type:Df.ArrowClosed}};function uS(){const{workflow:e}=k.useContext(po),[t,n,r]=Wf((e==null?void 0:e.graph_data.nodes)??[]),[o,s,i]=Bf((e==null?void 0:e.graph_data.edges)??[]),[u,c]=k.useState(null),l=zi(),p=k.useRef(null),d=_I({nodes:t,edges:o,setNodes:n,onNodesChange:r,setEdges:s,onEdgesChange:i}),m=k.useCallback((x,I)=>{if(x.preventDefault(),!p.current)return;const w=p.current.getBoundingClientRect();c({x:x.clientX-w.left,y:x.clientY-w.top,node:I})},[]),h=k.useCallback(()=>{c(null)},[]),b=k.useCallback(x=>{if(x.preventDefault(),!p.current)return;const I=x.dataTransfer.getData("application/reactflow");if(!I)return;const w=JSON.parse(I),A=p.current.getBoundingClientRect();l.addNodes({id:Pr(),type:w.nodeType,data:w.initialData,position:rS(l.project({x:x.clientX-A.left,y:x.clientY-A.top}))})},[l]),y=k.useCallback(x=>{x.preventDefault(),x.dataTransfer.dropEffect="move"},[]);return a.jsx(uo.Provider,{value:d,children:a.jsxs("div",{className:Vo.content,children:[a.jsxs("div",{className:Vo.canvas,ref:p,children:[a.jsxs($f,{snapGrid:Dp,snapToGrid:!0,...d.flowProps,onNodeContextMenu:m,onDrop:b,onDragOver:y,defaultEdgeOptions:cS,nodeTypes:iS,proOptions:{hideAttribution:!0},fitView:!0,fitViewOptions:{minZoom:1,padding:10},children:[a.jsx(SI,{}),a.jsx(Vf,{gap:25,variant:qf.Dots}),a.jsx(zf,{nodeColor:lS}),a.jsx(Gf,{}),a.jsx(kI,{info:u,onClose:h})]}),a.jsx(aS,{triggerClassName:Vo.tasks})]}),a.jsx(FI,{})]})})}const dS=()=>{const{workflow:e,mutate:t}=k.useContext(po),{t:n}=Z(),r=he(async()=>{e&&(await ke.show(vI,{workflow:e}),t())});return a.jsx(nt,{fullWidth:!0,headerBottomBorder:!0,headerAction:a.jsx("a",{onClick:r,children:n("pages.workflow.edit.action.edit-meta")}),autoBreadcrumb:{addonItems:[{title:e==null?void 0:e.workflow_name}]},children:a.jsx(uS,{})})};function pS(){const{id:e}=$t();return a.jsx(xI,{id:e,children:a.jsx(jI,{children:a.jsx(Mf,{children:a.jsx(dS,{})})})})}const mS={info:{workflow_name:"",update_time:"",comment:"",creator:""},items:[],total:0};function fS(){const{t:e}=Z(),t=$t(),{data:n=mS,isLoading:r}=Oe(["facplf_get_workflow_run_list",t],async()=>ee.requestFunc("facplf_get_workflow_run_list",{workflow_id:t.workflow_id})),o=k.useMemo(()=>[{title:e("pages.workflow.workflow-run-record.record-table.name"),dataIndex:"run_name"},{title:e("pages.workflow.workflow-run-record.record-table.run-time"),dataIndex:"create_time",render:i=>Qe(i)},{title:e("pages.workflow.workflow-run-record.record-table.status"),dataIndex:"status",render:i=>a.jsx(Bt,{status:i||0})},{title:e("common.table.operation.title"),render:(i,u)=>a.jsx(Ue,{to:Se.workflowRunRecordDetail(u.run_id),children:e("common.table.operation.view-detail")})}],[e]),s=k.useMemo(()=>[{label:e("pages.workflow.workflow-run-record.info.name"),children:n.info.workflow_name??"-"},{label:e("pages.workflow.workflow-run-record.info.update-time"),children:Qe(n.info.update_time)},{label:e("pages.workflow.workflow-run-record.info.creator"),children:n.info.creator??"-"},{label:e("pages.workflow.workflow-run-record.info.comment"),children:n.info.comment??"-"}],[n,e]);return a.jsx(nt,{autoBreadcrumb:{addonItems:[{title:e("pages.workflow.workflow-run-record.title")}]},loading:r,children:a.jsxs(a.Fragment,{children:[a.jsx(ta,{title:e("pages.workflow.workflow-run-record.info.title"),children:a.jsx(Cr,{layout:"vertical",colon:!1,column:4,items:s})}),a.jsx(ba,{}),a.jsx(ta,{title:e("pages.workflow.workflow-run-record.record-table.title"),children:a.jsx(vt,{columns:o,dataSource:n.items,pagination:{pageSize:10,hideOnSinglePage:!0}})})]})})}const hS="_form_ikdnz_1",gS="_btnWrapper_ikdnz_6",yS={form:hS,btnWrapper:gS},bS=()=>{const{t:e}=Z(),{message:t}=at.useApp(),[n]=B.useForm(),r=Ft(),o=va({zh:{labelCol:{span:4}},en:{labelCol:{span:8}}}),s=he(async()=>{try{const{templates:i,factors:u,is_to_db:c,to_db:l,...p}=n.getFieldsValue();await ee.requestFunc("facplf_create_workflow_task",{...p,params:{templates:i,factors:u,is_to_db:c,to_db:l}}),t.success(e("common.create-success")),r.push(Se.workflow())}catch(i){t.error(Be(i))}});return a.jsx(nt,{autoBreadcrumb:{addonItems:[{title:e("pages.workflow.task-create.title")}]},children:a.jsxs(B,{form:n,className:yS.form,...o,onFinish:s,children:[a.jsx(jl,{}),a.jsx(Mn,{children:a.jsxs(it,{children:[a.jsx(Ue,{to:Se.workflow(),children:a.jsx(Ae,{children:e("common.cancel")})}),a.jsx(Ae,{type:"primary",htmlType:"submit",children:e("common.create")})]})})]})})},vS="_form_ikdnz_1",_S="_btnWrapper_ikdnz_6",xS={form:vS,btnWrapper:_S},wS=()=>{const{id:e}=$t(),{t}=Z(),{message:n}=at.useApp(),{fixTemplatesParamsAsync:r,loading:o}=Pp(),[s]=B.useForm(),i=Ft(),u=va({zh:{labelCol:{span:4}},en:{labelCol:{span:8}}}),{isValidating:c}=Oe(["facplf_get_workflow_task_detail",e],async()=>ee.requestFunc("facplf_get_workflow_task_detail",{job_id:e}),{onSuccess:async p=>{const{params:d,...m}=p,{templates:h,...b}=JSON.parse(d);s.setFieldsValue({templates:await r(h,m.job_type),...b,...m})}}),l=he(async()=>{try{const{templates:p,factors:d,to_db:m,is_to_db:h,...b}=s.getFieldsValue();await ee.requestFunc("facplf_edit_workflow_task",{...b,params:{templates:p,factors:d,to_db:m,is_to_db:h},job_id:e}),n.success(t("common.edit-success")),i.push(Se.workflow())}catch(p){n.error(Be(p))}});return a.jsx(nt,{autoBreadcrumb:{addonItems:[{title:t("pages.workflow.task-edit.title")}]},loading:c||o,children:a.jsxs(B,{form:s,className:xS.form,...u,onFinish:l,children:[a.jsx(jl,{}),a.jsx(Mn,{children:a.jsxs(it,{children:[a.jsx(Ue,{to:Se.workflow(),children:a.jsx(Ae,{children:t("common.cancel")})}),a.jsx(Ae,{type:"primary",htmlType:"submit",children:t("common.ok")})]})})]})})},jS="_result_zrrnd_1",IS={result:jS},Ke=({path:e,component:t,auths:n,...r})=>{const o=Ra(),s=Ui().isLoading,i=Zr(),u=ca(),{t:c}=Z(),l=m=>s?a.jsx(Si,{}):a.jsx(t,{...m}),p=m=>n&&!u.isMatchAny(n)?a.jsx(Di,{className:IS.result,status:"403",title:c("common.auth.disallow-page")}):l(m),d=m=>{switch(o.status){case"unknown":return a.jsx(Si,{});case"logged-out":return a.jsx(lr,{to:Se.login(i.pathname+i.search+i.hash)});case"logged-in":return p(m)}};return a.jsx(ys,{path:e,render:d,...r})},SS=()=>{const e=ca(),t=k.useMemo(()=>{switch(!0){case e.hasDepartmentAuth(ot.FACTOR):return Se.factorDraftList();case e.hasDepartmentAuth(ot.DATA_IMPORT):case e.hasSystemAuth(At.DATA_IMPORT):return Se.dataImportLibList();case e.isDepartmentAdmin():case e.isSystemAdmin():return Se.userList();default:return Se.dbOverview()}},[e]);return a.jsxs(Bc,{children:[a.jsx(lr,{from:"/factor",exact:!0,to:"/factor/draft"}),a.jsx(Ke,{path:"/factor/draft",auths:[{departmentAuth:[ot.FACTOR]}],exact:!0,component:Wx}),a.jsx(Ke,{path:"/factor/draft/edit",auths:[{departmentAuth:[ot.FACTOR]}],component:_x}),a.jsx(Ke,{path:"/factor/test/list",component:Hx}),a.jsx(Ke,{path:"/factor/test/detail",component:Ux}),a.jsx(Ke,{path:"/factor/public/batch-test/detail",component:Jx}),a.jsx(Ke,{path:"/factor/public/batch-test/create",auths:[{departmentAuth:[ot.FACTOR]}],component:ew}),a.jsx(Ke,{path:"/factor/public",component:mw}),a.jsx(Ke,{path:"/monitor",component:Y2}),a.jsx(lr,{from:"/data-import",exact:!0,to:"/data-import/lib"}),a.jsx(Ke,{path:"/data-import/lib",exact:!0,auths:[{departmentAuth:[ot.DATA_IMPORT]},{systemAuth:[At.DATA_IMPORT]}],component:tx}),a.jsx(Ke,{path:"/data-import/lib/edit",component:J1,exact:!0}),a.jsx(Ke,{component:U1,path:"/data-import/template",auths:[{departmentAuth:[ot.DATA_IMPORT]},{systemAuth:[At.DATA_IMPORT]}],exact:!0}),a.jsx(Ke,{exact:!0,path:"/data-import/template/edit",component:V1,auths:[{departmentAuth:[ot.DATA_IMPORT]},{systemAuth:[At.DATA_IMPORT]}]}),a.jsx(lr,{exact:!0,from:"/data-import/record",to:"/data-import/record/list"}),a.jsx(Ke,{exact:!0,path:"/data-import/record/list",auths:[{departmentAuth:[ot.DATA_IMPORT]},{systemAuth:[At.DATA_IMPORT]}],component:D1}),a.jsx(Ke,{exact:!0,path:"/data-import/record/detail",auths:[{departmentAuth:[ot.DATA_IMPORT]},{systemAuth:[At.DATA_IMPORT]}],component:R1}),a.jsx(lr,{from:"/analysis",exact:!0,to:"/analysis/lib"}),a.jsx(Ke,{exact:!0,auths:[{departmentAuth:[ot.FACTOR]},{systemAuth:[At.REVIEW]},{systemAdmin:!0}],path:"/analysis/lib",component:sb}),a.jsx(Ke,{exact:!0,auths:[{departmentAuth:[ot.FACTOR]},{systemAuth:[At.REVIEW]},{systemAdmin:!0}],path:"/analysis/lib/edit",component:Jy}),a.jsx(Ke,{exact:!0,auths:[{departmentAuth:[ot.FACTOR]},{systemAuth:[At.REVIEW]},{systemAdmin:!0}],path:"/analysis/template",component:o_}),a.jsx(Ke,{exact:!0,auths:[{departmentAuth:[ot.FACTOR]},{systemAuth:[At.REVIEW]},{systemAdmin:!0}],path:"/analysis/template/code-edit",component:a_}),a.jsx(Ke,{exact:!0,auths:[{departmentAuth:[ot.FACTOR]},{systemAuth:[At.REVIEW]},{systemAdmin:!0}],path:"/analysis/template/visual-edit",component:I1}),a.jsx(lr,{exact:!0,from:"/analysis/record",to:"/analysis/record/list"}),a.jsx(Ke,{auths:[{departmentAuth:[ot.FACTOR]},{systemAuth:[At.REVIEW]},{systemAdmin:!0}],path:"/analysis/record/list",component:Ov}),a.jsx(Ke,{auths:[{departmentAuth:[ot.FACTOR]},{systemAuth:[At.REVIEW]},{systemAdmin:!0}],path:"/analysis/record/detail/data",component:Fb}),a.jsx(Ke,{auths:[{departmentAuth:[ot.FACTOR]},{systemAuth:[At.REVIEW]},{systemAdmin:!0}],path:"/analysis/record/detail/report",component:hv}),a.jsx(Ke,{path:"/db-overview",component:lj}),a.jsx(Ke,{path:"/system/user",exact:!0,auths:[{systemAdmin:!0},{departmentAdmin:!0}],component:t2}),a.jsx(Ke,{path:"/system/user/create",auths:[{systemAdmin:!0},{departmentAdmin:!0}],component:Ic}),a.jsx(Ke,{path:"/system/user/edit",auths:[{systemAdmin:!0},{departmentAdmin:!0}],component:Sc}),a.jsx(Ke,{path:"/system/department",exact:!0,auths:[{systemAdmin:!0}],component:Gj}),a.jsx(Ke,{path:"/system/department/create",auths:[{systemAdmin:!0}],component:Fj}),a.jsx(Ke,{path:"/system/department/edit",auths:[{systemAdmin:!0}],component:Lj}),a.jsx(Ke,{path:"/system/user/create",auths:[{systemAdmin:!0}],component:Ic}),a.jsx(Ke,{path:"/user-manage/edit",auths:[{systemAdmin:!0},{departmentAdmin:!0}],component:Sc}),a.jsx(Ke,{path:"/factor/template/edit",component:gw}),a.jsx(Ke,{path:"/factor/template",component:Uw}),a.jsx(Ke,{path:"/review/my-submit/factor-detail",component:yc}),a.jsx(Ke,{path:"/review/my-submit/template-detail",component:bc}),a.jsx(Ke,{path:"/review/my-submit",component:Ij}),a.jsx(Ke,{path:"/review/my-review/factor-detail",component:yc}),a.jsx(Ke,{path:"/review/my-review/template-detail",component:bc}),a.jsx(Ke,{path:"/review/my-review",component:vj}),a.jsx(Ke,{path:"/workflow/task/create",component:bS}),a.jsx(Ke,{path:"/workflow/task/edit",component:wS}),a.jsx(Ke,{path:"/workflow/exist-workflow/run-record",component:fS,exact:!0}),a.jsx(Ke,{path:"/workflow/exist-workflow/run-record/detail",component:bI}),a.jsx(Ke,{path:"/workflow/edit",component:pS}),a.jsx(Ke,{path:"/workflow",component:gI}),a.jsx(ys,{path:"/login",component:Yw}),a.jsx(lr,{from:"/",exact:!0,to:t}),a.jsx(ys,{path:"*",component:Xw})]})},kS=ki(e=>({sidebar:{collapsed:!1},toggleSidebar:t=>{e(n=>({sidebar:{collapsed:t??!n.sidebar.collapsed}}))}})),CS=_a({useModalProps:({t:e})=>({title:e("layout.user-info.change-password.title")}),useFormProps:()=>va({zh:{labelCol:{span:6}},en:{labelCol:{span:8}}}),useFormRender:({form:e,t,formProps:n})=>{const r=k.useMemo(()=>[{required:!0},{validator:async(o,s)=>{const i=e.getFieldValue("newPassword"),u=e.getFieldValue("confirmPassword");if(i&&u&&i!==u)throw new Error(t("layout.user-info.change-password.password-not-match"))}}],[e,t]);return a.jsxs(B,{...n,children:[a.jsx(B.Item,{name:"oldPassword",required:!0,label:t("layout.user-info.change-password.old-password"),rules:[{required:!0}],children:a.jsx(Ne.Password,{})}),a.jsx(B.Item,{name:"newPassword",required:!0,label:t("layout.user-info.change-password.new-password"),validateFirst:!0,validateTrigger:"onBlur",rules:r,children:a.jsx(Ne.Password,{})}),a.jsx(B.Item,{name:"confirmPassword",required:!0,label:t("layout.user-info.change-password.confirm-password"),validateFirst:!0,validateTrigger:"onBlur",rules:r,children:a.jsx(Ne.Password,{})})]})},onSubmit:async(e,{t,antApp:{message:n}})=>{await ee.requestFunc("facplf_changePwd",{old_password:e.oldPassword,new_password:e.newPassword}),n.success(t("layout.user-info.change-password.success"))}});var Zt=(e=>(e[e.REVIEW_RECEIVE=1]="REVIEW_RECEIVE",e[e.REVIEW_PASSED=2]="REVIEW_PASSED",e[e.REVIEW_REJECT=3]="REVIEW_REJECT",e[e.REVIEW_REVERT=4]="REVIEW_REVERT",e[e.PARTIAL_PASSED=5]="PARTIAL_PASSED",e))(Zt||{}),Ur=(e=>(e.FACTOR="factor",e.TEMPLATE="template",e))(Ur||{});const ES="_triggerIcon_1hquh_1",AS="_header_1hquh_7",PS="_title_1hquh_15",TS="_clear_1hquh_20",OS="_list_1hquh_24",RS="_listItem_1hquh_29",FS="_noRead_1hquh_38",LS="_tag_1hquh_45",NS="_relativeTime_1hquh_49",DS="_content_1hquh_55",MS="_markRead_1hquh_59",$a={triggerIcon:ES,header:AS,title:PS,clear:TS,list:OS,listItem:RS,noRead:FS,tag:LS,relativeTime:NS,content:DS,markRead:MS},WS=e=>{switch(e){case Zt.REVIEW_RECEIVE:return"layout.message-notification.review-receive-format";case Zt.REVIEW_REVERT:return"layout.message-notification.review-revert-format";case Zt.REVIEW_PASSED:return"layout.message-notification.review-passed-format";case Zt.REVIEW_REJECT:return"layout.message-notification.review-reject-format"}},BS=e=>{switch(e){case Ur.FACTOR:return"layout.message-notification.type-factor";case Ur.TEMPLATE:return"layout.message-notification.type-template"}},$S=e=>{switch(e){case Zt.REVIEW_RECEIVE:return"layout.message-notification.receive";case Zt.REVIEW_REVERT:return"layout.message-notification.revert";case Zt.REVIEW_PASSED:return"layout.message-notification.passed";case Zt.REVIEW_REJECT:return"layout.message-notification.reject";case Zt.PARTIAL_PASSED:return"layout.message-notification.partial-passed"}},VS=e=>{switch(e){case Zt.REVIEW_RECEIVE:case Zt.PARTIAL_PASSED:return"blue";case Zt.REVIEW_REVERT:return"orange";case Zt.REVIEW_PASSED:return"green";case Zt.REVIEW_REJECT:return"red"}},qS=e=>{const{message_type:t,data:{type:n,review_id:r}}=e;switch(t){case Zt.REVIEW_RECEIVE:return n===Ur.FACTOR?Se.myReviewFactorDetail(r):Se.myReviewTemplateDetail(r);case Zt.REVIEW_REVERT:return null;case Zt.REVIEW_PASSED:return n===Ur.FACTOR?Se.mySubmitFactorDetail(r):Se.mySubmitTemplateDetail(r);case Zt.REVIEW_REJECT:return n===Ur.FACTOR?Se.mySubmitFactorDetail(r):Se.mySubmitTemplateDetail(r)}};function Mp(){return Oe("facplf_get_message_list",async()=>ee.requestFunc("facplf_get_message_list"))}function zS(e){const{t}=Z(),{message:n}=at.useApp(),{data:r=[],isLoading:o,mutate:s}=Mp(),i=k.useCallback(async()=>{try{await ee.requestFunc("facplf_read_all_messages"),s()}catch(c){n.error(Be(c))}},[n,s]),u=k.useCallback(async(c,{message_id:l})=>{c.stopPropagation();try{await ee.requestFunc("facplf_read_message",{message_id:l}),s(r.map(p=>p.message_id===l?{...p,has_read:!0}:p),{revalidate:!1})}catch(p){n.error(Be(p))}},[r,n,s]);return a.jsxs(a.Fragment,{children:[a.jsxs("div",{className:$a.header,children:[a.jsx("h3",{className:$a.title,children:t("layout.message-notification.title")}),r.length>0&&a.jsx("a",{className:$a.clear,onClick:i,children:t("layout.message-notification.clear-message")})]}),a.jsx(El,{loading:o,className:$a.list,dataSource:r,rowKey:"message_id",renderItem:c=>{const l=qS(c),p=!c.has_read,d=a.jsxs(El.Item,{onClick:p?m=>u(m,c):void 0,className:Wt($a.listItem,{[$a.noRead]:p}),children:[a.jsx(Ri,{dot:p,color:"gold",children:a.jsx(yt,{className:$a.tag,color:VS(c.message_type),children:t($S(c.message_type))})}),a.jsxs("div",{className:$a.content,children:[a.jsx(Vc,{t,i18nKey:WS(c.message_type),values:{man:c.sender,item:c.data.name,type:t(BS(c.data.type))}}),a.jsx("div",{className:$a.relativeTime,children:Ya(c.create_time).fromNow()})]}),p&&a.jsx($i,{className:$a.markRead,onClick:m=>u(m,c)})]});return l?a.jsx(Ue,{to:l,children:d}):d}})]})}function GS(){const[e,t]=Ir(!1),{data:n}=Mp();return a.jsx(Qa,{open:e,onOpenChange:t.set,trigger:["click"],placement:"bottomRight",content:a.jsx(zS,{onClose:t.setFalse}),overlayInnerStyle:{minWidth:360,padding:0,overflow:"hidden"},destroyTooltipOnHide:!0,children:a.jsx(Ae,{size:"large",type:"text",className:$a.triggerIcon,icon:a.jsx(Ri,{dot:!!(n!=null&&n.length),overflowCount:10,children:a.jsx(tf,{})})})})}const US="_numberMantissa_1hzs7_1",HS="_formAction_1hzs7_5",KS="_setting_1hzs7_11",YS="_form_1hzs7_5",gs={numberMantissa:US,formAction:HS,setting:KS,form:YS};function JS(e){const{onSave:t}=e,n=An(),{t:r}=Z(),[o]=B.useForm(),s=k.useCallback(i=>{An.setState({format:i}),t(i)},[t]);return a.jsxs(B,{layout:"horizontal",onFinish:s,form:o,labelCol:{span:9},className:gs.form,initialValues:n.format,children:[a.jsx(B.Item,{colon:!0,name:"numberMantissa",label:r("layout.user-info.setting-form.number-mantissa.label"),required:!0,tooltip:r("layout.user-info.setting-form.number-mantissa.tooltip"),rules:[{required:!0,message:r("layout.user-info.setting-form.number-mantissa.rule-message.required")},{type:"integer",min:0,max:20,message:r("layout.user-info.setting-form.number-mantissa.rule-message.range")}],children:a.jsx(qa,{className:gs.numberMantissa,placeholder:r("layout.user-info.setting-form.number-mantissa.input-placeholder")})}),a.jsx(B.Item,{name:"exponential",label:r("layout.user-info.setting-form.exponential.label"),tooltip:r("layout.user-info.setting-form.exponential.tooltip"),valuePropName:"checked",children:a.jsx(Ni,{})}),a.jsx(B.Item,{className:gs.formAction,children:a.jsx(Ae,{type:"primary",htmlType:"submit",children:r("common.save")})})]})}function QS(){const[e,t]=Ir(!1);return a.jsx(Qa,{trigger:["click"],open:e,onOpenChange:t.set,placement:"bottomRight",overlayInnerStyle:{padding:16,minWidth:300},content:a.jsx(JS,{onSave:t.setFalse}),destroyTooltipOnHide:!0,children:a.jsx(Ae,{size:"large",type:"text",className:gs.setting,icon:a.jsx(Fs,{})})})}const XS="_container_zqd1v_1",ZS="_user_zqd1v_8",e5="_dropdownMenu_zqd1v_18",t5="_userIcon_zqd1v_22",ds={container:XS,user:ZS,dropdownMenu:e5,userIcon:t5};function a5(){var r;const e=Ra(),{t}=Z(),n=[{key:"change-password",icon:a.jsx(ru,{}),label:t("layout.user-info.change-password.title"),onClick:async()=>{await ke.show(CS),await e.logout({withRequest:!1})}},{key:"exit",icon:a.jsx(af,{}),label:t("layout.user-info.logout"),onClick:async()=>{await e.logout({withRequest:!0})}}];return e.status!=="logged-in"?null:a.jsxs("div",{className:ds.container,children:[!1,a.jsx(QS,{}),a.jsx(GS,{}),a.jsx(su,{className:ds.user,trigger:["hover"],arrow:!0,menu:{className:ds.dropdownMenu,items:n},placement:"bottom",children:a.jsxs("div",{children:[a.jsx(rf,{className:ds.userIcon,shape:"circle",icon:a.jsx(au,{})}),(r=e.user)==null?void 0:r.username]})})]})}const r5="_layout_h8zbp_1",n5="_header_h8zbp_6",s5="_logoWrapper_h8zbp_21",o5="_logo_h8zbp_21",i5="_logoTitle_h8zbp_31",l5="_main_h8zbp_36",c5="_mainSidebarCollapsed_h8zbp_42",u5="_sidebar_h8zbp_52",d5="_sidebarCollapseTrigger_h8zbp_62",p5="_sidebarMenu_h8zbp_86",m5="_sidebarMenuLink_h8zbp_92",f5="_appInfo_h8zbp_96",h5="_appInfoInner_h8zbp_99",g5="_appVersion_h8zbp_109",y5="_appInfoHidden_h8zbp_112",oa={layout:r5,header:n5,logoWrapper:s5,logo:o5,logoTitle:i5,main:l5,mainSidebarCollapsed:c5,sidebar:u5,sidebarCollapseTrigger:d5,sidebarMenu:p5,sidebarMenuLink:m5,appInfo:f5,appInfoInner:h5,appVersion:g5,appInfoHidden:y5};var b5={commit:"c9d734f5e10a877ea04f81bf9d62fcfed3951fd3",branch:"release/alpha2.3",time:"Fri Mar 22 2024 16:42:16 GMT+0800 (中国标准时间)"};const{Header:v5,Content:_5,Sider:x5}=zo,w5=()=>{const e=Zr(),t=ca(),{t:n}=Z(),r=kS(),o=va({zh:{sidebarWidth:200},en:{sidebarWidth:240}}),s=Ra(),{data:i}=Oe("factorPlatform::facplf::facplf_get_version",()=>ee.requestFunc("factorPlatform::facplf::facplf_get_version"));gm(async()=>{e.pathname!=="/login"&&await s.restore()});const u=k.useCallback(h=>h.filter(b=>!b.auths||t.isMatchAny(b.auths)).map(b=>{const y=u(b.children??[]);return{...b,children:y!=null&&y.length?y:void 0}}),[t]),c=k.useContext(ke.NiceModalContext);k.useEffect(()=>{Object.keys(c).forEach(h=>{ke.hide(h)})},[e.pathname,e.search]),k.useEffect(()=>{r.sidebar.collapsed?document.body.classList.add(Vl):document.body.classList.remove(Vl)},[r.sidebar.collapsed]);const l=k.useMemo(()=>[{key:"/factor",icon:a.jsx(uy,{}),label:n("layout.sidebar.factor.root"),notBreadcrumbLink:!0,auths:[{departmentAuth:[ot.FACTOR]}],children:[{key:"/factor/draft",label:n("layout.sidebar.factor.my-draft")},{key:"/factor/public",label:n("layout.sidebar.factor.public")},{key:"/factor/template",label:n("layout.sidebar.factor.template")}]},{key:"/analysis",icon:a.jsx(nf,{}),label:n("layout.sidebar.analysis.root"),notBreadcrumbLink:!0,auths:[{departmentAuth:[ot.FACTOR]},{systemAuth:[At.REVIEW]},{systemAdmin:!0}],children:[{key:"/analysis/lib",label:n("layout.sidebar.analysis.lib")},{key:"/analysis/template",label:n("layout.sidebar.analysis.template")},{key:"/analysis/record",label:n("layout.sidebar.analysis.records")}]},{key:"/review",icon:a.jsx(sf,{}),label:n("layout.sidebar.review.root"),notBreadcrumbLink:!0,children:[{key:"/review/my-submit",label:n("layout.sidebar.review.my-submit")},{key:"/review/my-review",label:n("layout.sidebar.review.my-review"),auths:[{systemAuth:[At.REVIEW]},{departmentAuth:[ot.REVIEW]}]}]},{key:"/monitor",icon:a.jsx(of,{}),label:n("layout.sidebar.monitor.root"),notBreadcrumbLink:!0},{key:"/workflow",icon:a.jsx(py,{}),label:n("layout.sidebar.workflow.root")},{key:"/data-import",icon:a.jsx(lf,{}),label:n("layout.sidebar.data-import.root"),notBreadcrumbLink:!0,auths:[{systemAuth:[At.DATA_IMPORT]},{departmentAuth:[ot.DATA_IMPORT]}],children:[{key:"/data-import/lib",label:n("layout.sidebar.data-import.lib")},{key:"/data-import/template",label:n("layout.sidebar.data-import.template")}]},{key:"/db-overview",icon:a.jsx(Mi,{}),label:n("layout.sidebar.db-overview")},{key:"/system",notBreadcrumbLink:!0,auths:[{systemAdmin:!0},{departmentAdmin:!0}],icon:a.jsx(Fs,{}),label:n("layout.sidebar.system-manage"),children:[{key:"/system/user",label:n("layout.sidebar.user-manage")},{key:"/system/department",label:n("layout.sidebar.group-manage"),auths:[{systemAdmin:!0}]}]}],[n]),p=jt.useMemo(()=>{const h=[],b=[...l];for(;b.length;){const y=b.shift();ym(e.pathname,{path:y.key})&&(h.push(y.key),y.children&&b.push(...y.children))}return h},[l,e.pathname]),d=jt.useCallback((h,b)=>a.jsx(Ue,{to:b.eventKey,className:oa.sidebarMenuLink,children:h}),[]),m=k.useMemo(()=>u(l),[l,u]);return a.jsx(Lu.Provider,{value:{menuRoutes:m},children:a.jsxs(zo,{className:oa.layout,style:{"--app-sidebar-width":`${o.sidebarWidth}px`},children:[a.jsxs(v5,{className:oa.header,children:[a.jsxs("div",{className:oa.logoWrapper,children:[a.jsx("img",{src:my,className:oa.logo}),a.jsx("div",{className:oa.logoTitle,children:n("common.title")})]}),a.jsx(a5,{})]}),a.jsxs(zo,{children:[a.jsxs(x5,{className:oa.sidebar,theme:"light",collapsible:!0,collapsed:r.sidebar.collapsed,width:o.sidebarWidth,collapsedWidth:64,trigger:null,children:[r.sidebar.collapsed?a.jsx("div",{className:oa.sidebarCollapseTrigger,children:a.jsx(cf,{onClick:()=>r.toggleSidebar(!1)})}):a.jsx("div",{className:oa.sidebarCollapseTrigger,children:a.jsx(eu,{onClick:()=>r.toggleSidebar(!0)})}),a.jsx(uf,{className:oa.sidebarMenu,mode:"inline",items:m.map(h=>iu(h,["notBreadcrumbLink"])),defaultOpenKeys:p,selectedKeys:p,_internalRenderMenuItem:d}),a.jsx("div",{className:Wt(oa.appInfo,r.sidebar.collapsed&&oa.appInfoHidden),children:a.jsxs("div",{className:Wt(oa.appInfoInner),children:[a.jsxs("div",{className:oa.appVersion,children:[n("layout.app-info.app-version")," : ",i]}),a.jsxs("div",{className:oa.buildHash,children:[n("layout.app-info.build-hash")," :"," ",`${b5.commit.slice(0,8)}`]})]})})]}),a.jsx(_5,{className:Wt(oa.main,{[oa.mainSidebarCollapsed]:r.sidebar.collapsed}),children:a.jsx(SS,{})})]})]})})},j5=()=>{const e=An(),t=va({zh:_h,en:oh}),[n,r]=df.useMessage(),o=k.useMemo(()=>bm(s=>{n.error(Be(s))}),[n]);return a.jsxs(Cl,{providers:[vm,a.jsx(_m,{value:{revalidateOnFocus:!1,revalidateOnReconnect:!1,errorRetryCount:0,use:[o]}},"swr"),ly,xm,a.jsx(an,{locale:t,theme:{algorithm:e.theme==="dark"?Al.darkAlgorithm:Al.defaultAlgorithm,components:{Descriptions:{itemPaddingBottom:8}}}},"antd-config")],children:[r,a.jsxs(Cl,{providers:[at,a.jsx(wm,{i18n:ma},"i18n"),a.jsx(jm,{Storage:ur,getErrorMessage:Be,DolphinDBDiffEditor:ry,DolphinDBEditor:Hs},"dcs")],children:[a.jsx(Im,{}),a.jsxs(ke.Provider,{children:[a.jsx(w5,{}),!1]})]})]})};B.defaultProps={labelAlign:"left",labelWrap:!0};var I5={commit:"c9d734f5e10a877ea04f81bf9d62fcfed3951fd3",branch:"release/alpha2.3",time:"Fri Mar 22 2024 16:42:16 GMT+0800 (中国标准时间)"};Ya.extend(Sm);Ya.extend(pf);window.BUILD_INFO=I5;km.createRoot(document.getElementById("root")).render(a.jsx(j5,{}));
